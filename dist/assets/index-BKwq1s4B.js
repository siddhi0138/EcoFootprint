var jT=t=>{throw TypeError(t)};var u1=(t,e,r)=>e.has(t)||jT("Cannot "+r);var le=(t,e,r)=>(u1(t,e,"read from private field"),r?r.call(t):e.get(t)),wt=(t,e,r)=>e.has(t)?jT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),et=(t,e,r,n)=>(u1(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),en=(t,e,r)=>(u1(t,e,"access private method"),r);var Qg=(t,e,r,n)=>({set _(i){et(t,e,i,r)},get _(){return le(t,e,n)}});function QH(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mD={exports:{}},Ux={},pD={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp=Symbol.for("react.element"),XH=Symbol.for("react.portal"),JH=Symbol.for("react.fragment"),ZH=Symbol.for("react.strict_mode"),eG=Symbol.for("react.profiler"),tG=Symbol.for("react.provider"),rG=Symbol.for("react.context"),nG=Symbol.for("react.forward_ref"),iG=Symbol.for("react.suspense"),sG=Symbol.for("react.memo"),aG=Symbol.for("react.lazy"),ET=Symbol.iterator;function oG(t){return t===null||typeof t!="object"?null:(t=ET&&t[ET]||t["@@iterator"],typeof t=="function"?t:null)}var gD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yD=Object.assign,vD={};function dh(t,e,r){this.props=t,this.context=e,this.refs=vD,this.updater=r||gD}dh.prototype.isReactComponent={};dh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xD(){}xD.prototype=dh.prototype;function jj(t,e,r){this.props=t,this.context=e,this.refs=vD,this.updater=r||gD}var Ej=jj.prototype=new xD;Ej.constructor=jj;yD(Ej,dh.prototype);Ej.isPureReactComponent=!0;var CT=Array.isArray,bD=Object.prototype.hasOwnProperty,Cj={current:null},wD={key:!0,ref:!0,__self:!0,__source:!0};function _D(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)bD.call(e,n)&&!wD.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Kp,type:t,key:s,ref:a,props:i,_owner:Cj.current}}function lG(t,e){return{$$typeof:Kp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Aj(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kp}function cG(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var AT=/\/+/g;function d1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cG(""+t.key):e.toString(36)}function G0(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Kp:case XH:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+d1(a,0):n,CT(i)?(r="",t!=null&&(r=t.replace(AT,"$&/")+"/"),G0(i,e,r,"",function(u){return u})):i!=null&&(Aj(i)&&(i=lG(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(AT,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",CT(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+d1(s,l);a+=G0(s,e,r,c,i)}else if(c=oG(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+d1(s,l++),a+=G0(s,e,r,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Jg(t,e,r){if(t==null)return t;var n=[],i=0;return G0(t,n,"","",function(s){return e.call(r,s,i++)}),n}function uG(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},q0={transition:null},dG={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:q0,ReactCurrentOwner:Cj};function SD(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:Jg,forEach:function(t,e,r){Jg(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Jg(t,function(){e++}),e},toArray:function(t){return Jg(t,function(e){return e})||[]},only:function(t){if(!Aj(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Component=dh;it.Fragment=JH;it.Profiler=eG;it.PureComponent=jj;it.StrictMode=ZH;it.Suspense=iG;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dG;it.act=SD;it.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=yD({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Cj.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)bD.call(e,c)&&!wD.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Kp,type:t.type,key:i,ref:s,props:n,_owner:a}};it.createContext=function(t){return t={$$typeof:rG,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tG,_context:t},t.Consumer=t};it.createElement=_D;it.createFactory=function(t){var e=_D.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:nG,render:t}};it.isValidElement=Aj;it.lazy=function(t){return{$$typeof:aG,_payload:{_status:-1,_result:t},_init:uG}};it.memo=function(t,e){return{$$typeof:sG,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=q0.transition;q0.transition={};try{t()}finally{q0.transition=e}};it.unstable_act=SD;it.useCallback=function(t,e){return Rn.current.useCallback(t,e)};it.useContext=function(t){return Rn.current.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};it.useEffect=function(t,e){return Rn.current.useEffect(t,e)};it.useId=function(){return Rn.current.useId()};it.useImperativeHandle=function(t,e,r){return Rn.current.useImperativeHandle(t,e,r)};it.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};it.useMemo=function(t,e){return Rn.current.useMemo(t,e)};it.useReducer=function(t,e,r){return Rn.current.useReducer(t,e,r)};it.useRef=function(t){return Rn.current.useRef(t)};it.useState=function(t){return Rn.current.useState(t)};it.useSyncExternalStore=function(t,e,r){return Rn.current.useSyncExternalStore(t,e,r)};it.useTransition=function(){return Rn.current.useTransition()};it.version="18.3.1";pD.exports=it;var E=pD.exports;const D=bt(E),kD=QH({__proto__:null,default:D},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hG=E,fG=Symbol.for("react.element"),mG=Symbol.for("react.fragment"),pG=Object.prototype.hasOwnProperty,gG=hG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yG={key:!0,ref:!0,__self:!0,__source:!0};function ND(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)pG.call(e,n)&&!yG.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:fG,type:t,key:s,ref:a,props:i,_owner:gG.current}}Ux.Fragment=mG;Ux.jsx=ND;Ux.jsxs=ND;mD.exports=Ux;var o=mD.exports,jD={exports:{}},vi={},ED={exports:{}},CD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,B){var J=F.length;F.push(B);e:for(;0<J;){var U=J-1>>>1,H=F[U];if(0<i(H,B))F[U]=B,F[J]=H,J=U;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var B=F[0],J=F.pop();if(J!==B){F[0]=J;e:for(var U=0,H=F.length,q=H>>>1;U<q;){var oe=2*(U+1)-1,ve=F[oe],se=oe+1,V=F[se];if(0>i(ve,J))se<H&&0>i(V,ve)?(F[U]=V,F[se]=J,U=se):(F[U]=ve,F[oe]=J,U=oe);else if(se<H&&0>i(V,J))F[U]=V,F[se]=J,U=se;else break e}}return B}function i(F,B){var J=F.sortIndex-B.sortIndex;return J!==0?J:F.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var B=r(u);B!==null;){if(B.callback===null)n(u);else if(B.startTime<=F)n(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=r(u)}}function k(F){if(v=!1,w(F),!g)if(r(c)!==null)g=!0,W(S);else{var B=r(u);B!==null&&M(k,B.startTime-F)}}function S(F,B){g=!1,v&&(v=!1,x(_),_=-1),m=!0;var J=f;try{for(w(B),d=r(c);d!==null&&(!(d.expirationTime>B)||F&&!C());){var U=d.callback;if(typeof U=="function"){d.callback=null,f=d.priorityLevel;var H=U(d.expirationTime<=B);B=t.unstable_now(),typeof H=="function"?d.callback=H:d===r(c)&&n(c),w(B)}else n(c);d=r(c)}if(d!==null)var q=!0;else{var oe=r(u);oe!==null&&M(k,oe.startTime-B),q=!1}return q}finally{d=null,f=J,m=!1}}var P=!1,N=null,_=-1,T=5,j=-1;function C(){return!(t.unstable_now()-j<T)}function I(){if(N!==null){var F=t.unstable_now();j=F;var B=!0;try{B=N(!0,F)}finally{B?R():(P=!1,N=null)}}else P=!1}var R;if(typeof b=="function")R=function(){b(I)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,z=$.port2;$.port1.onmessage=I,R=function(){z.postMessage(null)}}else R=function(){y(I,0)};function W(F){N=F,P||(P=!0,R())}function M(F,B){_=y(function(){F(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,W(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var J=f;f=B;try{return F()}finally{f=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,B){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var J=f;f=F;try{return B()}finally{f=J}},t.unstable_scheduleCallback=function(F,B,J){var U=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?U+J:U):J=U,F){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=J+H,F={id:h++,callback:B,priorityLevel:F,startTime:J,expirationTime:H,sortIndex:-1},J>U?(F.sortIndex=J,e(u,F),r(c)===null&&F===r(u)&&(v?(x(_),_=-1):v=!0,M(k,J-U))):(F.sortIndex=H,e(c,F),g||m||(g=!0,W(S))),F},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(F){var B=f;return function(){var J=f;f=B;try{return F.apply(this,arguments)}finally{f=J}}}})(CD);ED.exports=CD;var vG=ED.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xG=E,yi=vG;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AD=new Set,jm={};function Dc(t,e){od(t,e),od(t+"Capture",e)}function od(t,e){for(jm[t]=e,t=0;t<e.length;t++)AD.add(e[t])}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),K_=Object.prototype.hasOwnProperty,bG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TT={},PT={};function wG(t){return K_.call(PT,t)?!0:K_.call(TT,t)?!1:bG.test(t)?PT[t]=!0:(TT[t]=!0,!1)}function _G(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SG(t,e,r,n){if(e===null||typeof e>"u"||_G(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yr[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yr[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yr[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yr[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yr[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yr[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yr[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yr[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yr[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tj=/[\-:]([a-z])/g;function Pj(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tj,Pj);Yr[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tj,Pj);Yr[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tj,Pj);Yr[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yr[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Yr.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yr[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ij(t,e,r,n){var i=Yr.hasOwnProperty(e)?Yr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SG(e,r,i,n)&&(r=null),n||i===null?wG(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Wa=xG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zg=Symbol.for("react.element"),gu=Symbol.for("react.portal"),yu=Symbol.for("react.fragment"),Oj=Symbol.for("react.strict_mode"),Y_=Symbol.for("react.profiler"),TD=Symbol.for("react.provider"),PD=Symbol.for("react.context"),Rj=Symbol.for("react.forward_ref"),Q_=Symbol.for("react.suspense"),X_=Symbol.for("react.suspense_list"),Mj=Symbol.for("react.memo"),go=Symbol.for("react.lazy"),ID=Symbol.for("react.offscreen"),IT=Symbol.iterator;function cf(t){return t===null||typeof t!="object"?null:(t=IT&&t[IT]||t["@@iterator"],typeof t=="function"?t:null)}var nr=Object.assign,h1;function Rf(t){if(h1===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);h1=e&&e[1]||""}return`
`+h1+t}var f1=!1;function m1(t,e){if(!t||f1)return"";f1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{f1=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Rf(t):""}function kG(t){switch(t.tag){case 5:return Rf(t.type);case 16:return Rf("Lazy");case 13:return Rf("Suspense");case 19:return Rf("SuspenseList");case 0:case 2:case 15:return t=m1(t.type,!1),t;case 11:return t=m1(t.type.render,!1),t;case 1:return t=m1(t.type,!0),t;default:return""}}function J_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yu:return"Fragment";case gu:return"Portal";case Y_:return"Profiler";case Oj:return"StrictMode";case Q_:return"Suspense";case X_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PD:return(t.displayName||"Context")+".Consumer";case TD:return(t._context.displayName||"Context")+".Provider";case Rj:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mj:return e=t.displayName||null,e!==null?e:J_(t.type)||"Memo";case go:e=t._payload,t=t._init;try{return J_(t(e))}catch{}}return null}function NG(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J_(e);case 8:return e===Oj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jG(t){var e=OD(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function e0(t){t._valueTracker||(t._valueTracker=jG(t))}function RD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=OD(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ky(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Z_(t,e){var r=e.checked;return nr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function OT(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=rl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function MD(t,e){e=e.checked,e!=null&&Ij(t,"checked",e,!1)}function eS(t,e){MD(t,e);var r=rl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tS(t,e.type,r):e.hasOwnProperty("defaultValue")&&tS(t,e.type,rl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function RT(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function tS(t,e,r){(e!=="number"||ky(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Mf=Array.isArray;function Ou(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+rl(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return nr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function MT(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(pe(92));if(Mf(r)){if(1<r.length)throw Error(pe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:rl(r)}}function DD(t,e){var r=rl(e.value),n=rl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function DT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $D(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$D(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var t0,LD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(t0=t0||document.createElement("div"),t0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=t0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Em(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var qf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EG=["Webkit","ms","Moz","O"];Object.keys(qf).forEach(function(t){EG.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qf[e]=qf[t]})});function FD(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||qf.hasOwnProperty(t)&&qf[t]?(""+e).trim():e+"px"}function VD(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=FD(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var CG=nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iS(t,e){if(e){if(CG[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function sS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aS=null;function Dj(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oS=null,Ru=null,Mu=null;function $T(t){if(t=Xp(t)){if(typeof oS!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=qx(e),oS(t.stateNode,t.type,e))}}function BD(t){Ru?Mu?Mu.push(t):Mu=[t]:Ru=t}function UD(){if(Ru){var t=Ru,e=Mu;if(Mu=Ru=null,$T(t),e)for(t=0;t<e.length;t++)$T(e[t])}}function zD(t,e){return t(e)}function WD(){}var p1=!1;function HD(t,e,r){if(p1)return t(e,r);p1=!0;try{return zD(t,e,r)}finally{p1=!1,(Ru!==null||Mu!==null)&&(WD(),UD())}}function Cm(t,e){var r=t.stateNode;if(r===null)return null;var n=qx(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(pe(231,e,typeof r));return r}var lS=!1;if(ja)try{var uf={};Object.defineProperty(uf,"passive",{get:function(){lS=!0}}),window.addEventListener("test",uf,uf),window.removeEventListener("test",uf,uf)}catch{lS=!1}function AG(t,e,r,n,i,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Kf=!1,Ny=null,jy=!1,cS=null,TG={onError:function(t){Kf=!0,Ny=t}};function PG(t,e,r,n,i,s,a,l,c){Kf=!1,Ny=null,AG.apply(TG,arguments)}function IG(t,e,r,n,i,s,a,l,c){if(PG.apply(this,arguments),Kf){if(Kf){var u=Ny;Kf=!1,Ny=null}else throw Error(pe(198));jy||(jy=!0,cS=u)}}function $c(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function GD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function LT(t){if($c(t)!==t)throw Error(pe(188))}function OG(t){var e=t.alternate;if(!e){if(e=$c(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return LT(i),t;if(s===n)return LT(i),e;s=s.sibling}throw Error(pe(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?t:e}function qD(t){return t=OG(t),t!==null?KD(t):null}function KD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KD(t);if(e!==null)return e;t=t.sibling}return null}var YD=yi.unstable_scheduleCallback,FT=yi.unstable_cancelCallback,RG=yi.unstable_shouldYield,MG=yi.unstable_requestPaint,dr=yi.unstable_now,DG=yi.unstable_getCurrentPriorityLevel,$j=yi.unstable_ImmediatePriority,QD=yi.unstable_UserBlockingPriority,Ey=yi.unstable_NormalPriority,$G=yi.unstable_LowPriority,XD=yi.unstable_IdlePriority,zx=null,Os=null;function LG(t){if(Os&&typeof Os.onCommitFiberRoot=="function")try{Os.onCommitFiberRoot(zx,t,void 0,(t.current.flags&128)===128)}catch{}}var ss=Math.clz32?Math.clz32:BG,FG=Math.log,VG=Math.LN2;function BG(t){return t>>>=0,t===0?32:31-(FG(t)/VG|0)|0}var r0=64,n0=4194304;function Df(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cy(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~i;l!==0?n=Df(l):(s&=a,s!==0&&(n=Df(s)))}else a=r&~i,a!==0?n=Df(a):s!==0&&(n=Df(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ss(e),i=1<<r,n|=t[r],e&=~i;return n}function UG(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zG(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ss(s),l=1<<a,c=i[a];c===-1?(!(l&r)||l&n)&&(i[a]=UG(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function uS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function JD(){var t=r0;return r0<<=1,!(r0&4194240)&&(r0=64),t}function g1(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Yp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ss(e),t[e]=r}function WG(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ss(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Lj(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ss(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Nt=0;function ZD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var e6,Fj,t6,r6,n6,dS=!1,i0=[],Do=null,$o=null,Lo=null,Am=new Map,Tm=new Map,xo=[],HG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VT(t,e){switch(t){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":Lo=null;break;case"pointerover":case"pointerout":Am.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tm.delete(e.pointerId)}}function df(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xp(e),e!==null&&Fj(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function GG(t,e,r,n,i){switch(e){case"focusin":return Do=df(Do,t,e,r,n,i),!0;case"dragenter":return $o=df($o,t,e,r,n,i),!0;case"mouseover":return Lo=df(Lo,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Am.set(s,df(Am.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Tm.set(s,df(Tm.get(s)||null,t,e,r,n,i)),!0}return!1}function i6(t){var e=Hl(t.target);if(e!==null){var r=$c(e);if(r!==null){if(e=r.tag,e===13){if(e=GD(r),e!==null){t.blockedOn=e,n6(t.priority,function(){t6(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function K0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=hS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);aS=n,r.target.dispatchEvent(n),aS=null}else return e=Xp(r),e!==null&&Fj(e),t.blockedOn=r,!1;e.shift()}return!0}function BT(t,e,r){K0(t)&&r.delete(e)}function qG(){dS=!1,Do!==null&&K0(Do)&&(Do=null),$o!==null&&K0($o)&&($o=null),Lo!==null&&K0(Lo)&&(Lo=null),Am.forEach(BT),Tm.forEach(BT)}function hf(t,e){t.blockedOn===e&&(t.blockedOn=null,dS||(dS=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,qG)))}function Pm(t){function e(i){return hf(i,t)}if(0<i0.length){hf(i0[0],t);for(var r=1;r<i0.length;r++){var n=i0[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Do!==null&&hf(Do,t),$o!==null&&hf($o,t),Lo!==null&&hf(Lo,t),Am.forEach(e),Tm.forEach(e),r=0;r<xo.length;r++)n=xo[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<xo.length&&(r=xo[0],r.blockedOn===null);)i6(r),r.blockedOn===null&&xo.shift()}var Du=Wa.ReactCurrentBatchConfig,Ay=!0;function KG(t,e,r,n){var i=Nt,s=Du.transition;Du.transition=null;try{Nt=1,Vj(t,e,r,n)}finally{Nt=i,Du.transition=s}}function YG(t,e,r,n){var i=Nt,s=Du.transition;Du.transition=null;try{Nt=4,Vj(t,e,r,n)}finally{Nt=i,Du.transition=s}}function Vj(t,e,r,n){if(Ay){var i=hS(t,e,r,n);if(i===null)j1(t,e,n,Ty,r),VT(t,n);else if(GG(i,t,e,r,n))n.stopPropagation();else if(VT(t,n),e&4&&-1<HG.indexOf(t)){for(;i!==null;){var s=Xp(i);if(s!==null&&e6(s),s=hS(t,e,r,n),s===null&&j1(t,e,n,Ty,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else j1(t,e,n,null,r)}}var Ty=null;function hS(t,e,r,n){if(Ty=null,t=Dj(n),t=Hl(t),t!==null)if(e=$c(t),e===null)t=null;else if(r=e.tag,r===13){if(t=GD(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ty=t,null}function s6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DG()){case $j:return 1;case QD:return 4;case Ey:case $G:return 16;case XD:return 536870912;default:return 16}default:return 16}}var To=null,Bj=null,Y0=null;function a6(){if(Y0)return Y0;var t,e=Bj,r=e.length,n,i="value"in To?To.value:To.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Y0=i.slice(t,1<n?1-n:void 0)}function Q0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function s0(){return!0}function UT(){return!1}function xi(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?s0:UT,this.isPropagationStopped=UT,this}return nr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=s0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=s0)},persist:function(){},isPersistent:s0}),e}var hh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uj=xi(hh),Qp=nr({},hh,{view:0,detail:0}),QG=xi(Qp),y1,v1,ff,Wx=nr({},Qp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zj,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ff&&(ff&&t.type==="mousemove"?(y1=t.screenX-ff.screenX,v1=t.screenY-ff.screenY):v1=y1=0,ff=t),y1)},movementY:function(t){return"movementY"in t?t.movementY:v1}}),zT=xi(Wx),XG=nr({},Wx,{dataTransfer:0}),JG=xi(XG),ZG=nr({},Qp,{relatedTarget:0}),x1=xi(ZG),eq=nr({},hh,{animationName:0,elapsedTime:0,pseudoElement:0}),tq=xi(eq),rq=nr({},hh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nq=xi(rq),iq=nr({},hh,{data:0}),WT=xi(iq),sq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oq[t])?!!e[t]:!1}function zj(){return lq}var cq=nr({},Qp,{key:function(t){if(t.key){var e=sq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Q0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zj,charCode:function(t){return t.type==="keypress"?Q0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Q0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uq=xi(cq),dq=nr({},Wx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HT=xi(dq),hq=nr({},Qp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zj}),fq=xi(hq),mq=nr({},hh,{propertyName:0,elapsedTime:0,pseudoElement:0}),pq=xi(mq),gq=nr({},Wx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yq=xi(gq),vq=[9,13,27,32],Wj=ja&&"CompositionEvent"in window,Yf=null;ja&&"documentMode"in document&&(Yf=document.documentMode);var xq=ja&&"TextEvent"in window&&!Yf,o6=ja&&(!Wj||Yf&&8<Yf&&11>=Yf),GT=" ",qT=!1;function l6(t,e){switch(t){case"keyup":return vq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vu=!1;function bq(t,e){switch(t){case"compositionend":return c6(e);case"keypress":return e.which!==32?null:(qT=!0,GT);case"textInput":return t=e.data,t===GT&&qT?null:t;default:return null}}function wq(t,e){if(vu)return t==="compositionend"||!Wj&&l6(t,e)?(t=a6(),Y0=Bj=To=null,vu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o6&&e.locale!=="ko"?null:e.data;default:return null}}var _q={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_q[t.type]:e==="textarea"}function u6(t,e,r,n){BD(n),e=Py(e,"onChange"),0<e.length&&(r=new Uj("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Qf=null,Im=null;function Sq(t){w6(t,0)}function Hx(t){var e=wu(t);if(RD(e))return t}function kq(t,e){if(t==="change")return e}var d6=!1;if(ja){var b1;if(ja){var w1="oninput"in document;if(!w1){var YT=document.createElement("div");YT.setAttribute("oninput","return;"),w1=typeof YT.oninput=="function"}b1=w1}else b1=!1;d6=b1&&(!document.documentMode||9<document.documentMode)}function QT(){Qf&&(Qf.detachEvent("onpropertychange",h6),Im=Qf=null)}function h6(t){if(t.propertyName==="value"&&Hx(Im)){var e=[];u6(e,Im,t,Dj(t)),HD(Sq,e)}}function Nq(t,e,r){t==="focusin"?(QT(),Qf=e,Im=r,Qf.attachEvent("onpropertychange",h6)):t==="focusout"&&QT()}function jq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hx(Im)}function Eq(t,e){if(t==="click")return Hx(e)}function Cq(t,e){if(t==="input"||t==="change")return Hx(e)}function Aq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fs=typeof Object.is=="function"?Object.is:Aq;function Om(t,e){if(fs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!K_.call(e,i)||!fs(t[i],e[i]))return!1}return!0}function XT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function JT(t,e){var r=XT(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=XT(r)}}function f6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?f6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function m6(){for(var t=window,e=ky();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ky(t.document)}return e}function Hj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Tq(t){var e=m6(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&f6(r.ownerDocument.documentElement,r)){if(n!==null&&Hj(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=JT(r,s);var a=JT(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pq=ja&&"documentMode"in document&&11>=document.documentMode,xu=null,fS=null,Xf=null,mS=!1;function ZT(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mS||xu==null||xu!==ky(n)||(n=xu,"selectionStart"in n&&Hj(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xf&&Om(Xf,n)||(Xf=n,n=Py(fS,"onSelect"),0<n.length&&(e=new Uj("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=xu)))}function a0(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var bu={animationend:a0("Animation","AnimationEnd"),animationiteration:a0("Animation","AnimationIteration"),animationstart:a0("Animation","AnimationStart"),transitionend:a0("Transition","TransitionEnd")},_1={},p6={};ja&&(p6=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function Gx(t){if(_1[t])return _1[t];if(!bu[t])return t;var e=bu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in p6)return _1[t]=e[r];return t}var g6=Gx("animationend"),y6=Gx("animationiteration"),v6=Gx("animationstart"),x6=Gx("transitionend"),b6=new Map,eP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(t,e){b6.set(t,e),Dc(e,[t])}for(var S1=0;S1<eP.length;S1++){var k1=eP[S1],Iq=k1.toLowerCase(),Oq=k1[0].toUpperCase()+k1.slice(1);yl(Iq,"on"+Oq)}yl(g6,"onAnimationEnd");yl(y6,"onAnimationIteration");yl(v6,"onAnimationStart");yl("dblclick","onDoubleClick");yl("focusin","onFocus");yl("focusout","onBlur");yl(x6,"onTransitionEnd");od("onMouseEnter",["mouseout","mouseover"]);od("onMouseLeave",["mouseout","mouseover"]);od("onPointerEnter",["pointerout","pointerover"]);od("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $f="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rq=new Set("cancel close invalid load scroll toggle".split(" ").concat($f));function tP(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,IG(n,e,void 0,t),t.currentTarget=null}function w6(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;tP(i,l,u),s=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;tP(i,l,u),s=c}}}if(jy)throw t=cS,jy=!1,cS=null,t}function Ft(t,e){var r=e[xS];r===void 0&&(r=e[xS]=new Set);var n=t+"__bubble";r.has(n)||(_6(e,t,2,!1),r.add(n))}function N1(t,e,r){var n=0;e&&(n|=4),_6(r,t,n,e)}var o0="_reactListening"+Math.random().toString(36).slice(2);function Rm(t){if(!t[o0]){t[o0]=!0,AD.forEach(function(r){r!=="selectionchange"&&(Rq.has(r)||N1(r,!1,t),N1(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[o0]||(e[o0]=!0,N1("selectionchange",!1,e))}}function _6(t,e,r,n){switch(s6(e)){case 1:var i=KG;break;case 4:i=YG;break;default:i=Vj}r=i.bind(null,e,r,t),i=void 0,!lS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function j1(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Hl(l),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}l=l.parentNode}}n=n.return}HD(function(){var u=s,h=Dj(r),d=[];e:{var f=b6.get(t);if(f!==void 0){var m=Uj,g=t;switch(t){case"keypress":if(Q0(r)===0)break e;case"keydown":case"keyup":m=uq;break;case"focusin":g="focus",m=x1;break;case"focusout":g="blur",m=x1;break;case"beforeblur":case"afterblur":m=x1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=JG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=fq;break;case g6:case y6:case v6:m=tq;break;case x6:m=pq;break;case"scroll":m=QG;break;case"wheel":m=yq;break;case"copy":case"cut":case"paste":m=nq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=HT}var v=(e&4)!==0,y=!v&&t==="scroll",x=v?f!==null?f+"Capture":null:f;v=[];for(var b=u,w;b!==null;){w=b;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,x!==null&&(k=Cm(b,x),k!=null&&v.push(Mm(b,k,w)))),y)break;b=b.return}0<v.length&&(f=new m(f,g,null,r,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==aS&&(g=r.relatedTarget||r.fromElement)&&(Hl(g)||g[Ea]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?Hl(g):null,g!==null&&(y=$c(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=zT,k="onMouseLeave",x="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=HT,k="onPointerLeave",x="onPointerEnter",b="pointer"),y=m==null?f:wu(m),w=g==null?f:wu(g),f=new v(k,b+"leave",m,r,h),f.target=y,f.relatedTarget=w,k=null,Hl(h)===u&&(v=new v(x,b+"enter",g,r,h),v.target=w,v.relatedTarget=y,k=v),y=k,m&&g)t:{for(v=m,x=g,b=0,w=v;w;w=tu(w))b++;for(w=0,k=x;k;k=tu(k))w++;for(;0<b-w;)v=tu(v),b--;for(;0<w-b;)x=tu(x),w--;for(;b--;){if(v===x||x!==null&&v===x.alternate)break t;v=tu(v),x=tu(x)}v=null}else v=null;m!==null&&rP(d,f,m,v,!1),g!==null&&y!==null&&rP(d,y,g,v,!0)}}e:{if(f=u?wu(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=kq;else if(KT(f))if(d6)S=Cq;else{S=jq;var P=Nq}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Eq);if(S&&(S=S(t,u))){u6(d,S,r,h);break e}P&&P(t,f,u),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&tS(f,"number",f.value)}switch(P=u?wu(u):window,t){case"focusin":(KT(P)||P.contentEditable==="true")&&(xu=P,fS=u,Xf=null);break;case"focusout":Xf=fS=xu=null;break;case"mousedown":mS=!0;break;case"contextmenu":case"mouseup":case"dragend":mS=!1,ZT(d,r,h);break;case"selectionchange":if(Pq)break;case"keydown":case"keyup":ZT(d,r,h)}var N;if(Wj)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else vu?l6(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(o6&&r.locale!=="ko"&&(vu||_!=="onCompositionStart"?_==="onCompositionEnd"&&vu&&(N=a6()):(To=h,Bj="value"in To?To.value:To.textContent,vu=!0)),P=Py(u,_),0<P.length&&(_=new WT(_,t,null,r,h),d.push({event:_,listeners:P}),N?_.data=N:(N=c6(r),N!==null&&(_.data=N)))),(N=xq?bq(t,r):wq(t,r))&&(u=Py(u,"onBeforeInput"),0<u.length&&(h=new WT("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=N))}w6(d,e)})}function Mm(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Py(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cm(t,r),s!=null&&n.unshift(Mm(t,s,i)),s=Cm(t,e),s!=null&&n.push(Mm(t,s,i))),t=t.return}return n}function tu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rP(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=Cm(r,s),c!=null&&a.unshift(Mm(r,c,l))):i||(c=Cm(r,s),c!=null&&a.push(Mm(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Mq=/\r\n?/g,Dq=/\u0000|\uFFFD/g;function nP(t){return(typeof t=="string"?t:""+t).replace(Mq,`
`).replace(Dq,"")}function l0(t,e,r){if(e=nP(e),nP(t)!==e&&r)throw Error(pe(425))}function Iy(){}var pS=null,gS=null;function yS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vS=typeof setTimeout=="function"?setTimeout:void 0,$q=typeof clearTimeout=="function"?clearTimeout:void 0,iP=typeof Promise=="function"?Promise:void 0,Lq=typeof queueMicrotask=="function"?queueMicrotask:typeof iP<"u"?function(t){return iP.resolve(null).then(t).catch(Fq)}:vS;function Fq(t){setTimeout(function(){throw t})}function E1(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Pm(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Pm(e)}function Fo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var fh=Math.random().toString(36).slice(2),Es="__reactFiber$"+fh,Dm="__reactProps$"+fh,Ea="__reactContainer$"+fh,xS="__reactEvents$"+fh,Vq="__reactListeners$"+fh,Bq="__reactHandles$"+fh;function Hl(t){var e=t[Es];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ea]||r[Es]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=sP(t);t!==null;){if(r=t[Es])return r;t=sP(t)}return e}t=r,r=t.parentNode}return null}function Xp(t){return t=t[Es]||t[Ea],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function qx(t){return t[Dm]||null}var bS=[],_u=-1;function vl(t){return{current:t}}function Gt(t){0>_u||(t.current=bS[_u],bS[_u]=null,_u--)}function Dt(t,e){_u++,bS[_u]=t.current,t.current=e}var nl={},gn=vl(nl),Wn=vl(!1),mc=nl;function ld(t,e){var r=t.type.contextTypes;if(!r)return nl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Hn(t){return t=t.childContextTypes,t!=null}function Oy(){Gt(Wn),Gt(gn)}function aP(t,e,r){if(gn.current!==nl)throw Error(pe(168));Dt(gn,e),Dt(Wn,r)}function S6(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(pe(108,NG(t)||"Unknown",i));return nr({},r,n)}function Ry(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nl,mc=gn.current,Dt(gn,t),Dt(Wn,Wn.current),!0}function oP(t,e,r){var n=t.stateNode;if(!n)throw Error(pe(169));r?(t=S6(t,e,mc),n.__reactInternalMemoizedMergedChildContext=t,Gt(Wn),Gt(gn),Dt(gn,t)):Gt(Wn),Dt(Wn,r)}var oa=null,Kx=!1,C1=!1;function k6(t){oa===null?oa=[t]:oa.push(t)}function Uq(t){Kx=!0,k6(t)}function xl(){if(!C1&&oa!==null){C1=!0;var t=0,e=Nt;try{var r=oa;for(Nt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}oa=null,Kx=!1}catch(i){throw oa!==null&&(oa=oa.slice(t+1)),YD($j,xl),i}finally{Nt=e,C1=!1}}return null}var Su=[],ku=0,My=null,Dy=0,ki=[],Ni=0,pc=null,ua=1,da="";function Dl(t,e){Su[ku++]=Dy,Su[ku++]=My,My=t,Dy=e}function N6(t,e,r){ki[Ni++]=ua,ki[Ni++]=da,ki[Ni++]=pc,pc=t;var n=ua;t=da;var i=32-ss(n)-1;n&=~(1<<i),r+=1;var s=32-ss(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,ua=1<<32-ss(e)+i|r<<i|n,da=s+t}else ua=1<<s|r<<i|n,da=t}function Gj(t){t.return!==null&&(Dl(t,1),N6(t,1,0))}function qj(t){for(;t===My;)My=Su[--ku],Su[ku]=null,Dy=Su[--ku],Su[ku]=null;for(;t===pc;)pc=ki[--Ni],ki[Ni]=null,da=ki[--Ni],ki[Ni]=null,ua=ki[--Ni],ki[Ni]=null}var hi=null,ui=null,Qt=!1,Ji=null;function j6(t,e){var r=Ci(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function lP(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hi=t,ui=Fo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hi=t,ui=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=pc!==null?{id:ua,overflow:da}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ci(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,hi=t,ui=null,!0):!1;default:return!1}}function wS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _S(t){if(Qt){var e=ui;if(e){var r=e;if(!lP(t,e)){if(wS(t))throw Error(pe(418));e=Fo(r.nextSibling);var n=hi;e&&lP(t,e)?j6(n,r):(t.flags=t.flags&-4097|2,Qt=!1,hi=t)}}else{if(wS(t))throw Error(pe(418));t.flags=t.flags&-4097|2,Qt=!1,hi=t}}}function cP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hi=t}function c0(t){if(t!==hi)return!1;if(!Qt)return cP(t),Qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yS(t.type,t.memoizedProps)),e&&(e=ui)){if(wS(t))throw E6(),Error(pe(418));for(;e;)j6(t,e),e=Fo(e.nextSibling)}if(cP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ui=Fo(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ui=null}}else ui=hi?Fo(t.stateNode.nextSibling):null;return!0}function E6(){for(var t=ui;t;)t=Fo(t.nextSibling)}function cd(){ui=hi=null,Qt=!1}function Kj(t){Ji===null?Ji=[t]:Ji.push(t)}var zq=Wa.ReactCurrentBatchConfig;function mf(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,t))}return t}function u0(t,e){throw t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uP(t){var e=t._init;return e(t._payload)}function C6(t){function e(x,b){if(t){var w=x.deletions;w===null?(x.deletions=[b],x.flags|=16):w.push(b)}}function r(x,b){if(!t)return null;for(;b!==null;)e(x,b),b=b.sibling;return null}function n(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function i(x,b){return x=zo(x,b),x.index=0,x.sibling=null,x}function s(x,b,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<b?(x.flags|=2,b):w):(x.flags|=2,b)):(x.flags|=1048576,b)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,b,w,k){return b===null||b.tag!==6?(b=M1(w,x.mode,k),b.return=x,b):(b=i(b,w),b.return=x,b)}function c(x,b,w,k){var S=w.type;return S===yu?h(x,b,w.props.children,k,w.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===go&&uP(S)===b.type)?(k=i(b,w.props),k.ref=mf(x,b,w),k.return=x,k):(k=ny(w.type,w.key,w.props,null,x.mode,k),k.ref=mf(x,b,w),k.return=x,k)}function u(x,b,w,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=D1(w,x.mode,k),b.return=x,b):(b=i(b,w.children||[]),b.return=x,b)}function h(x,b,w,k,S){return b===null||b.tag!==7?(b=cc(w,x.mode,k,S),b.return=x,b):(b=i(b,w),b.return=x,b)}function d(x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=M1(""+b,x.mode,w),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zg:return w=ny(b.type,b.key,b.props,null,x.mode,w),w.ref=mf(x,null,b),w.return=x,w;case gu:return b=D1(b,x.mode,w),b.return=x,b;case go:var k=b._init;return d(x,k(b._payload),w)}if(Mf(b)||cf(b))return b=cc(b,x.mode,w,null),b.return=x,b;u0(x,b)}return null}function f(x,b,w,k){var S=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(x,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zg:return w.key===S?c(x,b,w,k):null;case gu:return w.key===S?u(x,b,w,k):null;case go:return S=w._init,f(x,b,S(w._payload),k)}if(Mf(w)||cf(w))return S!==null?null:h(x,b,w,k,null);u0(x,w)}return null}function m(x,b,w,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(w)||null,l(b,x,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Zg:return x=x.get(k.key===null?w:k.key)||null,c(b,x,k,S);case gu:return x=x.get(k.key===null?w:k.key)||null,u(b,x,k,S);case go:var P=k._init;return m(x,b,w,P(k._payload),S)}if(Mf(k)||cf(k))return x=x.get(w)||null,h(b,x,k,S,null);u0(b,k)}return null}function g(x,b,w,k){for(var S=null,P=null,N=b,_=b=0,T=null;N!==null&&_<w.length;_++){N.index>_?(T=N,N=null):T=N.sibling;var j=f(x,N,w[_],k);if(j===null){N===null&&(N=T);break}t&&N&&j.alternate===null&&e(x,N),b=s(j,b,_),P===null?S=j:P.sibling=j,P=j,N=T}if(_===w.length)return r(x,N),Qt&&Dl(x,_),S;if(N===null){for(;_<w.length;_++)N=d(x,w[_],k),N!==null&&(b=s(N,b,_),P===null?S=N:P.sibling=N,P=N);return Qt&&Dl(x,_),S}for(N=n(x,N);_<w.length;_++)T=m(N,x,_,w[_],k),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?_:T.key),b=s(T,b,_),P===null?S=T:P.sibling=T,P=T);return t&&N.forEach(function(C){return e(x,C)}),Qt&&Dl(x,_),S}function v(x,b,w,k){var S=cf(w);if(typeof S!="function")throw Error(pe(150));if(w=S.call(w),w==null)throw Error(pe(151));for(var P=S=null,N=b,_=b=0,T=null,j=w.next();N!==null&&!j.done;_++,j=w.next()){N.index>_?(T=N,N=null):T=N.sibling;var C=f(x,N,j.value,k);if(C===null){N===null&&(N=T);break}t&&N&&C.alternate===null&&e(x,N),b=s(C,b,_),P===null?S=C:P.sibling=C,P=C,N=T}if(j.done)return r(x,N),Qt&&Dl(x,_),S;if(N===null){for(;!j.done;_++,j=w.next())j=d(x,j.value,k),j!==null&&(b=s(j,b,_),P===null?S=j:P.sibling=j,P=j);return Qt&&Dl(x,_),S}for(N=n(x,N);!j.done;_++,j=w.next())j=m(N,x,_,j.value,k),j!==null&&(t&&j.alternate!==null&&N.delete(j.key===null?_:j.key),b=s(j,b,_),P===null?S=j:P.sibling=j,P=j);return t&&N.forEach(function(I){return e(x,I)}),Qt&&Dl(x,_),S}function y(x,b,w,k){if(typeof w=="object"&&w!==null&&w.type===yu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zg:e:{for(var S=w.key,P=b;P!==null;){if(P.key===S){if(S=w.type,S===yu){if(P.tag===7){r(x,P.sibling),b=i(P,w.props.children),b.return=x,x=b;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===go&&uP(S)===P.type){r(x,P.sibling),b=i(P,w.props),b.ref=mf(x,P,w),b.return=x,x=b;break e}r(x,P);break}else e(x,P);P=P.sibling}w.type===yu?(b=cc(w.props.children,x.mode,k,w.key),b.return=x,x=b):(k=ny(w.type,w.key,w.props,null,x.mode,k),k.ref=mf(x,b,w),k.return=x,x=k)}return a(x);case gu:e:{for(P=w.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(x,b.sibling),b=i(b,w.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else e(x,b);b=b.sibling}b=D1(w,x.mode,k),b.return=x,x=b}return a(x);case go:return P=w._init,y(x,b,P(w._payload),k)}if(Mf(w))return g(x,b,w,k);if(cf(w))return v(x,b,w,k);u0(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(x,b.sibling),b=i(b,w),b.return=x,x=b):(r(x,b),b=M1(w,x.mode,k),b.return=x,x=b),a(x)):r(x,b)}return y}var ud=C6(!0),A6=C6(!1),$y=vl(null),Ly=null,Nu=null,Yj=null;function Qj(){Yj=Nu=Ly=null}function Xj(t){var e=$y.current;Gt($y),t._currentValue=e}function SS(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function $u(t,e){Ly=t,Yj=Nu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function Oi(t){var e=t._currentValue;if(Yj!==t)if(t={context:t,memoizedValue:e,next:null},Nu===null){if(Ly===null)throw Error(pe(308));Nu=t,Ly.dependencies={lanes:0,firstContext:t}}else Nu=Nu.next=t;return e}var Gl=null;function Jj(t){Gl===null?Gl=[t]:Gl.push(t)}function T6(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Jj(e)):(r.next=i.next,i.next=r),e.interleaved=r,Ca(t,n)}function Ca(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var yo=!1;function Zj(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P6(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ba(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vo(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ft&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Ca(t,r)}return i=n.interleaved,i===null?(e.next=e,Jj(n)):(e.next=i.next,i.next=e),n.interleaved=e,Ca(t,r)}function X0(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Lj(t,r)}}function dP(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Fy(t,e,r,n){var i=t.updateQueue;yo=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;a=0,h=u=c=null,l=s;do{var f=l.lane,m=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,v=l;switch(f=e,m=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(m,d,f):g,f==null)break e;d=nr({},d,f);break e;case 2:yo=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=m,c=d):h=h.next=m,a|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yc|=a,t.lanes=a,t.memoizedState=d}}function hP(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(pe(191,i));i.call(n)}}}var Jp={},Rs=vl(Jp),$m=vl(Jp),Lm=vl(Jp);function ql(t){if(t===Jp)throw Error(pe(174));return t}function eE(t,e){switch(Dt(Lm,e),Dt($m,t),Dt(Rs,Jp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nS(e,t)}Gt(Rs),Dt(Rs,e)}function dd(){Gt(Rs),Gt($m),Gt(Lm)}function I6(t){ql(Lm.current);var e=ql(Rs.current),r=nS(e,t.type);e!==r&&(Dt($m,t),Dt(Rs,r))}function tE(t){$m.current===t&&(Gt(Rs),Gt($m))}var Jt=vl(0);function Vy(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var A1=[];function rE(){for(var t=0;t<A1.length;t++)A1[t]._workInProgressVersionPrimary=null;A1.length=0}var J0=Wa.ReactCurrentDispatcher,T1=Wa.ReactCurrentBatchConfig,gc=0,rr=null,kr=null,Dr=null,By=!1,Jf=!1,Fm=0,Wq=0;function tn(){throw Error(pe(321))}function nE(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!fs(t[r],e[r]))return!1;return!0}function iE(t,e,r,n,i,s){if(gc=s,rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,J0.current=t===null||t.memoizedState===null?Kq:Yq,t=r(n,i),Jf){s=0;do{if(Jf=!1,Fm=0,25<=s)throw Error(pe(301));s+=1,Dr=kr=null,e.updateQueue=null,J0.current=Qq,t=r(n,i)}while(Jf)}if(J0.current=Uy,e=kr!==null&&kr.next!==null,gc=0,Dr=kr=rr=null,By=!1,e)throw Error(pe(300));return t}function sE(){var t=Fm!==0;return Fm=0,t}function ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?rr.memoizedState=Dr=t:Dr=Dr.next=t,Dr}function Ri(){if(kr===null){var t=rr.alternate;t=t!==null?t.memoizedState:null}else t=kr.next;var e=Dr===null?rr.memoizedState:Dr.next;if(e!==null)Dr=e,kr=t;else{if(t===null)throw Error(pe(310));kr=t,t={memoizedState:kr.memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},Dr===null?rr.memoizedState=Dr=t:Dr=Dr.next=t}return Dr}function Vm(t,e){return typeof e=="function"?e(t):e}function P1(t){var e=Ri(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=kr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((gc&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=n):c=c.next=d,rr.lanes|=h,yc|=h}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=l,fs(n,e.memoizedState)||(Bn=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,rr.lanes|=s,yc|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function I1(t){var e=Ri(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);fs(s,e.memoizedState)||(Bn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function O6(){}function R6(t,e){var r=rr,n=Ri(),i=e(),s=!fs(n.memoizedState,i);if(s&&(n.memoizedState=i,Bn=!0),n=n.queue,aE($6.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Dr!==null&&Dr.memoizedState.tag&1){if(r.flags|=2048,Bm(9,D6.bind(null,r,n,i,e),void 0,null),Fr===null)throw Error(pe(349));gc&30||M6(r,e,i)}return i}function M6(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function D6(t,e,r,n){e.value=r,e.getSnapshot=n,L6(e)&&F6(t)}function $6(t,e,r){return r(function(){L6(e)&&F6(t)})}function L6(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!fs(t,r)}catch{return!0}}function F6(t){var e=Ca(t,1);e!==null&&as(e,t,1,-1)}function fP(t){var e=ws();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vm,lastRenderedState:t},e.queue=t,t=t.dispatch=qq.bind(null,rr,t),[e.memoizedState,t]}function Bm(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function V6(){return Ri().memoizedState}function Z0(t,e,r,n){var i=ws();rr.flags|=t,i.memoizedState=Bm(1|e,r,void 0,n===void 0?null:n)}function Yx(t,e,r,n){var i=Ri();n=n===void 0?null:n;var s=void 0;if(kr!==null){var a=kr.memoizedState;if(s=a.destroy,n!==null&&nE(n,a.deps)){i.memoizedState=Bm(e,r,s,n);return}}rr.flags|=t,i.memoizedState=Bm(1|e,r,s,n)}function mP(t,e){return Z0(8390656,8,t,e)}function aE(t,e){return Yx(2048,8,t,e)}function B6(t,e){return Yx(4,2,t,e)}function U6(t,e){return Yx(4,4,t,e)}function z6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function W6(t,e,r){return r=r!=null?r.concat([t]):null,Yx(4,4,z6.bind(null,e,t),r)}function oE(){}function H6(t,e){var r=Ri();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nE(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function G6(t,e){var r=Ri();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nE(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function q6(t,e,r){return gc&21?(fs(r,e)||(r=JD(),rr.lanes|=r,yc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=r)}function Hq(t,e){var r=Nt;Nt=r!==0&&4>r?r:4,t(!0);var n=T1.transition;T1.transition={};try{t(!1),e()}finally{Nt=r,T1.transition=n}}function K6(){return Ri().memoizedState}function Gq(t,e,r){var n=Uo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Y6(t))Q6(e,r);else if(r=T6(t,e,r,n),r!==null){var i=Tn();as(r,t,n,i),X6(r,e,n)}}function qq(t,e,r){var n=Uo(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Y6(t))Q6(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,r);if(i.hasEagerState=!0,i.eagerState=l,fs(l,a)){var c=e.interleaved;c===null?(i.next=i,Jj(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=T6(t,e,i,n),r!==null&&(i=Tn(),as(r,t,n,i),X6(r,e,n))}}function Y6(t){var e=t.alternate;return t===rr||e!==null&&e===rr}function Q6(t,e){Jf=By=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function X6(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Lj(t,r)}}var Uy={readContext:Oi,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},Kq={readContext:Oi,useCallback:function(t,e){return ws().memoizedState=[t,e===void 0?null:e],t},useContext:Oi,useEffect:mP,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Z0(4194308,4,z6.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Z0(4194308,4,t,e)},useInsertionEffect:function(t,e){return Z0(4,2,t,e)},useMemo:function(t,e){var r=ws();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ws();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Gq.bind(null,rr,t),[n.memoizedState,t]},useRef:function(t){var e=ws();return t={current:t},e.memoizedState=t},useState:fP,useDebugValue:oE,useDeferredValue:function(t){return ws().memoizedState=t},useTransition:function(){var t=fP(!1),e=t[0];return t=Hq.bind(null,t[1]),ws().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=rr,i=ws();if(Qt){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=e(),Fr===null)throw Error(pe(349));gc&30||M6(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,mP($6.bind(null,n,s,t),[t]),n.flags|=2048,Bm(9,D6.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=ws(),e=Fr.identifierPrefix;if(Qt){var r=da,n=ua;r=(n&~(1<<32-ss(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Fm++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Wq++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yq={readContext:Oi,useCallback:H6,useContext:Oi,useEffect:aE,useImperativeHandle:W6,useInsertionEffect:B6,useLayoutEffect:U6,useMemo:G6,useReducer:P1,useRef:V6,useState:function(){return P1(Vm)},useDebugValue:oE,useDeferredValue:function(t){var e=Ri();return q6(e,kr.memoizedState,t)},useTransition:function(){var t=P1(Vm)[0],e=Ri().memoizedState;return[t,e]},useMutableSource:O6,useSyncExternalStore:R6,useId:K6,unstable_isNewReconciler:!1},Qq={readContext:Oi,useCallback:H6,useContext:Oi,useEffect:aE,useImperativeHandle:W6,useInsertionEffect:B6,useLayoutEffect:U6,useMemo:G6,useReducer:I1,useRef:V6,useState:function(){return I1(Vm)},useDebugValue:oE,useDeferredValue:function(t){var e=Ri();return kr===null?e.memoizedState=t:q6(e,kr.memoizedState,t)},useTransition:function(){var t=I1(Vm)[0],e=Ri().memoizedState;return[t,e]},useMutableSource:O6,useSyncExternalStore:R6,useId:K6,unstable_isNewReconciler:!1};function Hi(t,e){if(t&&t.defaultProps){e=nr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function kS(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:nr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Qx={isMounted:function(t){return(t=t._reactInternals)?$c(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Tn(),i=Uo(t),s=ba(n,i);s.payload=e,r!=null&&(s.callback=r),e=Vo(t,s,i),e!==null&&(as(e,t,i,n),X0(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Tn(),i=Uo(t),s=ba(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Vo(t,s,i),e!==null&&(as(e,t,i,n),X0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Tn(),n=Uo(t),i=ba(r,n);i.tag=2,e!=null&&(i.callback=e),e=Vo(t,i,n),e!==null&&(as(e,t,n,r),X0(e,t,n))}};function pP(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Om(r,n)||!Om(i,s):!0}function J6(t,e,r){var n=!1,i=nl,s=e.contextType;return typeof s=="object"&&s!==null?s=Oi(s):(i=Hn(e)?mc:gn.current,n=e.contextTypes,s=(n=n!=null)?ld(t,i):nl),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qx,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function gP(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Qx.enqueueReplaceState(e,e.state,null)}function NS(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Zj(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Oi(s):(s=Hn(e)?mc:gn.current,i.context=ld(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kS(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qx.enqueueReplaceState(i,i.state,null),Fy(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hd(t,e){try{var r="",n=e;do r+=kG(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function O1(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function jS(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Xq=typeof WeakMap=="function"?WeakMap:Map;function Z6(t,e,r){r=ba(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Wy||(Wy=!0,DS=n),jS(t,e)},r}function e$(t,e,r){r=ba(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){jS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){jS(t,e),typeof n!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function yP(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Xq;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=dK.bind(null,t,e,r),e.then(t,t))}function vP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xP(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ba(-1,1),e.tag=2,Vo(r,e,1))),r.lanes|=1),t)}var Jq=Wa.ReactCurrentOwner,Bn=!1;function kn(t,e,r,n){e.child=t===null?A6(e,null,r,n):ud(e,t.child,r,n)}function bP(t,e,r,n,i){r=r.render;var s=e.ref;return $u(e,i),n=iE(t,e,r,n,s,i),r=sE(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Aa(t,e,i)):(Qt&&r&&Gj(e),e.flags|=1,kn(t,e,n,i),e.child)}function wP(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!pE(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,t$(t,e,s,n,i)):(t=ny(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Om,r(a,n)&&t.ref===e.ref)return Aa(t,e,i)}return e.flags|=1,t=zo(s,n),t.ref=e.ref,t.return=e,e.child=t}function t$(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Om(s,n)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,Aa(t,e,i)}return ES(t,e,r,n,i)}function r$(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Eu,ai),ai|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Eu,ai),ai|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Dt(Eu,ai),ai|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Dt(Eu,ai),ai|=n;return kn(t,e,i,r),e.child}function n$(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function ES(t,e,r,n,i){var s=Hn(r)?mc:gn.current;return s=ld(e,s),$u(e,i),r=iE(t,e,r,n,s,i),n=sE(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Aa(t,e,i)):(Qt&&n&&Gj(e),e.flags|=1,kn(t,e,r,i),e.child)}function _P(t,e,r,n,i){if(Hn(r)){var s=!0;Ry(e)}else s=!1;if($u(e,i),e.stateNode===null)ey(t,e),J6(e,r,n),NS(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Oi(u):(u=Hn(r)?mc:gn.current,u=ld(e,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&gP(e,a,n,u),yo=!1;var f=e.memoizedState;a.state=f,Fy(e,n,a,i),c=e.memoizedState,l!==n||f!==c||Wn.current||yo?(typeof h=="function"&&(kS(e,r,h,n),c=e.memoizedState),(l=yo||pP(e,r,l,n,f,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,P6(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Hi(e.type,l),a.props=u,d=e.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Oi(c):(c=Hn(r)?mc:gn.current,c=ld(e,c));var m=r.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||f!==c)&&gP(e,a,n,c),yo=!1,f=e.memoizedState,a.state=f,Fy(e,n,a,i);var g=e.memoizedState;l!==d||f!==g||Wn.current||yo?(typeof m=="function"&&(kS(e,r,m,n),g=e.memoizedState),(u=yo||pP(e,r,u,n,f,g,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return CS(t,e,r,n,s,i)}function CS(t,e,r,n,i,s){n$(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&oP(e,r,!1),Aa(t,e,s);n=e.stateNode,Jq.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=ud(e,t.child,null,s),e.child=ud(e,null,l,s)):kn(t,e,l,s),e.memoizedState=n.state,i&&oP(e,r,!0),e.child}function i$(t){var e=t.stateNode;e.pendingContext?aP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aP(t,e.context,!1),eE(t,e.containerInfo)}function SP(t,e,r,n,i){return cd(),Kj(i),e.flags|=256,kn(t,e,r,n),e.child}var AS={dehydrated:null,treeContext:null,retryLane:0};function TS(t){return{baseLanes:t,cachePool:null,transitions:null}}function s$(t,e,r){var n=e.pendingProps,i=Jt.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Dt(Jt,i&1),t===null)return _S(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Zx(a,n,0,null),t=cc(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=TS(r),e.memoizedState=AS,t):lE(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Zq(t,e,a,n,l,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=zo(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=zo(l,s):(s=cc(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?TS(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=AS,n}return s=t.child,t=s.sibling,n=zo(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function lE(t,e){return e=Zx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function d0(t,e,r,n){return n!==null&&Kj(n),ud(e,t.child,null,r),t=lE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zq(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=O1(Error(pe(422))),d0(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Zx({mode:"visible",children:n.children},i,0,null),s=cc(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ud(e,t.child,null,a),e.child.memoizedState=TS(a),e.memoizedState=AS,s);if(!(e.mode&1))return d0(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(pe(419)),n=O1(s,n,void 0),d0(t,e,a,n)}if(l=(a&t.childLanes)!==0,Bn||l){if(n=Fr,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ca(t,i),as(n,t,i,-1))}return mE(),n=O1(Error(pe(421))),d0(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hK.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ui=Fo(i.nextSibling),hi=e,Qt=!0,Ji=null,t!==null&&(ki[Ni++]=ua,ki[Ni++]=da,ki[Ni++]=pc,ua=t.id,da=t.overflow,pc=e),e=lE(e,n.children),e.flags|=4096,e)}function kP(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),SS(t.return,e,r)}function R1(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function a$(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(kn(t,e,n.children,r),n=Jt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kP(t,r,e);else if(t.tag===19)kP(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Dt(Jt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Vy(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),R1(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Vy(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}R1(e,!0,r,null,s);break;case"together":R1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ey(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Aa(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),yc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,r=zo(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=zo(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function eK(t,e,r){switch(e.tag){case 3:i$(e),cd();break;case 5:I6(e);break;case 1:Hn(e.type)&&Ry(e);break;case 4:eE(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Dt($y,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Dt(Jt,Jt.current&1),e.flags|=128,null):r&e.child.childLanes?s$(t,e,r):(Dt(Jt,Jt.current&1),t=Aa(t,e,r),t!==null?t.sibling:null);Dt(Jt,Jt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return a$(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Dt(Jt,Jt.current),n)break;return null;case 22:case 23:return e.lanes=0,r$(t,e,r)}return Aa(t,e,r)}var o$,PS,l$,c$;o$=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};PS=function(){};l$=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ql(Rs.current);var s=null;switch(r){case"input":i=Z_(t,i),n=Z_(t,n),s=[];break;case"select":i=nr({},i,{value:void 0}),n=nr({},n,{value:void 0}),s=[];break;case"textarea":i=rS(t,i),n=rS(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Iy)}iS(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jm.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jm.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ft("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};c$=function(t,e,r,n){r!==n&&(e.flags|=4)};function pf(t,e){if(!Qt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function rn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function tK(t,e,r){var n=e.pendingProps;switch(qj(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(e),null;case 1:return Hn(e.type)&&Oy(),rn(e),null;case 3:return n=e.stateNode,dd(),Gt(Wn),Gt(gn),rE(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(c0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ji!==null&&(FS(Ji),Ji=null))),PS(t,e),rn(e),null;case 5:tE(e);var i=ql(Lm.current);if(r=e.type,t!==null&&e.stateNode!=null)l$(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(pe(166));return rn(e),null}if(t=ql(Rs.current),c0(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Es]=e,n[Dm]=s,t=(e.mode&1)!==0,r){case"dialog":Ft("cancel",n),Ft("close",n);break;case"iframe":case"object":case"embed":Ft("load",n);break;case"video":case"audio":for(i=0;i<$f.length;i++)Ft($f[i],n);break;case"source":Ft("error",n);break;case"img":case"image":case"link":Ft("error",n),Ft("load",n);break;case"details":Ft("toggle",n);break;case"input":OT(n,s),Ft("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ft("invalid",n);break;case"textarea":MT(n,s),Ft("invalid",n)}iS(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&l0(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&l0(n.textContent,l,t),i=["children",""+l]):jm.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ft("scroll",n)}switch(r){case"input":e0(n),RT(n,s,!0);break;case"textarea":e0(n),DT(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Iy)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$D(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Es]=e,t[Dm]=n,o$(t,e,!1,!1),e.stateNode=t;e:{switch(a=sS(r,n),r){case"dialog":Ft("cancel",t),Ft("close",t),i=n;break;case"iframe":case"object":case"embed":Ft("load",t),i=n;break;case"video":case"audio":for(i=0;i<$f.length;i++)Ft($f[i],t);i=n;break;case"source":Ft("error",t),i=n;break;case"img":case"image":case"link":Ft("error",t),Ft("load",t),i=n;break;case"details":Ft("toggle",t),i=n;break;case"input":OT(t,n),i=Z_(t,n),Ft("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=nr({},n,{value:void 0}),Ft("invalid",t);break;case"textarea":MT(t,n),i=rS(t,n),Ft("invalid",t);break;default:i=n}iS(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?VD(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&LD(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Em(t,c):typeof c=="number"&&Em(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(jm.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ft("scroll",t):c!=null&&Ij(t,s,c,a))}switch(r){case"input":e0(t),RT(t,n,!1);break;case"textarea":e0(t),DT(t);break;case"option":n.value!=null&&t.setAttribute("value",""+rl(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ou(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ou(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Iy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rn(e),null;case 6:if(t&&e.stateNode!=null)c$(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(pe(166));if(r=ql(Lm.current),ql(Rs.current),c0(e)){if(n=e.stateNode,r=e.memoizedProps,n[Es]=e,(s=n.nodeValue!==r)&&(t=hi,t!==null))switch(t.tag){case 3:l0(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&l0(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Es]=e,e.stateNode=n}return rn(e),null;case 13:if(Gt(Jt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qt&&ui!==null&&e.mode&1&&!(e.flags&128))E6(),cd(),e.flags|=98560,s=!1;else if(s=c0(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(pe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(pe(317));s[Es]=e}else cd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rn(e),s=!1}else Ji!==null&&(FS(Ji),Ji=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?jr===0&&(jr=3):mE())),e.updateQueue!==null&&(e.flags|=4),rn(e),null);case 4:return dd(),PS(t,e),t===null&&Rm(e.stateNode.containerInfo),rn(e),null;case 10:return Xj(e.type._context),rn(e),null;case 17:return Hn(e.type)&&Oy(),rn(e),null;case 19:if(Gt(Jt),s=e.memoizedState,s===null)return rn(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)pf(s,!1);else{if(jr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Vy(t),a!==null){for(e.flags|=128,pf(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Dt(Jt,Jt.current&1|2),e.child}t=t.sibling}s.tail!==null&&dr()>fd&&(e.flags|=128,n=!0,pf(s,!1),e.lanes=4194304)}else{if(!n)if(t=Vy(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),pf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Qt)return rn(e),null}else 2*dr()-s.renderingStartTime>fd&&r!==1073741824&&(e.flags|=128,n=!0,pf(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dr(),e.sibling=null,r=Jt.current,Dt(Jt,n?r&1|2:r&1),e):(rn(e),null);case 22:case 23:return fE(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ai&1073741824&&(rn(e),e.subtreeFlags&6&&(e.flags|=8192)):rn(e),null;case 24:return null;case 25:return null}throw Error(pe(156,e.tag))}function rK(t,e){switch(qj(e),e.tag){case 1:return Hn(e.type)&&Oy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dd(),Gt(Wn),Gt(gn),rE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tE(e),null;case 13:if(Gt(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));cd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gt(Jt),null;case 4:return dd(),null;case 10:return Xj(e.type._context),null;case 22:case 23:return fE(),null;case 24:return null;default:return null}}var h0=!1,cn=!1,nK=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function ju(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){or(t,e,n)}else r.current=null}function IS(t,e,r){try{r()}catch(n){or(t,e,n)}}var NP=!1;function iK(t,e){if(pS=Ay,t=m6(),Hj(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==r||i!==0&&d.nodeType!==3||(l=a+i),d!==s||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===r&&++u===i&&(l=a),f===s&&++h===n&&(c=a),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gS={focusedElem:t,selectionRange:r},Ay=!1,Pe=e;Pe!==null;)if(e=Pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pe=t;else for(;Pe!==null;){e=Pe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,x=e.stateNode,b=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Hi(e.type,v),y);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(k){or(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Pe=t;break}Pe=e.return}return g=NP,NP=!1,g}function Zf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&IS(e,r,s)}i=i.next}while(i!==n)}}function Xx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function OS(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function u$(t){var e=t.alternate;e!==null&&(t.alternate=null,u$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Es],delete e[Dm],delete e[xS],delete e[Vq],delete e[Bq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d$(t){return t.tag===5||t.tag===3||t.tag===4}function jP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function RS(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Iy));else if(n!==4&&(t=t.child,t!==null))for(RS(t,e,r),t=t.sibling;t!==null;)RS(t,e,r),t=t.sibling}function MS(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(MS(t,e,r),t=t.sibling;t!==null;)MS(t,e,r),t=t.sibling}var zr=null,Yi=!1;function oo(t,e,r){for(r=r.child;r!==null;)h$(t,e,r),r=r.sibling}function h$(t,e,r){if(Os&&typeof Os.onCommitFiberUnmount=="function")try{Os.onCommitFiberUnmount(zx,r)}catch{}switch(r.tag){case 5:cn||ju(r,e);case 6:var n=zr,i=Yi;zr=null,oo(t,e,r),zr=n,Yi=i,zr!==null&&(Yi?(t=zr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):zr.removeChild(r.stateNode));break;case 18:zr!==null&&(Yi?(t=zr,r=r.stateNode,t.nodeType===8?E1(t.parentNode,r):t.nodeType===1&&E1(t,r),Pm(t)):E1(zr,r.stateNode));break;case 4:n=zr,i=Yi,zr=r.stateNode.containerInfo,Yi=!0,oo(t,e,r),zr=n,Yi=i;break;case 0:case 11:case 14:case 15:if(!cn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&IS(r,e,a),i=i.next}while(i!==n)}oo(t,e,r);break;case 1:if(!cn&&(ju(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){or(r,e,l)}oo(t,e,r);break;case 21:oo(t,e,r);break;case 22:r.mode&1?(cn=(n=cn)||r.memoizedState!==null,oo(t,e,r),cn=n):oo(t,e,r);break;default:oo(t,e,r)}}function EP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new nK),e.forEach(function(n){var i=fK.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function zi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:zr=l.stateNode,Yi=!1;break e;case 3:zr=l.stateNode.containerInfo,Yi=!0;break e;case 4:zr=l.stateNode.containerInfo,Yi=!0;break e}l=l.return}if(zr===null)throw Error(pe(160));h$(s,a,i),zr=null,Yi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){or(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f$(e,t),e=e.sibling}function f$(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zi(e,t),bs(t),n&4){try{Zf(3,t,t.return),Xx(3,t)}catch(v){or(t,t.return,v)}try{Zf(5,t,t.return)}catch(v){or(t,t.return,v)}}break;case 1:zi(e,t),bs(t),n&512&&r!==null&&ju(r,r.return);break;case 5:if(zi(e,t),bs(t),n&512&&r!==null&&ju(r,r.return),t.flags&32){var i=t.stateNode;try{Em(i,"")}catch(v){or(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&MD(i,s),sS(l,a);var u=sS(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];h==="style"?VD(i,d):h==="dangerouslySetInnerHTML"?LD(i,d):h==="children"?Em(i,d):Ij(i,h,d,u)}switch(l){case"input":eS(i,s);break;case"textarea":DD(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ou(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ou(i,!!s.multiple,s.defaultValue,!0):Ou(i,!!s.multiple,s.multiple?[]:"",!1))}i[Dm]=s}catch(v){or(t,t.return,v)}}break;case 6:if(zi(e,t),bs(t),n&4){if(t.stateNode===null)throw Error(pe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){or(t,t.return,v)}}break;case 3:if(zi(e,t),bs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Pm(e.containerInfo)}catch(v){or(t,t.return,v)}break;case 4:zi(e,t),bs(t);break;case 13:zi(e,t),bs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dE=dr())),n&4&&EP(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(cn=(u=cn)||h,zi(e,t),cn=u):zi(e,t),bs(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Pe=t,h=t.child;h!==null;){for(d=Pe=h;Pe!==null;){switch(f=Pe,m=f.child,f.tag){case 0:case 11:case 14:case 15:Zf(4,f,f.return);break;case 1:ju(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){or(n,r,v)}}break;case 5:ju(f,f.return);break;case 22:if(f.memoizedState!==null){AP(d);continue}}m!==null?(m.return=f,Pe=m):AP(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=FD("display",a))}catch(v){or(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){or(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zi(e,t),bs(t),n&4&&EP(t);break;case 21:break;default:zi(e,t),bs(t)}}function bs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(d$(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Em(i,""),n.flags&=-33);var s=jP(t);MS(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,l=jP(t);RS(t,l,a);break;default:throw Error(pe(161))}}catch(c){or(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sK(t,e,r){Pe=t,m$(t)}function m$(t,e,r){for(var n=(t.mode&1)!==0;Pe!==null;){var i=Pe,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||h0;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||cn;l=h0;var u=cn;if(h0=a,(cn=c)&&!u)for(Pe=i;Pe!==null;)a=Pe,c=a.child,a.tag===22&&a.memoizedState!==null?TP(i):c!==null?(c.return=a,Pe=c):TP(i);for(;s!==null;)Pe=s,m$(s),s=s.sibling;Pe=i,h0=l,cn=u}CP(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Pe=s):CP(t)}}function CP(t){for(;Pe!==null;){var e=Pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||Xx(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!cn)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Hi(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hP(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}hP(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Pm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}cn||e.flags&512&&OS(e)}catch(f){or(e,e.return,f)}}if(e===t){Pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Pe=r;break}Pe=e.return}}function AP(t){for(;Pe!==null;){var e=Pe;if(e===t){Pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Pe=r;break}Pe=e.return}}function TP(t){for(;Pe!==null;){var e=Pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Xx(4,e)}catch(c){or(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){or(e,i,c)}}var s=e.return;try{OS(e)}catch(c){or(e,s,c)}break;case 5:var a=e.return;try{OS(e)}catch(c){or(e,a,c)}}}catch(c){or(e,e.return,c)}if(e===t){Pe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Pe=l;break}Pe=e.return}}var aK=Math.ceil,zy=Wa.ReactCurrentDispatcher,cE=Wa.ReactCurrentOwner,Pi=Wa.ReactCurrentBatchConfig,ft=0,Fr=null,pr=null,qr=0,ai=0,Eu=vl(0),jr=0,Um=null,yc=0,Jx=0,uE=0,em=null,Ln=null,dE=0,fd=1/0,sa=null,Wy=!1,DS=null,Bo=null,f0=!1,Po=null,Hy=0,tm=0,$S=null,ty=-1,ry=0;function Tn(){return ft&6?dr():ty!==-1?ty:ty=dr()}function Uo(t){return t.mode&1?ft&2&&qr!==0?qr&-qr:zq.transition!==null?(ry===0&&(ry=JD()),ry):(t=Nt,t!==0||(t=window.event,t=t===void 0?16:s6(t.type)),t):1}function as(t,e,r,n){if(50<tm)throw tm=0,$S=null,Error(pe(185));Yp(t,r,n),(!(ft&2)||t!==Fr)&&(t===Fr&&(!(ft&2)&&(Jx|=r),jr===4&&bo(t,qr)),Gn(t,n),r===1&&ft===0&&!(e.mode&1)&&(fd=dr()+500,Kx&&xl()))}function Gn(t,e){var r=t.callbackNode;zG(t,e);var n=Cy(t,t===Fr?qr:0);if(n===0)r!==null&&FT(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&FT(r),e===1)t.tag===0?Uq(PP.bind(null,t)):k6(PP.bind(null,t)),Lq(function(){!(ft&6)&&xl()}),r=null;else{switch(ZD(n)){case 1:r=$j;break;case 4:r=QD;break;case 16:r=Ey;break;case 536870912:r=XD;break;default:r=Ey}r=_$(r,p$.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function p$(t,e){if(ty=-1,ry=0,ft&6)throw Error(pe(327));var r=t.callbackNode;if(Lu()&&t.callbackNode!==r)return null;var n=Cy(t,t===Fr?qr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Gy(t,n);else{e=n;var i=ft;ft|=2;var s=y$();(Fr!==t||qr!==e)&&(sa=null,fd=dr()+500,lc(t,e));do try{cK();break}catch(l){g$(t,l)}while(!0);Qj(),zy.current=s,ft=i,pr!==null?e=0:(Fr=null,qr=0,e=jr)}if(e!==0){if(e===2&&(i=uS(t),i!==0&&(n=i,e=LS(t,i))),e===1)throw r=Um,lc(t,0),bo(t,n),Gn(t,dr()),r;if(e===6)bo(t,n);else{if(i=t.current.alternate,!(n&30)&&!oK(i)&&(e=Gy(t,n),e===2&&(s=uS(t),s!==0&&(n=s,e=LS(t,s))),e===1))throw r=Um,lc(t,0),bo(t,n),Gn(t,dr()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(pe(345));case 2:$l(t,Ln,sa);break;case 3:if(bo(t,n),(n&130023424)===n&&(e=dE+500-dr(),10<e)){if(Cy(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Tn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vS($l.bind(null,t,Ln,sa),e);break}$l(t,Ln,sa);break;case 4:if(bo(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-ss(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=dr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*aK(n/1960))-n,10<n){t.timeoutHandle=vS($l.bind(null,t,Ln,sa),n);break}$l(t,Ln,sa);break;case 5:$l(t,Ln,sa);break;default:throw Error(pe(329))}}}return Gn(t,dr()),t.callbackNode===r?p$.bind(null,t):null}function LS(t,e){var r=em;return t.current.memoizedState.isDehydrated&&(lc(t,e).flags|=256),t=Gy(t,e),t!==2&&(e=Ln,Ln=r,e!==null&&FS(e)),t}function FS(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function oK(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!fs(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bo(t,e){for(e&=~uE,e&=~Jx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ss(e),n=1<<r;t[r]=-1,e&=~n}}function PP(t){if(ft&6)throw Error(pe(327));Lu();var e=Cy(t,0);if(!(e&1))return Gn(t,dr()),null;var r=Gy(t,e);if(t.tag!==0&&r===2){var n=uS(t);n!==0&&(e=n,r=LS(t,n))}if(r===1)throw r=Um,lc(t,0),bo(t,e),Gn(t,dr()),r;if(r===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$l(t,Ln,sa),Gn(t,dr()),null}function hE(t,e){var r=ft;ft|=1;try{return t(e)}finally{ft=r,ft===0&&(fd=dr()+500,Kx&&xl())}}function vc(t){Po!==null&&Po.tag===0&&!(ft&6)&&Lu();var e=ft;ft|=1;var r=Pi.transition,n=Nt;try{if(Pi.transition=null,Nt=1,t)return t()}finally{Nt=n,Pi.transition=r,ft=e,!(ft&6)&&xl()}}function fE(){ai=Eu.current,Gt(Eu)}function lc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,$q(r)),pr!==null)for(r=pr.return;r!==null;){var n=r;switch(qj(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Oy();break;case 3:dd(),Gt(Wn),Gt(gn),rE();break;case 5:tE(n);break;case 4:dd();break;case 13:Gt(Jt);break;case 19:Gt(Jt);break;case 10:Xj(n.type._context);break;case 22:case 23:fE()}r=r.return}if(Fr=t,pr=t=zo(t.current,null),qr=ai=e,jr=0,Um=null,uE=Jx=yc=0,Ln=em=null,Gl!==null){for(e=0;e<Gl.length;e++)if(r=Gl[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Gl=null}return t}function g$(t,e){do{var r=pr;try{if(Qj(),J0.current=Uy,By){for(var n=rr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}By=!1}if(gc=0,Dr=kr=rr=null,Jf=!1,Fm=0,cE.current=null,r===null||r.return===null){jr=1,Um=e,pr=null;break}e:{var s=t,a=r.return,l=r,c=e;if(e=qr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=vP(a);if(m!==null){m.flags&=-257,xP(m,a,l,s,e),m.mode&1&&yP(s,u,e),e=m,c=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(c),e.updateQueue=v}else g.add(c);break e}else{if(!(e&1)){yP(s,u,e),mE();break e}c=Error(pe(426))}}else if(Qt&&l.mode&1){var y=vP(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),xP(y,a,l,s,e),Kj(hd(c,l));break e}}s=c=hd(c,l),jr!==4&&(jr=2),em===null?em=[s]:em.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Z6(s,c,e);dP(s,x);break e;case 1:l=c;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Bo===null||!Bo.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=e$(s,l,e);dP(s,k);break e}}s=s.return}while(s!==null)}x$(r)}catch(S){e=S,pr===r&&r!==null&&(pr=r=r.return);continue}break}while(!0)}function y$(){var t=zy.current;return zy.current=Uy,t===null?Uy:t}function mE(){(jr===0||jr===3||jr===2)&&(jr=4),Fr===null||!(yc&268435455)&&!(Jx&268435455)||bo(Fr,qr)}function Gy(t,e){var r=ft;ft|=2;var n=y$();(Fr!==t||qr!==e)&&(sa=null,lc(t,e));do try{lK();break}catch(i){g$(t,i)}while(!0);if(Qj(),ft=r,zy.current=n,pr!==null)throw Error(pe(261));return Fr=null,qr=0,jr}function lK(){for(;pr!==null;)v$(pr)}function cK(){for(;pr!==null&&!RG();)v$(pr)}function v$(t){var e=w$(t.alternate,t,ai);t.memoizedProps=t.pendingProps,e===null?x$(t):pr=e,cE.current=null}function x$(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=rK(r,e),r!==null){r.flags&=32767,pr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jr=6,pr=null;return}}else if(r=tK(r,e,ai),r!==null){pr=r;return}if(e=e.sibling,e!==null){pr=e;return}pr=e=t}while(e!==null);jr===0&&(jr=5)}function $l(t,e,r){var n=Nt,i=Pi.transition;try{Pi.transition=null,Nt=1,uK(t,e,r,n)}finally{Pi.transition=i,Nt=n}return null}function uK(t,e,r,n){do Lu();while(Po!==null);if(ft&6)throw Error(pe(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(WG(t,s),t===Fr&&(pr=Fr=null,qr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||f0||(f0=!0,_$(Ey,function(){return Lu(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Pi.transition,Pi.transition=null;var a=Nt;Nt=1;var l=ft;ft|=4,cE.current=null,iK(t,r),f$(r,t),Tq(gS),Ay=!!pS,gS=pS=null,t.current=r,sK(r),MG(),ft=l,Nt=a,Pi.transition=s}else t.current=r;if(f0&&(f0=!1,Po=t,Hy=i),s=t.pendingLanes,s===0&&(Bo=null),LG(r.stateNode),Gn(t,dr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Wy)throw Wy=!1,t=DS,DS=null,t;return Hy&1&&t.tag!==0&&Lu(),s=t.pendingLanes,s&1?t===$S?tm++:(tm=0,$S=t):tm=0,xl(),null}function Lu(){if(Po!==null){var t=ZD(Hy),e=Pi.transition,r=Nt;try{if(Pi.transition=null,Nt=16>t?16:t,Po===null)var n=!1;else{if(t=Po,Po=null,Hy=0,ft&6)throw Error(pe(331));var i=ft;for(ft|=4,Pe=t.current;Pe!==null;){var s=Pe,a=s.child;if(Pe.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Pe=u;Pe!==null;){var h=Pe;switch(h.tag){case 0:case 11:case 15:Zf(8,h,s)}var d=h.child;if(d!==null)d.return=h,Pe=d;else for(;Pe!==null;){h=Pe;var f=h.sibling,m=h.return;if(u$(h),h===u){Pe=null;break}if(f!==null){f.return=m,Pe=f;break}Pe=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}Pe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Pe=a;else e:for(;Pe!==null;){if(s=Pe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zf(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Pe=x;break e}Pe=s.return}}var b=t.current;for(Pe=b;Pe!==null;){a=Pe;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Pe=w;else e:for(a=b;Pe!==null;){if(l=Pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xx(9,l)}}catch(S){or(l,l.return,S)}if(l===a){Pe=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Pe=k;break e}Pe=l.return}}if(ft=i,xl(),Os&&typeof Os.onPostCommitFiberRoot=="function")try{Os.onPostCommitFiberRoot(zx,t)}catch{}n=!0}return n}finally{Nt=r,Pi.transition=e}}return!1}function IP(t,e,r){e=hd(r,e),e=Z6(t,e,1),t=Vo(t,e,1),e=Tn(),t!==null&&(Yp(t,1,e),Gn(t,e))}function or(t,e,r){if(t.tag===3)IP(t,t,r);else for(;e!==null;){if(e.tag===3){IP(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bo===null||!Bo.has(n))){t=hd(r,t),t=e$(e,t,1),e=Vo(e,t,1),t=Tn(),e!==null&&(Yp(e,1,t),Gn(e,t));break}}e=e.return}}function dK(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&r,Fr===t&&(qr&r)===r&&(jr===4||jr===3&&(qr&130023424)===qr&&500>dr()-dE?lc(t,0):uE|=r),Gn(t,e)}function b$(t,e){e===0&&(t.mode&1?(e=n0,n0<<=1,!(n0&130023424)&&(n0=4194304)):e=1);var r=Tn();t=Ca(t,e),t!==null&&(Yp(t,e,r),Gn(t,r))}function hK(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),b$(t,r)}function fK(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(e),b$(t,r)}var w$;w$=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)Bn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Bn=!1,eK(t,e,r);Bn=!!(t.flags&131072)}else Bn=!1,Qt&&e.flags&1048576&&N6(e,Dy,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ey(t,e),t=e.pendingProps;var i=ld(e,gn.current);$u(e,r),i=iE(null,e,n,t,i,r);var s=sE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hn(n)?(s=!0,Ry(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zj(e),i.updater=Qx,e.stateNode=i,i._reactInternals=e,NS(e,n,t,r),e=CS(null,e,n,!0,s,r)):(e.tag=0,Qt&&s&&Gj(e),kn(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ey(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=pK(n),t=Hi(n,t),i){case 0:e=ES(null,e,n,t,r);break e;case 1:e=_P(null,e,n,t,r);break e;case 11:e=bP(null,e,n,t,r);break e;case 14:e=wP(null,e,n,Hi(n.type,t),r);break e}throw Error(pe(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hi(n,i),ES(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hi(n,i),_P(t,e,n,i,r);case 3:e:{if(i$(e),t===null)throw Error(pe(387));n=e.pendingProps,s=e.memoizedState,i=s.element,P6(t,e),Fy(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hd(Error(pe(423)),e),e=SP(t,e,n,r,i);break e}else if(n!==i){i=hd(Error(pe(424)),e),e=SP(t,e,n,r,i);break e}else for(ui=Fo(e.stateNode.containerInfo.firstChild),hi=e,Qt=!0,Ji=null,r=A6(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(cd(),n===i){e=Aa(t,e,r);break e}kn(t,e,n,r)}e=e.child}return e;case 5:return I6(e),t===null&&_S(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,yS(n,i)?a=null:s!==null&&yS(n,s)&&(e.flags|=32),n$(t,e),kn(t,e,a,r),e.child;case 6:return t===null&&_S(e),null;case 13:return s$(t,e,r);case 4:return eE(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ud(e,null,n,r):kn(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hi(n,i),bP(t,e,n,i,r);case 7:return kn(t,e,e.pendingProps,r),e.child;case 8:return kn(t,e,e.pendingProps.children,r),e.child;case 12:return kn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Dt($y,n._currentValue),n._currentValue=a,s!==null)if(fs(s.value,a)){if(s.children===i.children&&!Wn.current){e=Aa(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=ba(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),SS(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(pe(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),SS(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}kn(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,$u(e,r),i=Oi(i),n=n(i),e.flags|=1,kn(t,e,n,r),e.child;case 14:return n=e.type,i=Hi(n,e.pendingProps),i=Hi(n.type,i),wP(t,e,n,i,r);case 15:return t$(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hi(n,i),ey(t,e),e.tag=1,Hn(n)?(t=!0,Ry(e)):t=!1,$u(e,r),J6(e,n,i),NS(e,n,i,r),CS(null,e,n,!0,t,r);case 19:return a$(t,e,r);case 22:return r$(t,e,r)}throw Error(pe(156,e.tag))};function _$(t,e){return YD(t,e)}function mK(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(t,e,r,n){return new mK(t,e,r,n)}function pE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pK(t){if(typeof t=="function")return pE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rj)return 11;if(t===Mj)return 14}return 2}function zo(t,e){var r=t.alternate;return r===null?(r=Ci(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ny(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")pE(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case yu:return cc(r.children,i,s,e);case Oj:a=8,i|=8;break;case Y_:return t=Ci(12,r,e,i|2),t.elementType=Y_,t.lanes=s,t;case Q_:return t=Ci(13,r,e,i),t.elementType=Q_,t.lanes=s,t;case X_:return t=Ci(19,r,e,i),t.elementType=X_,t.lanes=s,t;case ID:return Zx(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TD:a=10;break e;case PD:a=9;break e;case Rj:a=11;break e;case Mj:a=14;break e;case go:a=16,n=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=Ci(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function cc(t,e,r,n){return t=Ci(7,t,n,e),t.lanes=r,t}function Zx(t,e,r,n){return t=Ci(22,t,n,e),t.elementType=ID,t.lanes=r,t.stateNode={isHidden:!1},t}function M1(t,e,r){return t=Ci(6,t,null,e),t.lanes=r,t}function D1(t,e,r){return e=Ci(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gK(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g1(0),this.expirationTimes=g1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g1(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gE(t,e,r,n,i,s,a,l,c){return t=new gK(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ci(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zj(s),t}function yK(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function S$(t){if(!t)return nl;t=t._reactInternals;e:{if($c(t)!==t||t.tag!==1)throw Error(pe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pe(171))}if(t.tag===1){var r=t.type;if(Hn(r))return S6(t,r,e)}return e}function k$(t,e,r,n,i,s,a,l,c){return t=gE(r,n,!0,t,i,s,a,l,c),t.context=S$(null),r=t.current,n=Tn(),i=Uo(r),s=ba(n,i),s.callback=e??null,Vo(r,s,i),t.current.lanes=i,Yp(t,i,n),Gn(t,n),t}function eb(t,e,r,n){var i=e.current,s=Tn(),a=Uo(i);return r=S$(r),e.context===null?e.context=r:e.pendingContext=r,e=ba(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Vo(i,e,a),t!==null&&(as(t,i,a,s),X0(t,i,a)),a}function qy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function OP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function yE(t,e){OP(t,e),(t=t.alternate)&&OP(t,e)}function vK(){return null}var N$=typeof reportError=="function"?reportError:function(t){console.error(t)};function vE(t){this._internalRoot=t}tb.prototype.render=vE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));eb(t,e,null,null)};tb.prototype.unmount=vE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vc(function(){eb(null,t,null,null)}),e[Ea]=null}};function tb(t){this._internalRoot=t}tb.prototype.unstable_scheduleHydration=function(t){if(t){var e=r6();t={blockedOn:null,target:t,priority:e};for(var r=0;r<xo.length&&e!==0&&e<xo[r].priority;r++);xo.splice(r,0,t),r===0&&i6(t)}};function xE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function RP(){}function xK(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=qy(a);s.call(u)}}var a=k$(e,n,t,0,null,!1,!1,"",RP);return t._reactRootContainer=a,t[Ea]=a.current,Rm(t.nodeType===8?t.parentNode:t),vc(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=qy(c);l.call(u)}}var c=gE(t,0,!1,null,null,!1,!1,"",RP);return t._reactRootContainer=c,t[Ea]=c.current,Rm(t.nodeType===8?t.parentNode:t),vc(function(){eb(e,c,r,n)}),c}function nb(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=qy(a);l.call(c)}}eb(e,a,t,i)}else a=xK(r,e,t,i,n);return qy(a)}e6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Df(e.pendingLanes);r!==0&&(Lj(e,r|1),Gn(e,dr()),!(ft&6)&&(fd=dr()+500,xl()))}break;case 13:vc(function(){var n=Ca(t,1);if(n!==null){var i=Tn();as(n,t,1,i)}}),yE(t,1)}};Fj=function(t){if(t.tag===13){var e=Ca(t,134217728);if(e!==null){var r=Tn();as(e,t,134217728,r)}yE(t,134217728)}};t6=function(t){if(t.tag===13){var e=Uo(t),r=Ca(t,e);if(r!==null){var n=Tn();as(r,t,e,n)}yE(t,e)}};r6=function(){return Nt};n6=function(t,e){var r=Nt;try{return Nt=t,e()}finally{Nt=r}};oS=function(t,e,r){switch(e){case"input":if(eS(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=qx(n);if(!i)throw Error(pe(90));RD(n),eS(n,i)}}}break;case"textarea":DD(t,r);break;case"select":e=r.value,e!=null&&Ou(t,!!r.multiple,e,!1)}};zD=hE;WD=vc;var bK={usingClientEntryPoint:!1,Events:[Xp,wu,qx,BD,UD,hE]},gf={findFiberByHostInstance:Hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wK={bundleType:gf.bundleType,version:gf.version,rendererPackageName:gf.rendererPackageName,rendererConfig:gf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qD(t),t===null?null:t.stateNode},findFiberByHostInstance:gf.findFiberByHostInstance||vK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m0.isDisabled&&m0.supportsFiber)try{zx=m0.inject(wK),Os=m0}catch{}}vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bK;vi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xE(e))throw Error(pe(200));return yK(t,e,null,r)};vi.createRoot=function(t,e){if(!xE(t))throw Error(pe(299));var r=!1,n="",i=N$;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gE(t,1,!1,null,null,r,!1,n,i),t[Ea]=e.current,Rm(t.nodeType===8?t.parentNode:t),new vE(e)};vi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=qD(e),t=t===null?null:t.stateNode,t};vi.flushSync=function(t){return vc(t)};vi.hydrate=function(t,e,r){if(!rb(e))throw Error(pe(200));return nb(null,t,e,!0,r)};vi.hydrateRoot=function(t,e,r){if(!xE(t))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=N$;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=k$(e,null,t,1,r??null,i,!1,s,a),t[Ea]=e.current,Rm(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new tb(e)};vi.render=function(t,e,r){if(!rb(e))throw Error(pe(200));return nb(null,t,e,!1,r)};vi.unmountComponentAtNode=function(t){if(!rb(t))throw Error(pe(40));return t._reactRootContainer?(vc(function(){nb(null,null,t,!1,function(){t._reactRootContainer=null,t[Ea]=null})}),!0):!1};vi.unstable_batchedUpdates=hE;vi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!rb(r))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return nb(t,e,r,!1,n)};vi.version="18.3.1-next-f1338f8080-20240426";function j$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j$)}catch(t){console.error(t)}}j$(),jD.exports=vi;var Zp=jD.exports;const E$=bt(Zp);var C$,MP=Zp;C$=MP.createRoot,MP.hydrateRoot;const _K=1,SK=1e6;let $1=0;function kK(){return $1=($1+1)%Number.MAX_SAFE_INTEGER,$1.toString()}const L1=new Map,DP=t=>{if(L1.has(t))return;const e=setTimeout(()=>{L1.delete(t),rm({type:"REMOVE_TOAST",toastId:t})},SK);L1.set(t,e)},NK=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,_K)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?DP(r):t.toasts.forEach(n=>{DP(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},iy=[];let sy={toasts:[]};function rm(t){sy=NK(sy,t),iy.forEach(e=>{e(sy)})}function Ll({...t}){const e=kK(),r=i=>rm({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>rm({type:"DISMISS_TOAST",toastId:e});return rm({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:r}}function Ks(){const[t,e]=E.useState(sy);return E.useEffect(()=>(iy.push(e),()=>{const r=iy.indexOf(e);r>-1&&iy.splice(r,1)}),[t]),{...t,toast:Ll,dismiss:r=>rm({type:"DISMISS_TOAST",toastId:r})}}function ht(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function jK(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function A$(...t){return e=>t.forEach(r=>jK(r,e))}function yn(...t){return E.useCallback(A$(...t),t)}function EK(t,e=[]){let r=[];function n(s,a){const l=E.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:f,children:m,...g}=d,v=(f==null?void 0:f[t][c])||l,y=E.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:m})}function h(d,f){const m=(f==null?void 0:f[t][c])||l,g=E.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(l){const c=(l==null?void 0:l[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,CK(i,...e)]}function CK(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var md=E.forwardRef((t,e)=>{const{children:r,...n}=t,i=E.Children.toArray(r),s=i.find(AK);if(s){const a=s.props.children,l=i.map(c=>c===s?E.Children.count(a)>1?E.Children.only(null):E.isValidElement(a)?a.props.children:null:c);return o.jsx(VS,{...n,ref:e,children:E.isValidElement(a)?E.cloneElement(a,void 0,l):null})}return o.jsx(VS,{...n,ref:e,children:r})});md.displayName="Slot";var VS=E.forwardRef((t,e)=>{const{children:r,...n}=t;if(E.isValidElement(r)){const i=PK(r);return E.cloneElement(r,{...TK(n,r.props),ref:e?A$(e,i):i})}return E.Children.count(r)>1?E.Children.only(null):null});VS.displayName="SlotClone";var T$=({children:t})=>o.jsx(o.Fragment,{children:t});function AK(t){return E.isValidElement(t)&&t.type===T$}function TK(t,e){const r={...e};for(const n in e){const i=t[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...l)=>{s(...l),i(...l)}:i&&(r[n]=i):n==="style"?r[n]={...i,...s}:n==="className"&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...t,...r}}function PK(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function P$(t){const e=t+"CollectionProvider",[r,n]=EK(e),[i,s]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:g,children:v}=m,y=D.useRef(null),x=D.useRef(new Map).current;return o.jsx(i,{scope:g,itemMap:x,collectionRef:y,children:v})};a.displayName=e;const l=t+"CollectionSlot",c=D.forwardRef((m,g)=>{const{scope:v,children:y}=m,x=s(l,v),b=yn(g,x.collectionRef);return o.jsx(md,{ref:b,children:y})});c.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",d=D.forwardRef((m,g)=>{const{scope:v,children:y,...x}=m,b=D.useRef(null),w=yn(g,b),k=s(u,v);return D.useEffect(()=>(k.itemMap.set(b,{ref:b,...x}),()=>void k.itemMap.delete(b))),o.jsx(md,{[h]:"",ref:w,children:y})});d.displayName=u;function f(m){const g=s(t+"CollectionConsumer",m);return D.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((k,S)=>x.indexOf(k.ref.current)-x.indexOf(S.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:c,ItemSlot:d},f,n]}function IK(t,e){const r=E.createContext(e),n=s=>{const{children:a,...l}=s,c=E.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:a})};n.displayName=t+"Provider";function i(s){const a=E.useContext(r);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[n,i]}function eg(t,e=[]){let r=[];function n(s,a){const l=E.createContext(a),c=r.length;r=[...r,a];const u=d=>{var x;const{scope:f,children:m,...g}=d,v=((x=f==null?void 0:f[t])==null?void 0:x[c])||l,y=E.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:m})};u.displayName=s+"Provider";function h(d,f){var v;const m=((v=f==null?void 0:f[t])==null?void 0:v[c])||l,g=E.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,h]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(l){const c=(l==null?void 0:l[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,OK(i,...e)]}function OK(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var RK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],mt=RK.reduce((t,e)=>{const r=E.forwardRef((n,i)=>{const{asChild:s,...a}=n,l=s?md:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function I$(t,e){t&&Zp.flushSync(()=>t.dispatchEvent(e))}function Qn(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function MK(t,e=globalThis==null?void 0:globalThis.document){const r=Qn(t);E.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var DK="DismissableLayer",BS="dismissableLayer.update",$K="dismissableLayer.pointerDownOutside",LK="dismissableLayer.focusOutside",$P,O$=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ib=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...c}=t,u=E.useContext(O$),[h,d]=E.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=E.useState({}),g=yn(e,N=>d(N)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(y),b=h?v.indexOf(h):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,k=b>=x,S=VK(N=>{const _=N.target,T=[...u.branches].some(j=>j.contains(_));!k||T||(i==null||i(N),a==null||a(N),N.defaultPrevented||l==null||l())},f),P=BK(N=>{const _=N.target;[...u.branches].some(j=>j.contains(_))||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},f);return MK(N=>{b===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},f),E.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&($P=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),LP(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=$P)}},[h,f,r,u]),E.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),LP())},[h,u]),E.useEffect(()=>{const N=()=>m({});return document.addEventListener(BS,N),()=>document.removeEventListener(BS,N)},[]),o.jsx(mt.div,{...c,ref:g,style:{pointerEvents:w?k?"auto":"none":void 0,...t.style},onFocusCapture:ht(t.onFocusCapture,P.onFocusCapture),onBlurCapture:ht(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:ht(t.onPointerDownCapture,S.onPointerDownCapture)})});ib.displayName=DK;var FK="DismissableLayerBranch",R$=E.forwardRef((t,e)=>{const r=E.useContext(O$),n=E.useRef(null),i=yn(e,n);return E.useEffect(()=>{const s=n.current;if(s)return r.branches.add(s),()=>{r.branches.delete(s)}},[r.branches]),o.jsx(mt.div,{...t,ref:i})});R$.displayName=FK;function VK(t,e=globalThis==null?void 0:globalThis.document){const r=Qn(t),n=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=l=>{if(l.target&&!n.current){let c=function(){M$($K,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function BK(t,e=globalThis==null?void 0:globalThis.document){const r=Qn(t),n=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!n.current&&M$(LK,r,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function LP(){const t=new CustomEvent(BS);document.dispatchEvent(t)}function M$(t,e,r,{discrete:n}){const i=r.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?I$(i,s):i.dispatchEvent(s)}var UK=ib,zK=R$,Bs=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},WK="Portal",bE=E.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[i,s]=E.useState(!1);Bs(()=>s(!0),[]);const a=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?E$.createPortal(o.jsx(mt.div,{...n,ref:e}),a):null});bE.displayName=WK;function HK(t,e){return E.useReducer((r,n)=>e[r][n]??r,t)}var Lc=t=>{const{present:e,children:r}=t,n=GK(e),i=typeof r=="function"?r({present:n.isPresent}):E.Children.only(r),s=yn(n.ref,qK(i));return typeof r=="function"||n.isPresent?E.cloneElement(i,{ref:s}):null};Lc.displayName="Presence";function GK(t){const[e,r]=E.useState(),n=E.useRef({}),i=E.useRef(t),s=E.useRef("none"),a=t?"mounted":"unmounted",[l,c]=HK(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const u=p0(n.current);s.current=l==="mounted"?u:"none"},[l]),Bs(()=>{const u=n.current,h=i.current;if(h!==t){const f=s.current,m=p0(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Bs(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,d=m=>{const v=p0(n.current).includes(m.animationName);if(m.target===e&&v&&(c("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=m=>{m.target===e&&(s.current=p0(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:E.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function p0(t){return(t==null?void 0:t.animationName)||"none"}function qK(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function sb({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=KK({defaultProp:e,onChange:r}),s=t!==void 0,a=s?t:n,l=Qn(r),c=E.useCallback(u=>{if(s){const d=typeof u=="function"?u(t):u;d!==t&&l(d)}else i(u)},[s,t,i,l]);return[a,c]}function KK({defaultProp:t,onChange:e}){const r=E.useState(t),[n]=r,i=E.useRef(n),s=Qn(e);return E.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}var YK="VisuallyHidden",ab=E.forwardRef((t,e)=>o.jsx(mt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));ab.displayName=YK;var QK=ab,wE="ToastProvider",[_E,XK,JK]=P$("Toast"),[D$,j3e]=eg("Toast",[JK]),[ZK,ob]=D$(wE),$$=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=t,[l,c]=E.useState(null),[u,h]=E.useState(0),d=E.useRef(!1),f=E.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${wE}\`. Expected non-empty \`string\`.`),o.jsx(_E.Provider,{scope:e,children:o.jsx(ZK,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:E.useCallback(()=>h(m=>m+1),[]),onToastRemove:E.useCallback(()=>h(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:a})})};$$.displayName=wE;var L$="ToastViewport",eY=["F8"],US="toast.viewportPause",zS="toast.viewportResume",F$=E.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=eY,label:i="Notifications ({hotkey})",...s}=t,a=ob(L$,r),l=XK(r),c=E.useRef(null),u=E.useRef(null),h=E.useRef(null),d=E.useRef(null),f=yn(e,d,a.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;E.useEffect(()=>{const y=x=>{var w;n.length!==0&&n.every(k=>x[k]||x.code===k)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),E.useEffect(()=>{const y=c.current,x=d.current;if(g&&y&&x){const b=()=>{if(!a.isClosePausedRef.current){const P=new CustomEvent(US);x.dispatchEvent(P),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const P=new CustomEvent(zS);x.dispatchEvent(P),a.isClosePausedRef.current=!1}},k=P=>{!y.contains(P.relatedTarget)&&w()},S=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",b),y.addEventListener("focusout",k),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",S),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",k),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,a.isClosePausedRef]);const v=E.useCallback(({tabbingDirection:y})=>{const b=l().map(w=>{const k=w.ref.current,S=[k,...fY(k)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?b.reverse():b).flat()},[l]);return E.useEffect(()=>{const y=d.current;if(y){const x=b=>{var S,P,N;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const _=document.activeElement,T=b.shiftKey;if(b.target===y&&T){(S=u.current)==null||S.focus();return}const I=v({tabbingDirection:T?"backwards":"forwards"}),R=I.findIndex($=>$===_);F1(I.slice(R+1))?b.preventDefault():T?(P=u.current)==null||P.focus():(N=h.current)==null||N.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[l,v]),o.jsxs(zK,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&o.jsx(WS,{ref:u,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});F1(y)}}),o.jsx(_E.Slot,{scope:r,children:o.jsx(mt.ol,{tabIndex:-1,...s,ref:f})}),g&&o.jsx(WS,{ref:h,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});F1(y)}})]})});F$.displayName=L$;var V$="ToastFocusProxy",WS=E.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=t,s=ob(V$,r);return o.jsx(ab,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&n()}})});WS.displayName=V$;var lb="Toast",tY="toast.swipeStart",rY="toast.swipeMove",nY="toast.swipeCancel",iY="toast.swipeEnd",B$=E.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:s,...a}=t,[l=!0,c]=sb({prop:n,defaultProp:i,onChange:s});return o.jsx(Lc,{present:r||l,children:o.jsx(oY,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:Qn(t.onPause),onResume:Qn(t.onResume),onSwipeStart:ht(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ht(t.onSwipeMove,u=>{const{x:h,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ht(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ht(t.onSwipeEnd,u=>{const{x:h,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});B$.displayName=lb;var[sY,aY]=D$(lb,{onClose(){}}),oY=E.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:m,...g}=t,v=ob(lb,r),[y,x]=E.useState(null),b=yn(e,$=>x($)),w=E.useRef(null),k=E.useRef(null),S=i||v.duration,P=E.useRef(0),N=E.useRef(S),_=E.useRef(0),{onToastAdd:T,onToastRemove:j}=v,C=Qn(()=>{var z;(y==null?void 0:y.contains(document.activeElement))&&((z=v.viewport)==null||z.focus()),a()}),I=E.useCallback($=>{!$||$===1/0||(window.clearTimeout(_.current),P.current=new Date().getTime(),_.current=window.setTimeout(C,$))},[C]);E.useEffect(()=>{const $=v.viewport;if($){const z=()=>{I(N.current),u==null||u()},W=()=>{const M=new Date().getTime()-P.current;N.current=N.current-M,window.clearTimeout(_.current),c==null||c()};return $.addEventListener(US,W),$.addEventListener(zS,z),()=>{$.removeEventListener(US,W),$.removeEventListener(zS,z)}}},[v.viewport,S,c,u,I]),E.useEffect(()=>{s&&!v.isClosePausedRef.current&&I(S)},[s,S,v.isClosePausedRef,I]),E.useEffect(()=>(T(),()=>j()),[T,j]);const R=E.useMemo(()=>y?K$(y):null,[y]);return v.viewport?o.jsxs(o.Fragment,{children:[R&&o.jsx(lY,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),o.jsx(sY,{scope:r,onClose:C,children:Zp.createPortal(o.jsx(_E.ItemSlot,{scope:r,children:o.jsx(UK,{asChild:!0,onEscapeKeyDown:ht(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||C(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(mt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ht(t.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:ht(t.onPointerDown,$=>{$.button===0&&(w.current={x:$.clientX,y:$.clientY})}),onPointerMove:ht(t.onPointerMove,$=>{if(!w.current)return;const z=$.clientX-w.current.x,W=$.clientY-w.current.y,M=!!k.current,F=["left","right"].includes(v.swipeDirection),B=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,J=F?B(0,z):0,U=F?0:B(0,W),H=$.pointerType==="touch"?10:2,q={x:J,y:U},oe={originalEvent:$,delta:q};M?(k.current=q,g0(rY,d,oe,{discrete:!1})):FP(q,v.swipeDirection,H)?(k.current=q,g0(tY,h,oe,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(z)>H||Math.abs(W)>H)&&(w.current=null)}),onPointerUp:ht(t.onPointerUp,$=>{const z=k.current,W=$.target;if(W.hasPointerCapture($.pointerId)&&W.releasePointerCapture($.pointerId),k.current=null,w.current=null,z){const M=$.currentTarget,F={originalEvent:$,delta:z};FP(z,v.swipeDirection,v.swipeThreshold)?g0(iY,m,F,{discrete:!0}):g0(nY,f,F,{discrete:!0}),M.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),lY=t=>{const{__scopeToast:e,children:r,...n}=t,i=ob(lb,e),[s,a]=E.useState(!1),[l,c]=E.useState(!1);return dY(()=>a(!0)),E.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(bE,{asChild:!0,children:o.jsx(ab,{...n,children:s&&o.jsxs(o.Fragment,{children:[i.label," ",r]})})})},cY="ToastTitle",U$=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return o.jsx(mt.div,{...n,ref:e})});U$.displayName=cY;var uY="ToastDescription",z$=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return o.jsx(mt.div,{...n,ref:e})});z$.displayName=uY;var W$="ToastAction",H$=E.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?o.jsx(q$,{altText:r,asChild:!0,children:o.jsx(SE,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${W$}\`. Expected non-empty \`string\`.`),null)});H$.displayName=W$;var G$="ToastClose",SE=E.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,i=aY(G$,r);return o.jsx(q$,{asChild:!0,children:o.jsx(mt.button,{type:"button",...n,ref:e,onClick:ht(t.onClick,i.onClose)})})});SE.displayName=G$;var q$=E.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...i}=t;return o.jsx(mt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function K$(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),hY(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...K$(n))}}),e}function g0(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?I$(i,s):i.dispatchEvent(s)}var FP=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),s=n>i;return e==="left"||e==="right"?s&&n>r:!s&&i>r};function dY(t=()=>{}){const e=Qn(t);Bs(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function hY(t){return t.nodeType===t.ELEMENT_NODE}function fY(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function F1(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var mY=$$,Y$=F$,Q$=B$,X$=U$,J$=z$,Z$=H$,eL=SE;function tL(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=tL(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function He(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=tL(t))&&(n&&(n+=" "),n+=e);return n}const VP=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,BP=He,cb=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return BP(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(u=>{const h=r==null?void 0:r[u],d=s==null?void 0:s[u];if(h===null)return null;const f=VP(h)||VP(d);return i[u][f]}),l=r&&Object.entries(r).reduce((u,h)=>{let[d,f]=h;return f===void 0||(u[d]=f),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,h)=>{let{class:d,className:f,...m}=h;return Object.entries(m).every(g=>{let[v,y]=g;return Array.isArray(y)?y.includes({...s,...l}[v]):{...s,...l}[v]===y})?[...u,d,f]:u},[]);return BP(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rL=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...l},c)=>E.createElement("svg",{ref:c,...gY,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:rL("lucide",i),...l},[...a.map(([u,h])=>E.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(t,e)=>{const r=E.forwardRef(({className:n,...i},s)=>E.createElement(yY,{ref:s,iconNode:e,className:rL(`lucide-${pY(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=fe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=fe("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=fe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=fe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=fe("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=fe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=fe("BookmarkPlus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=fe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=fe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=fe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=fe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=fe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=fe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=fe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=fe("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=fe("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=fe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=fe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=fe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=fe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=fe("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=fe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=fe("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=fe("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=fe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=fe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=fe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=fe("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=fe("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=fe("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=fe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=fe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=fe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=fe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=fe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=fe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=fe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=fe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=fe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=fe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=fe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=fe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=fe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=fe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=fe("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=fe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=fe("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=fe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=fe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=fe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=fe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=fe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=fe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=fe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=fe("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=fe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=fe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=fe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=fe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=fe("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=fe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),NE="-",qY=t=>{const e=YY(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const l=a.split(NE);return l[0]===""&&l.length!==1&&l.shift(),oL(l,e)||KY(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},oL=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?oL(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(NE);return(a=e.validators.find(({validator:l})=>l(s)))==null?void 0:a.classGroupId},QP=/^\[(.+)\]$/,KY=t=>{if(QP.test(t)){const e=QP.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},YY=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return XY(Object.entries(t.classGroups),r).forEach(([s,a])=>{YS(a,n,s,e)}),n},YS=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:XP(e,i);s.classGroupId=r;return}if(typeof i=="function"){if(QY(i)){YS(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([s,a])=>{YS(a,XP(e,s),r,n)})})},XP=(t,e)=>{let r=t;return e.split(NE).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},QY=t=>t.isThemeGetter,XY=(t,e)=>e?t.map(([r,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,l])=>[e+a,l])):s);return[r,i]}):t,JY=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(s,a)=>{r.set(s,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let a=r.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){r.has(s)?r.set(s,a):i(s,a)}}},lL="!",ZY=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],s=e.length,a=l=>{const c=[];let u=0,h=0,d;for(let y=0;y<l.length;y++){let x=l[y];if(u===0){if(x===i&&(n||l.slice(y,y+s)===e)){c.push(l.slice(h,y)),h=y+s;continue}if(x==="/"){d=y;continue}}x==="["?u++:x==="]"&&u--}const f=c.length===0?l:l.substring(h),m=f.startsWith(lL),g=m?f.substring(1):f,v=d&&d>h?d-h:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:a}):a},eQ=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},tQ=t=>({cache:JY(t.cacheSize),parseClassName:ZY(t),...qY(t)}),rQ=/\s+/,nQ=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(rQ);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:h,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:m}=r(u);let g=!!m,v=n(g?f.substring(0,m):f);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=n(f),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const y=eQ(h).join(":"),x=d?y+lL:y,b=x+v;if(s.includes(b))continue;s.push(b);const w=i(v,g);for(let k=0;k<w.length;++k){const S=w[k];s.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function iQ(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=cL(e))&&(n&&(n+=" "),n+=r);return n}const cL=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=cL(t[n]))&&(r&&(r+=" "),r+=e);return r};function sQ(t,...e){let r,n,i,s=a;function a(c){const u=e.reduce((h,d)=>d(h),t());return r=tQ(u),n=r.cache.get,i=r.cache.set,s=l,l(c)}function l(c){const u=n(c);if(u)return u;const h=nQ(c,r);return i(c,h),h}return function(){return s(iQ.apply(null,arguments))}}const Lt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},uL=/^\[(?:([a-z-]+):)?(.+)\]$/i,aQ=/^\d+\/\d+$/,oQ=new Set(["px","full","screen"]),lQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,dQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ta=t=>Fu(t)||oQ.has(t)||aQ.test(t),lo=t=>ph(t,"length",bQ),Fu=t=>!!t&&!Number.isNaN(Number(t)),U1=t=>ph(t,"number",Fu),yf=t=>!!t&&Number.isInteger(Number(t)),fQ=t=>t.endsWith("%")&&Fu(t.slice(0,-1)),Je=t=>uL.test(t),co=t=>lQ.test(t),mQ=new Set(["length","size","percentage"]),pQ=t=>ph(t,mQ,dL),gQ=t=>ph(t,"position",dL),yQ=new Set(["image","url"]),vQ=t=>ph(t,yQ,_Q),xQ=t=>ph(t,"",wQ),vf=()=>!0,ph=(t,e,r)=>{const n=uL.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},bQ=t=>cQ.test(t)&&!uQ.test(t),dL=()=>!1,wQ=t=>dQ.test(t),_Q=t=>hQ.test(t),SQ=()=>{const t=Lt("colors"),e=Lt("spacing"),r=Lt("blur"),n=Lt("brightness"),i=Lt("borderColor"),s=Lt("borderRadius"),a=Lt("borderSpacing"),l=Lt("borderWidth"),c=Lt("contrast"),u=Lt("grayscale"),h=Lt("hueRotate"),d=Lt("invert"),f=Lt("gap"),m=Lt("gradientColorStops"),g=Lt("gradientColorStopPositions"),v=Lt("inset"),y=Lt("margin"),x=Lt("opacity"),b=Lt("padding"),w=Lt("saturate"),k=Lt("scale"),S=Lt("sepia"),P=Lt("skew"),N=Lt("space"),_=Lt("translate"),T=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",Je,e],I=()=>[Je,e],R=()=>["",ta,lo],$=()=>["auto",Fu,Je],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Je],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Fu,Je];return{cacheSize:500,separator:":",theme:{colors:[vf],spacing:[ta,lo],blur:["none","",co,Je],brightness:U(),borderColor:[t],borderRadius:["none","","full",co,Je],borderSpacing:I(),borderWidth:R(),contrast:U(),grayscale:B(),hueRotate:U(),invert:B(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[fQ,lo],inset:C(),margin:C(),opacity:U(),padding:I(),saturate:U(),scale:U(),sepia:B(),skew:U(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[co]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Je]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yf,Je]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",yf,Je]}],"grid-cols":[{"grid-cols":[vf]}],"col-start-end":[{col:["auto",{span:["full",yf,Je]},Je]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[vf]}],"row-start-end":[{row:["auto",{span:[yf,Je]},Je]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,e]}],"min-w":[{"min-w":[Je,e,"min","max","fit"]}],"max-w":[{"max-w":[Je,e,"none","full","min","max","fit","prose",{screen:[co]},co]}],h:[{h:[Je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",co,lo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",U1]}],"font-family":[{font:[vf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",Fu,U1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ta,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ta,lo]}],"underline-offset":[{"underline-offset":["auto",ta,Je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),gQ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",pQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vQ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:W()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[ta,Je]}],"outline-w":[{outline:[ta,lo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[ta,lo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",co,xQ]}],"shadow-color":[{shadow:[vf]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",co,Je]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[yf,Je]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ta,lo,U1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kQ=sQ(SQ);function vt(...t){return kQ(He(t))}const NQ=mY,hL=E.forwardRef(({className:t,...e},r)=>o.jsx(Y$,{ref:r,className:vt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));hL.displayName=Y$.displayName;const jQ=cb("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fL=E.forwardRef(({className:t,variant:e,...r},n)=>o.jsx(Q$,{ref:n,className:vt(jQ({variant:e}),t),...r}));fL.displayName=Q$.displayName;const EQ=E.forwardRef(({className:t,...e},r)=>o.jsx(Z$,{ref:r,className:vt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));EQ.displayName=Z$.displayName;const mL=E.forwardRef(({className:t,...e},r)=>o.jsx(eL,{ref:r,className:vt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(rg,{className:"h-4 w-4"})}));mL.displayName=eL.displayName;const pL=E.forwardRef(({className:t,...e},r)=>o.jsx(X$,{ref:r,className:vt("text-sm font-semibold",t),...e}));pL.displayName=X$.displayName;const gL=E.forwardRef(({className:t,...e},r)=>o.jsx(J$,{ref:r,className:vt("text-sm opacity-90",t),...e}));gL.displayName=J$.displayName;function CQ(){const{toasts:t}=Ks();return o.jsxs(NQ,{children:[t.map(function({id:e,title:r,description:n,action:i,...s}){return o.jsxs(fL,{...s,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(pL,{children:r}),n&&o.jsx(gL,{children:n})]}),i,o.jsx(mL,{})]},e)}),o.jsx(hL,{})]})}var JP=["light","dark"],AQ="(prefers-color-scheme: dark)",TQ=E.createContext(void 0),PQ={setTheme:t=>{},themes:[]},IQ=()=>{var t;return(t=E.useContext(TQ))!=null?t:PQ};E.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:s,value:a,attrs:l,nonce:c})=>{let u=s==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,d=i?JP.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(g,v=!1,y=!0)=>{let x=a?a[g]:g,b=v?g+"|| ''":`'${x}'`,w="";return i&&y&&!v&&JP.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),r==="class"?v||x?w+=`c.add(${b})`:w+="null":x&&(w+=`d[s](n,${b})`),w},m=t?`!function(){${h}${f(t)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${AQ}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}${u?"":"else{"+f(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${d}}catch(t){}}();`;return E.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var OQ=t=>{switch(t){case"success":return DQ;case"info":return LQ;case"warning":return $Q;case"error":return FQ;default:return null}},RQ=Array(12).fill(0),MQ=({visible:t})=>D.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},D.createElement("div",{className:"sonner-spinner"},RQ.map((e,r)=>D.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),DQ=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$Q=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),LQ=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),FQ=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),VQ=()=>{let[t,e]=D.useState(document.hidden);return D.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},QS=1,BQ=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;let{message:n,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:QS++,a=this.toasts.find(c=>c.id===s),l=e.dismissible===void 0?!0:e.dismissible;return a?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:n}),{...c,...e,id:s,dismissible:l,title:n}):c):this.addToast({title:n,...i,dismissible:l,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:e,dismiss:!0})),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=e instanceof Promise?e:e(),s=n!==void 0;return i.then(async a=>{if(zQ(a)&&!a.ok){s=!1;let l=typeof r.error=="function"?await r.error(`HTTP error! status: ${a.status}`):r.error,c=typeof r.description=="function"?await r.description(`HTTP error! status: ${a.status}`):r.description;this.create({id:n,type:"error",message:l,description:c})}else if(r.success!==void 0){s=!1;let l=typeof r.success=="function"?await r.success(a):r.success,c=typeof r.description=="function"?await r.description(a):r.description;this.create({id:n,type:"success",message:l,description:c})}}).catch(async a=>{if(r.error!==void 0){s=!1;let l=typeof r.error=="function"?await r.error(a):r.error,c=typeof r.description=="function"?await r.description(a):r.description;this.create({id:n,type:"error",message:l,description:c})}}).finally(()=>{var a;s&&(this.dismiss(n),n=void 0),(a=r.finally)==null||a.call(r)}),n},this.custom=(e,r)=>{let n=(r==null?void 0:r.id)||QS++;return this.create({jsx:e(n),id:n,...r}),n},this.subscribers=[],this.toasts=[]}},si=new BQ,UQ=(t,e)=>{let r=(e==null?void 0:e.id)||QS++;return si.addToast({title:t,...e,id:r}),r},zQ=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",WQ=UQ,HQ=()=>si.toasts,nn=Object.assign(WQ,{success:si.success,info:si.info,warning:si.warning,error:si.error,custom:si.custom,message:si.message,promise:si.promise,dismiss:si.dismiss,loading:si.loading},{getHistory:HQ});function GQ(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}GQ(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function y0(t){return t.label!==void 0}var qQ=3,KQ="32px",YQ=4e3,QQ=356,XQ=14,JQ=20,ZQ=200;function eX(...t){return t.filter(Boolean).join(" ")}var tX=t=>{var e,r,n,i,s,a,l,c,u,h;let{invert:d,toast:f,unstyled:m,interacting:g,setHeights:v,visibleToasts:y,heights:x,index:b,toasts:w,expanded:k,removeToast:S,defaultRichColors:P,closeButton:N,style:_,cancelButtonStyle:T,actionButtonStyle:j,className:C="",descriptionClassName:I="",duration:R,position:$,gap:z,loadingIcon:W,expandByDefault:M,classNames:F,icons:B,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:U,cn:H}=t,[q,oe]=D.useState(!1),[ve,se]=D.useState(!1),[V,X]=D.useState(!1),[ee,ue]=D.useState(!1),[ge,K]=D.useState(0),[G,he]=D.useState(0),_e=D.useRef(null),qe=D.useRef(null),Kt=b===0,me=b+1<=y,we=f.type,de=f.dismissible!==!1,xe=f.className||"",De=f.descriptionClassName||"",Le=D.useMemo(()=>x.findIndex(Ke=>Ke.toastId===f.id)||0,[x,f.id]),$e=D.useMemo(()=>{var Ke;return(Ke=f.closeButton)!=null?Ke:N},[f.closeButton,N]),ke=D.useMemo(()=>f.duration||R||YQ,[f.duration,R]),Be=D.useRef(0),Ae=D.useRef(0),ir=D.useRef(0),Bi=D.useRef(null),[Yh,Qw]=$.split("-"),ro=D.useMemo(()=>x.reduce((Ke,Et,kt)=>kt>=Le?Ke:Ke+Et.height,0),[x,Le]),Qh=VQ(),Rg=f.invert||d,Al=we==="loading";Ae.current=D.useMemo(()=>Le*z+ro,[Le,ro]),D.useEffect(()=>{oe(!0)},[]),D.useLayoutEffect(()=>{if(!q)return;let Ke=qe.current,Et=Ke.style.height;Ke.style.height="auto";let kt=Ke.getBoundingClientRect().height;Ke.style.height=Et,he(kt),v(Xr=>Xr.find(Dn=>Dn.toastId===f.id)?Xr.map(Dn=>Dn.toastId===f.id?{...Dn,height:kt}:Dn):[{toastId:f.id,height:kt,position:f.position},...Xr])},[q,f.title,f.description,v,f.id]);let xs=D.useCallback(()=>{se(!0),K(Ae.current),v(Ke=>Ke.filter(Et=>Et.toastId!==f.id)),setTimeout(()=>{S(f)},ZQ)},[f,S,v,Ae]);D.useEffect(()=>{if(f.promise&&we==="loading"||f.duration===1/0||f.type==="loading")return;let Ke,Et=ke;return k||g||U&&Qh?(()=>{if(ir.current<Be.current){let kt=new Date().getTime()-Be.current;Et=Et-kt}ir.current=new Date().getTime()})():Et!==1/0&&(Be.current=new Date().getTime(),Ke=setTimeout(()=>{var kt;(kt=f.onAutoClose)==null||kt.call(f,f),xs()},Et)),()=>clearTimeout(Ke)},[k,g,M,f,ke,xs,f.promise,we,U,Qh]),D.useEffect(()=>{let Ke=qe.current;if(Ke){let Et=Ke.getBoundingClientRect().height;return he(Et),v(kt=>[{toastId:f.id,height:Et,position:f.position},...kt]),()=>v(kt=>kt.filter(Xr=>Xr.toastId!==f.id))}},[v,f.id]),D.useEffect(()=>{f.delete&&xs()},[xs,f.delete]);function Xw(){return B!=null&&B.loading?D.createElement("div",{className:"sonner-loader","data-visible":we==="loading"},B.loading):W?D.createElement("div",{className:"sonner-loader","data-visible":we==="loading"},W):D.createElement(MQ,{visible:we==="loading"})}return D.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:qe,className:H(C,xe,F==null?void 0:F.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[we],(r=f==null?void 0:f.classNames)==null?void 0:r[we]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:P,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":q,"data-promise":!!f.promise,"data-removed":ve,"data-visible":me,"data-y-position":Yh,"data-x-position":Qw,"data-index":b,"data-front":Kt,"data-swiping":V,"data-dismissible":de,"data-type":we,"data-invert":Rg,"data-swipe-out":ee,"data-expanded":!!(k||M&&q),style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${ve?ge:Ae.current}px`,"--initial-height":M?"auto":`${G}px`,..._,...f.style},onPointerDown:Ke=>{Al||!de||(_e.current=new Date,K(Ae.current),Ke.target.setPointerCapture(Ke.pointerId),Ke.target.tagName!=="BUTTON"&&(X(!0),Bi.current={x:Ke.clientX,y:Ke.clientY}))},onPointerUp:()=>{var Ke,Et,kt,Xr;if(ee||!de)return;Bi.current=null;let Dn=Number(((Ke=qe.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount").replace("px",""))||0),no=new Date().getTime()-((Et=_e.current)==null?void 0:Et.getTime()),Js=Math.abs(Dn)/no;if(Math.abs(Dn)>=JQ||Js>.11){K(Ae.current),(kt=f.onDismiss)==null||kt.call(f,f),xs(),ue(!0);return}(Xr=qe.current)==null||Xr.style.setProperty("--swipe-amount","0px"),X(!1)},onPointerMove:Ke=>{var Et;if(!Bi.current||!de)return;let kt=Ke.clientY-Bi.current.y,Xr=Ke.clientX-Bi.current.x,Dn=(Yh==="top"?Math.min:Math.max)(0,kt),no=Ke.pointerType==="touch"?10:2;Math.abs(Dn)>no?(Et=qe.current)==null||Et.style.setProperty("--swipe-amount",`${kt}px`):Math.abs(Xr)>no&&(Bi.current=null)}},$e&&!f.jsx?D.createElement("button",{"aria-label":J,"data-disabled":Al,"data-close-button":!0,onClick:Al||!de?()=>{}:()=>{var Ke;xs(),(Ke=f.onDismiss)==null||Ke.call(f,f)},className:H(F==null?void 0:F.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},D.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),D.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||D.isValidElement(f.title)?f.jsx||f.title:D.createElement(D.Fragment,null,we||f.icon||f.promise?D.createElement("div",{"data-icon":"",className:H(F==null?void 0:F.icon,(s=f==null?void 0:f.classNames)==null?void 0:s.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Xw():null,f.type!=="loading"?f.icon||(B==null?void 0:B[we])||OQ(we):null):null,D.createElement("div",{"data-content":"",className:H(F==null?void 0:F.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},D.createElement("div",{"data-title":"",className:H(F==null?void 0:F.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},f.title),f.description?D.createElement("div",{"data-description":"",className:H(I,De,F==null?void 0:F.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},f.description):null),D.isValidElement(f.cancel)?f.cancel:f.cancel&&y0(f.cancel)?D.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||T,onClick:Ke=>{var Et,kt;y0(f.cancel)&&de&&((kt=(Et=f.cancel).onClick)==null||kt.call(Et,Ke),xs())},className:H(F==null?void 0:F.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,D.isValidElement(f.action)?f.action:f.action&&y0(f.action)?D.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||j,onClick:Ke=>{var Et,kt;y0(f.action)&&(Ke.defaultPrevented||((kt=(Et=f.action).onClick)==null||kt.call(Et,Ke),xs()))},className:H(F==null?void 0:F.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function ZP(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var rX=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:s,className:a,offset:l,theme:c="light",richColors:u,duration:h,style:d,visibleToasts:f=qQ,toastOptions:m,dir:g=ZP(),gap:v=XQ,loadingIcon:y,icons:x,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w,cn:k=eX}=t,[S,P]=D.useState([]),N=D.useMemo(()=>Array.from(new Set([r].concat(S.filter(U=>U.position).map(U=>U.position)))),[S,r]),[_,T]=D.useState([]),[j,C]=D.useState(!1),[I,R]=D.useState(!1),[$,z]=D.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=D.useRef(null),M=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=D.useRef(null),B=D.useRef(!1),J=D.useCallback(U=>{var H;(H=S.find(q=>q.id===U.id))!=null&&H.delete||si.dismiss(U.id),P(q=>q.filter(({id:oe})=>oe!==U.id))},[S]);return D.useEffect(()=>si.subscribe(U=>{if(U.dismiss){P(H=>H.map(q=>q.id===U.id?{...q,delete:!0}:q));return}setTimeout(()=>{E$.flushSync(()=>{P(H=>{let q=H.findIndex(oe=>oe.id===U.id);return q!==-1?[...H.slice(0,q),{...H[q],...U},...H.slice(q+1)]:[U,...H]})})})}),[]),D.useEffect(()=>{if(c!=="system"){z(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:U})=>{z(U?"dark":"light")})},[c]),D.useEffect(()=>{S.length<=1&&C(!1)},[S]),D.useEffect(()=>{let U=H=>{var q,oe;n.every(ve=>H[ve]||H.code===ve)&&(C(!0),(q=W.current)==null||q.focus()),H.code==="Escape"&&(document.activeElement===W.current||(oe=W.current)!=null&&oe.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[n]),D.useEffect(()=>{if(W.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,B.current=!1)}},[W.current]),S.length?D.createElement("section",{"aria-label":`${b} ${M}`,tabIndex:-1},N.map((U,H)=>{var q;let[oe,ve]=U.split("-");return D.createElement("ol",{key:U,dir:g==="auto"?ZP():g,tabIndex:-1,ref:W,className:a,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":oe,"data-x-position":ve,style:{"--front-toast-height":`${((q=_[0])==null?void 0:q.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||KQ,"--width":`${QQ}px`,"--gap":`${v}px`,...d},onBlur:se=>{B.current&&!se.currentTarget.contains(se.relatedTarget)&&(B.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||B.current||(B.current=!0,F.current=se.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{I||C(!1)},onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},S.filter(se=>!se.position&&H===0||se.position===U).map((se,V)=>{var X,ee;return D.createElement(tX,{key:se.id,icons:x,index:V,toast:se,defaultRichColors:u,duration:(X=m==null?void 0:m.duration)!=null?X:h,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:f,closeButton:(ee=m==null?void 0:m.closeButton)!=null?ee:s,interacting:I,position:U,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:J,toasts:S.filter(ue=>ue.position==se.position),heights:_.filter(ue=>ue.position==se.position),setHeights:T,expandByDefault:i,gap:v,loadingIcon:y,expanded:j,pauseWhenPageIsHidden:w,cn:k})}))})):null};const nX=({...t})=>{const{theme:e="system"}=IQ();return o.jsx(rX,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var iX=kD.useId||(()=>{}),sX=0;function im(t){const[e,r]=E.useState(iX());return Bs(()=>{t||r(n=>n??String(sX++))},[t]),t||(e?`radix-${e}`:"")}const aX=["top","right","bottom","left"],il=Math.min,li=Math.max,Jy=Math.round,v0=Math.floor,sl=t=>({x:t,y:t}),oX={left:"right",right:"left",bottom:"top",top:"bottom"},lX={start:"end",end:"start"};function XS(t,e,r){return li(t,il(e,r))}function Pa(t,e){return typeof t=="function"?t(e):t}function Ia(t){return t.split("-")[0]}function gh(t){return t.split("-")[1]}function jE(t){return t==="x"?"y":"x"}function EE(t){return t==="y"?"height":"width"}function al(t){return["top","bottom"].includes(Ia(t))?"y":"x"}function CE(t){return jE(al(t))}function cX(t,e,r){r===void 0&&(r=!1);const n=gh(t),i=CE(t),s=EE(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Zy(a)),[a,Zy(a)]}function uX(t){const e=Zy(t);return[JS(t),e,JS(e)]}function JS(t){return t.replace(/start|end/g,e=>lX[e])}function dX(t,e,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?s:a;default:return[]}}function hX(t,e,r,n){const i=gh(t);let s=dX(Ia(t),r==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(JS)))),s}function Zy(t){return t.replace(/left|right|bottom|top/g,e=>oX[e])}function fX(t){return{top:0,right:0,bottom:0,left:0,...t}}function yL(t){return typeof t!="number"?fX(t):{top:t,right:t,bottom:t,left:t}}function ev(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function eI(t,e,r){let{reference:n,floating:i}=t;const s=al(e),a=CE(e),l=EE(a),c=Ia(e),u=s==="y",h=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,f=n[l]/2-i[l]/2;let m;switch(c){case"top":m={x:h,y:n.y-i.height};break;case"bottom":m={x:h,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:d};break;case"left":m={x:n.x-i.width,y:d};break;default:m={x:n.x,y:n.y}}switch(gh(e)){case"start":m[a]-=f*(r&&u?-1:1);break;case"end":m[a]+=f*(r&&u?-1:1);break}return m}const mX=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,l=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:d}=eI(u,n,c),f=n,m={},g=0;for(let v=0;v<l.length;v++){const{name:y,fn:x}=l[v],{x:b,y:w,data:k,reset:S}=await x({x:h,y:d,initialPlacement:n,placement:f,strategy:i,middlewareData:m,rects:u,platform:a,elements:{reference:t,floating:e}});h=b??h,d=w??d,m={...m,[y]:{...m[y],...k}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:h,y:d}=eI(u,f,c)),v=-1)}return{x:h,y:d,placement:f,strategy:i,middlewareData:m}};async function Hm(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=Pa(e,t),g=yL(m),y=l[f?d==="floating"?"reference":"floating":d],x=ev(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(y)))==null||r?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),b=d==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),k=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=ev(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(x.top-S.top+g.top)/k.y,bottom:(S.bottom-x.bottom+g.bottom)/k.y,left:(x.left-S.left+g.left)/k.x,right:(S.right-x.right+g.right)/k.x}}const pX=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Pa(t,e)||{};if(u==null)return{};const d=yL(h),f={x:r,y:n},m=CE(i),g=EE(m),v=await a.getDimensions(u),y=m==="y",x=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",k=s.reference[g]+s.reference[m]-f[m]-s.floating[g],S=f[m]-s.reference[m],P=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=P?P[w]:0;(!N||!await(a.isElement==null?void 0:a.isElement(P)))&&(N=l.floating[w]||s.floating[g]);const _=k/2-S/2,T=N/2-v[g]/2-1,j=il(d[x],T),C=il(d[b],T),I=j,R=N-v[g]-C,$=N/2-v[g]/2+_,z=XS(I,$,R),W=!c.arrow&&gh(i)!=null&&$!==z&&s.reference[g]/2-($<I?j:C)-v[g]/2<0,M=W?$<I?$-I:$-R:0;return{[m]:f[m]+M,data:{[m]:z,centerOffset:$-z-M,...W&&{alignmentOffset:M}},reset:W}}}),gX=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=Pa(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const x=Ia(i),b=al(l),w=Ia(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=f||(w||!v?[Zy(l)]:uX(l)),P=g!=="none";!f&&P&&S.push(...hX(l,v,g,k));const N=[l,...S],_=await Hm(e,y),T=[];let j=((n=s.flip)==null?void 0:n.overflows)||[];if(h&&T.push(_[x]),d){const $=cX(i,a,k);T.push(_[$[0]],_[$[1]])}if(j=[...j,{placement:i,overflows:T}],!T.every($=>$<=0)){var C,I;const $=(((C=s.flip)==null?void 0:C.index)||0)+1,z=N[$];if(z)return{data:{index:$,overflows:j},reset:{placement:z}};let W=(I=j.filter(M=>M.overflows[0]<=0).sort((M,F)=>M.overflows[1]-F.overflows[1])[0])==null?void 0:I.placement;if(!W)switch(m){case"bestFit":{var R;const M=(R=j.filter(F=>{if(P){const B=al(F.placement);return B===b||B==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(B=>B>0).reduce((B,J)=>B+J,0)]).sort((F,B)=>F[1]-B[1])[0])==null?void 0:R[0];M&&(W=M);break}case"initialPlacement":W=l;break}if(i!==W)return{reset:{placement:W}}}return{}}}};function tI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function rI(t){return aX.some(e=>t[e]>=0)}const yX=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=Pa(t,e);switch(n){case"referenceHidden":{const s=await Hm(e,{...i,elementContext:"reference"}),a=tI(s,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:rI(a)}}}case"escaped":{const s=await Hm(e,{...i,altBoundary:!0}),a=tI(s,r.floating);return{data:{escapedOffsets:a,escaped:rI(a)}}}default:return{}}}}};async function vX(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=Ia(r),l=gh(r),c=al(r)==="y",u=["left","top"].includes(a)?-1:1,h=s&&c?-1:1,d=Pa(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*h,y:f*u}:{x:f*u,y:m*h}}const xX=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:a,middlewareData:l}=e,c=await vX(e,t);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:a}}}}},bX=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x,y:b}=y;return{x,y:b}}},...c}=Pa(t,e),u={x:r,y:n},h=await Hm(e,c),d=al(Ia(i)),f=jE(d);let m=u[f],g=u[d];if(s){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=m+h[y],w=m-h[x];m=XS(b,m,w)}if(a){const y=d==="y"?"top":"left",x=d==="y"?"bottom":"right",b=g+h[y],w=g-h[x];g=XS(b,g,w)}const v=l.fn({...e,[f]:m,[d]:g});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[f]:s,[d]:a}}}}}},wX=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Pa(t,e),h={x:r,y:n},d=al(i),f=jE(d);let m=h[f],g=h[d];const v=Pa(l,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=f==="y"?"height":"width",k=s.reference[f]-s.floating[w]+y.mainAxis,S=s.reference[f]+s.reference[w]-y.mainAxis;m<k?m=k:m>S&&(m=S)}if(u){var x,b;const w=f==="y"?"width":"height",k=["top","left"].includes(Ia(i)),S=s.reference[d]-s.floating[w]+(k&&((x=a.offset)==null?void 0:x[d])||0)+(k?0:y.crossAxis),P=s.reference[d]+s.reference[w]+(k?0:((b=a.offset)==null?void 0:b[d])||0)-(k?y.crossAxis:0);g<S?g=S:g>P&&(g=P)}return{[f]:m,[d]:g}}}},_X=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Pa(t,e),h=await Hm(e,u),d=Ia(i),f=gh(i),m=al(i)==="y",{width:g,height:v}=s.floating;let y,x;d==="top"||d==="bottom"?(y=d,x=f===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=d,y=f==="end"?"top":"bottom");const b=v-h.top-h.bottom,w=g-h.left-h.right,k=il(v-h[y],b),S=il(g-h[x],w),P=!e.middlewareData.shift;let N=k,_=S;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(_=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(N=b),P&&!f){const j=li(h.left,0),C=li(h.right,0),I=li(h.top,0),R=li(h.bottom,0);m?_=g-2*(j!==0||C!==0?j+C:li(h.left,h.right)):N=v-2*(I!==0||R!==0?I+R:li(h.top,h.bottom))}await c({...e,availableWidth:_,availableHeight:N});const T=await a.getDimensions(l.floating);return g!==T.width||v!==T.height?{reset:{rects:!0}}:{}}}};function db(){return typeof window<"u"}function yh(t){return vL(t)?(t.nodeName||"").toLowerCase():"#document"}function mi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ys(t){var e;return(e=(vL(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vL(t){return db()?t instanceof Node||t instanceof mi(t).Node:!1}function ms(t){return db()?t instanceof Element||t instanceof mi(t).Element:!1}function zs(t){return db()?t instanceof HTMLElement||t instanceof mi(t).HTMLElement:!1}function nI(t){return!db()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof mi(t).ShadowRoot}function ng(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=ps(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function SX(t){return["table","td","th"].includes(yh(t))}function hb(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function AE(t){const e=TE(),r=ms(t)?ps(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function kX(t){let e=ol(t);for(;zs(e)&&!bd(e);){if(AE(e))return e;if(hb(e))return null;e=ol(e)}return null}function TE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bd(t){return["html","body","#document"].includes(yh(t))}function ps(t){return mi(t).getComputedStyle(t)}function fb(t){return ms(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ol(t){if(yh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||nI(t)&&t.host||Ys(t);return nI(e)?e.host:e}function xL(t){const e=ol(t);return bd(e)?t.ownerDocument?t.ownerDocument.body:t.body:zs(e)&&ng(e)?e:xL(e)}function Gm(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=xL(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),a=mi(i);if(s){const l=ZS(a);return e.concat(a,a.visualViewport||[],ng(i)?i:[],l&&r?Gm(l):[])}return e.concat(i,Gm(i,[],r))}function ZS(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function bL(t){const e=ps(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=zs(t),s=i?t.offsetWidth:r,a=i?t.offsetHeight:n,l=Jy(r)!==s||Jy(n)!==a;return l&&(r=s,n=a),{width:r,height:n,$:l}}function PE(t){return ms(t)?t:t.contextElement}function Vu(t){const e=PE(t);if(!zs(e))return sl(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=bL(e);let a=(s?Jy(r.width):r.width)/n,l=(s?Jy(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const NX=sl(0);function wL(t){const e=mi(t);return!TE()||!e.visualViewport?NX:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jX(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==mi(t)?!1:e}function xc(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=PE(t);let a=sl(1);e&&(n?ms(n)&&(a=Vu(n)):a=Vu(t));const l=jX(s,r,n)?wL(s):sl(0);let c=(i.left+l.x)/a.x,u=(i.top+l.y)/a.y,h=i.width/a.x,d=i.height/a.y;if(s){const f=mi(s),m=n&&ms(n)?mi(n):n;let g=f,v=ZS(g);for(;v&&n&&m!==g;){const y=Vu(v),x=v.getBoundingClientRect(),b=ps(v),w=x.left+(v.clientLeft+parseFloat(b.paddingLeft))*y.x,k=x.top+(v.clientTop+parseFloat(b.paddingTop))*y.y;c*=y.x,u*=y.y,h*=y.x,d*=y.y,c+=w,u+=k,g=mi(v),v=ZS(g)}}return ev({width:h,height:d,x:c,y:u})}function EX(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",a=Ys(n),l=e?hb(e.floating):!1;if(n===a||l&&s)return r;let c={scrollLeft:0,scrollTop:0},u=sl(1);const h=sl(0),d=zs(n);if((d||!d&&!s)&&((yh(n)!=="body"||ng(a))&&(c=fb(n)),zs(n))){const f=xc(n);u=Vu(n),h.x=f.x+n.clientLeft,h.y=f.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+h.x,y:r.y*u.y-c.scrollTop*u.y+h.y}}function CX(t){return Array.from(t.getClientRects())}function ek(t,e){const r=fb(t).scrollLeft;return e?e.left+r:xc(Ys(t)).left+r}function AX(t){const e=Ys(t),r=fb(t),n=t.ownerDocument.body,i=li(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=li(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+ek(t);const l=-r.scrollTop;return ps(n).direction==="rtl"&&(a+=li(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:l}}function TX(t,e){const r=mi(t),n=Ys(t),i=r.visualViewport;let s=n.clientWidth,a=n.clientHeight,l=0,c=0;if(i){s=i.width,a=i.height;const u=TE();(!u||u&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:a,x:l,y:c}}function PX(t,e){const r=xc(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=zs(t)?Vu(t):sl(1),a=t.clientWidth*s.x,l=t.clientHeight*s.y,c=i*s.x,u=n*s.y;return{width:a,height:l,x:c,y:u}}function iI(t,e,r){let n;if(e==="viewport")n=TX(t,r);else if(e==="document")n=AX(Ys(t));else if(ms(e))n=PX(e,r);else{const i=wL(t);n={...e,x:e.x-i.x,y:e.y-i.y}}return ev(n)}function _L(t,e){const r=ol(t);return r===e||!ms(r)||bd(r)?!1:ps(r).position==="fixed"||_L(r,e)}function IX(t,e){const r=e.get(t);if(r)return r;let n=Gm(t,[],!1).filter(l=>ms(l)&&yh(l)!=="body"),i=null;const s=ps(t).position==="fixed";let a=s?ol(t):t;for(;ms(a)&&!bd(a);){const l=ps(a),c=AE(a);!c&&l.position==="fixed"&&(i=null),(s?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ng(a)&&!c&&_L(t,a))?n=n.filter(h=>h!==a):i=l,a=ol(a)}return e.set(t,n),n}function OX(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const a=[...r==="clippingAncestors"?hb(e)?[]:IX(e,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,h)=>{const d=iI(e,h,i);return u.top=li(d.top,u.top),u.right=il(d.right,u.right),u.bottom=il(d.bottom,u.bottom),u.left=li(d.left,u.left),u},iI(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function RX(t){const{width:e,height:r}=bL(t);return{width:e,height:r}}function MX(t,e,r){const n=zs(e),i=Ys(e),s=r==="fixed",a=xc(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const c=sl(0);if(n||!n&&!s)if((yh(e)!=="body"||ng(i))&&(l=fb(e)),n){const m=xc(e,!0,s,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else i&&(c.x=ek(i));let u=0,h=0;if(i&&!n&&!s){const m=i.getBoundingClientRect();h=m.top+l.scrollTop,u=m.left+l.scrollLeft-ek(i,m)}const d=a.left+l.scrollLeft-c.x-u,f=a.top+l.scrollTop-c.y-h;return{x:d,y:f,width:a.width,height:a.height}}function z1(t){return ps(t).position==="static"}function sI(t,e){if(!zs(t)||ps(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Ys(t)===r&&(r=r.ownerDocument.body),r}function SL(t,e){const r=mi(t);if(hb(t))return r;if(!zs(t)){let i=ol(t);for(;i&&!bd(i);){if(ms(i)&&!z1(i))return i;i=ol(i)}return r}let n=sI(t,e);for(;n&&SX(n)&&z1(n);)n=sI(n,e);return n&&bd(n)&&z1(n)&&!AE(n)?r:n||kX(t)||r}const DX=async function(t){const e=this.getOffsetParent||SL,r=this.getDimensions,n=await r(t.floating);return{reference:MX(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function $X(t){return ps(t).direction==="rtl"}const LX={convertOffsetParentRelativeRectToViewportRelativeRect:EX,getDocumentElement:Ys,getClippingRect:OX,getOffsetParent:SL,getElementRects:DX,getClientRects:CX,getDimensions:RX,getScale:Vu,isElement:ms,isRTL:$X};function FX(t,e){let r=null,n;const i=Ys(t);function s(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const{left:u,top:h,width:d,height:f}=t.getBoundingClientRect();if(l||e(),!d||!f)return;const m=v0(h),g=v0(i.clientWidth-(u+d)),v=v0(i.clientHeight-(h+f)),y=v0(u),b={rootMargin:-m+"px "+-g+"px "+-v+"px "+-y+"px",threshold:li(0,il(1,c))||1};let w=!0;function k(S){const P=S[0].intersectionRatio;if(P!==c){if(!w)return a();P?a(!1,P):n=setTimeout(()=>{a(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(k,{...b,root:i.ownerDocument})}catch{r=new IntersectionObserver(k,b)}r.observe(t)}return a(!0),s}function VX(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=PE(t),h=i||s?[...u?Gm(u):[],...Gm(e)]:[];h.forEach(x=>{i&&x.addEventListener("scroll",r,{passive:!0}),s&&x.addEventListener("resize",r)});const d=u&&l?FX(u,r):null;let f=-1,m=null;a&&(m=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),r()}),u&&!c&&m.observe(u),m.observe(e));let g,v=c?xc(t):null;c&&y();function y(){const x=xc(t);v&&(x.x!==v.x||x.y!==v.y||x.width!==v.width||x.height!==v.height)&&r(),v=x,g=requestAnimationFrame(y)}return r(),()=>{var x;h.forEach(b=>{i&&b.removeEventListener("scroll",r),s&&b.removeEventListener("resize",r)}),d==null||d(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const BX=xX,UX=bX,zX=gX,WX=_X,HX=yX,aI=pX,GX=wX,qX=(t,e,r)=>{const n=new Map,i={platform:LX,...r},s={...i.platform,_c:n};return mX(t,e,{...i,platform:s})};var cy=typeof document<"u"?E.useLayoutEffect:E.useEffect;function tv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!tv(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&t.$$typeof)&&!tv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function kL(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function oI(t,e){const r=kL(t);return Math.round(e*r)/r}function W1(t){const e=E.useRef(t);return cy(()=>{e.current=t}),e}function KX(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,d]=E.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=E.useState(n);tv(f,n)||m(n);const[g,v]=E.useState(null),[y,x]=E.useState(null),b=E.useCallback(F=>{F!==P.current&&(P.current=F,v(F))},[]),w=E.useCallback(F=>{F!==N.current&&(N.current=F,x(F))},[]),k=s||g,S=a||y,P=E.useRef(null),N=E.useRef(null),_=E.useRef(h),T=c!=null,j=W1(c),C=W1(i),I=W1(u),R=E.useCallback(()=>{if(!P.current||!N.current)return;const F={placement:e,strategy:r,middleware:f};C.current&&(F.platform=C.current),qX(P.current,N.current,F).then(B=>{const J={...B,isPositioned:I.current!==!1};$.current&&!tv(_.current,J)&&(_.current=J,Zp.flushSync(()=>{d(J)}))})},[f,e,r,C,I]);cy(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,d(F=>({...F,isPositioned:!1})))},[u]);const $=E.useRef(!1);cy(()=>($.current=!0,()=>{$.current=!1}),[]),cy(()=>{if(k&&(P.current=k),S&&(N.current=S),k&&S){if(j.current)return j.current(k,S,R);R()}},[k,S,R,j,T]);const z=E.useMemo(()=>({reference:P,floating:N,setReference:b,setFloating:w}),[b,w]),W=E.useMemo(()=>({reference:k,floating:S}),[k,S]),M=E.useMemo(()=>{const F={position:r,left:0,top:0};if(!W.floating)return F;const B=oI(W.floating,h.x),J=oI(W.floating,h.y);return l?{...F,transform:"translate("+B+"px, "+J+"px)",...kL(W.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:J}},[r,l,W.floating,h.x,h.y]);return E.useMemo(()=>({...h,update:R,refs:z,elements:W,floatingStyles:M}),[h,R,z,W,M])}const YX=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?aI({element:n.current,padding:i}).fn(r):{}:n?aI({element:n,padding:i}).fn(r):{}}}},QX=(t,e)=>({...BX(t),options:[t,e]}),XX=(t,e)=>({...UX(t),options:[t,e]}),JX=(t,e)=>({...GX(t),options:[t,e]}),ZX=(t,e)=>({...zX(t),options:[t,e]}),eJ=(t,e)=>({...WX(t),options:[t,e]}),tJ=(t,e)=>({...HX(t),options:[t,e]}),rJ=(t,e)=>({...YX(t),options:[t,e]});var nJ="Arrow",NL=E.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...s}=t;return o.jsx(mt.svg,{...s,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});NL.displayName=nJ;var iJ=NL;function sJ(t,e=[]){let r=[];function n(s,a){const l=E.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:f,children:m,...g}=d,v=(f==null?void 0:f[t][c])||l,y=E.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:m})}function h(d,f){const m=(f==null?void 0:f[t][c])||l,g=E.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(l){const c=(l==null?void 0:l[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,aJ(i,...e)]}function aJ(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function oJ(t){const[e,r]=E.useState(void 0);return Bs(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;r({width:a,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var jL="Popper",[EL,CL]=sJ(jL),[C3e,AL]=EL(jL),TL="PopperAnchor",PL=E.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,s=AL(TL,r),a=E.useRef(null),l=yn(e,a);return E.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx(mt.div,{...i,ref:l})});PL.displayName=TL;var IE="PopperContent",[lJ,cJ]=EL(IE),IL=E.forwardRef((t,e)=>{var V,X,ee,ue,ge,K;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=t,y=AL(IE,r),[x,b]=E.useState(null),w=yn(e,G=>b(G)),[k,S]=E.useState(null),P=oJ(k),N=(P==null?void 0:P.width)??0,_=(P==null?void 0:P.height)??0,T=n+(s!=="center"?"-"+s:""),j=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},C=Array.isArray(u)?u:[u],I=C.length>0,R={padding:j,boundary:C.filter(dJ),altBoundary:I},{refs:$,floatingStyles:z,placement:W,isPositioned:M,middlewareData:F}=KX({strategy:"fixed",placement:T,whileElementsMounted:(...G)=>VX(...G,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[QX({mainAxis:i+_,alignmentAxis:a}),c&&XX({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?JX():void 0,...R}),c&&ZX({...R}),eJ({...R,apply:({elements:G,rects:he,availableWidth:_e,availableHeight:qe})=>{const{width:Kt,height:me}=he.reference,we=G.floating.style;we.setProperty("--radix-popper-available-width",`${_e}px`),we.setProperty("--radix-popper-available-height",`${qe}px`),we.setProperty("--radix-popper-anchor-width",`${Kt}px`),we.setProperty("--radix-popper-anchor-height",`${me}px`)}}),k&&rJ({element:k,padding:l}),hJ({arrowWidth:N,arrowHeight:_}),f&&tJ({strategy:"referenceHidden",...R})]}),[B,J]=ML(W),U=Qn(g);Bs(()=>{M&&(U==null||U())},[M,U]);const H=(V=F.arrow)==null?void 0:V.x,q=(X=F.arrow)==null?void 0:X.y,oe=((ee=F.arrow)==null?void 0:ee.centerOffset)!==0,[ve,se]=E.useState();return Bs(()=>{x&&se(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:M?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(ue=F.transformOrigin)==null?void 0:ue.x,(ge=F.transformOrigin)==null?void 0:ge.y].join(" "),...((K=F.hide)==null?void 0:K.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(lJ,{scope:r,placedSide:B,onArrowChange:S,arrowX:H,arrowY:q,shouldHideArrow:oe,children:o.jsx(mt.div,{"data-side":B,"data-align":J,...v,ref:w,style:{...v.style,animation:M?void 0:"none"}})})})});IL.displayName=IE;var OL="PopperArrow",uJ={top:"bottom",right:"left",bottom:"top",left:"right"},RL=E.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,s=cJ(OL,n),a=uJ[s.placedSide];return o.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:o.jsx(iJ,{...i,ref:r,style:{...i.style,display:"block"}})})});RL.displayName=OL;function dJ(t){return t!==null}var hJ=t=>({name:"transformOrigin",options:t,fn(e){var y,x,b;const{placement:r,rects:n,middlewareData:i}=e,a=((y=i.arrow)==null?void 0:y.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,h]=ML(r),d={start:"0%",center:"50%",end:"100%"}[h],f=(((x=i.arrow)==null?void 0:x.x)??0)+l/2,m=(((b=i.arrow)==null?void 0:b.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=a?d:`${f}px`,v=`${-c}px`):u==="top"?(g=a?d:`${f}px`,v=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=a?d:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,v=a?d:`${m}px`),{data:{x:g,y:v}}}});function ML(t){const[e,r="center"]=t.split("-");return[e,r]}var fJ=PL,mJ=IL,pJ=RL,[mb,A3e]=eg("Tooltip",[CL]),OE=CL(),DL="TooltipProvider",gJ=700,lI="tooltip.open",[yJ,$L]=mb(DL),LL=t=>{const{__scopeTooltip:e,delayDuration:r=gJ,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:s}=t,[a,l]=E.useState(!0),c=E.useRef(!1),u=E.useRef(0);return E.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),o.jsx(yJ,{scope:e,isOpenDelayed:a,delayDuration:r,onOpen:E.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:E.useCallback(h=>{c.current=h},[]),disableHoverableContent:i,children:s})};LL.displayName=DL;var FL="Tooltip",[T3e,pb]=mb(FL),tk="TooltipTrigger",vJ=E.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=pb(tk,r),s=$L(tk,r),a=OE(r),l=E.useRef(null),c=yn(e,l,i.onTriggerChange),u=E.useRef(!1),h=E.useRef(!1),d=E.useCallback(()=>u.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),o.jsx(fJ,{asChild:!0,...a,children:o.jsx(mt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:ht(t.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:ht(t.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:ht(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ht(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:ht(t.onBlur,i.onClose),onClick:ht(t.onClick,i.onClose)})})});vJ.displayName=tk;var xJ="TooltipPortal",[P3e,bJ]=mb(xJ,{forceMount:void 0}),wd="TooltipContent",VL=E.forwardRef((t,e)=>{const r=bJ(wd,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=t,a=pb(wd,t.__scopeTooltip);return o.jsx(Lc,{present:n||a.open,children:a.disableHoverableContent?o.jsx(BL,{side:i,...s,ref:e}):o.jsx(wJ,{side:i,...s,ref:e})})}),wJ=E.forwardRef((t,e)=>{const r=pb(wd,t.__scopeTooltip),n=$L(wd,t.__scopeTooltip),i=E.useRef(null),s=yn(e,i),[a,l]=E.useState(null),{trigger:c,onClose:u}=r,h=i.current,{onPointerInTransitChange:d}=n,f=E.useCallback(()=>{l(null),d(!1)},[d]),m=E.useCallback((g,v)=>{const y=g.currentTarget,x={x:g.clientX,y:g.clientY},b=NJ(x,y.getBoundingClientRect()),w=jJ(x,b),k=EJ(v.getBoundingClientRect()),S=AJ([...w,...k]);l(S),d(!0)},[d]);return E.useEffect(()=>()=>f(),[f]),E.useEffect(()=>{if(c&&h){const g=y=>m(y,h),v=y=>m(y,c);return c.addEventListener("pointerleave",g),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),h.removeEventListener("pointerleave",v)}}},[c,h,m,f]),E.useEffect(()=>{if(a){const g=v=>{const y=v.target,x={x:v.clientX,y:v.clientY},b=(c==null?void 0:c.contains(y))||(h==null?void 0:h.contains(y)),w=!CJ(x,a);b?f():w&&(f(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,h,a,u,f]),o.jsx(BL,{...t,ref:s})}),[_J,SJ]=mb(FL,{isInside:!1}),BL=E.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...l}=t,c=pb(wd,r),u=OE(r),{onClose:h}=c;return E.useEffect(()=>(document.addEventListener(lI,h),()=>document.removeEventListener(lI,h)),[h]),E.useEffect(()=>{if(c.trigger){const d=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&h()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,h]),o.jsx(ib,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:h,children:o.jsxs(mJ,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(T$,{children:n}),o.jsx(_J,{scope:r,isInside:!0,children:o.jsx(QK,{id:c.contentId,role:"tooltip",children:i||n})})]})})});VL.displayName=wd;var UL="TooltipArrow",kJ=E.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=OE(r);return SJ(UL,r).isInside?null:o.jsx(pJ,{...i,...n,ref:e})});kJ.displayName=UL;function NJ(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function jJ(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function EJ(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function CJ(t,e){const{x:r,y:n}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const l=e[s].x,c=e[s].y,u=e[a].x,h=e[a].y;c>n!=h>n&&r<(u-l)*(n-c)/(h-c)+l&&(i=!i)}return i}function AJ(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),TJ(e)}function TJ(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const s=r[r.length-1],a=r[r.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var PJ=LL,zL=VL;const IJ=PJ,OJ=E.forwardRef(({className:t,sideOffset:e=4,...r},n)=>o.jsx(zL,{ref:n,sideOffset:e,className:vt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));OJ.displayName=zL.displayName;var gb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yb=typeof window>"u"||"Deno"in globalThis;function Gi(){}function RJ(t,e){return typeof t=="function"?t(e):t}function MJ(t){return typeof t=="number"&&t>=0&&t!==1/0}function DJ(t,e){return Math.max(t+(e||0)-Date.now(),0)}function cI(t,e){return typeof t=="function"?t(e):t}function $J(t,e){return typeof t=="function"?t(e):t}function uI(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:l}=t;if(a){if(n){if(e.queryHash!==RE(a,e.options))return!1}else if(!Km(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function dI(t,e){const{exact:r,status:n,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(qm(e.options.mutationKey)!==qm(s))return!1}else if(!Km(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function RE(t,e){return((e==null?void 0:e.queryKeyHashFn)||qm)(t)}function qm(t){return JSON.stringify(t,(e,r)=>rk(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Km(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Km(t[r],e[r])):!1}function WL(t,e){if(t===e)return t;const r=hI(t)&&hI(e);if(r||rk(t)&&rk(e)){const n=r?t:Object.keys(t),i=n.length,s=r?e:Object.keys(e),a=s.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const h=r?u:s[u];(!r&&n.includes(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=WL(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return i===a&&c===i?t:l}return e}function hI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rk(t){if(!fI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!fI(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function fI(t){return Object.prototype.toString.call(t)==="[object Object]"}function LJ(t){return new Promise(e=>{setTimeout(e,t)})}function FJ(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?WL(t,e):e}function VJ(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function BJ(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var ME=Symbol();function HL(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ME?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ic,No,Ju,aD,UJ=(aD=class extends gb{constructor(){super();wt(this,ic);wt(this,No);wt(this,Ju);et(this,Ju,e=>{if(!yb&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){le(this,No)||this.setEventListener(le(this,Ju))}onUnsubscribe(){var e;this.hasListeners()||((e=le(this,No))==null||e.call(this),et(this,No,void 0))}setEventListener(e){var r;et(this,Ju,e),(r=le(this,No))==null||r.call(this),et(this,No,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){le(this,ic)!==e&&(et(this,ic,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof le(this,ic)=="boolean"?le(this,ic):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ic=new WeakMap,No=new WeakMap,Ju=new WeakMap,aD),GL=new UJ,Zu,jo,ed,oD,zJ=(oD=class extends gb{constructor(){super();wt(this,Zu,!0);wt(this,jo);wt(this,ed);et(this,ed,e=>{if(!yb&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){le(this,jo)||this.setEventListener(le(this,ed))}onUnsubscribe(){var e;this.hasListeners()||((e=le(this,jo))==null||e.call(this),et(this,jo,void 0))}setEventListener(e){var r;et(this,ed,e),(r=le(this,jo))==null||r.call(this),et(this,jo,e(this.setOnline.bind(this)))}setOnline(e){le(this,Zu)!==e&&(et(this,Zu,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return le(this,Zu)}},Zu=new WeakMap,jo=new WeakMap,ed=new WeakMap,oD),rv=new zJ;function WJ(){let t,e;const r=new Promise((i,s)=>{t=i,e=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}function HJ(t){return Math.min(1e3*2**t,3e4)}function qL(t){return(t??"online")==="online"?rv.isOnline():!0}var KL=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function H1(t){return t instanceof KL}function YL(t){let e=!1,r=0,n=!1,i;const s=WJ(),a=v=>{var y;n||(f(new KL(v)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>GL.isFocused()&&(t.networkMode==="always"||rv.isOnline())&&t.canRun(),h=()=>qL(t.networkMode)&&t.canRun(),d=v=>{var y;n||(n=!0,(y=t.onSuccess)==null||y.call(t,v),i==null||i(),s.resolve(v))},f=v=>{var y;n||(n=!0,(y=t.onError)==null||y.call(t,v),i==null||i(),s.reject(v))},m=()=>new Promise(v=>{var y;i=x=>{(n||u())&&v(x)},(y=t.onPause)==null||y.call(t)}).then(()=>{var v;i=void 0,n||(v=t.onContinue)==null||v.call(t)}),g=()=>{if(n)return;let v;const y=r===0?t.initialPromise:void 0;try{v=y??t.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(d).catch(x=>{var P;if(n)return;const b=t.retry??(yb?0:3),w=t.retryDelay??HJ,k=typeof w=="function"?w(r,x):w,S=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,x);if(e||!S){f(x);return}r++,(P=t.onFail)==null||P.call(t,r,x),LJ(k).then(()=>u()?void 0:m()).then(()=>{e?f(x):g()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?g():m().then(g),s)}}function GJ(){let t=[],e=0,r=l=>{l()},n=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{r(l)})},a=()=>{const l=t;t=[],l.length&&i(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var jn=GJ(),sc,lD,QL=(lD=class{constructor(){wt(this,sc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),MJ(this.gcTime)&&et(this,sc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(yb?1/0:5*60*1e3))}clearGcTimeout(){le(this,sc)&&(clearTimeout(le(this,sc)),et(this,sc,void 0))}},sc=new WeakMap,lD),td,rd,Si,an,Gp,ac,Ki,na,cD,qJ=(cD=class extends QL{constructor(r){super();wt(this,Ki);wt(this,td);wt(this,rd);wt(this,Si);wt(this,an);wt(this,Gp);wt(this,ac);et(this,ac,!1),et(this,Gp,r.defaultOptions),this.setOptions(r.options),this.observers=[],et(this,Si,r.cache),this.queryKey=r.queryKey,this.queryHash=r.queryHash,et(this,td,YJ(this.options)),this.state=r.state??le(this,td),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var r;return(r=le(this,an))==null?void 0:r.promise}setOptions(r){this.options={...le(this,Gp),...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&le(this,Si).remove(this)}setData(r,n){const i=FJ(this.state.data,r,this.options);return en(this,Ki,na).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(r,n){en(this,Ki,na).call(this,{type:"setState",state:r,setStateOptions:n})}cancel(r){var i,s;const n=(i=le(this,an))==null?void 0:i.promise;return(s=le(this,an))==null||s.cancel(r),n?n.then(Gi).catch(Gi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(le(this,td))}isActive(){return this.observers.some(r=>$J(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ME||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(r=0){return this.state.isInvalidated||this.state.data===void 0||!DJ(this.state.dataUpdatedAt,r)}onFocus(){var n;const r=this.observers.find(i=>i.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(n=le(this,an))==null||n.continue()}onOnline(){var n;const r=this.observers.find(i=>i.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(n=le(this,an))==null||n.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),le(this,Si).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(n=>n!==r),this.observers.length||(le(this,an)&&(le(this,ac)?le(this,an).cancel({revert:!0}):le(this,an).cancelRetry()),this.scheduleGc()),le(this,Si).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||en(this,Ki,na).call(this,{type:"invalidate"})}fetch(r,n){var u,h,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(le(this,an))return le(this,an).continueRetry(),le(this,an).promise}if(r&&this.setOptions(r),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const i=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(et(this,ac,!0),i.signal)})},a=()=>{const f=HL(this.options,n),m={queryKey:this.queryKey,meta:this.meta};return s(m),et(this,ac,!1),this.options.persister?this.options.persister(f,m,this):f(m)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(l),(u=this.options.behavior)==null||u.onFetch(l,this),et(this,rd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&en(this,Ki,na).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta});const c=f=>{var m,g,v,y;H1(f)&&f.silent||en(this,Ki,na).call(this,{type:"error",error:f}),H1(f)||((g=(m=le(this,Si).config).onError)==null||g.call(m,f,this),(y=(v=le(this,Si).config).onSettled)==null||y.call(v,this.state.data,f,this)),this.scheduleGc()};return et(this,an,YL({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:f=>{var m,g,v,y;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){c(x);return}(g=(m=le(this,Si).config).onSuccess)==null||g.call(m,f,this),(y=(v=le(this,Si).config).onSettled)==null||y.call(v,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{en(this,Ki,na).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{en(this,Ki,na).call(this,{type:"pause"})},onContinue:()=>{en(this,Ki,na).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),le(this,an).start()}},td=new WeakMap,rd=new WeakMap,Si=new WeakMap,an=new WeakMap,Gp=new WeakMap,ac=new WeakMap,Ki=new WeakSet,na=function(r){const n=i=>{switch(r.type){case"failed":return{...i,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...KJ(i.data,this.options),fetchMeta:r.meta??null};case"success":return{...i,data:r.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=r.error;return H1(s)&&s.revert&&le(this,rd)?{...le(this,rd),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...r.state}}};this.state=n(this.state),jn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),le(this,Si).notify({query:this,type:"updated",action:r})})},cD);function KJ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qL(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function YJ(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ks,uD,QJ=(uD=class extends gb{constructor(e={}){super();wt(this,ks);this.config=e,et(this,ks,new Map)}build(e,r,n){const i=r.queryKey,s=r.queryHash??RE(i,r);let a=this.get(s);return a||(a=new qJ({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){le(this,ks).has(e.queryHash)||(le(this,ks).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=le(this,ks).get(e.queryHash);r&&(e.destroy(),r===e&&le(this,ks).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return le(this,ks).get(e)}getAll(){return[...le(this,ks).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>uI(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>uI(e,n)):r}notify(e){jn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ks=new WeakMap,uD),Ns,_n,oc,js,ho,dD,XJ=(dD=class extends QL{constructor(r){super();wt(this,js);wt(this,Ns);wt(this,_n);wt(this,oc);this.mutationId=r.mutationId,et(this,_n,r.mutationCache),et(this,Ns,[]),this.state=r.state||JJ(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){le(this,Ns).includes(r)||(le(this,Ns).push(r),this.clearGcTimeout(),le(this,_n).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){et(this,Ns,le(this,Ns).filter(n=>n!==r)),this.scheduleGc(),le(this,_n).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){le(this,Ns).length||(this.state.status==="pending"?this.scheduleGc():le(this,_n).remove(this))}continue(){var r;return((r=le(this,oc))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var s,a,l,c,u,h,d,f,m,g,v,y,x,b,w,k,S,P,N,_;et(this,oc,YL({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(T,j)=>{en(this,js,ho).call(this,{type:"failed",failureCount:T,error:j})},onPause:()=>{en(this,js,ho).call(this,{type:"pause"})},onContinue:()=>{en(this,js,ho).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>le(this,_n).canRun(this)}));const n=this.state.status==="pending",i=!le(this,oc).canStart();try{if(!n){en(this,js,ho).call(this,{type:"pending",variables:r,isPaused:i}),await((a=(s=le(this,_n).config).onMutate)==null?void 0:a.call(s,r,this));const j=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,r));j!==this.state.context&&en(this,js,ho).call(this,{type:"pending",context:j,variables:r,isPaused:i})}const T=await le(this,oc).start();return await((h=(u=le(this,_n).config).onSuccess)==null?void 0:h.call(u,T,r,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,T,r,this.state.context)),await((g=(m=le(this,_n).config).onSettled)==null?void 0:g.call(m,T,null,this.state.variables,this.state.context,this)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,T,null,r,this.state.context)),en(this,js,ho).call(this,{type:"success",data:T}),T}catch(T){try{throw await((b=(x=le(this,_n).config).onError)==null?void 0:b.call(x,T,r,this.state.context,this)),await((k=(w=this.options).onError)==null?void 0:k.call(w,T,r,this.state.context)),await((P=(S=le(this,_n).config).onSettled)==null?void 0:P.call(S,void 0,T,this.state.variables,this.state.context,this)),await((_=(N=this.options).onSettled)==null?void 0:_.call(N,void 0,T,r,this.state.context)),T}finally{en(this,js,ho).call(this,{type:"error",error:T})}}finally{le(this,_n).runNext(this)}}},Ns=new WeakMap,_n=new WeakMap,oc=new WeakMap,js=new WeakSet,ho=function(r){const n=i=>{switch(r.type){case"failed":return{...i,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...i,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:r.error,failureCount:i.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=n(this.state),jn.batch(()=>{le(this,Ns).forEach(i=>{i.onMutationUpdate(r)}),le(this,_n).notify({mutation:this,type:"updated",action:r})})},dD);function JJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ii,qp,hD,ZJ=(hD=class extends gb{constructor(e={}){super();wt(this,ii);wt(this,qp);this.config=e,et(this,ii,new Map),et(this,qp,Date.now())}build(e,r,n){const i=new XJ({mutationCache:this,mutationId:++Qg(this,qp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){const r=x0(e),n=le(this,ii).get(r)??[];n.push(e),le(this,ii).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=x0(e);if(le(this,ii).has(r)){const i=(n=le(this,ii).get(r))==null?void 0:n.filter(s=>s!==e);i&&(i.length===0?le(this,ii).delete(r):le(this,ii).set(r,i))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=le(this,ii).get(x0(e)))==null?void 0:n.find(i=>i.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=le(this,ii).get(x0(e)))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...le(this,ii).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>dI(r,n))}findAll(e={}){return this.getAll().filter(r=>dI(e,r))}notify(e){jn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return jn.batch(()=>Promise.all(e.map(r=>r.continue().catch(Gi))))}},ii=new WeakMap,qp=new WeakMap,hD);function x0(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function mI(t){return{onFetch:(e,r)=>{var h,d,f,m,g;const n=e.options,i=(f=(d=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],a=((g=e.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=HL(e.options,e.fetchOptions),b=async(w,k,S)=>{if(v)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const P={queryKey:e.queryKey,pageParam:k,direction:S?"backward":"forward",meta:e.options.meta};y(P);const N=await x(P),{maxPages:_}=e.options,T=S?BJ:VJ;return{pages:T(w.pages,N,_),pageParams:T(w.pageParams,k,_)}};if(i&&s.length){const w=i==="backward",k=w?eZ:pI,S={pages:s,pageParams:a},P=k(n,S);l=await b(S,P,w)}else{const w=t??s.length;do{const k=c===0?a[0]??n.initialPageParam:pI(n,l);if(c>0&&k==null)break;l=await b(l,k),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var v,y;return(y=(v=e.options).persister)==null?void 0:y.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function pI(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function eZ(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var ar,Eo,Co,nd,id,Ao,sd,ad,fD,tZ=(fD=class{constructor(t={}){wt(this,ar);wt(this,Eo);wt(this,Co);wt(this,nd);wt(this,id);wt(this,Ao);wt(this,sd);wt(this,ad);et(this,ar,t.queryCache||new QJ),et(this,Eo,t.mutationCache||new ZJ),et(this,Co,t.defaultOptions||{}),et(this,nd,new Map),et(this,id,new Map),et(this,Ao,0)}mount(){Qg(this,Ao)._++,le(this,Ao)===1&&(et(this,sd,GL.subscribe(async t=>{t&&(await this.resumePausedMutations(),le(this,ar).onFocus())})),et(this,ad,rv.subscribe(async t=>{t&&(await this.resumePausedMutations(),le(this,ar).onOnline())})))}unmount(){var t,e;Qg(this,Ao)._--,le(this,Ao)===0&&((t=le(this,sd))==null||t.call(this),et(this,sd,void 0),(e=le(this,ad))==null||e.call(this),et(this,ad,void 0))}isFetching(t){return le(this,ar).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return le(this,Eo).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=le(this,ar).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=le(this,ar).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(cI(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return le(this,ar).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=le(this,ar).get(n.queryHash),s=i==null?void 0:i.state.data,a=RJ(e,s);if(a!==void 0)return le(this,ar).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return jn.batch(()=>le(this,ar).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=le(this,ar).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=le(this,ar);jn.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=le(this,ar),n={type:"active",...t};return jn.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=jn.batch(()=>le(this,ar).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(Gi).catch(Gi)}invalidateQueries(t={},e={}){return jn.batch(()=>{if(le(this,ar).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=jn.batch(()=>le(this,ar).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(Gi)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Gi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=le(this,ar).build(this,e);return r.isStaleByTime(cI(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Gi).catch(Gi)}fetchInfiniteQuery(t){return t.behavior=mI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Gi).catch(Gi)}ensureInfiniteQueryData(t){return t.behavior=mI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return rv.isOnline()?le(this,Eo).resumePausedMutations():Promise.resolve()}getQueryCache(){return le(this,ar)}getMutationCache(){return le(this,Eo)}getDefaultOptions(){return le(this,Co)}setDefaultOptions(t){et(this,Co,t)}setQueryDefaults(t,e){le(this,nd).set(qm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...le(this,nd).values()];let r={};return e.forEach(n=>{Km(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){le(this,id).set(qm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...le(this,id).values()];let r={};return e.forEach(n=>{Km(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...le(this,Co).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=RE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===ME&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...le(this,Co).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){le(this,ar).clear(),le(this,Eo).clear()}},ar=new WeakMap,Eo=new WeakMap,Co=new WeakMap,nd=new WeakMap,id=new WeakMap,Ao=new WeakMap,sd=new WeakMap,ad=new WeakMap,fD),rZ=E.createContext(void 0),nZ=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(rZ.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ym(){return Ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ym.apply(this,arguments)}var Io;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Io||(Io={}));const gI="popstate";function iZ(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:a,hash:l}=n.location;return nk("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:JL(i)}return aZ(e,r,null,t)}function Ar(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function XL(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sZ(){return Math.random().toString(36).substr(2,8)}function yI(t,e){return{usr:t.state,key:t.key,idx:e}}function nk(t,e,r,n){return r===void 0&&(r=null),Ym({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vh(e):e,{state:r,key:e&&e.key||n||sZ()})}function JL(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function vh(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function aZ(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,l=Io.Pop,c=null,u=h();u==null&&(u=0,a.replaceState(Ym({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function d(){l=Io.Pop;let y=h(),x=y==null?null:y-u;u=y,c&&c({action:l,location:v.location,delta:x})}function f(y,x){l=Io.Push;let b=nk(v.location,y,x);u=h()+1;let w=yI(b,u),k=v.createHref(b);try{a.pushState(w,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(k)}s&&c&&c({action:l,location:v.location,delta:1})}function m(y,x){l=Io.Replace;let b=nk(v.location,y,x);u=h();let w=yI(b,u),k=v.createHref(b);a.replaceState(w,"",k),s&&c&&c({action:l,location:v.location,delta:0})}function g(y){let x=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:JL(y);return b=b.replace(/ $/,"%20"),Ar(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let v={get action(){return l},get location(){return t(i,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(gI,d),c=y,()=>{i.removeEventListener(gI,d),c=null}},createHref(y){return e(i,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:m,go(y){return a.go(y)}};return v}var vI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vI||(vI={}));function oZ(t,e,r){return r===void 0&&(r="/"),lZ(t,e,r,!1)}function lZ(t,e,r,n){let i=typeof e=="string"?vh(e):e,s=t8(i.pathname||"/",r);if(s==null)return null;let a=ZL(t);cZ(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=bZ(s);l=vZ(a[c],u,n)}return l}function ZL(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Ar(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=uc([n,c.relativePath]),h=r.concat(c);s.children&&s.children.length>0&&(Ar(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ZL(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:gZ(u,s.index),routesMeta:h})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of e8(s.path))i(s,a,c)}),e}function e8(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=e8(n.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function cZ(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:yZ(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const uZ=/^:[\w-]+$/,dZ=3,hZ=2,fZ=1,mZ=10,pZ=-2,xI=t=>t==="*";function gZ(t,e){let r=t.split("/"),n=r.length;return r.some(xI)&&(n+=pZ),e&&(n+=hZ),r.filter(i=>!xI(i)).reduce((i,s)=>i+(uZ.test(s)?dZ:s===""?fZ:mZ),n)}function yZ(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function vZ(t,e,r){let{routesMeta:n}=t,i={},s="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=bI({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&r&&!n[n.length-1].route.index&&(d=bI({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:uc([s,d.pathname]),pathnameBase:jZ(uc([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=uc([s,d.pathnameBase]))}return a}function bI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=xZ(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let v=l[d]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[d];return m&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function xZ(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),XL(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function bZ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return XL(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function t8(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function wZ(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?vh(t):t;return{pathname:r?r.startsWith("/")?r:_Z(r,e):e,search:EZ(n),hash:CZ(i)}}function _Z(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function G1(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SZ(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function kZ(t,e){let r=SZ(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function NZ(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=vh(t):(i=Ym({},t),Ar(!i.pathname||!i.pathname.includes("?"),G1("?","pathname","search",i)),Ar(!i.pathname||!i.pathname.includes("#"),G1("#","pathname","hash",i)),Ar(!i.search||!i.search.includes("#"),G1("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let c=wZ(i,l),u=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const uc=t=>t.join("/").replace(/\/\/+/g,"/"),jZ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EZ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CZ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AZ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const r8=["post","put","patch","delete"];new Set(r8);const TZ=["get",...r8];new Set(TZ);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qm(){return Qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qm.apply(this,arguments)}const DE=E.createContext(null),PZ=E.createContext(null),vb=E.createContext(null),xb=E.createContext(null),xh=E.createContext({outlet:null,matches:[],isDataRoute:!1}),n8=E.createContext(null);function bb(){return E.useContext(xb)!=null}function ig(){return bb()||Ar(!1),E.useContext(xb).location}function i8(t){E.useContext(vb).static||E.useLayoutEffect(t)}function $E(){let{isDataRoute:t}=E.useContext(xh);return t?WZ():IZ()}function IZ(){bb()||Ar(!1);let t=E.useContext(DE),{basename:e,future:r,navigator:n}=E.useContext(vb),{matches:i}=E.useContext(xh),{pathname:s}=ig(),a=JSON.stringify(kZ(i,r.v7_relativeSplatPath)),l=E.useRef(!1);return i8(()=>{l.current=!0}),E.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=NZ(u,JSON.parse(a),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:uc([e,d.pathname])),(h.replace?n.replace:n.push)(d,h.state,h)},[e,n,a,s,t])}function OZ(t,e){return RZ(t,e)}function RZ(t,e,r,n){bb()||Ar(!1);let{navigator:i}=E.useContext(vb),{matches:s}=E.useContext(xh),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ig(),h;if(e){var d;let y=typeof e=="string"?vh(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||Ar(!1),h=y}else h=u;let f=h.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=oZ(t,{pathname:m}),v=FZ(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:uc([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:uc([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&v?E.createElement(xb.Provider,{value:{location:Qm({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Io.Pop}},v):v}function MZ(){let t=zZ(),e=AZ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),r?E.createElement("pre",{style:i},r):null,null)}const DZ=E.createElement(MZ,null);class $Z extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?E.createElement(xh.Provider,{value:this.props.routeContext},E.createElement(n8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LZ(t){let{routeContext:e,match:r,children:n}=t,i=E.useContext(DE);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(xh.Provider,{value:e},n)}function FZ(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let h=a.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||Ar(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<a.length;h++){let d=a[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=r,g=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,d,f)=>{let m,g=!1,v=null,y=null;r&&(m=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||DZ,c&&(u<0&&f===0?(g=!0,y=null):u===f&&(g=!0,y=d.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,f+1)),b=()=>{let w;return m?w=v:g?w=y:d.route.Component?w=E.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=h,E.createElement(LZ,{match:d,routeContext:{outlet:h,matches:x,isDataRoute:r!=null},children:w})};return r&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?E.createElement($Z,{location:r.location,revalidation:r.revalidation,component:v,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var s8=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(s8||{}),nv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(nv||{});function VZ(t){let e=E.useContext(DE);return e||Ar(!1),e}function BZ(t){let e=E.useContext(PZ);return e||Ar(!1),e}function UZ(t){let e=E.useContext(xh);return e||Ar(!1),e}function a8(t){let e=UZ(),r=e.matches[e.matches.length-1];return r.route.id||Ar(!1),r.route.id}function zZ(){var t;let e=E.useContext(n8),r=BZ(nv.UseRouteError),n=a8(nv.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function WZ(){let{router:t}=VZ(s8.UseNavigateStable),e=a8(nv.UseNavigateStable),r=E.useRef(!1);return i8(()=>{r.current=!0}),E.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Qm({fromRouteId:e},s)))},[t,e])}function fo(t){Ar(!1)}function HZ(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Io.Pop,navigator:s,static:a=!1,future:l}=t;bb()&&Ar(!1);let c=e.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:c,navigator:s,static:a,future:Qm({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof n=="string"&&(n=vh(n));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:g="default"}=n,v=E.useMemo(()=>{let y=t8(h,c);return y==null?null:{location:{pathname:y,search:d,hash:f,state:m,key:g},navigationType:i}},[c,h,d,f,m,g,i]);return v==null?null:E.createElement(vb.Provider,{value:u},E.createElement(xb.Provider,{children:r,value:v}))}function GZ(t){let{children:e,location:r}=t;return OZ(ik(e),r)}new Promise(()=>{});function ik(t,e){e===void 0&&(e=[]);let r=[];return E.Children.forEach(t,(n,i)=>{if(!E.isValidElement(n))return;let s=[...e,i];if(n.type===E.Fragment){r.push.apply(r,ik(n.props.children,s));return}n.type!==fo&&Ar(!1),!n.props.index||!n.props.children||Ar(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=ik(n.props.children,s)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qZ="6";try{window.__reactRouterVersion=qZ}catch{}const KZ="startTransition",wI=kD[KZ];function YZ(t){let{basename:e,children:r,future:n,window:i}=t,s=E.useRef();s.current==null&&(s.current=iZ({window:i,v5Compat:!0}));let a=s.current,[l,c]=E.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},h=E.useCallback(d=>{u&&wI?wI(()=>c(d)):c(d)},[c,u]);return E.useLayoutEffect(()=>a.listen(h),[a,h]),E.createElement(HZ,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}var _I;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_I||(_I={}));var SI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(SI||(SI={}));const o8=E.createContext(void 0);function QZ({children:t}){const[e,r]=E.useState(()=>localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));E.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),localStorage.setItem("theme",e)},[e]);const n=()=>{r(i=>i==="light"?"dark":"light")};return o.jsx(o8.Provider,{value:{theme:e,toggleTheme:n},children:t})}function XZ(){const t=E.useContext(o8);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const JZ=()=>{};var kI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se=function(t,e){if(!t)throw bh(e)},bh=function(t){return new Error("Firebase Database ("+l8.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},ZZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],l=t[r++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,a||(f=64)),n.push(r[h],r[d],r[f],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new eee;const f=s<<2|l>>4;if(n.push(f),u!==64){const m=l<<4&240|u>>2;if(n.push(m),d!==64){const g=u<<6&192|d;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u8=function(t){const e=c8(t);return LE.encodeByteArray(e,!0)},iv=function(t){return u8(t).replace(/\./g,"")},sv=function(t){try{return LE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tee(t){return d8(void 0,t)}function d8(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!ree(r)||(t[r]=d8(t[r],e[r]));return t}function ree(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iee=()=>nee().__FIREBASE_DEFAULTS__,see=()=>{if(typeof process>"u"||typeof kI>"u")return;const t=kI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aee=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sv(t[1]);return e&&JSON.parse(e)},wb=()=>{try{return JZ()||iee()||see()||aee()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},h8=t=>{var e,r;return(r=(e=wb())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},f8=t=>{const e=h8(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},m8=()=>{var t;return(t=wb())===null||t===void 0?void 0:t.config},p8=t=>{var e;return(e=wb())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){return t.endsWith(".cloudworkstations.dev")}async function FE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[iv(JSON.stringify(r)),iv(JSON.stringify(a)),""].join(".")}const sm={};function oee(){const t={prod:[],emulator:[]};for(const e of Object.keys(sm))sm[e]?t.emulator.push(e):t.prod.push(e);return t}function lee(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let NI=!1;function VE(t,e){if(typeof window>"u"||typeof document>"u"||!bl(window.location.host)||sm[t]===e||sm[t]||NI)return;sm[t]=e;function r(f){return`__firebase__banner__${f}`}const n="__firebase__banner",s=oee().prod.length>0;function a(){const f=document.getElementById(n);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{NI=!0,a()},f}function h(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=lee(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),v=r("learnmore"),y=document.getElementById(v)||document.createElement("a"),x=r("preprendIcon"),b=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;l(w),h(y,v);const k=u();c(b,x),w.append(b,g,y,k),document.body.appendChild(w)}s?(g.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xn())}function cee(){var t;const e=(t=wb())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uee(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dee(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function y8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hee(){const t=xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v8(){return l8.NODE_ADMIN===!0}function fee(){return!cee()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mee(){try{return typeof indexedDB=="object"}catch{return!1}}function pee(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gee="FirebaseError";class Ha extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=gee,Object.setPrototypeOf(this,Ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sg.prototype.create)}}class sg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?yee(s,n):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Ha(i,l,n)}}function yee(t,e){return t.replace(vee,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const vee=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){return JSON.parse(t)}function Hr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=function(t){let e={},r={},n={},i="";try{const s=t.split(".");e=Xm(sv(s[0])||""),r=Xm(sv(s[1])||""),i=s[2],n=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:n,signature:i}},xee=function(t){const e=x8(t),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},bee=function(t){const e=x8(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _d(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function sk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function av(t,e,r){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e.call(r,t[i],i,t));return n}function Ws(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(jI(s)&&jI(a)){if(!Ws(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function jI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Vf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Bf(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let d=0;d<16;d++)n[d]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let d=16;d<80;d++){const f=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(a^l),h=1518500249):(u=s^a^l,h=1859775393):d<60?(u=s&a|l&(s|a),h=2400959708):(u=s^a^l,h=3395469782);const f=(i<<5|i>>>27)+u+c+h+n[d]&4294967295;c=l,l=a,a=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const n=r-this.blockSize;let i=0;const s=this.buf_;let a=this.inbuf_;for(;i<r;){if(a===0)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<r;)if(s[a]=e.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<r;)if(s[a]=e[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[n]=this.chain_[i]>>s&255,++n;return e}}function _ee(t,e){const r=new See(t,e);return r.subscribe.bind(r)}class See{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");kee(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=q1),i.error===void 0&&(i.error=q1),i.complete===void 0&&(i.complete=q1);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kee(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function q1(){}function UE(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nee=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i>=55296&&i<=56319){const s=i-55296;n++,Se(n<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(n)-56320;i=65536+(s<<10)+a}i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):i<65536?(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Sb=function(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,r++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){return t&&t._delegate?t._delegate:t}class ll{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jee{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new _b;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cee(e))try{this.getOrInitializeService({instanceIdentifier:Fl})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Fl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fl){return this.instances.has(e)}getOptions(e=Fl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Eee(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Fl){return this.component?this.component.multipleInstances?e:Fl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Eee(t){return t===Fl?void 0:t}function Cee(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new jee(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const Tee={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},Pee=nt.INFO,Iee={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},Oee=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Iee[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kb{constructor(e){this.name=e,this._logLevel=Pee,this._logHandler=Oee,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const Ree=(t,e)=>e.some(r=>t instanceof r);let EI,CI;function Mee(){return EI||(EI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dee(){return CI||(CI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b8=new WeakMap,ak=new WeakMap,w8=new WeakMap,K1=new WeakMap,zE=new WeakMap;function $ee(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{r(Ko(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&b8.set(r,t)}).catch(()=>{}),zE.set(e,t),e}function Lee(t){if(ak.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});ak.set(t,e)}let ok={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ak.get(t);if(e==="objectStoreNames")return t.objectStoreNames||w8.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ko(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Fee(t){ok=t(ok)}function Vee(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Y1(this),e,...r);return w8.set(n,e.sort?e.sort():[e]),Ko(n)}:Dee().includes(t)?function(...e){return t.apply(Y1(this),e),Ko(b8.get(this))}:function(...e){return Ko(t.apply(Y1(this),e))}}function Bee(t){return typeof t=="function"?Vee(t):(t instanceof IDBTransaction&&Lee(t),Ree(t,Mee())?new Proxy(t,ok):t)}function Ko(t){if(t instanceof IDBRequest)return $ee(t);if(K1.has(t))return K1.get(t);const e=Bee(t);return e!==t&&(K1.set(t,e),zE.set(e,t)),e}const Y1=t=>zE.get(t);function Uee(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Ko(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Ko(a.result),c.oldVersion,c.newVersion,Ko(a.transaction),c)}),r&&a.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const zee=["get","getKey","getAll","getAllKeys","count"],Wee=["put","add","delete","clear"],Q1=new Map;function AI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Q1.get(e))return Q1.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Wee.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||zee.includes(r)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),i&&c.done]))[0]};return Q1.set(e,s),s}Fee(t=>({...t,get:(e,r,n)=>AI(e,r)||t.get(e,r,n),has:(e,r)=>!!AI(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Gee(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Gee(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lk="@firebase/app",TI="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new kb("@firebase/app"),qee="@firebase/app-compat",Kee="@firebase/analytics-compat",Yee="@firebase/analytics",Qee="@firebase/app-check-compat",Xee="@firebase/app-check",Jee="@firebase/auth",Zee="@firebase/auth-compat",ete="@firebase/database",tte="@firebase/data-connect",rte="@firebase/database-compat",nte="@firebase/functions",ite="@firebase/functions-compat",ste="@firebase/installations",ate="@firebase/installations-compat",ote="@firebase/messaging",lte="@firebase/messaging-compat",cte="@firebase/performance",ute="@firebase/performance-compat",dte="@firebase/remote-config",hte="@firebase/remote-config-compat",fte="@firebase/storage",mte="@firebase/storage-compat",pte="@firebase/firestore",gte="@firebase/ai",yte="@firebase/firestore-compat",vte="firebase",xte="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="[DEFAULT]",bte={[lk]:"fire-core",[qee]:"fire-core-compat",[Yee]:"fire-analytics",[Kee]:"fire-analytics-compat",[Xee]:"fire-app-check",[Qee]:"fire-app-check-compat",[Jee]:"fire-auth",[Zee]:"fire-auth-compat",[ete]:"fire-rtdb",[tte]:"fire-data-connect",[rte]:"fire-rtdb-compat",[nte]:"fire-fn",[ite]:"fire-fn-compat",[ste]:"fire-iid",[ate]:"fire-iid-compat",[ote]:"fire-fcm",[lte]:"fire-fcm-compat",[cte]:"fire-perf",[ute]:"fire-perf-compat",[dte]:"fire-rc",[hte]:"fire-rc-compat",[fte]:"fire-gcs",[mte]:"fire-gcs-compat",[pte]:"fire-fst",[yte]:"fire-fst-compat",[gte]:"fire-vertex","fire-js":"fire-js",[vte]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map,wte=new Map,uk=new Map;function PI(t,e){try{t.container.addComponent(e)}catch(r){Oa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function bc(t){const e=t.name;if(uk.has(e))return Oa.debug(`There were multiple attempts to register component ${e}.`),!1;uk.set(e,t);for(const r of ov.values())PI(r,t);for(const r of wte.values())PI(r,t);return!0}function Nb(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Fn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _te={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yo=new sg("app","Firebase",_te);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ste{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=xte;function _8(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:ck,automaticDataCollectionEnabled:!0},e),i=n.name;if(typeof i!="string"||!i)throw Yo.create("bad-app-name",{appName:String(i)});if(r||(r=m8()),!r)throw Yo.create("no-options");const s=ov.get(i);if(s){if(Ws(r,s.options)&&Ws(n,s.config))return s;throw Yo.create("duplicate-app",{appName:i})}const a=new Aee(i);for(const c of uk.values())a.addComponent(c);const l=new Ste(r,n,a);return ov.set(i,l),l}function WE(t=ck){const e=ov.get(t);if(!e&&t===ck&&m8())return _8();if(!e)throw Yo.create("no-app",{appName:t});return e}function Ms(t,e,r){var n;let i=(n=bte[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oa.warn(l.join(" "));return}bc(new ll(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kte="firebase-heartbeat-database",Nte=1,Jm="firebase-heartbeat-store";let X1=null;function S8(){return X1||(X1=Uee(kte,Nte,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jm)}catch(r){console.warn(r)}}}}).catch(t=>{throw Yo.create("idb-open",{originalErrorMessage:t.message})})),X1}async function jte(t){try{const r=(await S8()).transaction(Jm),n=await r.objectStore(Jm).get(k8(t));return await r.done,n}catch(e){if(e instanceof Ha)Oa.warn(e.message);else{const r=Yo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oa.warn(r.message)}}}async function II(t,e){try{const n=(await S8()).transaction(Jm,"readwrite");await n.objectStore(Jm).put(e,k8(t)),await n.done}catch(r){if(r instanceof Ha)Oa.warn(r.message);else{const n=Yo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Oa.warn(n.message)}}}function k8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ete=1024,Cte=30;class Ate{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Pte(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=OI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Cte){const a=Ite(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Oa.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=OI(),{heartbeatsToSend:n,unsentEntries:i}=Tte(this._heartbeatsCache.heartbeats),s=iv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return Oa.warn(r),""}}}function OI(){return new Date().toISOString().substring(0,10)}function Tte(t,e=Ete){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),RI(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),RI(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Pte{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mee()?pee().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await jte(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return II(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return II(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function RI(t){return iv(JSON.stringify({version:2,heartbeats:t})).length}function Ite(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ote(t){bc(new ll("platform-logger",e=>new Hee(e),"PRIVATE")),bc(new ll("heartbeat",e=>new Ate(e),"PRIVATE")),Ms(lk,TI,t),Ms(lk,TI,"esm2017"),Ms("fire-js","")}Ote("");var As=function(){return As=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},As.apply(this,arguments)};function ag(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Rte(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function N8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mte=N8,j8=new sg("auth","Firebase",N8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=new kb("@firebase/auth");function Dte(t,...e){lv.logLevel<=nt.WARN&&lv.warn(`Auth (${Fc}): ${t}`,...e)}function uy(t,...e){lv.logLevel<=nt.ERROR&&lv.error(`Auth (${Fc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,...e){throw GE(t,...e)}function cs(t,...e){return GE(t,...e)}function HE(t,e,r){const n=Object.assign(Object.assign({},Mte()),{[e]:r});return new sg("auth","Firebase",n).create(e,{appName:t.name})}function wa(t){return HE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $te(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Mi(t,"argument-error"),HE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function GE(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return j8.create(t,...e)}function Ue(t,e,...r){if(!t)throw GE(e,...r)}function ma(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uy(e),new Error(e)}function Ra(t,e){t||ma(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Lte(){return MI()==="http:"||MI()==="https:"}function MI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fte(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lte()||dee()||"connection"in navigator)?navigator.onLine:!0}function Vte(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ra(r>e,"Short delay should be less than long delay!"),this.isMobile=BE()||y8()}get(){return Fte()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e){Ra(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bte={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ute=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zte=new og(3e4,6e4);function wl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qa(t,e,r,n,i={}){return C8(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const l=wh(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return uee()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&bl(t.emulatorConfig.host)&&(u.credentials="include"),E8.fetch()(await A8(t,t.config.apiHost,r,l),u)})}async function C8(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Bte),e);try{const i=new Hte(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw b0(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw b0(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw b0(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw b0(t,"user-disabled",a);const h=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw HE(t,h,u);Mi(t,h)}}catch(i){if(i instanceof Ha)throw i;Mi(t,"network-request-failed",{message:String(i)})}}async function lg(t,e,r,n,i={}){const s=await qa(t,e,r,n,i);return"mfaPendingCredential"in s&&Mi(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function A8(t,e,r,n){const i=`${e}${r}?${n}`,s=t,a=s.config.emulator?qE(t.config,i):`${t.config.apiScheme}://${i}`;return Ute.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function Wte(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hte{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(cs(this.auth,"network-request-failed")),zte.get())})}}function b0(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=cs(t,e,n);return i.customData._tokenResponse=r,i}function DI(t){return t!==void 0&&t.enterprise!==void 0}class Gte{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Wte(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qte(t,e){return qa(t,"GET","/v2/recaptchaConfig",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kte(t,e){return qa(t,"POST","/v1/accounts:delete",e)}async function cv(t,e){return qa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Yte(t,e=!1){const r=Ot(t),n=await r.getIdToken(e),i=KE(n);Ue(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:am(J1(i.auth_time)),issuedAtTime:am(J1(i.iat)),expirationTime:am(J1(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function J1(t){return Number(t)*1e3}function KE(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return uy("JWT malformed, contained fewer than 3 sections"),null;try{const i=sv(r);return i?JSON.parse(i):(uy("Failed to decode base64 JWT payload"),null)}catch(i){return uy("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $I(t){const e=KE(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ha&&Qte(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Qte({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xte{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=am(this.lastLoginAt),this.creationTime=am(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uv(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Sd(t,cv(r,{idToken:n}));Ue(i==null?void 0:i.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?T8(s.providerUserInfo):[],l=Zte(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new hk(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function Jte(t){const e=Ot(t);await uv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Zte(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function T8(t){return t.map(e=>{var{providerId:r}=e,n=ag(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ere(t,e){const r=await C8(t,{},async()=>{const n=wh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await A8(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&bl(t.emulatorConfig.host)&&(c.credentials="include"),E8.fetch()(a,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function tre(t,e){return qa(t,"POST","/v2/accounts:revokeToken",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$I(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const r=$I(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await ere(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new Bu;return n&&(Ue(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Ue(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ue(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bu,this.toJSON())}_performRefresh(){return ma("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ns{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xte(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hk(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Sd(this,this.stsTokenManager.getToken(this.auth,e));return Ue(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Yte(this,e)}reload(){return Jte(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ns(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await uv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(wa(this.auth));const e=await this.getIdToken();return await Sd(this,Kte(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,a,l,c,u,h;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(i=r.email)!==null&&i!==void 0?i:void 0,m=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,g=(a=r.photoURL)!==null&&a!==void 0?a:void 0,v=(l=r.tenantId)!==null&&l!==void 0?l:void 0,y=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,b=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:k,isAnonymous:S,providerData:P,stsTokenManager:N}=r;Ue(w&&N,e,"internal-error");const _=Bu.fromJSON(this.name,N);Ue(typeof w=="string",e,"internal-error"),uo(d,e.name),uo(f,e.name),Ue(typeof k=="boolean",e,"internal-error"),Ue(typeof S=="boolean",e,"internal-error"),uo(m,e.name),uo(g,e.name),uo(v,e.name),uo(y,e.name),uo(x,e.name),uo(b,e.name);const T=new ns({uid:w,auth:e,email:f,emailVerified:k,displayName:d,isAnonymous:S,photoURL:g,phoneNumber:m,tenantId:v,stsTokenManager:_,createdAt:x,lastLoginAt:b});return P&&Array.isArray(P)&&(T.providerData=P.map(j=>Object.assign({},j))),y&&(T._redirectEventId=y),T}static async _fromIdTokenResponse(e,r,n=!1){const i=new Bu;i.updateFromServerResponse(r);const s=new ns({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await uv(s),s}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?T8(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Bu;l.updateFromIdToken(n);const c=new ns({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hk(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new Map;function pa(t){Ra(t instanceof Function,"Expected a class definition");let e=LI.get(t);return e?(Ra(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}P8.type="NONE";const FI=P8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t,e,r){return`firebase:${t}:${e}:${r}`}class Uu{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=dy(this.userKey,i.apiKey,s),this.fullPersistenceKey=dy("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await cv(this.auth,{idToken:e}).catch(()=>{});return r?ns._fromGetAccountInfoResponse(this.auth,r,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Uu(pa(FI),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||pa(FI);const a=dy(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const h=await u._get(a);if(h){let d;if(typeof h=="string"){const f=await cv(e,{idToken:h}).catch(()=>{});if(!f)break;d=await ns._fromGetAccountInfoResponse(e,f,h)}else d=ns._fromJSON(e,h);u!==s&&(l=d),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Uu(s,e,n):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Uu(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($8(e))return"Blackberry";if(L8(e))return"Webos";if(O8(e))return"Safari";if((e.includes("chrome/")||R8(e))&&!e.includes("edge/"))return"Chrome";if(D8(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function I8(t=xn()){return/firefox\//i.test(t)}function O8(t=xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R8(t=xn()){return/crios\//i.test(t)}function M8(t=xn()){return/iemobile/i.test(t)}function D8(t=xn()){return/android/i.test(t)}function $8(t=xn()){return/blackberry/i.test(t)}function L8(t=xn()){return/webos/i.test(t)}function YE(t=xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rre(t=xn()){var e;return YE(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nre(){return hee()&&document.documentMode===10}function F8(t=xn()){return YE(t)||D8(t)||L8(t)||$8(t)||/windows phone/i.test(t)||M8(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t,e=[]){let r;switch(t){case"Browser":r=VI(xn());break;case"Worker":r=`${VI(xn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Fc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ire{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sre(t,e={}){return qa(t,"GET","/v2/passwordPolicy",wl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const are=6;class ore{constructor(e){var r,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:are,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lre{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BI(this),this.idTokenSubscription=new BI(this),this.beforeStateQueue=new ire(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=pa(r)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await Uu.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await cv(this,{idToken:e}),n=await ns._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Fn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await uv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vte()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(wa(this));const r=e?Ot(e):null;return r&&Ue(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sre(this),r=new ore(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await tre(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&pa(e)||this._popupRedirectResolver;Ue(r,this,"argument-error"),this.redirectPersistenceManager=await Uu.create(this,[pa(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{a=!0,c()}}else{const c=e.addObserver(r);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Dte(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function _l(t){return Ot(t)}class BI{constructor(e){this.auth=e,this.observer=null,this.addObserver=_ee(r=>this.observer=r)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cre(t){jb=t}function B8(t){return jb.loadJS(t)}function ure(){return jb.recaptchaEnterpriseScript}function dre(){return jb.gapiScript}function hre(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class fre{constructor(){this.enterprise=new mre}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class mre{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const pre="recaptcha-enterprise",U8="NO_RECAPTCHA";class gre{constructor(e){this.type=pre,this.auth=_l(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{qte(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Gte(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})})}function i(s,a,l){const c=window.grecaptcha;DI(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(U8)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fre().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(l=>{if(!r&&DI(window.grecaptcha))i(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=ure();c.length!==0&&(c+=l),B8(c).then(()=>{i(l,s,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function UI(t,e,r,n=!1,i=!1){const s=new gre(t);let a;if(i)a=U8;else try{a=await s.verify(r)}catch{a=await s.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function fk(t,e,r,n,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await UI(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await UI(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yre(t,e){const r=Nb(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(Ws(s,e??{}))return i;Mi(i,"already-initialized")}return r.initialize({options:e})}function vre(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(pa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function xre(t,e,r){const n=_l(t);Ue(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=z8(e),{host:a,port:l}=bre(e),c=l===null?"":`:${l}`,u={url:`${s}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Ue(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ue(Ws(u,n.config.emulator)&&Ws(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,bl(a)?(FE(`${s}//${a}${c}`),VE("Auth",!0)):wre()}function z8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bre(t){const e=z8(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:zI(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:zI(a)}}}function zI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wre(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ma("not implemented")}_getIdTokenResponse(e){return ma("not implemented")}_linkToIdToken(e,r){return ma("not implemented")}_getReauthenticationResolver(e){return ma("not implemented")}}async function _re(t,e){return qa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sre(t,e){return lg(t,"POST","/v1/accounts:signInWithPassword",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kre(t,e){return lg(t,"POST","/v1/accounts:signInWithEmailLink",wl(t,e))}async function Nre(t,e){return lg(t,"POST","/v1/accounts:signInWithEmailLink",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends QE{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Zm(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Zm(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fk(e,r,"signInWithPassword",Sre);case"emailLink":return kre(e,{email:this._email,oobCode:this._password});default:Mi(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fk(e,n,"signUpPassword",_re);case"emailLink":return Nre(e,{idToken:r,email:this._email,oobCode:this._password});default:Mi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t,e){return lg(t,"POST","/v1/accounts:signInWithIdp",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jre="http://localhost";class wc extends QE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new wc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Mi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=ag(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new wc(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return zu(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,zu(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,zu(e,r)}buildRequest(){const e={requestUri:jre,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=wh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ere(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Cre(t){const e=Vf(Bf(t)).link,r=e?Vf(Bf(e)).deep_link_id:null,n=Vf(Bf(t)).deep_link_id;return(n?Vf(Bf(n)).link:null)||n||r||e||t}class XE{constructor(e){var r,n,i,s,a,l;const c=Vf(Bf(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,h=(n=c.oobCode)!==null&&n!==void 0?n:null,d=Ere((i=c.mode)!==null&&i!==void 0?i:null);Ue(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=Cre(e);try{return new XE(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this.providerId=_h.PROVIDER_ID}static credential(e,r){return Zm._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=XE.parseLink(r);return Ue(n,"argument-error"),Zm._fromEmailAndCode(e,n.code,n.tenantId)}}_h.PROVIDER_ID="password";_h.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_h.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends JE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends cg{constructor(){super("facebook.com")}static credential(e){return wc._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends cg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return wc._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return la.credential(r,n)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends cg{constructor(){super("github.com")}static credential(e){return wc._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.GITHUB_SIGN_IN_METHOD="github.com";_o.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends cg{constructor(){super("twitter.com")}static credential(e,r){return wc._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return So.credential(r,n)}catch{return null}}}So.TWITTER_SIGN_IN_METHOD="twitter.com";So.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Are(t,e){return lg(t,"POST","/v1/accounts:signUp",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await ns._fromIdTokenResponse(e,n,i),a=WI(n);return new _c({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=WI(n);return new _c({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function WI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends Ha{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,dv.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new dv(e,r,n,i)}}function W8(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dv._fromErrorAndOperation(t,s,e,n):s})}async function Tre(t,e,r=!1){const n=await Sd(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return _c._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pre(t,e,r=!1){const{auth:n}=t;if(Fn(n.app))return Promise.reject(wa(n));const i="reauthenticate";try{const s=await Sd(t,W8(n,i,e,t),r);Ue(s.idToken,n,"internal-error");const a=KE(s.idToken);Ue(a,n,"internal-error");const{sub:l}=a;return Ue(t.uid===l,n,"user-mismatch"),_c._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Mi(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t,e,r=!1){if(Fn(t.app))return Promise.reject(wa(t));const n="signIn",i=await W8(t,n,e),s=await _c._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}async function Ire(t,e){return H8(_l(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G8(t){const e=_l(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ore(t,e,r){if(Fn(t.app))return Promise.reject(wa(t));const n=_l(t),a=await fk(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Are).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&G8(t),c}),l=await _c._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function Rre(t,e,r){return Fn(t.app)?Promise.reject(wa(t)):Ire(Ot(t),_h.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&G8(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mre(t,e){return qa(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dre(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Ot(t),s={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await Sd(n,Mre(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function $re(t,e,r,n){return Ot(t).onIdTokenChanged(e,r,n)}function Lre(t,e,r){return Ot(t).beforeAuthStateChanged(e,r)}function Fre(t,e,r,n){return Ot(t).onAuthStateChanged(e,r,n)}function Vre(t){return Ot(t).signOut()}const hv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(hv,"1"),this.storage.removeItem(hv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bre=1e3,Ure=10;class K8 extends q8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=F8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);nre()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Ure):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Bre)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}K8.type="LOCAL";const zre=K8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8 extends q8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Y8.type="SESSION";const Q8=Y8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wre(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Eb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(a).map(async u=>u(r.origin,s)),c=await Wre(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hre{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const u=ZE("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(){return window}function Gre(t){Ds().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(){return typeof Ds().WorkerGlobalScope<"u"&&typeof Ds().importScripts=="function"}async function qre(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kre(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Yre(){return X8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8="firebaseLocalStorageDb",Qre=1,fv="firebaseLocalStorage",Z8="fbase_key";class ug{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Cb(t,e){return t.transaction([fv],e?"readwrite":"readonly").objectStore(fv)}function Xre(){const t=indexedDB.deleteDatabase(J8);return new ug(t).toPromise()}function mk(){const t=indexedDB.open(J8,Qre);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(fv,{keyPath:Z8})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(fv)?e(n):(n.close(),await Xre(),e(await mk()))})})}async function HI(t,e,r){const n=Cb(t,!0).put({[Z8]:e,value:r});return new ug(n).toPromise()}async function Jre(t,e){const r=Cb(t,!1).get(e),n=await new ug(r).toPromise();return n===void 0?null:n.value}function GI(t,e){const r=Cb(t,!0).delete(e);return new ug(r).toPromise()}const Zre=800,ene=3;class eF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mk(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>ene)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eb._getInstance(Yre()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await qre(),!this.activeServiceWorker)return;this.sender=new Hre(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Kre()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mk();return await HI(e,hv,"1"),await GI(e,hv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>HI(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Jre(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>GI(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Cb(i,!1).getAll();return new ug(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zre)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eF.type="LOCAL";const tne=eF;new og(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t,e){return e?pa(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2 extends QE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zu(e,this._buildIdpRequest())}_linkToIdToken(e,r){return zu(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return zu(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function rne(t){return H8(t.auth,new e2(t),t.bypassAuthState)}function nne(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),Pre(r,new e2(t),t.bypassAuthState)}async function ine(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),Tre(r,new e2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rne;case"linkViaPopup":case"linkViaRedirect":return ine;case"reauthViaPopup":case"reauthViaRedirect":return nne;default:Mi(this.auth,"internal-error")}}resolve(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sne=new og(2e3,1e4);async function ane(t,e,r){if(Fn(t.app))return Promise.reject(cs(t,"operation-not-supported-in-this-environment"));const n=_l(t);$te(t,e,JE);const i=tF(n,r);return new Yl(n,"signInViaPopup",e,i).executeNotNull()}class Yl extends rF{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Yl.currentPopupAction&&Yl.currentPopupAction.cancel(),Yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Ra(this.filter.length===1,"Popup operations only handle one event");const e=ZE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sne.get())};e()}}Yl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const one="pendingRedirect",hy=new Map;class lne extends rF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=hy.get(this.auth._key());if(!e){try{const n=await cne(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}hy.set(this.auth._key(),e)}return this.bypassAuthState||hy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cne(t,e){const r=hne(e),n=dne(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function une(t,e){hy.set(t._key(),e)}function dne(t){return pa(t._redirectPersistence)}function hne(t){return dy(one,t.config.apiKey,t.name)}async function fne(t,e,r=!1){if(Fn(t.app))return Promise.reject(wa(t));const n=_l(t),i=tF(n,e),a=await new lne(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mne=10*60*1e3;class pne{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gne(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!nF(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(cs(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mne&&this.cachedEventUids.clear(),this.cachedEventUids.has(qI(e))}saveEventToCache(e){this.cachedEventUids.add(qI(e)),this.lastProcessedEventTime=Date.now()}}function qI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gne(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yne(t,e={}){return qa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vne=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xne=/^https?/;async function bne(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yne(t);for(const r of e)try{if(wne(r))return}catch{}Mi(t,"unauthorized-domain")}function wne(t){const e=dk(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!xne.test(r))return!1;if(vne.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ne=new og(3e4,6e4);function KI(){const t=Ds().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Sne(t){return new Promise((e,r)=>{var n,i,s;function a(){KI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KI(),r(cs(t,"network-request-failed"))},timeout:_ne.get()})}if(!((i=(n=Ds().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ds().gapi)===null||s===void 0)&&s.load)a();else{const l=hre("iframefcb");return Ds()[l]=()=>{gapi.load?a():r(cs(t,"network-request-failed"))},B8(`${dre()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw fy=null,e})}let fy=null;function kne(t){return fy=fy||Sne(t),fy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nne=new og(5e3,15e3),jne="__/auth/iframe",Ene="emulator/auth/iframe",Cne={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ane=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tne(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?qE(e,Ene):`https://${t.config.authDomain}/${jne}`,n={apiKey:e.apiKey,appName:t.name,v:Fc},i=Ane.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${wh(n).slice(1)}`}async function Pne(t){const e=await kne(t),r=Ds().gapi;return Ue(r,t,"internal-error"),e.open({where:document.body,url:Tne(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cne,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=cs(t,"network-request-failed"),l=Ds().setTimeout(()=>{s(a)},Nne.get());function c(){Ds().clearTimeout(l),i(n)}n.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ine={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},One=500,Rne=600,Mne="_blank",Dne="http://localhost";class YI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $ne(t,e,r,n=One,i=Rne){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Ine),{width:n.toString(),height:i.toString(),top:s,left:a}),u=xn().toLowerCase();r&&(l=R8(u)?Mne:r),I8(u)&&(e=e||Dne,c.scrollbars="yes");const h=Object.entries(c).reduce((f,[m,g])=>`${f}${m}=${g},`,"");if(rre(u)&&l!=="_self")return Lne(e||"",l),new YI(null);const d=window.open(e||"",l,h);Ue(d,t,"popup-blocked");try{d.focus()}catch{}return new YI(d)}function Lne(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fne="__/auth/handler",Vne="emulator/auth/handler",Bne=encodeURIComponent("fac");async function QI(t,e,r,n,i,s){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Fc,eventId:i};if(e instanceof JE){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",sk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))a[h]=d}if(e instanceof cg){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${Bne}=${encodeURIComponent(c)}`:"";return`${Une(t)}?${wh(l).slice(1)}${u}`}function Une({config:t}){return t.emulator?qE(t,Vne):`https://${t.authDomain}/${Fne}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="webStorageSupport";class zne{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q8,this._completeRedirectFn=fne,this._overrideRedirectResult=une}async _openPopup(e,r,n,i){var s;Ra((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await QI(e,r,n,dk(),i);return $ne(e,a,ZE())}async _openRedirect(e,r,n,i){await this._originValidation(e);const s=await QI(e,r,n,dk(),i);return Gre(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(Ra(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Pne(e),n=new pne(e);return r.register("authEvent",i=>(Ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Z1,{type:Z1},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Z1];a!==void 0&&r(!!a),Mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=bne(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return F8()||O8()||YE()}}const Wne=zne;var XI="@firebase/auth",JI="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hne{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gne(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qne(t){bc(new ll("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;Ue(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V8(t)},u=new lre(n,i,s,c);return vre(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),bc(new ll("auth-internal",e=>{const r=_l(e.getProvider("auth").getImmediate());return(n=>new Hne(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(XI,JI,Gne(t)),Ms(XI,JI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kne=5*60,Yne=p8("authIdTokenMaxAge")||Kne;let ZI=null;const Qne=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Yne)return;const i=r==null?void 0:r.token;ZI!==i&&(ZI=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Xne(t=WE()){const e=Nb(t,"auth");if(e.isInitialized())return e.getImmediate();const r=yre(t,{popupRedirectResolver:Wne,persistence:[tne,zre,Q8]}),n=p8("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=Qne(s.toString());Lre(r,a,()=>a(r.currentUser)),$re(r,l=>a(l))}}const i=h8("auth");return i&&xre(r,`http://${i}`),r}function Jne(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cre({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=cs("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",Jne().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qne("Browser");var eO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qo,iF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,_){function T(){}T.prototype=_.prototype,N.D=_.prototype,N.prototype=new T,N.prototype.constructor=N,N.C=function(j,C,I){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return _.prototype[C].apply(j,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,_,T){T||(T=0);var j=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)j[C]=_.charCodeAt(T++)|_.charCodeAt(T++)<<8|_.charCodeAt(T++)<<16|_.charCodeAt(T++)<<24;else for(C=0;16>C;++C)j[C]=_[T++]|_[T++]<<8|_[T++]<<16|_[T++]<<24;_=N.g[0],T=N.g[1],C=N.g[2];var I=N.g[3],R=_+(I^T&(C^I))+j[0]+3614090360&4294967295;_=T+(R<<7&4294967295|R>>>25),R=I+(C^_&(T^C))+j[1]+3905402710&4294967295,I=_+(R<<12&4294967295|R>>>20),R=C+(T^I&(_^T))+j[2]+606105819&4294967295,C=I+(R<<17&4294967295|R>>>15),R=T+(_^C&(I^_))+j[3]+3250441966&4294967295,T=C+(R<<22&4294967295|R>>>10),R=_+(I^T&(C^I))+j[4]+4118548399&4294967295,_=T+(R<<7&4294967295|R>>>25),R=I+(C^_&(T^C))+j[5]+1200080426&4294967295,I=_+(R<<12&4294967295|R>>>20),R=C+(T^I&(_^T))+j[6]+2821735955&4294967295,C=I+(R<<17&4294967295|R>>>15),R=T+(_^C&(I^_))+j[7]+4249261313&4294967295,T=C+(R<<22&4294967295|R>>>10),R=_+(I^T&(C^I))+j[8]+1770035416&4294967295,_=T+(R<<7&4294967295|R>>>25),R=I+(C^_&(T^C))+j[9]+2336552879&4294967295,I=_+(R<<12&4294967295|R>>>20),R=C+(T^I&(_^T))+j[10]+4294925233&4294967295,C=I+(R<<17&4294967295|R>>>15),R=T+(_^C&(I^_))+j[11]+2304563134&4294967295,T=C+(R<<22&4294967295|R>>>10),R=_+(I^T&(C^I))+j[12]+1804603682&4294967295,_=T+(R<<7&4294967295|R>>>25),R=I+(C^_&(T^C))+j[13]+4254626195&4294967295,I=_+(R<<12&4294967295|R>>>20),R=C+(T^I&(_^T))+j[14]+2792965006&4294967295,C=I+(R<<17&4294967295|R>>>15),R=T+(_^C&(I^_))+j[15]+1236535329&4294967295,T=C+(R<<22&4294967295|R>>>10),R=_+(C^I&(T^C))+j[1]+4129170786&4294967295,_=T+(R<<5&4294967295|R>>>27),R=I+(T^C&(_^T))+j[6]+3225465664&4294967295,I=_+(R<<9&4294967295|R>>>23),R=C+(_^T&(I^_))+j[11]+643717713&4294967295,C=I+(R<<14&4294967295|R>>>18),R=T+(I^_&(C^I))+j[0]+3921069994&4294967295,T=C+(R<<20&4294967295|R>>>12),R=_+(C^I&(T^C))+j[5]+3593408605&4294967295,_=T+(R<<5&4294967295|R>>>27),R=I+(T^C&(_^T))+j[10]+38016083&4294967295,I=_+(R<<9&4294967295|R>>>23),R=C+(_^T&(I^_))+j[15]+3634488961&4294967295,C=I+(R<<14&4294967295|R>>>18),R=T+(I^_&(C^I))+j[4]+3889429448&4294967295,T=C+(R<<20&4294967295|R>>>12),R=_+(C^I&(T^C))+j[9]+568446438&4294967295,_=T+(R<<5&4294967295|R>>>27),R=I+(T^C&(_^T))+j[14]+3275163606&4294967295,I=_+(R<<9&4294967295|R>>>23),R=C+(_^T&(I^_))+j[3]+4107603335&4294967295,C=I+(R<<14&4294967295|R>>>18),R=T+(I^_&(C^I))+j[8]+1163531501&4294967295,T=C+(R<<20&4294967295|R>>>12),R=_+(C^I&(T^C))+j[13]+2850285829&4294967295,_=T+(R<<5&4294967295|R>>>27),R=I+(T^C&(_^T))+j[2]+4243563512&4294967295,I=_+(R<<9&4294967295|R>>>23),R=C+(_^T&(I^_))+j[7]+1735328473&4294967295,C=I+(R<<14&4294967295|R>>>18),R=T+(I^_&(C^I))+j[12]+2368359562&4294967295,T=C+(R<<20&4294967295|R>>>12),R=_+(T^C^I)+j[5]+4294588738&4294967295,_=T+(R<<4&4294967295|R>>>28),R=I+(_^T^C)+j[8]+2272392833&4294967295,I=_+(R<<11&4294967295|R>>>21),R=C+(I^_^T)+j[11]+1839030562&4294967295,C=I+(R<<16&4294967295|R>>>16),R=T+(C^I^_)+j[14]+4259657740&4294967295,T=C+(R<<23&4294967295|R>>>9),R=_+(T^C^I)+j[1]+2763975236&4294967295,_=T+(R<<4&4294967295|R>>>28),R=I+(_^T^C)+j[4]+1272893353&4294967295,I=_+(R<<11&4294967295|R>>>21),R=C+(I^_^T)+j[7]+4139469664&4294967295,C=I+(R<<16&4294967295|R>>>16),R=T+(C^I^_)+j[10]+3200236656&4294967295,T=C+(R<<23&4294967295|R>>>9),R=_+(T^C^I)+j[13]+681279174&4294967295,_=T+(R<<4&4294967295|R>>>28),R=I+(_^T^C)+j[0]+3936430074&4294967295,I=_+(R<<11&4294967295|R>>>21),R=C+(I^_^T)+j[3]+3572445317&4294967295,C=I+(R<<16&4294967295|R>>>16),R=T+(C^I^_)+j[6]+76029189&4294967295,T=C+(R<<23&4294967295|R>>>9),R=_+(T^C^I)+j[9]+3654602809&4294967295,_=T+(R<<4&4294967295|R>>>28),R=I+(_^T^C)+j[12]+3873151461&4294967295,I=_+(R<<11&4294967295|R>>>21),R=C+(I^_^T)+j[15]+530742520&4294967295,C=I+(R<<16&4294967295|R>>>16),R=T+(C^I^_)+j[2]+3299628645&4294967295,T=C+(R<<23&4294967295|R>>>9),R=_+(C^(T|~I))+j[0]+4096336452&4294967295,_=T+(R<<6&4294967295|R>>>26),R=I+(T^(_|~C))+j[7]+1126891415&4294967295,I=_+(R<<10&4294967295|R>>>22),R=C+(_^(I|~T))+j[14]+2878612391&4294967295,C=I+(R<<15&4294967295|R>>>17),R=T+(I^(C|~_))+j[5]+4237533241&4294967295,T=C+(R<<21&4294967295|R>>>11),R=_+(C^(T|~I))+j[12]+1700485571&4294967295,_=T+(R<<6&4294967295|R>>>26),R=I+(T^(_|~C))+j[3]+2399980690&4294967295,I=_+(R<<10&4294967295|R>>>22),R=C+(_^(I|~T))+j[10]+4293915773&4294967295,C=I+(R<<15&4294967295|R>>>17),R=T+(I^(C|~_))+j[1]+2240044497&4294967295,T=C+(R<<21&4294967295|R>>>11),R=_+(C^(T|~I))+j[8]+1873313359&4294967295,_=T+(R<<6&4294967295|R>>>26),R=I+(T^(_|~C))+j[15]+4264355552&4294967295,I=_+(R<<10&4294967295|R>>>22),R=C+(_^(I|~T))+j[6]+2734768916&4294967295,C=I+(R<<15&4294967295|R>>>17),R=T+(I^(C|~_))+j[13]+1309151649&4294967295,T=C+(R<<21&4294967295|R>>>11),R=_+(C^(T|~I))+j[4]+4149444226&4294967295,_=T+(R<<6&4294967295|R>>>26),R=I+(T^(_|~C))+j[11]+3174756917&4294967295,I=_+(R<<10&4294967295|R>>>22),R=C+(_^(I|~T))+j[2]+718787259&4294967295,C=I+(R<<15&4294967295|R>>>17),R=T+(I^(C|~_))+j[9]+3951481745&4294967295,N.g[0]=N.g[0]+_&4294967295,N.g[1]=N.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+C&4294967295,N.g[3]=N.g[3]+I&4294967295}n.prototype.u=function(N,_){_===void 0&&(_=N.length);for(var T=_-this.blockSize,j=this.B,C=this.h,I=0;I<_;){if(C==0)for(;I<=T;)i(this,N,I),I+=this.blockSize;if(typeof N=="string"){for(;I<_;)if(j[C++]=N.charCodeAt(I++),C==this.blockSize){i(this,j),C=0;break}}else for(;I<_;)if(j[C++]=N[I++],C==this.blockSize){i(this,j),C=0;break}}this.h=C,this.o+=_},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var _=1;_<N.length-8;++_)N[_]=0;var T=8*this.o;for(_=N.length-8;_<N.length;++_)N[_]=T&255,T/=256;for(this.u(N),N=Array(16),_=T=0;4>_;++_)for(var j=0;32>j;j+=8)N[T++]=this.g[_]>>>j&255;return N};function s(N,_){var T=l;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=_(N)}function a(N,_){this.h=_;for(var T=[],j=!0,C=N.length-1;0<=C;C--){var I=N[C]|0;j&&I==_||(T[C]=I,j=!1)}this.g=T}var l={};function c(N){return-128<=N&&128>N?s(N,function(_){return new a([_|0],0>_?-1:0)}):new a([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return d;if(0>N)return y(u(-N));for(var _=[],T=1,j=0;N>=T;j++)_[j]=N/T|0,T*=4294967296;return new a(_,0)}function h(N,_){if(N.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(N.charAt(0)=="-")return y(h(N.substring(1),_));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(_,8)),j=d,C=0;C<N.length;C+=8){var I=Math.min(8,N.length-C),R=parseInt(N.substring(C,C+I),_);8>I?(I=u(Math.pow(_,I)),j=j.j(I).add(u(R))):(j=j.j(T),j=j.add(u(R)))}return j}var d=c(0),f=c(1),m=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-y(this).m();for(var N=0,_=1,T=0;T<this.g.length;T++){var j=this.i(T);N+=(0<=j?j:4294967296+j)*_,_*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(g(this))return"0";if(v(this))return"-"+y(this).toString(N);for(var _=u(Math.pow(N,6)),T=this,j="";;){var C=k(T,_).g;T=x(T,C.j(_));var I=((0<T.g.length?T.g[0]:T.h)>>>0).toString(N);if(T=C,g(T))return I+j;for(;6>I.length;)I="0"+I;j=I+j}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function g(N){if(N.h!=0)return!1;for(var _=0;_<N.g.length;_++)if(N.g[_]!=0)return!1;return!0}function v(N){return N.h==-1}t.l=function(N){return N=x(this,N),v(N)?-1:g(N)?0:1};function y(N){for(var _=N.g.length,T=[],j=0;j<_;j++)T[j]=~N.g[j];return new a(T,~N.h).add(f)}t.abs=function(){return v(this)?y(this):this},t.add=function(N){for(var _=Math.max(this.g.length,N.g.length),T=[],j=0,C=0;C<=_;C++){var I=j+(this.i(C)&65535)+(N.i(C)&65535),R=(I>>>16)+(this.i(C)>>>16)+(N.i(C)>>>16);j=R>>>16,I&=65535,R&=65535,T[C]=R<<16|I}return new a(T,T[T.length-1]&-2147483648?-1:0)};function x(N,_){return N.add(y(_))}t.j=function(N){if(g(this)||g(N))return d;if(v(this))return v(N)?y(this).j(y(N)):y(y(this).j(N));if(v(N))return y(this.j(y(N)));if(0>this.l(m)&&0>N.l(m))return u(this.m()*N.m());for(var _=this.g.length+N.g.length,T=[],j=0;j<2*_;j++)T[j]=0;for(j=0;j<this.g.length;j++)for(var C=0;C<N.g.length;C++){var I=this.i(j)>>>16,R=this.i(j)&65535,$=N.i(C)>>>16,z=N.i(C)&65535;T[2*j+2*C]+=R*z,b(T,2*j+2*C),T[2*j+2*C+1]+=I*z,b(T,2*j+2*C+1),T[2*j+2*C+1]+=R*$,b(T,2*j+2*C+1),T[2*j+2*C+2]+=I*$,b(T,2*j+2*C+2)}for(j=0;j<_;j++)T[j]=T[2*j+1]<<16|T[2*j];for(j=_;j<2*_;j++)T[j]=0;return new a(T,0)};function b(N,_){for(;(N[_]&65535)!=N[_];)N[_+1]+=N[_]>>>16,N[_]&=65535,_++}function w(N,_){this.g=N,this.h=_}function k(N,_){if(g(_))throw Error("division by zero");if(g(N))return new w(d,d);if(v(N))return _=k(y(N),_),new w(y(_.g),y(_.h));if(v(_))return _=k(N,y(_)),new w(y(_.g),_.h);if(30<N.g.length){if(v(N)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var T=f,j=_;0>=j.l(N);)T=S(T),j=S(j);var C=P(T,1),I=P(j,1);for(j=P(j,2),T=P(T,2);!g(j);){var R=I.add(j);0>=R.l(N)&&(C=C.add(T),I=R),j=P(j,1),T=P(T,1)}return _=x(N,C.j(_)),new w(C,_)}for(C=d;0<=N.l(_);){for(T=Math.max(1,Math.floor(N.m()/_.m())),j=Math.ceil(Math.log(T)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),I=u(T),R=I.j(_);v(R)||0<R.l(N);)T-=j,I=u(T),R=I.j(_);g(I)&&(I=f),C=C.add(I),N=x(N,R)}return new w(C,N)}t.A=function(N){return k(this,N).h},t.and=function(N){for(var _=Math.max(this.g.length,N.g.length),T=[],j=0;j<_;j++)T[j]=this.i(j)&N.i(j);return new a(T,this.h&N.h)},t.or=function(N){for(var _=Math.max(this.g.length,N.g.length),T=[],j=0;j<_;j++)T[j]=this.i(j)|N.i(j);return new a(T,this.h|N.h)},t.xor=function(N){for(var _=Math.max(this.g.length,N.g.length),T=[],j=0;j<_;j++)T[j]=this.i(j)^N.i(j);return new a(T,this.h^N.h)};function S(N){for(var _=N.g.length+1,T=[],j=0;j<_;j++)T[j]=N.i(j)<<1|N.i(j-1)>>>31;return new a(T,N.h)}function P(N,_){var T=_>>5;_%=32;for(var j=N.g.length-T,C=[],I=0;I<j;I++)C[I]=0<_?N.i(I+T)>>>_|N.i(I+T+1)<<32-_:N.i(I+T);return new a(C,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,iF=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Qo=a}).apply(typeof eO<"u"?eO:typeof self<"u"?self:typeof window<"u"?window:{});var w0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sF,Uf,aF,my,pk,oF,lF,cF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,A,O){return p==Array.prototype||p==Object.prototype||(p[A]=O.value),p};function r(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof w0=="object"&&w0];for(var A=0;A<p.length;++A){var O=p[A];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var n=r(this);function i(p,A){if(A)e:{var O=n;p=p.split(".");for(var L=0;L<p.length-1;L++){var Y=p[L];if(!(Y in O))break e;O=O[Y]}p=p[p.length-1],L=O[p],A=A(L),A!=L&&A!=null&&e(O,p,{configurable:!0,writable:!0,value:A})}}function s(p,A){p instanceof String&&(p+="");var O=0,L=!1,Y={next:function(){if(!L&&O<p.length){var Z=O++;return{value:A(Z,p[Z]),done:!1}}return L=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}i("Array.prototype.values",function(p){return p||function(){return s(this,function(A,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(p){var A=typeof p;return A=A!="object"?A:p?Array.isArray(p)?"array":A:"null",A=="array"||A=="object"&&typeof p.length=="number"}function u(p){var A=typeof p;return A=="object"&&p!=null||A=="function"}function h(p,A,O){return p.call.apply(p.bind,arguments)}function d(p,A,O){if(!p)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,L),p.apply(A,Y)}}return function(){return p.apply(A,arguments)}}function f(p,A,O){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(p,A){var O=Array.prototype.slice.call(arguments,1);return function(){var L=O.slice();return L.push.apply(L,arguments),p.apply(this,L)}}function g(p,A){function O(){}O.prototype=A.prototype,p.aa=A.prototype,p.prototype=new O,p.prototype.constructor=p,p.Qb=function(L,Y,Z){for(var be=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)be[Pt-2]=arguments[Pt];return A.prototype[Y].apply(L,be)}}function v(p){const A=p.length;if(0<A){const O=Array(A);for(let L=0;L<A;L++)O[L]=p[L];return O}return[]}function y(p,A){for(let O=1;O<arguments.length;O++){const L=arguments[O];if(c(L)){const Y=p.length||0,Z=L.length||0;p.length=Y+Z;for(let be=0;be<Z;be++)p[Y+be]=L[be]}else p.push(L)}}class x{constructor(A,O){this.i=A,this.j=O,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function b(p){return/^[\s\xa0]*$/.test(p)}function w(){var p=l.navigator;return p&&(p=p.userAgent)?p:""}function k(p){return k[" "](p),p}k[" "]=function(){};var S=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function P(p,A,O){for(const L in p)A.call(O,p[L],L,p)}function N(p,A){for(const O in p)A.call(void 0,p[O],O,p)}function _(p){const A={};for(const O in p)A[O]=p[O];return A}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(p,A){let O,L;for(let Y=1;Y<arguments.length;Y++){L=arguments[Y];for(O in L)p[O]=L[O];for(let Z=0;Z<T.length;Z++)O=T[Z],Object.prototype.hasOwnProperty.call(L,O)&&(p[O]=L[O])}}function C(p){var A=1;p=p.split(":");const O=[];for(;0<A&&p.length;)O.push(p.shift()),A--;return p.length&&O.push(p.join(":")),O}function I(p){l.setTimeout(()=>{throw p},0)}function R(){var p=B;let A=null;return p.g&&(A=p.g,p.g=p.g.next,p.g||(p.h=null),A.next=null),A}class ${constructor(){this.h=this.g=null}add(A,O){const L=z.get();L.set(A,O),this.h?this.h.next=L:this.g=L,this.h=L}}var z=new x(()=>new W,p=>p.reset());class W{constructor(){this.next=this.g=this.h=null}set(A,O){this.h=A,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,B=new $,J=()=>{const p=l.Promise.resolve(void 0);M=()=>{p.then(U)}};var U=()=>{for(var p;p=R();){try{p.h.call(p.g)}catch(O){I(O)}var A=z;A.j(p),100>A.h&&(A.h++,p.next=A.g,A.g=p)}F=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(p,A){this.type=p,this.g=this.target=A,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var p=!1,A=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const O=()=>{};l.addEventListener("test",O,A),l.removeEventListener("test",O,A)}catch{}return p}();function ve(p,A){if(q.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var O=this.type=p.type,L=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=A,A=p.relatedTarget){if(S){e:{try{k(A.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(A=null)}}else O=="mouseover"?A=p.fromElement:O=="mouseout"&&(A=p.toElement);this.relatedTarget=A,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:se[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&ve.aa.h.call(this)}}g(ve,q);var se={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var V="closure_listenable_"+(1e6*Math.random()|0),X=0;function ee(p,A,O,L,Y){this.listener=p,this.proxy=null,this.src=A,this.type=O,this.capture=!!L,this.ha=Y,this.key=++X,this.da=this.fa=!1}function ue(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ge(p){this.src=p,this.g={},this.h=0}ge.prototype.add=function(p,A,O,L,Y){var Z=p.toString();p=this.g[Z],p||(p=this.g[Z]=[],this.h++);var be=G(p,A,L,Y);return-1<be?(A=p[be],O||(A.fa=!1)):(A=new ee(A,this.src,Z,!!L,Y),A.fa=O,p.push(A)),A};function K(p,A){var O=A.type;if(O in p.g){var L=p.g[O],Y=Array.prototype.indexOf.call(L,A,void 0),Z;(Z=0<=Y)&&Array.prototype.splice.call(L,Y,1),Z&&(ue(A),p.g[O].length==0&&(delete p.g[O],p.h--))}}function G(p,A,O,L){for(var Y=0;Y<p.length;++Y){var Z=p[Y];if(!Z.da&&Z.listener==A&&Z.capture==!!O&&Z.ha==L)return Y}return-1}var he="closure_lm_"+(1e6*Math.random()|0),_e={};function qe(p,A,O,L,Y){if(Array.isArray(A)){for(var Z=0;Z<A.length;Z++)qe(p,A[Z],O,L,Y);return null}return O=ke(O),p&&p[V]?p.K(A,O,u(L)?!!L.capture:!!L,Y):Kt(p,A,O,!1,L,Y)}function Kt(p,A,O,L,Y,Z){if(!A)throw Error("Invalid event type");var be=u(Y)?!!Y.capture:!!Y,Pt=Le(p);if(Pt||(p[he]=Pt=new ge(p)),O=Pt.add(A,O,L,be,Z),O.proxy)return O;if(L=me(),O.proxy=L,L.src=p,L.listener=O,p.addEventListener)oe||(Y=be),Y===void 0&&(Y=!1),p.addEventListener(A.toString(),L,Y);else if(p.attachEvent)p.attachEvent(xe(A.toString()),L);else if(p.addListener&&p.removeListener)p.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return O}function me(){function p(O){return A.call(p.src,p.listener,O)}const A=De;return p}function we(p,A,O,L,Y){if(Array.isArray(A))for(var Z=0;Z<A.length;Z++)we(p,A[Z],O,L,Y);else L=u(L)?!!L.capture:!!L,O=ke(O),p&&p[V]?(p=p.i,A=String(A).toString(),A in p.g&&(Z=p.g[A],O=G(Z,O,L,Y),-1<O&&(ue(Z[O]),Array.prototype.splice.call(Z,O,1),Z.length==0&&(delete p.g[A],p.h--)))):p&&(p=Le(p))&&(A=p.g[A.toString()],p=-1,A&&(p=G(A,O,L,Y)),(O=-1<p?A[p]:null)&&de(O))}function de(p){if(typeof p!="number"&&p&&!p.da){var A=p.src;if(A&&A[V])K(A.i,p);else{var O=p.type,L=p.proxy;A.removeEventListener?A.removeEventListener(O,L,p.capture):A.detachEvent?A.detachEvent(xe(O),L):A.addListener&&A.removeListener&&A.removeListener(L),(O=Le(A))?(K(O,p),O.h==0&&(O.src=null,A[he]=null)):ue(p)}}}function xe(p){return p in _e?_e[p]:_e[p]="on"+p}function De(p,A){if(p.da)p=!0;else{A=new ve(A,this);var O=p.listener,L=p.ha||p.src;p.fa&&de(p),p=O.call(L,A)}return p}function Le(p){return p=p[he],p instanceof ge?p:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(p){return typeof p=="function"?p:(p[$e]||(p[$e]=function(A){return p.handleEvent(A)}),p[$e])}function Be(){H.call(this),this.i=new ge(this),this.M=this,this.F=null}g(Be,H),Be.prototype[V]=!0,Be.prototype.removeEventListener=function(p,A,O,L){we(this,p,A,O,L)};function Ae(p,A){var O,L=p.F;if(L)for(O=[];L;L=L.F)O.push(L);if(p=p.M,L=A.type||A,typeof A=="string")A=new q(A,p);else if(A instanceof q)A.target=A.target||p;else{var Y=A;A=new q(L,p),j(A,Y)}if(Y=!0,O)for(var Z=O.length-1;0<=Z;Z--){var be=A.g=O[Z];Y=ir(be,L,!0,A)&&Y}if(be=A.g=p,Y=ir(be,L,!0,A)&&Y,Y=ir(be,L,!1,A)&&Y,O)for(Z=0;Z<O.length;Z++)be=A.g=O[Z],Y=ir(be,L,!1,A)&&Y}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var p=this.i,A;for(A in p.g){for(var O=p.g[A],L=0;L<O.length;L++)ue(O[L]);delete p.g[A],p.h--}}this.F=null},Be.prototype.K=function(p,A,O,L){return this.i.add(String(p),A,!1,O,L)},Be.prototype.L=function(p,A,O,L){return this.i.add(String(p),A,!0,O,L)};function ir(p,A,O,L){if(A=p.i.g[String(A)],!A)return!0;A=A.concat();for(var Y=!0,Z=0;Z<A.length;++Z){var be=A[Z];if(be&&!be.da&&be.capture==O){var Pt=be.listener,Br=be.ha||be.src;be.fa&&K(p.i,be),Y=Pt.call(Br,L)!==!1&&Y}}return Y&&!L.defaultPrevented}function Bi(p,A,O){if(typeof p=="function")O&&(p=f(p,O));else if(p&&typeof p.handleEvent=="function")p=f(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:l.setTimeout(p,A||0)}function Yh(p){p.g=Bi(()=>{p.g=null,p.i&&(p.i=!1,Yh(p))},p.l);const A=p.h;p.h=null,p.m.apply(null,A)}class Qw extends H{constructor(A,O){super(),this.m=A,this.l=O,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Yh(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(p){H.call(this),this.h=p,this.g={}}g(ro,H);var Qh=[];function Rg(p){P(p.g,function(A,O){this.g.hasOwnProperty(O)&&de(A)},p),p.g={}}ro.prototype.N=function(){ro.aa.N.call(this),Rg(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Al=l.JSON.stringify,xs=l.JSON.parse,Xw=class{stringify(p){return l.JSON.stringify(p,void 0)}parse(p){return l.JSON.parse(p,void 0)}};function Ke(){}Ke.prototype.h=null;function Et(p){return p.h||(p.h=p.i())}function kt(){}var Xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dn(){q.call(this,"d")}g(Dn,q);function no(){q.call(this,"c")}g(no,q);var Js={},$A=null;function Mg(){return $A=$A||new Be}Js.La="serverreachability";function LA(p){q.call(this,Js.La,p)}g(LA,q);function Xh(p){const A=Mg();Ae(A,new LA(A))}Js.STAT_EVENT="statevent";function FA(p,A){q.call(this,Js.STAT_EVENT,p),this.stat=A}g(FA,q);function bn(p){const A=Mg();Ae(A,new FA(A,p))}Js.Ma="timingevent";function VA(p,A){q.call(this,Js.Ma,p),this.size=A}g(VA,q);function Jh(p,A){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){p()},A)}function Zh(){this.g=!0}Zh.prototype.xa=function(){this.g=!1};function EH(p,A,O,L,Y,Z){p.info(function(){if(p.g)if(Z)for(var be="",Pt=Z.split("&"),Br=0;Br<Pt.length;Br++){var pt=Pt[Br].split("=");if(1<pt.length){var Jr=pt[0];pt=pt[1];var Zr=Jr.split("_");be=2<=Zr.length&&Zr[1]=="type"?be+(Jr+"="+pt+"&"):be+(Jr+"=redacted&")}}else be=null;else be=Z;return"XMLHTTP REQ ("+L+") [attempt "+Y+"]: "+A+`
`+O+`
`+be})}function CH(p,A,O,L,Y,Z,be){p.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Y+"]: "+A+`
`+O+`
`+Z+" "+be})}function Xc(p,A,O,L){p.info(function(){return"XMLHTTP TEXT ("+A+"): "+TH(p,O)+(L?" "+L:"")})}function AH(p,A){p.info(function(){return"TIMEOUT: "+A})}Zh.prototype.info=function(){};function TH(p,A){if(!p.g)return A;if(!A)return null;try{var O=JSON.parse(A);if(O){for(p=0;p<O.length;p++)if(Array.isArray(O[p])){var L=O[p];if(!(2>L.length)){var Y=L[1];if(Array.isArray(Y)&&!(1>Y.length)){var Z=Y[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var be=1;be<Y.length;be++)Y[be]=""}}}}return Al(O)}catch{return A}}var Dg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},BA={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jw;function $g(){}g($g,Ke),$g.prototype.g=function(){return new XMLHttpRequest},$g.prototype.i=function(){return{}},Jw=new $g;function io(p,A,O,L){this.j=p,this.i=A,this.l=O,this.R=L||1,this.U=new ro(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new UA}function UA(){this.i=null,this.g="",this.h=!1}var zA={},Zw={};function e1(p,A,O){p.L=1,p.v=Bg(Zs(A)),p.m=O,p.P=!0,WA(p,null)}function WA(p,A){p.F=Date.now(),Lg(p),p.A=Zs(p.v);var O=p.A,L=p.R;Array.isArray(L)||(L=[String(L)]),iT(O.i,"t",L),p.C=0,O=p.j.J,p.h=new UA,p.g=_T(p.j,O?A:null,!p.m),0<p.O&&(p.M=new Qw(f(p.Y,p,p.g),p.O)),A=p.U,O=p.g,L=p.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(Qh[0]=Y.toString()),Y=Qh);for(var Z=0;Z<Y.length;Z++){var be=qe(O,Y[Z],L||A.handleEvent,!1,A.h||A);if(!be)break;A.g[be.key]=be}A=p.H?_(p.H):{},p.m?(p.u||(p.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,A)):(p.u="GET",p.g.ea(p.A,p.u,null,A)),Xh(),EH(p.i,p.u,p.A,p.l,p.R,p.m)}io.prototype.ca=function(p){p=p.target;const A=this.M;A&&ea(p)==3?A.j():this.Y(p)},io.prototype.Y=function(p){try{if(p==this.g)e:{const Zr=ea(this.g);var A=this.g.Ba();const eu=this.g.Z();if(!(3>Zr)&&(Zr!=3||this.g&&(this.h.h||this.g.oa()||dT(this.g)))){this.J||Zr!=4||A==7||(A==8||0>=eu?Xh(3):Xh(2)),t1(this);var O=this.g.Z();this.X=O;t:if(HA(this)){var L=dT(this.g);p="";var Y=L.length,Z=ea(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tl(this),ef(this);var be="";break t}this.h.i=new l.TextDecoder}for(A=0;A<Y;A++)this.h.h=!0,p+=this.h.i.decode(L[A],{stream:!(Z&&A==Y-1)});L.length=0,this.h.g+=p,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=O==200,CH(this.i,this.u,this.A,this.l,this.R,Zr,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Pt,Br=this.g;if((Pt=Br.g?Br.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Pt)){var pt=Pt;break t}}pt=null}if(O=pt)Xc(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,r1(this,O);else{this.o=!1,this.s=3,bn(12),Tl(this),ef(this);break e}}if(this.P){O=!0;let Ui;for(;!this.J&&this.C<be.length;)if(Ui=PH(this,be),Ui==Zw){Zr==4&&(this.s=4,bn(14),O=!1),Xc(this.i,this.l,null,"[Incomplete Response]");break}else if(Ui==zA){this.s=4,bn(15),Xc(this.i,this.l,be,"[Invalid Chunk]"),O=!1;break}else Xc(this.i,this.l,Ui,null),r1(this,Ui);if(HA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zr!=4||be.length!=0||this.h.h||(this.s=1,bn(16),O=!1),this.o=this.o&&O,!O)Xc(this.i,this.l,be,"[Invalid Chunked Response]"),Tl(this),ef(this);else if(0<be.length&&!this.W){this.W=!0;var Jr=this.j;Jr.g==this&&Jr.ba&&!Jr.M&&(Jr.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),l1(Jr),Jr.M=!0,bn(11))}}else Xc(this.i,this.l,be,null),r1(this,be);Zr==4&&Tl(this),this.o&&!this.J&&(Zr==4?vT(this.j,this):(this.o=!1,Lg(this)))}else KH(this.g),O==400&&0<be.indexOf("Unknown SID")?(this.s=3,bn(12)):(this.s=0,bn(13)),Tl(this),ef(this)}}}catch{}finally{}};function HA(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function PH(p,A){var O=p.C,L=A.indexOf(`
`,O);return L==-1?Zw:(O=Number(A.substring(O,L)),isNaN(O)?zA:(L+=1,L+O>A.length?Zw:(A=A.slice(L,L+O),p.C=L+O,A)))}io.prototype.cancel=function(){this.J=!0,Tl(this)};function Lg(p){p.S=Date.now()+p.I,GA(p,p.I)}function GA(p,A){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Jh(f(p.ba,p),A)}function t1(p){p.B&&(l.clearTimeout(p.B),p.B=null)}io.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(AH(this.i,this.A),this.L!=2&&(Xh(),bn(17)),Tl(this),this.s=2,ef(this)):GA(this,this.S-p)};function ef(p){p.j.G==0||p.J||vT(p.j,p)}function Tl(p){t1(p);var A=p.M;A&&typeof A.ma=="function"&&A.ma(),p.M=null,Rg(p.U),p.g&&(A=p.g,p.g=null,A.abort(),A.ma())}function r1(p,A){try{var O=p.j;if(O.G!=0&&(O.g==p||n1(O.h,p))){if(!p.K&&n1(O.h,p)&&O.G==3){try{var L=O.Da.g.parse(A)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Y=L;if(Y[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<p.F)qg(O),Hg(O);else break e;o1(O),bn(18)}}else O.za=Y[1],0<O.za-O.T&&37500>Y[2]&&O.F&&O.v==0&&!O.C&&(O.C=Jh(f(O.Za,O),6e3));if(1>=YA(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else Il(O,11)}else if((p.K||O.g==p)&&qg(O),!b(A))for(Y=O.Da.g.parse(A),A=0;A<Y.length;A++){let pt=Y[A];if(O.T=pt[0],pt=pt[1],O.G==2)if(pt[0]=="c"){O.K=pt[1],O.ia=pt[2];const Jr=pt[3];Jr!=null&&(O.la=Jr,O.j.info("VER="+O.la));const Zr=pt[4];Zr!=null&&(O.Aa=Zr,O.j.info("SVER="+O.Aa));const eu=pt[5];eu!=null&&typeof eu=="number"&&0<eu&&(L=1.5*eu,O.L=L,O.j.info("backChannelRequestTimeoutMs_="+L)),L=O;const Ui=p.g;if(Ui){const Yg=Ui.g?Ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yg){var Z=L.h;Z.g||Yg.indexOf("spdy")==-1&&Yg.indexOf("quic")==-1&&Yg.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(i1(Z,Z.h),Z.h=null))}if(L.D){const c1=Ui.g?Ui.g.getResponseHeader("X-HTTP-Session-Id"):null;c1&&(L.ya=c1,$t(L.I,L.D,c1))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-p.F,O.j.info("Handshake RTT: "+O.R+"ms")),L=O;var be=p;if(L.qa=wT(L,L.J?L.ia:null,L.W),be.K){QA(L.h,be);var Pt=be,Br=L.L;Br&&(Pt.I=Br),Pt.B&&(t1(Pt),Lg(Pt)),L.g=be}else gT(L);0<O.i.length&&Gg(O)}else pt[0]!="stop"&&pt[0]!="close"||Il(O,7);else O.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Il(O,7):a1(O):pt[0]!="noop"&&O.l&&O.l.ta(pt),O.v=0)}}Xh(4)}catch{}}var IH=class{constructor(p,A){this.g=p,this.map=A}};function qA(p){this.l=p||10,l.PerformanceNavigationTiming?(p=l.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KA(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function YA(p){return p.h?1:p.g?p.g.size:0}function n1(p,A){return p.h?p.h==A:p.g?p.g.has(A):!1}function i1(p,A){p.g?p.g.add(A):p.h=A}function QA(p,A){p.h&&p.h==A?p.h=null:p.g&&p.g.has(A)&&p.g.delete(A)}qA.prototype.cancel=function(){if(this.i=XA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function XA(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let A=p.i;for(const O of p.g.values())A=A.concat(O.D);return A}return v(p.i)}function OH(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var A=[],O=p.length,L=0;L<O;L++)A.push(p[L]);return A}A=[],O=0;for(L in p)A[O++]=p[L];return A}function RH(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var A=[];p=p.length;for(var O=0;O<p;O++)A.push(O);return A}A=[],O=0;for(const L in p)A[O++]=L;return A}}}function JA(p,A){if(p.forEach&&typeof p.forEach=="function")p.forEach(A,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,A,void 0);else for(var O=RH(p),L=OH(p),Y=L.length,Z=0;Z<Y;Z++)A.call(void 0,L[Z],O&&O[Z],p)}var ZA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MH(p,A){if(p){p=p.split("&");for(var O=0;O<p.length;O++){var L=p[O].indexOf("="),Y=null;if(0<=L){var Z=p[O].substring(0,L);Y=p[O].substring(L+1)}else Z=p[O];A(Z,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Pl(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Pl){this.h=p.h,Fg(this,p.j),this.o=p.o,this.g=p.g,Vg(this,p.s),this.l=p.l;var A=p.i,O=new nf;O.i=A.i,A.g&&(O.g=new Map(A.g),O.h=A.h),eT(this,O),this.m=p.m}else p&&(A=String(p).match(ZA))?(this.h=!1,Fg(this,A[1]||"",!0),this.o=tf(A[2]||""),this.g=tf(A[3]||"",!0),Vg(this,A[4]),this.l=tf(A[5]||"",!0),eT(this,A[6]||"",!0),this.m=tf(A[7]||"")):(this.h=!1,this.i=new nf(null,this.h))}Pl.prototype.toString=function(){var p=[],A=this.j;A&&p.push(rf(A,tT,!0),":");var O=this.g;return(O||A=="file")&&(p.push("//"),(A=this.o)&&p.push(rf(A,tT,!0),"@"),p.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&p.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&p.push("/"),p.push(rf(O,O.charAt(0)=="/"?LH:$H,!0))),(O=this.i.toString())&&p.push("?",O),(O=this.m)&&p.push("#",rf(O,VH)),p.join("")};function Zs(p){return new Pl(p)}function Fg(p,A,O){p.j=O?tf(A,!0):A,p.j&&(p.j=p.j.replace(/:$/,""))}function Vg(p,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);p.s=A}else p.s=null}function eT(p,A,O){A instanceof nf?(p.i=A,BH(p.i,p.h)):(O||(A=rf(A,FH)),p.i=new nf(A,p.h))}function $t(p,A,O){p.i.set(A,O)}function Bg(p){return $t(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function tf(p,A){return p?A?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function rf(p,A,O){return typeof p=="string"?(p=encodeURI(p).replace(A,DH),O&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function DH(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var tT=/[#\/\?@]/g,$H=/[#\?:]/g,LH=/[#\?]/g,FH=/[#\?@]/g,VH=/#/g;function nf(p,A){this.h=this.g=null,this.i=p||null,this.j=!!A}function so(p){p.g||(p.g=new Map,p.h=0,p.i&&MH(p.i,function(A,O){p.add(decodeURIComponent(A.replace(/\+/g," ")),O)}))}t=nf.prototype,t.add=function(p,A){so(this),this.i=null,p=Jc(this,p);var O=this.g.get(p);return O||this.g.set(p,O=[]),O.push(A),this.h+=1,this};function rT(p,A){so(p),A=Jc(p,A),p.g.has(A)&&(p.i=null,p.h-=p.g.get(A).length,p.g.delete(A))}function nT(p,A){return so(p),A=Jc(p,A),p.g.has(A)}t.forEach=function(p,A){so(this),this.g.forEach(function(O,L){O.forEach(function(Y){p.call(A,Y,L,this)},this)},this)},t.na=function(){so(this);const p=Array.from(this.g.values()),A=Array.from(this.g.keys()),O=[];for(let L=0;L<A.length;L++){const Y=p[L];for(let Z=0;Z<Y.length;Z++)O.push(A[L])}return O},t.V=function(p){so(this);let A=[];if(typeof p=="string")nT(this,p)&&(A=A.concat(this.g.get(Jc(this,p))));else{p=Array.from(this.g.values());for(let O=0;O<p.length;O++)A=A.concat(p[O])}return A},t.set=function(p,A){return so(this),this.i=null,p=Jc(this,p),nT(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[A]),this.h+=1,this},t.get=function(p,A){return p?(p=this.V(p),0<p.length?String(p[0]):A):A};function iT(p,A,O){rT(p,A),0<O.length&&(p.i=null,p.g.set(Jc(p,A),v(O)),p.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],A=Array.from(this.g.keys());for(var O=0;O<A.length;O++){var L=A[O];const Z=encodeURIComponent(String(L)),be=this.V(L);for(L=0;L<be.length;L++){var Y=Z;be[L]!==""&&(Y+="="+encodeURIComponent(String(be[L]))),p.push(Y)}}return this.i=p.join("&")};function Jc(p,A){return A=String(A),p.j&&(A=A.toLowerCase()),A}function BH(p,A){A&&!p.j&&(so(p),p.i=null,p.g.forEach(function(O,L){var Y=L.toLowerCase();L!=Y&&(rT(this,L),iT(this,Y,O))},p)),p.j=A}function UH(p,A){const O=new Zh;if(l.Image){const L=new Image;L.onload=m(ao,O,"TestLoadImage: loaded",!0,A,L),L.onerror=m(ao,O,"TestLoadImage: error",!1,A,L),L.onabort=m(ao,O,"TestLoadImage: abort",!1,A,L),L.ontimeout=m(ao,O,"TestLoadImage: timeout",!1,A,L),l.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=p}else A(!1)}function zH(p,A){const O=new Zh,L=new AbortController,Y=setTimeout(()=>{L.abort(),ao(O,"TestPingServer: timeout",!1,A)},1e4);fetch(p,{signal:L.signal}).then(Z=>{clearTimeout(Y),Z.ok?ao(O,"TestPingServer: ok",!0,A):ao(O,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(Y),ao(O,"TestPingServer: error",!1,A)})}function ao(p,A,O,L,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),L(O)}catch{}}function WH(){this.g=new Xw}function HH(p,A,O){const L=O||"";try{JA(p,function(Y,Z){let be=Y;u(Y)&&(be=Al(Y)),A.push(L+Z+"="+encodeURIComponent(be))})}catch(Y){throw A.push(L+"type="+encodeURIComponent("_badmap")),Y}}function Ug(p){this.l=p.Ub||null,this.j=p.eb||!1}g(Ug,Ke),Ug.prototype.g=function(){return new zg(this.l,this.j)},Ug.prototype.i=function(p){return function(){return p}}({});function zg(p,A){Be.call(this),this.D=p,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(zg,Be),t=zg.prototype,t.open=function(p,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=A,this.readyState=1,af(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(A.body=p),(this.D||l).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sf(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,af(this)),this.g&&(this.readyState=3,af(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sT(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function sT(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var A=p.value?p.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!p.done}))&&(this.response=this.responseText+=A)}p.done?sf(this):af(this),this.readyState==3&&sT(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,sf(this))},t.Qa=function(p){this.g&&(this.response=p,sf(this))},t.ga=function(){this.g&&sf(this)};function sf(p){p.readyState=4,p.l=null,p.j=null,p.v=null,af(p)}t.setRequestHeader=function(p,A){this.u.append(p,A)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],A=this.h.entries();for(var O=A.next();!O.done;)O=O.value,p.push(O[0]+": "+O[1]),O=A.next();return p.join(`\r
`)};function af(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(zg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function aT(p){let A="";return P(p,function(O,L){A+=L,A+=":",A+=O,A+=`\r
`}),A}function s1(p,A,O){e:{for(L in O){var L=!1;break e}L=!0}L||(O=aT(O),typeof p=="string"?O!=null&&encodeURIComponent(String(O)):$t(p,A,O))}function sr(p){Be.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(sr,Be);var GH=/^https?$/i,qH=["POST","PUT"];t=sr.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,A,O,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);A=A?A.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jw.g(),this.v=this.o?Et(this.o):Et(Jw),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(A,String(p),!0),this.B=!1}catch(Z){oT(this,Z);return}if(p=O||"",O=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Y in L)O.set(Y,L[Y]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const Z of L.keys())O.set(Z,L.get(Z));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(O.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=l.FormData&&p instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qH,A,void 0))||L||Y||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,be]of O)this.g.setRequestHeader(Z,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uT(this),this.u=!0,this.g.send(p),this.u=!1}catch(Z){oT(this,Z)}};function oT(p,A){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=A,p.m=5,lT(p),Wg(p)}function lT(p){p.A||(p.A=!0,Ae(p,"complete"),Ae(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ae(this,"complete"),Ae(this,"abort"),Wg(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wg(this,!0)),sr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cT(this):this.bb())},t.bb=function(){cT(this)};function cT(p){if(p.h&&typeof a<"u"&&(!p.v[1]||ea(p)!=4||p.Z()!=2)){if(p.u&&ea(p)==4)Bi(p.Ea,0,p);else if(Ae(p,"readystatechange"),ea(p)==4){p.h=!1;try{const be=p.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var O;if(!(O=A)){var L;if(L=be===0){var Y=String(p.D).match(ZA)[1]||null;!Y&&l.self&&l.self.location&&(Y=l.self.location.protocol.slice(0,-1)),L=!GH.test(Y?Y.toLowerCase():"")}O=L}if(O)Ae(p,"complete"),Ae(p,"success");else{p.m=6;try{var Z=2<ea(p)?p.g.statusText:""}catch{Z=""}p.l=Z+" ["+p.Z()+"]",lT(p)}}finally{Wg(p)}}}}function Wg(p,A){if(p.g){uT(p);const O=p.g,L=p.v[0]?()=>{}:null;p.g=null,p.v=null,A||Ae(p,"ready");try{O.onreadystatechange=L}catch{}}}function uT(p){p.I&&(l.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function ea(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<ea(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var A=this.g.responseText;return p&&A.indexOf(p)==0&&(A=A.substring(p.length)),xs(A)}};function dT(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function KH(p){const A={};p=(p.g&&2<=ea(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<p.length;L++){if(b(p[L]))continue;var O=C(p[L]);const Y=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const Z=A[Y]||[];A[Y]=Z,Z.push(O)}N(A,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function of(p,A,O){return O&&O.internalChannelParams&&O.internalChannelParams[p]||A}function hT(p){this.Aa=0,this.i=[],this.j=new Zh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=of("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=of("baseRetryDelayMs",5e3,p),this.cb=of("retryDelaySeedMs",1e4,p),this.Wa=of("forwardChannelMaxRetries",2,p),this.wa=of("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new qA(p&&p.concurrentRequestLimit),this.Da=new WH,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hT.prototype,t.la=8,t.G=1,t.connect=function(p,A,O,L){bn(0),this.W=p,this.H=A||{},O&&L!==void 0&&(this.H.OSID=O,this.H.OAID=L),this.F=this.X,this.I=wT(this,null,this.W),Gg(this)};function a1(p){if(fT(p),p.G==3){var A=p.U++,O=Zs(p.I);if($t(O,"SID",p.K),$t(O,"RID",A),$t(O,"TYPE","terminate"),lf(p,O),A=new io(p,p.j,A),A.L=2,A.v=Bg(Zs(O)),O=!1,l.navigator&&l.navigator.sendBeacon)try{O=l.navigator.sendBeacon(A.v.toString(),"")}catch{}!O&&l.Image&&(new Image().src=A.v,O=!0),O||(A.g=_T(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Lg(A)}bT(p)}function Hg(p){p.g&&(l1(p),p.g.cancel(),p.g=null)}function fT(p){Hg(p),p.u&&(l.clearTimeout(p.u),p.u=null),qg(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&l.clearTimeout(p.s),p.s=null)}function Gg(p){if(!KA(p.h)&&!p.s){p.s=!0;var A=p.Ga;M||J(),F||(M(),F=!0),B.add(A,p),p.B=0}}function YH(p,A){return YA(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=A.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Jh(f(p.Ga,p,A),xT(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Y=new io(this,this.j,p);let Z=this.o;if(this.S&&(Z?(Z=_(Z),j(Z,this.S)):Z=this.S),this.m!==null||this.O||(Y.H=Z,Z=null),this.P)e:{for(var A=0,O=0;O<this.i.length;O++){t:{var L=this.i[O];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(A+=L,4096<A){A=O;break e}if(A===4096||O===this.i.length-1){A=O+1;break e}}A=1e3}else A=1e3;A=pT(this,Y,A),O=Zs(this.I),$t(O,"RID",p),$t(O,"CVER",22),this.D&&$t(O,"X-HTTP-Session-Id",this.D),lf(this,O),Z&&(this.O?A="headers="+encodeURIComponent(String(aT(Z)))+"&"+A:this.m&&s1(O,this.m,Z)),i1(this.h,Y),this.Ua&&$t(O,"TYPE","init"),this.P?($t(O,"$req",A),$t(O,"SID","null"),Y.T=!0,e1(Y,O,null)):e1(Y,O,A),this.G=2}}else this.G==3&&(p?mT(this,p):this.i.length==0||KA(this.h)||mT(this))};function mT(p,A){var O;A?O=A.l:O=p.U++;const L=Zs(p.I);$t(L,"SID",p.K),$t(L,"RID",O),$t(L,"AID",p.T),lf(p,L),p.m&&p.o&&s1(L,p.m,p.o),O=new io(p,p.j,O,p.B+1),p.m===null&&(O.H=p.o),A&&(p.i=A.D.concat(p.i)),A=pT(p,O,1e3),O.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),i1(p.h,O),e1(O,L,A)}function lf(p,A){p.H&&P(p.H,function(O,L){$t(A,L,O)}),p.l&&JA({},function(O,L){$t(A,L,O)})}function pT(p,A,O){O=Math.min(p.i.length,O);var L=p.l?f(p.l.Na,p.l,p):null;e:{var Y=p.i;let Z=-1;for(;;){const be=["count="+O];Z==-1?0<O?(Z=Y[0].g,be.push("ofs="+Z)):Z=0:be.push("ofs="+Z);let Pt=!0;for(let Br=0;Br<O;Br++){let pt=Y[Br].g;const Jr=Y[Br].map;if(pt-=Z,0>pt)Z=Math.max(0,Y[Br].g-100),Pt=!1;else try{HH(Jr,be,"req"+pt+"_")}catch{L&&L(Jr)}}if(Pt){L=be.join("&");break e}}}return p=p.i.splice(0,O),A.D=p,L}function gT(p){if(!p.g&&!p.u){p.Y=1;var A=p.Fa;M||J(),F||(M(),F=!0),B.add(A,p),p.v=0}}function o1(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Jh(f(p.Fa,p),xT(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,yT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Jh(f(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bn(10),Hg(this),yT(this))};function l1(p){p.A!=null&&(l.clearTimeout(p.A),p.A=null)}function yT(p){p.g=new io(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var A=Zs(p.qa);$t(A,"RID","rpc"),$t(A,"SID",p.K),$t(A,"AID",p.T),$t(A,"CI",p.F?"0":"1"),!p.F&&p.ja&&$t(A,"TO",p.ja),$t(A,"TYPE","xmlhttp"),lf(p,A),p.m&&p.o&&s1(A,p.m,p.o),p.L&&(p.g.I=p.L);var O=p.g;p=p.ia,O.L=1,O.v=Bg(Zs(A)),O.m=null,O.P=!0,WA(O,p)}t.Za=function(){this.C!=null&&(this.C=null,Hg(this),o1(this),bn(19))};function qg(p){p.C!=null&&(l.clearTimeout(p.C),p.C=null)}function vT(p,A){var O=null;if(p.g==A){qg(p),l1(p),p.g=null;var L=2}else if(n1(p.h,A))O=A.D,QA(p.h,A),L=1;else return;if(p.G!=0){if(A.o)if(L==1){O=A.m?A.m.length:0,A=Date.now()-A.F;var Y=p.B;L=Mg(),Ae(L,new VA(L,O)),Gg(p)}else gT(p);else if(Y=A.s,Y==3||Y==0&&0<A.X||!(L==1&&YH(p,A)||L==2&&o1(p)))switch(O&&0<O.length&&(A=p.h,A.i=A.i.concat(O)),Y){case 1:Il(p,5);break;case 4:Il(p,10);break;case 3:Il(p,6);break;default:Il(p,2)}}}function xT(p,A){let O=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(O*=2),O*A}function Il(p,A){if(p.j.info("Error code "+A),A==2){var O=f(p.fb,p),L=p.Xa;const Y=!L;L=new Pl(L||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Fg(L,"https"),Bg(L),Y?UH(L.toString(),O):zH(L.toString(),O)}else bn(2);p.G=0,p.l&&p.l.sa(A),bT(p),fT(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),bn(2)):(this.j.info("Failed to ping google.com"),bn(1))};function bT(p){if(p.G=0,p.ka=[],p.l){const A=XA(p.h);(A.length!=0||p.i.length!=0)&&(y(p.ka,A),y(p.ka,p.i),p.h.i.length=0,v(p.i),p.i.length=0),p.l.ra()}}function wT(p,A,O){var L=O instanceof Pl?Zs(O):new Pl(O);if(L.g!="")A&&(L.g=A+"."+L.g),Vg(L,L.s);else{var Y=l.location;L=Y.protocol,A=A?A+"."+Y.hostname:Y.hostname,Y=+Y.port;var Z=new Pl(null);L&&Fg(Z,L),A&&(Z.g=A),Y&&Vg(Z,Y),O&&(Z.l=O),L=Z}return O=p.D,A=p.ya,O&&A&&$t(L,O,A),$t(L,"VER",p.la),lf(p,L),L}function _T(p,A,O){if(A&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=p.Ca&&!p.pa?new sr(new Ug({eb:O})):new sr(p.pa),A.Ha(p.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ST(){}t=ST.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kg(){}Kg.prototype.g=function(p,A){return new ti(p,A)};function ti(p,A){Be.call(this),this.g=new hT(A),this.l=p,this.h=A&&A.messageUrlParams||null,p=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(p?p["X-WebChannel-Content-Type"]=A.messageContentType:p={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(p?p["X-WebChannel-Client-Profile"]=A.va:p={"X-WebChannel-Client-Profile":A.va}),this.g.S=p,(p=A&&A.Sb)&&!b(p)&&(this.g.m=p),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!b(A)&&(this.g.D=A,p=this.h,p!==null&&A in p&&(p=this.h,A in p&&delete p[A])),this.j=new Zc(this)}g(ti,Be),ti.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ti.prototype.close=function(){a1(this.g)},ti.prototype.o=function(p){var A=this.g;if(typeof p=="string"){var O={};O.__data__=p,p=O}else this.u&&(O={},O.__data__=Al(p),p=O);A.i.push(new IH(A.Ya++,p)),A.G==3&&Gg(A)},ti.prototype.N=function(){this.g.l=null,delete this.j,a1(this.g),delete this.g,ti.aa.N.call(this)};function kT(p){Dn.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var A=p.__sm__;if(A){e:{for(const O in A){p=O;break e}p=void 0}(this.i=p)&&(p=this.i,A=A!==null&&p in A?A[p]:void 0),this.data=A}else this.data=p}g(kT,Dn);function NT(){no.call(this),this.status=1}g(NT,no);function Zc(p){this.g=p}g(Zc,ST),Zc.prototype.ua=function(){Ae(this.g,"a")},Zc.prototype.ta=function(p){Ae(this.g,new kT(p))},Zc.prototype.sa=function(p){Ae(this.g,new NT)},Zc.prototype.ra=function(){Ae(this.g,"b")},Kg.prototype.createWebChannel=Kg.prototype.g,ti.prototype.send=ti.prototype.o,ti.prototype.open=ti.prototype.m,ti.prototype.close=ti.prototype.close,cF=function(){return new Kg},lF=function(){return Mg()},oF=Js,pk={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dg.NO_ERROR=0,Dg.TIMEOUT=8,Dg.HTTP_ERROR=6,my=Dg,BA.COMPLETE="complete",aF=BA,kt.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",Be.prototype.listen=Be.prototype.K,Uf=kt,sr.prototype.listenOnce=sr.prototype.L,sr.prototype.getLastError=sr.prototype.Ka,sr.prototype.getLastErrorCode=sr.prototype.Ba,sr.prototype.getStatus=sr.prototype.Z,sr.prototype.getResponseJson=sr.prototype.Oa,sr.prototype.getResponseText=sr.prototype.oa,sr.prototype.send=sr.prototype.ea,sr.prototype.setWithCredentials=sr.prototype.Ha,sF=sr}).apply(typeof w0<"u"?w0:typeof self<"u"?self:typeof window<"u"?window:{});const tO="@firebase/firestore",rO="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new kb("@firebase/firestore");function du(){return Sc.logLevel}function Te(t,...e){if(Sc.logLevel<=nt.DEBUG){const r=e.map(t2);Sc.debug(`Firestore (${Sh}): ${t}`,...r)}}function Ma(t,...e){if(Sc.logLevel<=nt.ERROR){const r=e.map(t2);Sc.error(`Firestore (${Sh}): ${t}`,...r)}}function kd(t,...e){if(Sc.logLevel<=nt.WARN){const r=e.map(t2);Sc.warn(`Firestore (${Sh}): ${t}`,...r)}}function t2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,uF(t,n,r)}function uF(t,e,r){let n=`FIRESTORE (${Sh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Ma(n),new Error(n)}function St(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||uF(e,i,n)}function Qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Ha{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zne{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ln.UNAUTHENTICATED))}shutdown(){}}class eie{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class tie{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){St(this.o===void 0,42304);let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new _a;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _a,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _a)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(St(typeof n.accessToken=="string",31837,{l:n}),new dF(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class rie{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nie{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new rie(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iie{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){St(this.o===void 0,3512);const n=s=>{s.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Te("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nO(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(St(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new nO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sie(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=sie(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%62))}return n}}function rt(t,e){return t<e?-1:t>e?1:0}function gk(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),i=e.codePointAt(r);if(n!==i){if(n<128&&i<128)return rt(n,i);{const s=hF(),a=aie(s.encode(iO(t,r)),s.encode(iO(e,r)));return a!==0?a:rt(n,i)}}r+=n>65535?2:1}return rt(t.length,e.length)}function iO(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function aie(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return rt(t[r],e[r]);return rt(t.length,e.length)}function Nd(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=-62135596800,aO=1e6;class Tr{static now(){return Tr.fromMillis(Date.now())}static fromDate(e){return Tr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*aO);return new Tr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<sO)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aO}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-sO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Tr(0,0))}static max(){return new Ye(new Tr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="__name__";class _s{constructor(e,r,n){r===void 0?r=0:r>e.length&&ze(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&ze(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return _s.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof _s?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=_s.compareSegments(e.get(i),r.get(i));if(s!==0)return s}return rt(e.length,r.length)}static compareSegments(e,r){const n=_s.isNumericId(e),i=_s.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?_s.extractNumericId(e).compare(_s.extractNumericId(r)):gk(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qo.fromString(e.substring(4,e.length-2))}}class Wt extends _s{construct(e,r,n){return new Wt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Wt(r)}static emptyPath(){return new Wt([])}}const oie=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gr extends _s{construct(e,r,n){return new Gr(e,r,n)}static isValidIdentifier(e){return oie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oO}static keyField(){return new Gr([oO])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Ee(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ee(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(n+=l,i++):(s(),i++)}if(s(),a)throw new Ee(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gr(r)}static emptyPath(){return new Gr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Wt.fromString(e))}static fromName(e){return new Fe(Wt.fromString(e).popFirst(5))}static empty(){return new Fe(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Wt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=-1;function lie(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(n===1e9?new Tr(r+1,0):new Tr(r,n));return new cl(i,Fe.empty(),e)}function cie(t){return new cl(t.readTime,t.key,ep)}class cl{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new cl(Ye.min(),Fe.empty(),ep)}static max(){return new cl(Ye.max(),Fe.empty(),ep)}}function uie(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Fe.comparator(t.documentKey,e.documentKey),r!==0?r:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const die="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hie{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==die)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ae((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ae?r:ae.resolve(r)}catch(r){return ae.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ae.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ae.reject(r)}static resolve(e){return new ae((r,n)=>{r(e)})}static reject(e){return new ae((r,n)=>{n(e)})}static waitFor(e){return new ae((r,n)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&r()},c=>n(c))}),a=!0,s===i&&r()})}static or(e){let r=ae.resolve(!1);for(const n of e)r=r.next(i=>i?ae.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}static mapArray(e,r){return new ae((n,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(h=>{a[u]=h,++l,l===s&&n(a)},h=>i(h))}})}static doWhile(e,r){return new ae((n,i)=>{const s=()=>{e()===!0?r().next(()=>{s()},i):n()};s()})}}function fie(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Nh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ue(n),this.ce=n=>r.writeSequenceNumber(n))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ab.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=-1;function Tb(t){return t==null}function mv(t){return t===0&&1/t==-1/0}function mie(t){return typeof t=="number"&&Number.isInteger(t)&&!mv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF="";function pie(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=lO(e)),e=gie(t.get(r),e);return lO(e)}function gie(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const s=t.charAt(i);switch(s){case"\0":r+="";break;case mF:r+="";break;default:r+=s}}return r}function lO(t){return t+mF+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Sl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function pF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let br=class yk{constructor(e,r){this.comparator=e,this.root=r||Xo.EMPTY}insert(e,r){return new yk(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Xo.BLACK,null,null))}remove(e){return new yk(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _0(this.root,e,this.comparator,!1)}getReverseIterator(){return new _0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _0(this.root,e,this.comparator,!0)}},_0=class{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xo=class ia{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??ia.RED,this.left=i??ia.EMPTY,this.right=s??ia.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new ia(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ia.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return ia.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ia.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ia.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}};Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1;Xo.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,r,n,i,s){return this}insert(e,r,n){return new Xo(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new uO(this.data.getIterator())}getIteratorFrom(e){return new uO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Pr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Pr(this.comparator);return r.data=e,r}}class uO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.fields=e,e.sort(Gr.comparator)}static empty(){return new di([])}unionWith(e){let r=new Pr(Gr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new di(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Nd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gF("Invalid base64 string: "+s):s}}(e);return new Qr(r)}static fromUint8Array(e){const r=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Qr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const yie=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ul(t){if(St(!!t,39018),typeof t=="string"){let e=0;const r=yie.exec(t);if(St(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ur(t.seconds),nanos:ur(t.nanos)}}function ur(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dl(t){return typeof t=="string"?Qr.fromBase64String(t):Qr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF="server_timestamp",vF="__type__",xF="__previous_value__",bF="__local_write_time__";function n2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[vF])===null||r===void 0?void 0:r.stringValue)===yF}function Pb(t){const e=t.mapValue.fields[xF];return n2(e)?Pb(e):e}function tp(t){const e=ul(t.mapValue.fields[bF].timestampValue);return new Tr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vie{constructor(e,r,n,i,s,a,l,c,u,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const pv="(default)";class rp{constructor(e,r){this.projectId=e,this.database=r||pv}static empty(){return new rp("","")}get isDefaultDatabase(){return this.database===pv}isEqual(e){return e instanceof rp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="__type__",_F="__max__",S0={mapValue:{fields:{__type__:{stringValue:_F}}}},SF="__vector__",gv="value";function hl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?n2(t)?4:bie(t)?9007199254740991:xie(t)?10:11:ze(28295,{value:t})}function Hs(t,e){if(t===e)return!0;const r=hl(t);if(r!==hl(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tp(t).isEqual(tp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ul(i.timestampValue),l=ul(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return dl(i.bytesValue).isEqual(dl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ur(i.geoPointValue.latitude)===ur(s.geoPointValue.latitude)&&ur(i.geoPointValue.longitude)===ur(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ur(i.integerValue)===ur(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=ur(i.doubleValue),l=ur(s.doubleValue);return a===l?mv(a)===mv(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Nd(t.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(cO(a)!==cO(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Hs(a[c],l[c])))return!1;return!0}(t,e);default:return ze(52216,{left:t})}}function np(t,e){return(t.values||[]).find(r=>Hs(r,e))!==void 0}function jd(t,e){if(t===e)return 0;const r=hl(t),n=hl(e);if(r!==n)return rt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=ur(s.integerValue||s.doubleValue),c=ur(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return dO(t.timestampValue,e.timestampValue);case 4:return dO(tp(t),tp(e));case 5:return gk(t.stringValue,e.stringValue);case 6:return function(s,a){const l=dl(s),c=dl(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=rt(l[u],c[u]);if(h!==0)return h}return rt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=rt(ur(s.latitude),ur(a.latitude));return l!==0?l:rt(ur(s.longitude),ur(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hO(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,u,h;const d=s.fields||{},f=a.fields||{},m=(l=d[gv])===null||l===void 0?void 0:l.arrayValue,g=(c=f[gv])===null||c===void 0?void 0:c.arrayValue,v=rt(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=g==null?void 0:g.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:hO(m,g)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===S0.mapValue&&a===S0.mapValue)return 0;if(s===S0.mapValue)return 1;if(a===S0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const f=gk(c[d],h[d]);if(f!==0)return f;const m=jd(l[c[d]],u[h[d]]);if(m!==0)return m}return rt(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ze(23264,{Pe:r})}}function dO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const r=ul(t),n=ul(e),i=rt(r.seconds,n.seconds);return i!==0?i:rt(r.nanos,n.nanos)}function hO(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const s=jd(r[i],n[i]);if(s)return s}return rt(r.length,n.length)}function Ed(t){return vk(t)}function vk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ul(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return dl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Fe.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const s of r.values||[])i?i=!1:n+=",",n+=vk(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${vk(r.fields[a])}`;return i+"}"}(t.mapValue):ze(61005,{value:t})}function py(t){switch(hl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pb(t);return e?16+py(e):16;case 5:return 2*t.stringValue.length;case 6:return dl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+py(s),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return Sl(n.fields,(s,a)=>{i+=s.length+py(a)}),i}(t.mapValue);default:throw ze(13486,{value:t})}}function fO(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xk(t){return!!t&&"integerValue"in t}function i2(t){return!!t&&"arrayValue"in t}function mO(t){return!!t&&"nullValue"in t}function pO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gy(t){return!!t&&"mapValue"in t}function xie(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[wF])===null||r===void 0?void 0:r.stringValue)===SF}function om(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=om(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=om(t.arrayValue.values[r]);return e}return Object.assign({},t)}function bie(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_F}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!gy(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=om(r)}setAll(e){let r=Gr.emptyPath(),n={},i=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=l.popLast()}a?n[l.lastSegment()]=om(a):i.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());gy(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];gy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Sl(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Vn(om(this.value))}}function kF(t){const e=[];return Sl(t.fields,(r,n)=>{const i=new Gr([r]);if(gy(n)){const s=kF(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,r,n,i,s,a,l){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new un(e,0,Ye.min(),Ye.min(),Ye.min(),Vn.empty(),0)}static newFoundDocument(e,r,n,i){return new un(e,1,r,Ye.min(),n,i,0)}static newNoDocument(e,r){return new un(e,2,r,Ye.min(),Ye.min(),Vn.empty(),0)}static newUnknownDocument(e,r){return new un(e,3,r,Ye.min(),Ye.min(),Vn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,r){this.position=e,this.inclusive=r}}function gO(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=Fe.comparator(Fe.fromName(a.referenceValue),r.key):n=jd(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function yO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Hs(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,r="asc"){this.field=e,this.dir=r}}function wie(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{}class gr extends NF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Sie(e,r,n):r==="array-contains"?new jie(e,n):r==="in"?new Eie(e,n):r==="not-in"?new Cie(e,n):r==="array-contains-any"?new Aie(e,n):new gr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new kie(e,n):new Nie(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(jd(r,this.value)):r!==null&&hl(this.value)===hl(r)&&this.matchesComparison(jd(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends NF{constructor(e,r){super(),this.filters=e,this.op=r,this.Te=null}static create(e,r){return new gs(e,r)}matches(e){return jF(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function jF(t){return t.op==="and"}function EF(t){return _ie(t)&&jF(t)}function _ie(t){for(const e of t.filters)if(e instanceof gs)return!1;return!0}function bk(t){if(t instanceof gr)return t.field.canonicalString()+t.op.toString()+Ed(t.value);if(EF(t))return t.filters.map(e=>bk(e)).join(",");{const e=t.filters.map(r=>bk(r)).join(",");return`${t.op}(${e})`}}function CF(t,e){return t instanceof gr?function(n,i){return i instanceof gr&&n.op===i.op&&n.field.isEqual(i.field)&&Hs(n.value,i.value)}(t,e):t instanceof gs?function(n,i){return i instanceof gs&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,l)=>s&&CF(a,i.filters[l]),!0):!1}(t,e):void ze(19439)}function AF(t){return t instanceof gr?function(r){return`${r.field.canonicalString()} ${r.op} ${Ed(r.value)}`}(t):t instanceof gs?function(r){return r.op.toString()+" {"+r.getFilters().map(AF).join(" ,")+"}"}(t):"Filter"}class Sie extends gr{constructor(e,r,n){super(e,r,n),this.key=Fe.fromName(n.referenceValue)}matches(e){const r=Fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class kie extends gr{constructor(e,r){super(e,"in",r),this.keys=TF("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Nie extends gr{constructor(e,r){super(e,"not-in",r),this.keys=TF("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function TF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Fe.fromName(n.referenceValue))}class jie extends gr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return i2(r)&&np(r.arrayValue,this.value)}}class Eie extends gr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&np(this.value.arrayValue,r)}}class Cie extends gr{constructor(e,r){super(e,"not-in",r)}matches(e){if(np(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!np(this.value.arrayValue,r)}}class Aie extends gr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!i2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>np(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tie{constructor(e,r=null,n=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Ie=null}}function vO(t,e=null,r=[],n=[],i=null,s=null,a=null){return new Tie(t,e,r,n,i,s,a)}function s2(t){const e=Qe(t);if(e.Ie===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>bk(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Tb(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ed(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ed(n)).join(",")),e.Ie=r}return e.Ie}function a2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!wie(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!CF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yO(t.startAt,e.startAt)&&yO(t.endAt,e.endAt)}function wk(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,r=null,n=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Pie(t,e,r,n,i,s,a,l){return new jh(t,e,r,n,i,s,a,l)}function Ib(t){return new jh(t)}function xO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PF(t){return t.collectionGroup!==null}function lm(t){const e=Qe(t);if(e.Ee===null){e.Ee=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Pr(Gr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new ip(s,n))}),r.has(Gr.keyField().canonicalString())||e.Ee.push(new ip(Gr.keyField(),n))}return e.Ee}function $s(t){const e=Qe(t);return e.de||(e.de=Iie(e,lm(t))),e.de}function Iie(t,e){if(t.limitType==="F")return vO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ip(i.field,s)});const r=t.endAt?new yv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new yv(t.startAt.position,t.startAt.inclusive):null;return vO(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function _k(t,e){const r=t.filters.concat([e]);return new jh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function vv(t,e,r){return new jh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Ob(t,e){return a2($s(t),$s(e))&&t.limitType===e.limitType}function IF(t){return`${s2($s(t))}|lt:${t.limitType}`}function hu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>AF(i)).join(", ")}]`),Tb(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Ed(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Ed(i)).join(",")),`Target(${n})`}($s(t))}; limitType=${t.limitType})`}function Rb(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Fe.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of lm(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,l,c){const u=gO(a,l,c);return a.inclusive?u<=0:u<0}(n.startAt,lm(n),i)||n.endAt&&!function(a,l,c){const u=gO(a,l,c);return a.inclusive?u>=0:u>0}(n.endAt,lm(n),i))}(t,e)}function Oie(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OF(t){return(e,r)=>{let n=!1;for(const i of lm(t)){const s=Rie(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function Rie(t,e,r){const n=t.field.isKeyField()?Fe.comparator(e.key,r.key):function(s,a,l){const c=a.data.field(s),u=l.data.field(s);return c!==null&&u!==null?jd(c,u):ze(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ze(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sl(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return pF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mie=new br(Fe.comparator);function Da(){return Mie}const RF=new br(Fe.comparator);function zf(...t){let e=RF;for(const r of t)e=e.insert(r.key,r);return e}function MF(t){let e=RF;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ql(){return cm()}function DF(){return cm()}function cm(){return new Vc(t=>t.toString(),(t,e)=>t.isEqual(e))}const Die=new br(Fe.comparator),$ie=new Pr(Fe.comparator);function ot(...t){let e=$ie;for(const r of t)e=e.add(r);return e}const Lie=new Pr(rt);function Fie(){return Lie}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mv(e)?"-0":e}}function $F(t){return{integerValue:""+t}}function LF(t,e){return mie(e)?$F(e):o2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this._=void 0}}function Vie(t,e,r){return t instanceof sp?function(i,s){const a={fields:{[vF]:{stringValue:yF},[bF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&n2(s)&&(s=Pb(s)),s&&(a.fields[xF]=s),{mapValue:a}}(r,e):t instanceof Cd?VF(t,e):t instanceof Ad?BF(t,e):function(i,s){const a=FF(i,s),l=bO(a)+bO(i.Re);return xk(a)&&xk(i.Re)?$F(l):o2(i.serializer,l)}(t,e)}function Bie(t,e,r){return t instanceof Cd?VF(t,e):t instanceof Ad?BF(t,e):r}function FF(t,e){return t instanceof ap?function(n){return xk(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class sp extends Mb{}class Cd extends Mb{constructor(e){super(),this.elements=e}}function VF(t,e){const r=UF(e);for(const n of t.elements)r.some(i=>Hs(i,n))||r.push(n);return{arrayValue:{values:r}}}class Ad extends Mb{constructor(e){super(),this.elements=e}}function BF(t,e){let r=UF(e);for(const n of t.elements)r=r.filter(i=>!Hs(i,n));return{arrayValue:{values:r}}}class ap extends Mb{constructor(e,r){super(),this.serializer=e,this.Re=r}}function bO(t){return ur(t.integerValue||t.doubleValue)}function UF(t){return i2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,r){this.field=e,this.transform=r}}function Uie(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Cd&&i instanceof Cd||n instanceof Ad&&i instanceof Ad?Nd(n.elements,i.elements,Hs):n instanceof ap&&i instanceof ap?Hs(n.Re,i.Re):n instanceof sp&&i instanceof sp}(t.transform,e.transform)}class zie{constructor(e,r){this.version=e,this.transformResults=r}}class Pn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $b{}function zF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lb(t.key,Pn.none()):new dg(t.key,t.data,Pn.none());{const r=t.data,n=Vn.empty();let i=new Pr(Gr.comparator);for(let s of e.fields)if(!i.has(s)){let a=r.field(s);a===null&&s.length>1&&(s=s.popLast(),a=r.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new kl(t.key,n,new di(i.toArray()),Pn.none())}}function Wie(t,e,r){t instanceof dg?function(i,s,a){const l=i.value.clone(),c=_O(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):t instanceof kl?function(i,s,a){if(!yy(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=_O(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(WF(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function um(t,e,r,n){return t instanceof dg?function(s,a,l,c){if(!yy(s.precondition,a))return l;const u=s.value.clone(),h=SO(s.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof kl?function(s,a,l,c){if(!yy(s.precondition,a))return l;const u=SO(s.fieldTransforms,c,a),h=a.data;return h.setAll(WF(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,r,n):function(s,a,l){return yy(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,r)}function Hie(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=FF(n.transform,i||null);s!=null&&(r===null&&(r=Vn.empty()),r.set(n.field,s))}return r||null}function wO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Nd(n,i,(s,a)=>Uie(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dg extends $b{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kl extends $b{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function WF(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function _O(t,e,r){const n=new Map;St(t.length===r.length,32656,{Ve:r.length,me:t.length});for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);n.set(s.field,Bie(a,l,r[i]))}return n}function SO(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,Vie(s,a,e))}return n}class Lb extends $b{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gie extends $b{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qie{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Wie(s,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=um(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=um(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=DF();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=r.has(i.key)?null:l;const c=zF(a,l);c!==null&&n.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Ye.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ot())}isEqual(e){return this.batchId===e.batchId&&Nd(this.mutations,e.mutations,(r,n)=>wO(r,n))&&Nd(this.baseMutations,e.baseMutations,(r,n)=>wO(r,n))}}class l2{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){St(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let i=function(){return Die}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new l2(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kie=class{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yie{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr,ct;function Qie(t){switch(t){case ie.OK:return ze(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return ze(15467,{code:t})}}function HF(t){if(t===void 0)return Ma("GRPC error has no .code"),ie.UNKNOWN;switch(t){case fr.OK:return ie.OK;case fr.CANCELLED:return ie.CANCELLED;case fr.UNKNOWN:return ie.UNKNOWN;case fr.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case fr.INTERNAL:return ie.INTERNAL;case fr.UNAVAILABLE:return ie.UNAVAILABLE;case fr.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case fr.NOT_FOUND:return ie.NOT_FOUND;case fr.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case fr.ABORTED:return ie.ABORTED;case fr.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case fr.DATA_LOSS:return ie.DATA_LOSS;default:return ze(39323,{code:t})}}(ct=fr||(fr={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie=new Qo([4294967295,4294967295],0);function kO(t){const e=hF().encode(t),r=new iF;return r.update(e),new Uint8Array(r.digest())}function NO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qo([r,n],0),new Qo([i,s],0)]}class c2{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Wf(`Invalid padding: ${r}`);if(n<0)throw new Wf(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Wf(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Wf(`Invalid padding when bitmap length is 0: ${r}`);this.pe=8*e.length-r,this.ye=Qo.fromNumber(this.pe)}we(e,r,n){let i=e.add(r.multiply(Qo.fromNumber(n)));return i.compare(Xie)===1&&(i=new Qo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const r=kO(e),[n,i]=NO(r);for(let s=0;s<this.hashCount;s++){const a=this.we(n,i,s);if(!this.be(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new c2(s,i,r);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.pe===0)return;const r=kO(e),[n,i]=NO(r);for(let s=0;s<this.hashCount;s++){const a=this.we(n,i,s);this.Se(a)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Wf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,hg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Fb(Ye.min(),i,new br(rt),Da(),ot())}}class hg{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new hg(n,r,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,r,n,i){this.De=e,this.removedTargetIds=r,this.key=n,this.ve=i}}class GF{constructor(e,r){this.targetId=e,this.Ce=r}}class qF{constructor(e,r,n=Qr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class jO{constructor(){this.Fe=0,this.Me=EO(),this.xe=Qr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ot(),r=ot(),n=ot();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:ze(38017,{changeType:s})}}),new hg(this.xe,this.Oe,e,r,n)}Qe(){this.Ne=!1,this.Me=EO()}$e(e,r){this.Ne=!0,this.Me=this.Me.insert(e,r)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,St(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Jie{constructor(e){this.ze=e,this.je=new Map,this.He=Da(),this.Je=k0(),this.Ye=k0(),this.Ze=new br(rt)}Xe(e){for(const r of e.De)e.ve&&e.ve.isFoundDocument()?this.et(r,e.ve):this.tt(r,e.key,e.ve);for(const r of e.removedTargetIds)this.tt(r,e.key,e.ve)}nt(e){this.forEachTarget(e,r=>{const n=this.rt(r);switch(e.state){case 0:this.it(r)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(r);break;case 3:this.it(r)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(r)&&(this.st(r),n.ke(e.resumeToken));break;default:ze(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.je.forEach((n,i)=>{this.it(i)&&r(i)})}ot(e){const r=e.targetId,n=e.Ce.count,i=this._t(r);if(i){const s=i.target;if(wk(s))if(n===0){const a=new Fe(s.path);this.tt(r,a,un.newNoDocument(a,Ye.min()))}else St(n===1,20013,{expectedCount:n});else{const a=this.ut(r);if(a!==n){const l=this.ct(e),c=l?this.lt(l,e,a):1;if(c!==0){this.st(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,u)}}}}}ct(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=r;let a,l;try{a=dl(n).toUint8Array()}catch(c){if(c instanceof gF)return kd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new c2(a,i,s)}catch(c){return kd(c instanceof Wf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,r,n){return r.Ce.count===n-this.Tt(e,r.targetId)?0:2}Tt(e,r){const n=this.ze.getRemoteKeysForTarget(r);let i=0;return n.forEach(s=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.tt(r,s,null),i++)}),i}It(e){const r=new Map;this.je.forEach((s,a)=>{const l=this._t(a);if(l){if(s.current&&wk(l.target)){const c=new Fe(l.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,un.newNoDocument(c,e))}s.Le&&(r.set(a,s.qe()),s.Qe())}});let n=ot();this.Ye.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const i=new Fb(e,r,this.Ze,this.He,n);return this.He=Da(),this.Je=k0(),this.Ye=k0(),this.Ze=new br(rt),i}et(e,r){if(!this.it(e))return;const n=this.dt(e,r.key)?2:0;this.rt(e).$e(r.key,n),this.He=this.He.insert(r.key,r),this.Je=this.Je.insert(r.key,this.Et(r.key).add(e)),this.Ye=this.Ye.insert(r.key,this.At(r.key).add(e))}tt(e,r,n){if(!this.it(e))return;const i=this.rt(e);this.dt(e,r)?i.$e(r,1):i.Ue(r),this.Ye=this.Ye.insert(r,this.At(r).delete(e)),this.Ye=this.Ye.insert(r,this.At(r).add(e)),n&&(this.He=this.He.insert(r,n))}removeTarget(e){this.je.delete(e)}ut(e){const r=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let r=this.je.get(e);return r||(r=new jO,this.je.set(e,r)),r}At(e){let r=this.Ye.get(e);return r||(r=new Pr(rt),this.Ye=this.Ye.insert(e,r)),r}Et(e){let r=this.Je.get(e);return r||(r=new Pr(rt),this.Je=this.Je.insert(e,r)),r}it(e){const r=this._t(e)!==null;return r||Te("WatchChangeAggregator","Detected inactive target",e),r}_t(e){const r=this.je.get(e);return r&&r.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new jO),this.ze.getRemoteKeysForTarget(e).forEach(r=>{this.tt(e,r,null)})}dt(e,r){return this.ze.getRemoteKeysForTarget(e).has(r)}}function k0(){return new br(Fe.comparator)}function EO(){return new br(Fe.comparator)}const Zie={asc:"ASCENDING",desc:"DESCENDING"},ese={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tse={and:"AND",or:"OR"};class rse{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Sk(t,e){return t.useProto3Json||Tb(e)?e:{value:e}}function xv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nse(t,e){return xv(t,e.toTimestamp())}function Ls(t){return St(!!t,49232),Ye.fromTimestamp(function(r){const n=ul(r);return new Tr(n.seconds,n.nanos)}(t))}function u2(t,e){return kk(t,e).canonicalString()}function kk(t,e){const r=function(i){return new Wt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function YF(t){const e=Wt.fromString(t);return St(e7(e),10190,{key:e.toString()}),e}function Nk(t,e){return u2(t.databaseId,e.path)}function e_(t,e){const r=YF(e);if(r.get(1)!==t.databaseId.projectId)throw new Ee(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ee(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Fe(XF(r))}function QF(t,e){return u2(t.databaseId,e)}function ise(t){const e=YF(t);return e.length===4?Wt.emptyPath():XF(e)}function jk(t){return new Wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XF(t){return St(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CO(t,e,r){return{name:Nk(t,e),fields:r.value.mapValue.fields}}function sse(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ze(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(St(h===void 0||typeof h=="string",58123),Qr.fromBase64String(h||"")):(St(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Qr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const h=u.code===void 0?ie.UNKNOWN:HF(u.code);return new Ee(h,u.message||"")}(a);r=new qF(n,i,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=e_(t,n.document.name),s=Ls(n.document.updateTime),a=n.document.createTime?Ls(n.document.createTime):Ye.min(),l=new Vn({mapValue:{fields:n.document.fields}}),c=un.newFoundDocument(i,s,a,l),u=n.targetIds||[],h=n.removedTargetIds||[];r=new vy(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=e_(t,n.document),s=n.readTime?Ls(n.readTime):Ye.min(),a=un.newNoDocument(i,s),l=n.removedTargetIds||[];r=new vy([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=e_(t,n.document),s=n.removedTargetIds||[];r=new vy([],s,i,null)}else{if(!("filter"in e))return ze(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new Yie(i,s),l=n.targetId;r=new GF(l,a)}}return r}function ase(t,e){let r;if(e instanceof dg)r={update:CO(t,e.key,e.value)};else if(e instanceof Lb)r={delete:Nk(t,e.key)};else if(e instanceof kl)r={update:CO(t,e.key,e.data),updateMask:pse(e.fieldMask)};else{if(!(e instanceof Gie))return ze(16599,{ft:e.type});r={verify:Nk(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const l=a.transform;if(l instanceof sp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ad)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ap)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw ze(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nse(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ze(27497)}(t,e.precondition)),r}function ose(t,e){return t&&t.length>0?(St(e!==void 0,14353),t.map(r=>function(i,s){let a=i.updateTime?Ls(i.updateTime):Ls(s);return a.isEqual(Ye.min())&&(a=Ls(s)),new zie(a,i.transformResults||[])}(r,e))):[]}function lse(t,e){return{documents:[QF(t,e.path)]}}function cse(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=QF(t,i);const s=function(u){if(u.length!==0)return ZF(gs.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:fu(f.field),direction:hse(f.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=Sk(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:r,parent:i}}function use(t){let e=ise(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){St(n===1,65062);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];r.where&&(s=function(d){const f=JF(d);return f instanceof gs&&EF(f)?f.getFilters():[f]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(f=>function(g){return new ip(mu(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(r.orderBy));let l=null;r.limit&&(l=function(d){let f;return f=typeof d=="object"?d.value:d,Tb(f)?null:f}(r.limit));let c=null;r.startAt&&(c=function(d){const f=!!d.before,m=d.values||[];return new yv(m,f)}(r.startAt));let u=null;return r.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new yv(m,f)}(r.endAt)),Pie(e,i,a,s,l,"F",c,u)}function dse(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function JF(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=mu(r.unaryFilter.field);return gr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=mu(r.unaryFilter.field);return gr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=mu(r.unaryFilter.field);return gr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=mu(r.unaryFilter.field);return gr.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}}(t):t.fieldFilter!==void 0?function(r){return gr.create(mu(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return gs.create(r.compositeFilter.filters.map(n=>JF(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ze(1026)}}(r.compositeFilter.op))}(t):ze(30097,{filter:t})}function hse(t){return Zie[t]}function fse(t){return ese[t]}function mse(t){return tse[t]}function fu(t){return{fieldPath:t.canonicalString()}}function mu(t){return Gr.fromServerFormat(t.fieldPath)}function ZF(t){return t instanceof gr?function(r){if(r.op==="=="){if(pO(r.value))return{unaryFilter:{field:fu(r.field),op:"IS_NAN"}};if(mO(r.value))return{unaryFilter:{field:fu(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(pO(r.value))return{unaryFilter:{field:fu(r.field),op:"IS_NOT_NAN"}};if(mO(r.value))return{unaryFilter:{field:fu(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fu(r.field),op:fse(r.op),value:r.value}}}(t):t instanceof gs?function(r){const n=r.getFilters().map(i=>ZF(i));return n.length===1?n[0]:{compositeFilter:{op:mse(r.op),filters:n}}}(t):ze(54877,{filter:t})}function pse(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function e7(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,r,n,i,s=Ye.min(),a=Ye.min(),l=Qr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gse{constructor(e){this.wt=e}}function yse(t){const e=use({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vse{constructor(){this.Cn=new xse}addToCollectionParentIndex(e,r){return this.Cn.add(r),ae.resolve()}getCollectionParents(e,r){return ae.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return ae.resolve()}deleteFieldIndex(e,r){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,r){return ae.resolve()}getDocumentsMatchingTarget(e,r){return ae.resolve(null)}getIndexType(e,r){return ae.resolve(0)}getFieldIndexes(e,r){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,r){return ae.resolve(cl.min())}getMinOffsetFromCollectionGroup(e,r){return ae.resolve(cl.min())}updateCollectionGroup(e,r,n){return ae.resolve()}updateIndexEntries(e,r){return ae.resolve()}}class xse{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Pr(Wt.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Pr(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},t7=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(t7,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Td(0)}static lr(){return new Td(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="LruGarbageCollector",bse=1048576;function PO([t,e],[r,n]){const i=rt(t,r);return i===0?rt(e,n):i}class wse{constructor(e){this.Er=e,this.buffer=new Pr(PO),this.dr=0}Ar(){return++this.dr}Rr(e){const r=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();PO(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class _se{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Te(TO,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Nh(r)?Te(TO,"Ignoring IndexedDB error during garbage collection: ",r):await kh(r)}await this.mr(3e5)})}}class Sse{constructor(e,r){this.gr=e,this.params=r}calculateTargetCount(e,r){return this.gr.pr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return ae.resolve(Ab.le);const n=new wse(r);return this.gr.forEachTarget(e,i=>n.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>n.Rr(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.gr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.gr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(AO)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AO):this.wr(e,r))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,r){let n,i,s,a,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(n=d,l=Date.now(),this.removeTargets(e,n,r))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(u=Date.now(),du()<=nt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function kse(t,e){return new Sse(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nse{constructor(){this.changes=new Vc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ae.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jse{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ese{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&um(n.mutation,i,di.empty(),Tr.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ot()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ot()){const i=Ql();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(s=>{let a=zf();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Ql();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ot()))}populateOverlays(e,r,n){const i=[];return n.forEach(s=>{r.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,n,i){let s=Da();const a=cm(),l=function(){return cm()}();return r.forEach((c,u)=>{const h=n.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof kl)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),um(h.mutation,u,h.mutation.getFieldMask(),Tr.now())):a.set(u.key,di.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,h)=>a.set(u,h)),r.forEach((u,h)=>{var d;return l.set(u,new jse(h,(d=a.get(u))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(e,r){const n=cm();let i=new br((a,l)=>a-l),s=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let h=n.get(c)||di.empty();h=l.applyToLocalView(u,h),n.set(c,h);const d=(i.get(l.batchId)||ot()).add(c);i=i.insert(l.batchId,d)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=DF();h.forEach(f=>{if(!s.has(f)){const m=zF(r.get(f),n.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ae.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return Fe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):PF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-s.size):ae.resolve(Ql());let l=ep,c=s;return a.next(u=>ae.forEach(u,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(h)?ae.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{c=c.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ot())).next(h=>({batchId:l,changes:MF(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Fe(r)).next(n=>{let i=zf();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const s=r.collectionGroup;let a=zf();return this.indexManager.getCollectionParents(e,s).next(l=>ae.forEach(l,c=>{const u=function(d,f){return new jh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(h=>{h.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,i))).next(a=>{s.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,un.newInvalidDocument(h)))});let l=zf();return a.forEach((c,u)=>{const h=s.get(c);h!==void 0&&um(h.mutation,u,di.empty(),Tr.now()),Rb(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cse{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,r){return ae.resolve(this.kr.get(r))}saveBundleMetadata(e,r){return this.kr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Ls(i.createTime)}}(r)),ae.resolve()}getNamedQuery(e,r){return ae.resolve(this.qr.get(r))}saveNamedQuery(e,r){return this.qr.set(r.name,function(i){return{name:i.name,query:yse(i.bundledQuery),readTime:Ls(i.readTime)}}(r)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ase{constructor(){this.overlays=new br(Fe.comparator),this.Qr=new Map}getOverlay(e,r){return ae.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ql();return ae.forEach(r,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,s)=>{this.St(e,r,s)}),ae.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Qr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(n)),ae.resolve()}getOverlaysForCollection(e,r,n){const i=Ql(),s=r.length+1,a=new Fe(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&i.set(c.getKey(),c)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new br((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let h=s.get(u.largestBatchId);h===null&&(h=Ql(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Ql(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=i)););return ae.resolve(l)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Qr.get(i.largestBatchId).delete(n.key);this.Qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Kie(r,n));let s=this.Qr.get(r);s===void 0&&(s=ot(),this.Qr.set(r,s)),this.Qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tse{constructor(){this.sessionToken=Qr.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.$r=new Pr(Rr.Ur),this.Kr=new Pr(Rr.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,r){const n=new Rr(e,r);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.zr(new Rr(e,r))}jr(e,r){e.forEach(n=>this.removeReference(n,r))}Hr(e){const r=new Fe(new Wt([])),n=new Rr(r,e),i=new Rr(r,e+1),s=[];return this.Kr.forEachInRange([n,i],a=>{this.zr(a),s.push(a.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const r=new Fe(new Wt([])),n=new Rr(r,e),i=new Rr(r,e+1);let s=ot();return this.Kr.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const r=new Rr(e,0),n=this.$r.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Rr{constructor(e,r){this.key=e,this.Zr=r}static Ur(e,r){return Fe.comparator(e.key,r.key)||rt(e.Zr,r.Zr)}static Wr(e,r){return rt(e.Zr,r.Zr)||Fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pse{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.nr=1,this.Xr=new Pr(Rr.Ur)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new qie(s,r,n,i);this.mutationQueue.push(a);for(const l of i)this.Xr=this.Xr.add(new Rr(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ae.resolve(a)}lookupMutationBatch(e,r){return ae.resolve(this.ei(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ti(n),s=i<0?0:i;return ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?r2:this.nr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Rr(r,0),i=new Rr(r,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([n,i],a=>{const l=this.ei(a.Zr);s.push(l)}),ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Pr(rt);return r.forEach(i=>{const s=new Rr(i,0),a=new Rr(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,a],l=>{n=n.add(l.Zr)})}),ae.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;Fe.isDocumentKey(s)||(s=s.child(""));const a=new Rr(new Fe(s),0);let l=new Pr(rt);return this.Xr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.Zr)),!0)},a),ae.resolve(this.ni(l))}ni(e){const r=[];return e.forEach(n=>{const i=this.ei(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){St(this.ri(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Xr;return ae.forEach(r.mutations,i=>{const s=new Rr(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,r){const n=new Rr(r,0),i=this.Xr.firstAfterOrEqual(n);return ae.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ri(e,r){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const r=this.ti(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ise{constructor(e){this.ii=e,this.docs=function(){return new br(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.ii(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ae.resolve(n?n.document.mutableCopy():un.newInvalidDocument(r))}getEntries(e,r){let n=Da();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():un.newInvalidDocument(i))}),ae.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let s=Da();const a=r.path,l=new Fe(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||uie(cie(h),n)<=0||(i.has(h.key)||Rb(r,h))&&(s=s.insert(h.key,h.mutableCopy()))}return ae.resolve(s)}getAllFromCollectionGroup(e,r,n,i){ze(9500)}si(e,r){return ae.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Ose(this)}getSize(e){return ae.resolve(this.size)}}class Ose extends Nse{constructor(e){super(),this.Br=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Br.addEntry(e,i)):this.Br.removeEntry(n)}),ae.waitFor(r)}getFromCache(e,r){return this.Br.getEntry(e,r)}getAllFromCache(e,r){return this.Br.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rse{constructor(e){this.persistence=e,this.oi=new Vc(r=>s2(r),a2),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this._i=0,this.ai=new d2,this.targetCount=0,this.ui=Td.cr()}forEachTarget(e,r){return this.oi.forEach((n,i)=>r(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this._i&&(this._i=r),ae.resolve()}Tr(e){this.oi.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ui=new Td(r),this.highestTargetId=r),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,r){return this.Tr(r),this.targetCount+=1,ae.resolve()}updateTargetData(e,r){return this.Tr(r),ae.resolve()}removeTargetData(e,r){return this.oi.delete(r.target),this.ai.Hr(r.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.oi.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ae.waitFor(s).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,r){const n=this.oi.get(r)||null;return ae.resolve(n)}addMatchingKeys(e,r,n){return this.ai.Gr(r,n),ae.resolve()}removeMatchingKeys(e,r,n){this.ai.jr(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),ae.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.ai.Hr(r),ae.resolve()}getMatchingKeysForTargetId(e,r){const n=this.ai.Yr(r);return ae.resolve(n)}containsKey(e,r){return ae.resolve(this.ai.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,r){this.ci={},this.overlays={},this.li=new Ab(0),this.hi=!1,this.hi=!0,this.Pi=new Tse,this.referenceDelegate=e(this),this.Ti=new Rse(this),this.indexManager=new vse,this.remoteDocumentCache=function(i){return new Ise(i)}(n=>this.referenceDelegate.Ii(n)),this.serializer=new gse(r),this.Ei=new Cse(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Ase,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ci[e.toKey()];return n||(n=new Pse(r,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,r,n){Te("MemoryPersistence","Starting transaction:",e);const i=new Mse(this.li.next());return this.referenceDelegate.di(),n(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,r){return ae.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,r)))}}class Mse extends hie{constructor(e){super(),this.currentSequenceNumber=e}}class h2{constructor(e){this.persistence=e,this.Vi=new d2,this.mi=null}static fi(e){return new h2(e)}get gi(){if(this.mi)return this.mi;throw ze(60996)}addReference(e,r,n){return this.Vi.addReference(n,r),this.gi.delete(n.toString()),ae.resolve()}removeReference(e,r,n){return this.Vi.removeReference(n,r),this.gi.add(n.toString()),ae.resolve()}markPotentiallyOrphaned(e,r){return this.gi.add(r.toString()),ae.resolve()}removeTarget(e,r){this.Vi.Hr(r.targetId).forEach(i=>this.gi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}di(){this.mi=new Set}Ai(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.gi,n=>{const i=Fe.fromPath(n);return this.pi(e,i).next(s=>{s||r.removeEntry(i,Ye.min())})}).next(()=>(this.mi=null,r.apply(e)))}updateLimboDocument(e,r){return this.pi(e,r).next(n=>{n?this.gi.delete(r.toString()):this.gi.add(r.toString())})}Ii(e){return 0}pi(e,r){return ae.or([()=>ae.resolve(this.Vi.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ri(e,r)])}}class bv{constructor(e,r){this.persistence=e,this.yi=new Vc(n=>pie(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=kse(this,r)}static fi(e,r){return new bv(e,r)}di(){}Ai(e){return ae.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}pr(e){const r=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}br(e){let r=0;return this.yr(e,n=>{r++}).next(()=>r)}yr(e,r){return ae.forEach(this.yi,(n,i)=>this.Dr(e,n,i).next(s=>s?ae.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,a=>this.Dr(e,a,r).next(l=>{l||(n++,s.removeEntry(a,Ye.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.yi.set(r,e.currentSequenceNumber),ae.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.yi.set(n,e.currentSequenceNumber),ae.resolve()}removeReference(e,r,n){return this.yi.set(n,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,r){return this.yi.set(r,e.currentSequenceNumber),ae.resolve()}Ii(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=py(e.data.value)),r}Dr(e,r,n){return ae.or([()=>this.persistence.Ri(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.yi.get(r);return ae.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.ds=n,this.As=i}static Rs(e,r){let n=ot(),i=ot();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new f2(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dse{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $se{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return fee()?8:fie(xn())>0?6:4}()}initialize(e,r){this.ys=e,this.indexManager=r,this.Vs=!0}getDocumentsMatchingQuery(e,r,n,i){const s={result:null};return this.ws(e,r).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.bs(e,r,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Dse;return this.Ss(e,r,a).next(l=>{if(s.result=l,this.fs)return this.Ds(e,r,a,l.size)})}).next(()=>s.result)}Ds(e,r,n,i){return n.documentReadCount<this.gs?(du()<=nt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",hu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ae.resolve()):(du()<=nt.DEBUG&&Te("QueryEngine","Query:",hu(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ps*i?(du()<=nt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",hu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$s(r))):ae.resolve())}ws(e,r){if(xO(r))return ae.resolve(null);let n=$s(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=vv(r,null,"F"),n=$s(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=ot(...s);return this.ys.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.vs(r,l);return this.Cs(r,u,a,c.readTime)?this.ws(e,vv(r,null,"F")):this.Fs(e,u,r,c)}))})))}bs(e,r,n,i){return xO(r)||i.isEqual(Ye.min())?ae.resolve(null):this.ys.getDocuments(e,n).next(s=>{const a=this.vs(r,s);return this.Cs(r,a,n,i)?ae.resolve(null):(du()<=nt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hu(r)),this.Fs(e,a,r,lie(i,ep)).next(l=>l))})}vs(e,r){let n=new Pr(OF(e));return r.forEach((i,s)=>{Rb(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,r,n){return du()<=nt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",hu(r)),this.ys.getDocumentsMatchingQuery(e,r,cl.min(),n)}Fs(e,r,n,i){return this.ys.getDocumentsMatchingQuery(e,n,i).next(s=>(r.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="LocalStore",Lse=3e8;class Fse{constructor(e,r,n,i){this.persistence=e,this.Ms=r,this.serializer=i,this.xs=new br(rt),this.Os=new Vc(s=>s2(s),a2),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ese(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.xs))}}function Vse(t,e,r,n){return new Fse(t,e,r,n)}async function n7(t,e){const r=Qe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,r.Ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],l=[];let c=ot();for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of s){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return r.localDocuments.getDocuments(n,c).next(u=>({ks:u,removedBatchIds:a,addedBatchIds:l}))})})}function Bse(t,e){const r=Qe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=r.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const d=u.batch,f=d.keys();let m=ae.resolve();return f.forEach(g=>{m=m.next(()=>h.getEntry(c,g)).next(v=>{const y=u.docVersions.get(g);St(y!==null,48541),v.version.compareTo(y)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,d))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=ot();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function i7(t){const e=Qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ti.getLastRemoteSnapshotVersion(r))}function Use(t,e){const r=Qe(t),n=e.snapshotVersion;let i=r.xs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=r.Bs.newChangeBuffer({trackRemovals:!0});i=r.xs;const l=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;l.push(r.Ti.removeMatchingKeys(s,h.removedDocuments,d).next(()=>r.Ti.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Qr.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,n)),i=i.insert(d,m),function(v,y,x){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Lse?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,m,h)&&l.push(r.Ti.updateTargetData(s,m))});let c=Da(),u=ot();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(zse(s,a,e.documentUpdates).next(h=>{c=h.qs,u=h.Qs})),!n.isEqual(Ye.min())){const h=r.Ti.getLastRemoteSnapshotVersion(s).next(d=>r.Ti.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(h)}return ae.waitFor(l).next(()=>a.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.xs=i,s))}function zse(t,e,r){let n=ot(),i=ot();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let a=Da();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ye.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Te(m2,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{qs:a,Qs:i}})}function Wse(t,e){const r=Qe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=r2),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Hse(t,e){const r=Qe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ti.getTargetData(n,e).next(s=>s?(i=s,ae.resolve(i)):r.Ti.allocateTargetId(n).next(a=>(i=new Oo(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ti.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.xs.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.xs=r.xs.insert(n.targetId,n),r.Os.set(e,n.targetId)),n})}async function Ek(t,e,r){const n=Qe(t),i=n.xs.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Nh(a))throw a;Te(m2,`Failed to update sequence numbers for target ${e}: ${a}`)}n.xs=n.xs.remove(e),n.Os.delete(i.target)}function IO(t,e,r){const n=Qe(t);let i=Ye.min(),s=ot();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const d=Qe(c),f=d.Os.get(h);return f!==void 0?ae.resolve(d.xs.get(f)):d.Ti.getTargetData(u,h)}(n,a,$s(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Ti.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>n.Ms.getDocumentsMatchingQuery(a,e,r?i:Ye.min(),r?s:ot())).next(l=>(Gse(n,Oie(e),l),{documents:l,$s:s})))}function Gse(t,e,r){let n=t.Ns.get(e)||Ye.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Ns.set(e,n)}class OO{constructor(){this.activeTargetIds=Fie()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qse{constructor(){this.xo=new OO,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,r,n){this.Oo[e]=r}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new OO,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kse{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="ConnectivityMonitor";class MO{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Te(RO,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Te(RO,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N0=null;function Ck(){return N0===null?N0=function(){return 268435456+Math.round(2147483648*Math.random())}():N0++,"0x"+N0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="RestConnection",Yse={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qse{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=r+"://"+e.host,this.Wo=`projects/${n}/databases/${i}`,this.Go=this.databaseId.database===pv?`project_id=${n}`:`project_id=${n}&database_id=${i}`}zo(e,r,n,i,s){const a=Ck(),l=this.jo(e,r.toUriEncodedString());Te(t_,`Sending RPC '${e}' ${a}:`,l,n);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,i,s);const{host:u}=new URL(l),h=bl(u);return this.Jo(e,l,c,n,h).then(d=>(Te(t_,`Received RPC '${e}' ${a}: `,d),d),d=>{throw kd(t_,`RPC '${e}' ${a} failed with error: `,d,"url: ",l,"request:",n),d})}Yo(e,r,n,i,s,a){return this.zo(e,r,n,i,s)}Ho(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}jo(e,r){const n=Yse[e];return`${this.Ko}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xse{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class Jse extends Qse{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,s){const a=Ck();return new Promise((l,c)=>{const u=new sF;u.setWithCredentials(!0),u.listenOnce(aF.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case my.NO_ERROR:const d=u.getResponseJson();Te(sn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),l(d);break;case my.TIMEOUT:Te(sn,`RPC '${e}' ${a} timed out`),c(new Ee(ie.DEADLINE_EXCEEDED,"Request time out"));break;case my.HTTP_ERROR:const f=u.getStatus();if(Te(sn,`RPC '${e}' ${a} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(x){const b=x.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(b)>=0?b:ie.UNKNOWN}(g.status);c(new Ee(v,g.message))}else c(new Ee(ie.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Ee(ie.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{h_:e,streamId:a,P_:u.getLastErrorCode(),T_:u.getLastError()})}}finally{Te(sn,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);Te(sn,`RPC '${e}' ${a} sending request:`,i),u.send(r,"POST",h,n,15)})}I_(e,r,n){const i=Ck(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cF(),l=lF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const h=s.join("");Te(sn,`Creating RPC '${e}' stream ${i}: ${h}`,c);const d=a.createWebChannel(h,c);this.E_(d);let f=!1,m=!1;const g=new Xse({Zo:y=>{m?Te(sn,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(f||(Te(sn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),Te(sn,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},Xo:()=>d.close()}),v=(y,x,b)=>{y.listen(x,w=>{try{b(w)}catch(k){setTimeout(()=>{throw k},0)}})};return v(d,Uf.EventType.OPEN,()=>{m||(Te(sn,`RPC '${e}' stream ${i} transport opened.`),g.__())}),v(d,Uf.EventType.CLOSE,()=>{m||(m=!0,Te(sn,`RPC '${e}' stream ${i} transport closed`),g.u_(),this.d_(d))}),v(d,Uf.EventType.ERROR,y=>{m||(m=!0,kd(sn,`RPC '${e}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),g.u_(new Ee(ie.UNAVAILABLE,"The operation could not be completed")))}),v(d,Uf.EventType.MESSAGE,y=>{var x;if(!m){const b=y.data[0];St(!!b,16349);const w=b,k=(w==null?void 0:w.error)||((x=w[0])===null||x===void 0?void 0:x.error);if(k){Te(sn,`RPC '${e}' stream ${i} received error:`,k);const S=k.status;let P=function(T){const j=fr[T];if(j!==void 0)return HF(j)}(S),N=k.message;P===void 0&&(P=ie.INTERNAL,N="Unknown error status: "+S+" with message "+k.message),m=!0,g.u_(new Ee(P,N)),d.close()}else Te(sn,`RPC '${e}' stream ${i} received:`,b),g.c_(b)}}),v(l,oF.STAT_EVENT,y=>{y.stat===pk.PROXY?Te(sn,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===pk.NOPROXY&&Te(sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.a_()},0),g}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(r=>r===e)}}function r_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){return new rse(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e,r,n=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=r,this.A_=n,this.R_=i,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const r=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),i=Math.max(0,r-n);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO="PersistentStream";class a7{constructor(e,r,n,i,s,a,l,c){this.xi=e,this.S_=n,this.D_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new s7(e,r)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,r){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():r&&r.code===ie.RESOURCE_EXHAUSTED?(Ma(r.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):r&&r.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(r)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),r=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.v_===r&&this.z_(n,i)},n=>{e(()=>{const i=new Ee(ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.j_(i)})})}z_(e,r){const n=this.G_(this.v_);this.stream=this.H_(e,r),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{n(()=>this.j_(i))}),this.stream.onMessage(i=>{n(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Te(DO,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return r=>{this.xi.enqueueAndForget(()=>this.v_===e?r():(Te(DO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zse extends a7{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}H_(e,r){return this.connection.I_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const r=sse(this.serializer,e),n=function(s){if(!("targetChange"in s))return Ye.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ye.min():a.readTime?Ls(a.readTime):Ye.min()}(e);return this.listener.Y_(r,n)}Z_(e){const r={};r.database=jk(this.serializer),r.addTarget=function(s,a){let l;const c=a.target;if(l=wk(c)?{documents:lse(s,c)}:{query:cse(s,c).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=KF(s,a.resumeToken);const u=Sk(s,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(Ye.min())>0){l.readTime=xv(s,a.snapshotVersion.toTimestamp());const u=Sk(s,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=dse(this.serializer,e);n&&(r.labels=n),this.Q_(r)}X_(e){const r={};r.database=jk(this.serializer),r.removeTarget=e,this.Q_(r)}}class eae extends a7{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,r){return this.connection.I_("Write",e,r)}J_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const r=ose(e.writeResults,e.commitTime),n=Ls(e.commitTime);return this.listener.ra(n,r)}ia(){const e={};e.database=jk(this.serializer),this.Q_(e)}ta(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>ase(this.serializer,n))};this.Q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tae{}class rae extends tae{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new Ee(ie.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,r,n,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.zo(e,kk(r,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ee(ie.UNKNOWN,s.toString())})}Yo(e,r,n,i,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(e,kk(r,n),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ie.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class nae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ma(r),this.ua=!1):Te("OnlineStateTracker",r)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="RemoteStore";class iae{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(a=>{n.enqueueAndForget(async()=>{Bc(this)&&(Te(kc,"Restarting streams for network reachability change."),await async function(c){const u=Qe(c);u.da.add(4),await fg(u),u.Va.set("Unknown"),u.da.delete(4),await Bb(u)}(this))})}),this.Va=new nae(n,i)}}async function Bb(t){if(Bc(t))for(const e of t.Aa)await e(!0)}async function fg(t){for(const e of t.Aa)await e(!1)}function o7(t,e){const r=Qe(t);r.Ea.has(e.targetId)||(r.Ea.set(e.targetId,e),v2(r)?y2(r):Eh(r).N_()&&g2(r,e))}function p2(t,e){const r=Qe(t),n=Eh(r);r.Ea.delete(e),n.N_()&&l7(r,e),r.Ea.size===0&&(n.N_()?n.k_():Bc(r)&&r.Va.set("Unknown"))}function g2(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Eh(t).Z_(e)}function l7(t,e){t.ma.Ke(e),Eh(t).X_(e)}function y2(t){t.ma=new Jie({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Eh(t).start(),t.Va.ca()}function v2(t){return Bc(t)&&!Eh(t).O_()&&t.Ea.size>0}function Bc(t){return Qe(t).da.size===0}function c7(t){t.ma=void 0}async function sae(t){t.Va.set("Online")}async function aae(t){t.Ea.forEach((e,r)=>{g2(t,e)})}async function oae(t,e){c7(t),v2(t)?(t.Va.Pa(e),y2(t)):t.Va.set("Unknown")}async function lae(t,e,r){if(t.Va.set("Online"),e instanceof qF&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ea.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ea.delete(l),i.ma.removeTarget(l))}(t,e)}catch(n){Te(kc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await wv(t,n)}else if(e instanceof vy?t.ma.Xe(e):e instanceof GF?t.ma.ot(e):t.ma.nt(e),!r.isEqual(Ye.min()))try{const n=await i7(t.localStore);r.compareTo(n)>=0&&await function(s,a){const l=s.ma.It(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.Ea.get(u);h&&s.Ea.set(u,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const h=s.Ea.get(c);if(!h)return;s.Ea.set(c,h.withResumeToken(Qr.EMPTY_BYTE_STRING,h.snapshotVersion)),l7(s,c);const d=new Oo(h.target,c,u,h.sequenceNumber);g2(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Te(kc,"Failed to raise snapshot:",n),await wv(t,n)}}async function wv(t,e,r){if(!Nh(e))throw e;t.da.add(1),await fg(t),t.Va.set("Offline"),r||(r=()=>i7(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Te(kc,"Retrying IndexedDB access"),await r(),t.da.delete(1),await Bb(t)})}function u7(t,e){return e().catch(r=>wv(t,r,e))}async function Ub(t){const e=Qe(t),r=fl(e);let n=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:r2;for(;cae(e);)try{const i=await Wse(e.localStore,n);if(i===null){e.Ia.length===0&&r.k_();break}n=i.batchId,uae(e,i)}catch(i){await wv(e,i)}d7(e)&&h7(e)}function cae(t){return Bc(t)&&t.Ia.length<10}function uae(t,e){t.Ia.push(e);const r=fl(t);r.N_()&&r.ea&&r.ta(e.mutations)}function d7(t){return Bc(t)&&!fl(t).O_()&&t.Ia.length>0}function h7(t){fl(t).start()}async function dae(t){fl(t).ia()}async function hae(t){const e=fl(t);for(const r of t.Ia)e.ta(r.mutations)}async function fae(t,e,r){const n=t.Ia.shift(),i=l2.from(n,e,r);await u7(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ub(t)}async function mae(t,e){e&&fl(t).ea&&await async function(n,i){if(function(a){return Qie(a)&&a!==ie.ABORTED}(i.code)){const s=n.Ia.shift();fl(n).L_(),await u7(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ub(n)}}(t,e),d7(t)&&h7(t)}async function $O(t,e){const r=Qe(t);r.asyncQueue.verifyOperationInProgress(),Te(kc,"RemoteStore received new credentials");const n=Bc(r);r.da.add(3),await fg(r),n&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.da.delete(3),await Bb(r)}async function pae(t,e){const r=Qe(t);e?(r.da.delete(2),await Bb(r)):e||(r.da.add(2),await fg(r),r.Va.set("Unknown"))}function Eh(t){return t.fa||(t.fa=function(r,n,i){const s=Qe(r);return s.oa(),new Zse(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{e_:sae.bind(null,t),n_:aae.bind(null,t),i_:oae.bind(null,t),Y_:lae.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),v2(t)?y2(t):t.Va.set("Unknown")):(await t.fa.stop(),c7(t))})),t.fa}function fl(t){return t.ga||(t.ga=function(r,n,i){const s=Qe(r);return s.oa(),new eae(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:dae.bind(null,t),i_:mae.bind(null,t),na:hae.bind(null,t),ra:fae.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Ub(t)):(await t.ga.stop(),t.Ia.length>0&&(Te(kc,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new _a,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,l=new x2(e,r,a,i,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function b2(t,e){if(Ma("AsyncQueue",`${e}: ${t}`),Nh(t))return new Ee(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{static emptySet(e){return new Wu(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Fe.comparator(r.key,n.key):(r,n)=>Fe.comparator(r.key,n.key),this.keyedMap=zf(),this.sortedSet=new br(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Wu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Wu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this.pa=new br(Fe.comparator)}track(e){const r=e.doc.key,n=this.pa.get(r);n?e.type!==0&&n.type===3?this.pa=this.pa.insert(r,e):e.type===3&&n.type!==1?this.pa=this.pa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.pa=this.pa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.pa=this.pa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.pa=this.pa.remove(r):e.type===1&&n.type===2?this.pa=this.pa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.pa=this.pa.insert(r,{type:2,doc:e.doc}):ze(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(r,e)}wa(){const e=[];return this.pa.inorderTraversal((r,n)=>{e.push(n)}),e}}class Pd{constructor(e,r,n,i,s,a,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,i,s){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new Pd(e,r,Wu.emptySet(r),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ob(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gae{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class yae{constructor(){this.queries=FO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Qe(r),s=i.queries;i.queries=FO(),s.forEach((a,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new Ee(ie.ABORTED,"Firestore shutting down"))}}function FO(){return new Vc(t=>IF(t),Ob)}async function w2(t,e){const r=Qe(t);let n=3;const i=e.query;let s=r.queries.get(i);s?!s.Da()&&e.va()&&(n=2):(s=new gae,n=e.va()?0:1);try{switch(n){case 0:s.ba=await r.onListen(i,!0);break;case 1:s.ba=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const l=b2(a,`Initialization of query '${hu(e.query)}' failed`);return void e.onError(l)}r.queries.set(i,s),s.Sa.push(e),e.Fa(r.onlineState),s.ba&&e.Ma(s.ba)&&S2(r)}async function _2(t,e){const r=Qe(t),n=e.query;let i=3;const s=r.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.va()?0:1:!s.Da()&&e.va()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function vae(t,e){const r=Qe(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const l of a.Sa)l.Ma(i)&&(n=!0);a.ba=i}}n&&S2(r)}function xae(t,e,r){const n=Qe(t),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(r);n.queries.delete(e)}function S2(t){t.Ca.forEach(e=>{e.next()})}var Ak,VO;(VO=Ak||(Ak={})).xa="default",VO.Cache="cache";class k2{constructor(e,r,n){this.query=e,this.Oa=r,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Pd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Na?this.La(e)&&(this.Oa.next(e),r=!0):this.ka(e,this.onlineState)&&(this.qa(e),r=!0),this.Ba=e,r}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let r=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),r=!0),r}ka(e,r){if(!e.fromCache||!this.va())return!0;const n=r!=="Offline";return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}La(e){if(e.docChanges.length>0)return!0;const r=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}qa(e){e=Pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Ak.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){this.key=e}}class m7{constructor(e){this.key=e}}class bae{constructor(e,r){this.query=e,this.Ha=r,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.Za=OF(e),this.Xa=new Wu(this.Za)}get eu(){return this.Ha}tu(e,r){const n=r?r.nu:new LO,i=r?r.Xa:this.Xa;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),m=Rb(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;f&&m?f.data.isEqual(m.data)?g!==v&&(n.track({type:3,doc:m}),y=!0):this.ru(f,m)||(n.track({type:2,doc:m}),y=!0,(c&&this.Za(m,c)>0||u&&this.Za(m,u)<0)&&(l=!0)):!f&&m?(n.track({type:0,doc:m}),y=!0):f&&!m&&(n.track({type:1,doc:f}),y=!0,(c||u)&&(l=!0)),y&&(m?(a=a.add(m),s=v?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Xa:a,nu:n,Cs:l,mutatedKeys:s}}ru(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const a=e.nu.wa();a.sort((h,d)=>function(m,g){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Vt:y})}};return v(m)-v(g)}(h.type,d.type)||this.Za(h.doc,d.doc)),this.iu(n),i=i!=null&&i;const l=r&&!i?this.su():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Ja;return this.Ja=c,a.length!==0||u?{snapshot:new Pd(this.query,e.Xa,s,a,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new LO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.Xa.forEach(n=>{this._u(n.key)&&(this.Ya=this.Ya.add(n.key))});const r=[];return e.forEach(n=>{this.Ya.has(n)||r.push(new m7(n))}),this.Ya.forEach(n=>{e.has(n)||r.push(new f7(n))}),r}au(e){this.Ha=e.$s,this.Ya=ot();const r=this.tu(e.documents);return this.applyChanges(r,!0)}uu(){return Pd.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const N2="SyncEngine";class wae{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class _ae{constructor(e){this.key=e,this.cu=!1}}class Sae{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new Vc(l=>IF(l),Ob),this.Pu=new Map,this.Tu=new Set,this.Iu=new br(Fe.comparator),this.Eu=new Map,this.du=new d2,this.Au={},this.Ru=new Map,this.Vu=Td.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function kae(t,e,r=!0){const n=b7(t);let i;const s=n.hu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.uu()):i=await p7(n,e,r,!0),i}async function Nae(t,e){const r=b7(t);await p7(r,e,!0,!1)}async function p7(t,e,r,n){const i=await Hse(t.localStore,$s(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await jae(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&o7(t.remoteStore,i),l}async function jae(t,e,r,n,i){t.fu=(d,f,m)=>async function(v,y,x,b){let w=y.view.tu(x);w.Cs&&(w=await IO(v.localStore,y.query,!1).then(({documents:N})=>y.view.tu(N,w)));const k=b&&b.targetChanges.get(y.targetId),S=b&&b.targetMismatches.get(y.targetId)!=null,P=y.view.applyChanges(w,v.isPrimaryClient,k,S);return UO(v,y.targetId,P.ou),P.snapshot}(t,d,f,m);const s=await IO(t.localStore,e,!0),a=new bae(e,s.$s),l=a.tu(s.documents),c=hg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),u=a.applyChanges(l,t.isPrimaryClient,c);UO(t,r,u.ou);const h=new wae(e,r,a);return t.hu.set(e,h),t.Pu.has(r)?t.Pu.get(r).push(e):t.Pu.set(r,[e]),u.snapshot}async function Eae(t,e,r){const n=Qe(t),i=n.hu.get(e),s=n.Pu.get(i.targetId);if(s.length>1)return n.Pu.set(i.targetId,s.filter(a=>!Ob(a,e))),void n.hu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ek(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&p2(n.remoteStore,i.targetId),Tk(n,i.targetId)}).catch(kh)):(Tk(n,i.targetId),await Ek(n.localStore,i.targetId,!0))}async function Cae(t,e){const r=Qe(t),n=r.hu.get(e),i=r.Pu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),p2(r.remoteStore,n.targetId))}async function Aae(t,e,r){const n=Dae(t);try{const i=await function(a,l){const c=Qe(a),u=Tr.now(),h=l.reduce((m,g)=>m.add(g.key),ot());let d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=Da(),v=ot();return c.Bs.getEntries(m,h).next(y=>{g=y,g.forEach((x,b)=>{b.isValidDocument()||(v=v.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,g)).next(y=>{d=y;const x=[];for(const b of l){const w=Hie(b,d.get(b.key).overlayedDocument);w!=null&&x.push(new kl(b.key,w,kF(w.value.mapValue),Pn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,x,l)}).next(y=>{f=y;const x=y.applyToLocalDocumentSet(d,v);return c.documentOverlayCache.saveOverlays(m,y.batchId,x)})}).then(()=>({batchId:f.batchId,changes:MF(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let u=a.Au[a.currentUser.toKey()];u||(u=new br(rt)),u=u.insert(l,c),a.Au[a.currentUser.toKey()]=u}(n,i.batchId,r),await mg(n,i.changes),await Ub(n.remoteStore)}catch(i){const s=b2(i,"Failed to persist write");r.reject(s)}}async function g7(t,e){const r=Qe(t);try{const n=await Use(r.localStore,e);e.targetChanges.forEach((i,s)=>{const a=r.Eu.get(s);a&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.cu=!0:i.modifiedDocuments.size>0?St(a.cu,14607):i.removedDocuments.size>0&&(St(a.cu,42227),a.cu=!1))}),await mg(r,n,e)}catch(n){await kh(n)}}function BO(t,e,r){const n=Qe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.hu.forEach((s,a)=>{const l=a.view.Fa(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=Qe(a);c.onlineState=l;let u=!1;c.queries.forEach((h,d)=>{for(const f of d.Sa)f.Fa(l)&&(u=!0)}),u&&S2(c)}(n.eventManager,e),i.length&&n.lu.Y_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Tae(t,e,r){const n=Qe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Eu.get(e),s=i&&i.key;if(s){let a=new br(Fe.comparator);a=a.insert(s,un.newNoDocument(s,Ye.min()));const l=ot().add(s),c=new Fb(Ye.min(),new Map,new br(rt),a,l);await g7(n,c),n.Iu=n.Iu.remove(s),n.Eu.delete(e),j2(n)}else await Ek(n.localStore,e,!1).then(()=>Tk(n,e,r)).catch(kh)}async function Pae(t,e){const r=Qe(t),n=e.batch.batchId;try{const i=await Bse(r.localStore,e);v7(r,n,null),y7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await mg(r,i)}catch(i){await kh(i)}}async function Iae(t,e,r){const n=Qe(t);try{const i=await function(a,l){const c=Qe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(d=>(St(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(n.localStore,e);v7(n,e,r),y7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await mg(n,i)}catch(i){await kh(i)}}function y7(t,e){(t.Ru.get(e)||[]).forEach(r=>{r.resolve()}),t.Ru.delete(e)}function v7(t,e,r){const n=Qe(t);let i=n.Au[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Au[n.currentUser.toKey()]=i}}function Tk(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Pu.get(e))t.hu.delete(n),r&&t.lu.gu(n,r);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(n=>{t.du.containsKey(n)||x7(t,n)})}function x7(t,e){t.Tu.delete(e.path.canonicalString());const r=t.Iu.get(e);r!==null&&(p2(t.remoteStore,r),t.Iu=t.Iu.remove(e),t.Eu.delete(r),j2(t))}function UO(t,e,r){for(const n of r)n instanceof f7?(t.du.addReference(n.key,e),Oae(t,n)):n instanceof m7?(Te(N2,"Document no longer in limbo: "+n.key),t.du.removeReference(n.key,e),t.du.containsKey(n.key)||x7(t,n.key)):ze(19791,{pu:n})}function Oae(t,e){const r=e.key,n=r.path.canonicalString();t.Iu.get(r)||t.Tu.has(n)||(Te(N2,"New document in limbo: "+r),t.Tu.add(n),j2(t))}function j2(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const r=new Fe(Wt.fromString(e)),n=t.Vu.next();t.Eu.set(n,new _ae(r)),t.Iu=t.Iu.insert(r,n),o7(t.remoteStore,new Oo($s(Ib(r.path)),n,"TargetPurposeLimboResolution",Ab.le))}}async function mg(t,e,r){const n=Qe(t),i=[],s=[],a=[];n.hu.isEmpty()||(n.hu.forEach((l,c)=>{a.push(n.fu(c,e,r).then(u=>{var h;if((u||r)&&n.isPrimaryClient){const d=u?!u.fromCache:(h=r==null?void 0:r.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){i.push(u);const d=f2.Rs(c.targetId,u);s.push(d)}}))}),await Promise.all(a),n.lu.Y_(i),await async function(c,u){const h=Qe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ae.forEach(u,f=>ae.forEach(f.ds,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>ae.forEach(f.As,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Nh(d))throw d;Te(m2,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.xs.get(f),g=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(g);h.xs=h.xs.insert(f,v)}}}(n.localStore,s))}async function Rae(t,e){const r=Qe(t);if(!r.currentUser.isEqual(e)){Te(N2,"User change. New user:",e.toKey());const n=await n7(r.localStore,e);r.currentUser=e,function(s,a){s.Ru.forEach(l=>{l.forEach(c=>{c.reject(new Ee(ie.CANCELLED,a))})}),s.Ru.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await mg(r,n.ks)}}function Mae(t,e){const r=Qe(t),n=r.Eu.get(e);if(n&&n.cu)return ot().add(n.key);{let i=ot();const s=r.Pu.get(e);if(!s)return i;for(const a of s){const l=r.hu.get(a);i=i.unionWith(l.view.eu)}return i}}function b7(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=g7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Tae.bind(null,e),e.lu.Y_=vae.bind(null,e.eventManager),e.lu.gu=xae.bind(null,e.eventManager),e}function Dae(t){const e=Qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Iae.bind(null,e),e}class _v{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vb(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,r){return null}Cu(e,r){return null}Du(e){return Vse(this.persistence,new $se,e.initialUser,this.serializer)}Su(e){return new r7(h2.fi,this.serializer)}bu(e){return new qse}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_v.provider={build:()=>new _v};class $ae extends _v{constructor(e){super(),this.cacheSizeBytes=e}vu(e,r){St(this.persistence.referenceDelegate instanceof bv,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new _se(n,e.asyncQueue,r)}Su(e){const r=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new r7(n=>bv.fi(n,r),this.serializer)}}class Pk{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>BO(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rae.bind(null,this.syncEngine),await pae(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yae}()}createDatastore(e){const r=Vb(e.databaseInfo.databaseId),n=function(s){return new Jse(s)}(e.databaseInfo);return function(s,a,l,c){return new rae(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,s,a,l){return new iae(n,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>BO(this.syncEngine,r,0),function(){return MO.C()?new MO:new Kse}())}createSyncEngine(e,r){return function(i,s,a,l,c,u,h){const d=new Sae(i,s,a,l,c,u);return h&&(d.mu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const s=Qe(i);Te(kc,"RemoteStore shutting down."),s.da.add(5),await fg(s),s.Ra.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Pk.provider={build:()=>new Pk};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="FirestoreClient";class Lae{constructor(e,r,n,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=fF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Te(ml,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Te(ml,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _a;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=b2(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function n_(t,e){t.asyncQueue.verifyOperationInProgress(),Te(ml,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await n7(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zO(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Fae(t);Te(ml,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>$O(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>$O(e.remoteStore,i)),t._onlineComponents=e}async function Fae(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(ml,"Using user provided OfflineComponentProvider");try{await n_(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;kd("Error using user provided cache. Falling back to memory cache: "+r),await n_(t,new _v)}}else Te(ml,"Using default OfflineComponentProvider"),await n_(t,new $ae(void 0));return t._offlineComponents}async function w7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(ml,"Using user provided OnlineComponentProvider"),await zO(t,t._uninitializedComponentsProvider._online)):(Te(ml,"Using default OnlineComponentProvider"),await zO(t,new Pk))),t._onlineComponents}function Vae(t){return w7(t).then(e=>e.syncEngine)}async function Sv(t){const e=await w7(t),r=e.eventManager;return r.onListen=kae.bind(null,e.syncEngine),r.onUnlisten=Eae.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Nae.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Cae.bind(null,e.syncEngine),r}function Bae(t,e,r={}){const n=new _a;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,u){const h=new E2({next:f=>{h.xu(),a.enqueueAndForget(()=>_2(s,d));const m=f.docs.has(l);!m&&f.fromCache?u.reject(new Ee(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new Ee(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new k2(Ib(l.path),h,{includeMetadataChanges:!0,Qa:!0});return w2(s,d)}(await Sv(t),t.asyncQueue,e,r,n)),n.promise}function Uae(t,e,r={}){const n=new _a;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,u){const h=new E2({next:f=>{h.xu(),a.enqueueAndForget(()=>_2(s,d)),f.fromCache&&c.source==="server"?u.reject(new Ee(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new k2(l,h,{includeMetadataChanges:!0,Qa:!0});return w2(s,d)}(await Sv(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t,e,r){if(!r)throw new Ee(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zae(t,e,r,n){if(e===!0&&n===!0)throw new Ee(ie.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function HO(t){if(!Fe.isDocumentKey(t))throw new Ee(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GO(t){if(Fe.isDocumentKey(t))throw new Ee(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zb(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ze(12329,{type:typeof t})}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=zb(t);throw new Ee(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7="firestore.googleapis.com",qO=!0;class KO{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k7,this.ssl=qO}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:qO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=t7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bse)throw new Ee(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_7((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wb{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Zne;switch(n.type){case"firstParty":return new nie(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ee(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=WO.get(r);n&&(Te("ComponentProvider","Removing Datastore"),WO.delete(r),n.terminate())}(this),Promise.resolve()}}function Wae(t,e,r,n={}){var i;t=In(t,Wb);const s=bl(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${r}`;s&&(FE(`https://${c}`),VE("Firestore",!0)),a.host!==k7&&a.host!==c&&kd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:c,ssl:s,emulatorOptions:n});if(!Ws(u,l)&&(t._setSettings(u),n.mockUserToken)){let h,d;if(typeof n.mockUserToken=="string")h=n.mockUserToken,d=ln.MOCK_USER;else{h=g8(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new Ee(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ln(f)}t._authCredentials=new eie(new dF(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ka(this.firestore,e,this._query)}}class pn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class Jo extends Ka{constructor(e,r,n){super(e,r,Ib(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Fe(e))}withConverter(e){return new Jo(this.firestore,e,this._path)}}function gt(t,e,...r){if(t=Ot(t),S7("collection","path",e),t instanceof Wb){const n=Wt.fromString(e,...r);return GO(n),new Jo(t,null,n)}{if(!(t instanceof pn||t instanceof Jo))throw new Ee(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Wt.fromString(e,...r));return GO(n),new Jo(t.firestore,null,n)}}function Re(t,e,...r){if(t=Ot(t),arguments.length===1&&(e=fF.newId()),S7("doc","path",e),t instanceof Wb){const n=Wt.fromString(e,...r);return HO(n),new pn(t,null,new Fe(n))}{if(!(t instanceof pn||t instanceof Jo))throw new Ee(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Wt.fromString(e,...r));return HO(n),new pn(t.firestore,t instanceof Jo?t.converter:null,new Fe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="AsyncQueue";class QO{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new s7(this,"async_queue_retry"),this.rc=()=>{const n=r_();n&&Te(YO,"Visibility state changed to "+n.visibilityState),this.x_.b_()},this.sc=e;const r=r_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const r=r_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const r=new _a;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Nh(e))throw e;Te(YO,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const r=this.sc.then(()=>(this.ec=!0,e().catch(n=>{throw this.Xu=n,this.ec=!1,Ma("INTERNAL UNHANDLED ERROR: ",XO(n)),n}).then(n=>(this.ec=!1,n))));return this.sc=r,r}enqueueAfterDelay(e,r,n){this.oc(),this.nc.indexOf(e)>-1&&(r=0);const i=x2.createAndSchedule(this,e,r,n,s=>this.uc(s));return this.Zu.push(i),i}oc(){this.Xu&&ze(47125,{cc:XO(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const r of this.Zu)if(r.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Zu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const r=this.Zu.indexOf(e);this.Zu.splice(r,1)}}function XO(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Gs extends Wb{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new QO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new QO(e),this._firestoreClient=void 0,await e}}}function Hae(t,e){const r=typeof t=="object"?t:WE(),n=typeof t=="string"?t:pv,i=Nb(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=f8("firestore");s&&Wae(i,...s)}return i}function pg(t){if(t._terminated)throw new Ee(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Gae(t),t._firestoreClient}function Gae(t){var e,r,n;const i=t._freezeSettings(),s=function(l,c,u,h){return new vie(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_7(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Lae(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Id(Qr.fromBase64String(e))}catch(r){throw new Ee(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Id(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ee(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ee(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ee(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qae=/^__.*__$/;class Kae{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new kl(e,this.data,this.fieldMask,r,this.fieldTransforms):new dg(e,this.data,r,this.fieldTransforms)}}class N7{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new kl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function j7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ic:t})}}class Hb{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Hb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.dc({path:n,Rc:!1});return i.Vc(e),i}mc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.dc({path:n,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return kv(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(j7(this.Ic)&&qae.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Yae{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Vb(e)}bc(e,r,n,i=!1){return new Hb({Ic:e,methodName:r,wc:n,path:Gr.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yg(t){const e=t._freezeSettings(),r=Vb(t._databaseId);return new Yae(t._databaseId,!!e.ignoreUndefinedProperties,r)}function T2(t,e,r,n,i,s={}){const a=t.bc(s.merge||s.mergeFields?2:0,e,r,i);M2("Data must be an object, but it was:",a,n);const l=T7(n,a);let c,u;if(s.merge)c=new di(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Ik(e,d,r);if(!a.contains(f))throw new Ee(ie.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);I7(h,f)||h.push(f)}c=new di(h),u=a.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=a.fieldTransforms;return new Kae(new Vn(l),c,u)}class Gb extends Uc{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gb}}function E7(t,e,r){return new Hb({Ic:3,wc:e.settings.wc,methodName:t._methodName,Rc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class P2 extends Uc{_toFieldTransform(e){return new Db(e.path,new sp)}isEqual(e){return e instanceof P2}}class I2 extends Uc{constructor(e,r){super(e),this.Sc=r}_toFieldTransform(e){const r=E7(this,e,!0),n=this.Sc.map(s=>zc(s,r)),i=new Cd(n);return new Db(e.path,i)}isEqual(e){return e instanceof I2&&Ws(this.Sc,e.Sc)}}class O2 extends Uc{constructor(e,r){super(e),this.Sc=r}_toFieldTransform(e){const r=E7(this,e,!0),n=this.Sc.map(s=>zc(s,r)),i=new Ad(n);return new Db(e.path,i)}isEqual(e){return e instanceof O2&&Ws(this.Sc,e.Sc)}}class R2 extends Uc{constructor(e,r){super(e),this.Dc=r}_toFieldTransform(e){const r=new ap(e.serializer,LF(e.serializer,this.Dc));return new Db(e.path,r)}isEqual(e){return e instanceof R2&&this.Dc===e.Dc}}function C7(t,e,r,n){const i=t.bc(1,e,r);M2("Data must be an object, but it was:",i,n);const s=[],a=Vn.empty();Sl(n,(c,u)=>{const h=D2(e,c,r);u=Ot(u);const d=i.mc(h);if(u instanceof Gb)s.push(h);else{const f=zc(u,d);f!=null&&(s.push(h),a.set(h,f))}});const l=new di(s);return new N7(a,l,i.fieldTransforms)}function A7(t,e,r,n,i,s){const a=t.bc(1,e,r),l=[Ik(e,n,r)],c=[i];if(s.length%2!=0)throw new Ee(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)l.push(Ik(e,s[f])),c.push(s[f+1]);const u=[],h=Vn.empty();for(let f=l.length-1;f>=0;--f)if(!I7(u,l[f])){const m=l[f];let g=c[f];g=Ot(g);const v=a.mc(m);if(g instanceof Gb)u.push(m);else{const y=zc(g,v);y!=null&&(u.push(m),h.set(m,y))}}const d=new di(u);return new N7(h,d,a.fieldTransforms)}function Qae(t,e,r,n=!1){return zc(r,t.bc(n?4:3,e))}function zc(t,e){if(P7(t=Ot(t)))return M2("Unsupported field value:",e,t),T7(t,e);if(t instanceof Uc)return function(n,i){if(!j7(i.Ic))throw i.gc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const l of n){let c=zc(l,i.fc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=Ot(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return LF(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Tr.fromDate(n);return{timestampValue:xv(i.serializer,s)}}if(n instanceof Tr){const s=new Tr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xv(i.serializer,s)}}if(n instanceof C2)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Id)return{bytesValue:KF(i.serializer,n._byteString)};if(n instanceof pn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:u2(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof A2)return function(a,l){return{mapValue:{fields:{[wF]:{stringValue:SF},[gv]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.gc("VectorValues must only contain numeric values.");return o2(l.serializer,u)})}}}}}}(n,i);throw i.gc(`Unsupported field value: ${zb(n)}`)}(t,e)}function T7(t,e){const r={};return pF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sl(t,(n,i)=>{const s=zc(i,e.Ac(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function P7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tr||t instanceof C2||t instanceof Id||t instanceof pn||t instanceof Uc||t instanceof A2)}function M2(t,e,r){if(!P7(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=zb(r);throw n==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+n)}}function Ik(t,e,r){if((e=Ot(e))instanceof gg)return e._internalPath;if(typeof e=="string")return D2(t,e);throw kv("Field path arguments must be of type string or ",t,!1,void 0,r)}const Xae=new RegExp("[~\\*/\\[\\]]");function D2(t,e,r){if(e.search(Xae)>=0)throw kv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new gg(...e.split("."))._internalPath}catch{throw kv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function kv(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${n}`),a&&(c+=` in document ${i}`),c+=")"),new Ee(ie.INVALID_ARGUMENT,l+t+c)}function I7(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jae(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(qb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Jae extends O7{data(){return super.data()}}function qb(t,e){return typeof e=="string"?D2(t,e):e instanceof gg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $2{}class L2 extends $2{}function Nc(t,e,...r){let n=[];e instanceof $2&&n.push(e),n=n.concat(r),function(s){const a=s.filter(c=>c instanceof F2).length,l=s.filter(c=>c instanceof Kb).length;if(a>1||a>0&&l>0)throw new Ee(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Kb extends L2{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Kb(e,r,n)}_apply(e){const r=this._parse(e);return M7(e._query,r),new Ka(e.firestore,e.converter,_k(e._query,r))}_parse(e){const r=yg(e.firestore);return function(s,a,l,c,u,h,d){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ee(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){eR(d,h);const g=[];for(const v of d)g.push(ZO(c,s,v));f={arrayValue:{values:g}}}else f=ZO(c,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||eR(d,h),f=Qae(l,a,d,h==="in"||h==="not-in");return gr.create(u,h,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Zae(t,e,r){const n=e,i=qb("where",t);return Kb._create(i,n,r)}class F2 extends $2{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new F2(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:gs.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)M7(a,c),a=_k(a,c)}(e._query,r),new Ka(e.firestore,e.converter,_k(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class V2 extends L2{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new V2(e,r)}_apply(e){const r=function(i,s,a){if(i.startAt!==null)throw new Ee(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ee(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ip(s,a)}(e._query,this._field,this._direction);return new Ka(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new jh(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function Od(t,e="asc"){const r=e,n=qb("orderBy",t);return V2._create(n,r)}class B2 extends L2{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new B2(e,r,n)}_apply(e){return new Ka(e.firestore,e.converter,vv(e._query,this._limit,this._limitType))}}function eoe(t){return B2._create("limit",t,"F")}function ZO(t,e,r){if(typeof(r=Ot(r))=="string"){if(r==="")throw new Ee(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PF(e)&&r.indexOf("/")!==-1)throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Wt.fromString(r));if(!Fe.isDocumentKey(n))throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return fO(t,new Fe(n))}if(r instanceof pn)return fO(t,r._key);throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zb(r)}.`)}function eR(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M7(t,e){const r=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ee(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class toe{convertValue(e,r="none"){switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Sl(e,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,i;const s=(i=(n=(r=e.fields)===null||r===void 0?void 0:r[gv].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(a=>ur(a.doubleValue));return new A2(s)}convertGeoPoint(e){return new C2(ur(e.latitude),ur(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Pb(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(tp(e));default:return null}}convertTimestamp(e){const r=ul(e);return new Tr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Wt.fromString(e);St(e7(n),9688,{name:e});const i=new rp(n.get(1),n.get(3)),s=new Fe(n.popFirst(5));return i.isEqual(r)||Ma(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D7 extends O7{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new xy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(qb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class xy extends D7{data(e={}){return super.data(e)}}class $7{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Hf(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new xy(this._firestore,this._userDataWriter,n.key,n,new Hf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ee(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new xy(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Hf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new xy(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Hf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:roe(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function roe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){t=In(t,pn);const e=In(t.firestore,Gs);return Bae(pg(e),t._key).then(r=>F7(e,t,r))}class z2 extends toe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Id(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,r)}}function Sr(t){t=In(t,Ka);const e=In(t.firestore,Gs),r=pg(e),n=new z2(e);return R7(t._query),Uae(r,t._query).then(i=>new $7(e,n,t,i))}function Zt(t,e,r){t=In(t,pn);const n=In(t.firestore,Gs),i=U2(t.converter,e,r);return vg(n,[T2(yg(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Pn.none())])}function cr(t,e,r,...n){t=In(t,pn);const i=In(t.firestore,Gs),s=yg(i);let a;return a=typeof(e=Ot(e))=="string"||e instanceof gg?A7(s,"updateDoc",t._key,e,r,n):C7(s,"updateDoc",t._key,e),vg(i,[a.toMutation(t._key,Pn.exists(!0))])}function L7(t){return vg(In(t.firestore,Gs),[new Lb(t._key,Pn.none())])}function Rd(t,e){const r=In(t.firestore,Gs),n=Re(t),i=U2(t.converter,e);return vg(r,[T2(yg(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Pn.exists(!1))]).then(()=>n)}function On(t,...e){var r,n,i;t=Ot(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||JO(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(JO(e[a])){const d=e[a];e[a]=(r=d.next)===null||r===void 0?void 0:r.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,h;if(t instanceof pn)u=In(t.firestore,Gs),h=Ib(t._key.path),c={next:d=>{e[a]&&e[a](F7(u,t,d))},error:e[a+1],complete:e[a+2]};else{const d=In(t,Ka);u=In(d.firestore,Gs),h=d._query;const f=new z2(u);c={next:m=>{e[a]&&e[a](new $7(u,f,d,m))},error:e[a+1],complete:e[a+2]},R7(t._query)}return function(f,m,g,v){const y=new E2(v),x=new k2(m,y,g);return f.asyncQueue.enqueueAndForget(async()=>w2(await Sv(f),x)),()=>{y.xu(),f.asyncQueue.enqueueAndForget(async()=>_2(await Sv(f),x))}}(pg(u),h,l,c)}function vg(t,e){return function(n,i){const s=new _a;return n.asyncQueue.enqueueAndForget(async()=>Aae(await Vae(n),i,s)),s.promise}(pg(t),e)}function F7(t,e,r){const n=r.docs.get(e._key),i=new z2(t);return new D7(t,i,e._key,n,new Hf(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class noe{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=yg(e)}set(e,r,n){this._verifyNotCommitted();const i=i_(e,this._firestore),s=U2(i.converter,r,n),a=T2(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Pn.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const s=i_(e,this._firestore);let a;return a=typeof(r=Ot(r))=="string"||r instanceof gg?A7(this._dataReader,"WriteBatch.update",s._key,r,n,i):C7(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(a.toMutation(s._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=i_(e,this._firestore);return this._mutations=this._mutations.concat(new Lb(r._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function i_(t,e){if((t=Ot(t)).firestore!==e)throw new Ee(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Nv(){return new P2("serverTimestamp")}function dm(...t){return new I2("arrayUnion",t)}function jv(...t){return new O2("arrayRemove",t)}function tR(t){return new R2("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){return pg(t=In(t,Gs)),new noe(t,e=>vg(t,e))}(function(e,r=!0){(function(i){Sh=i})(Fc),bc(new ll("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),l=new Gs(new tie(n.getProvider("auth-internal")),new iie(a,n.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ee(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rp(u.options.projectId,h)}(a,i),a);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ms(tO,rO,e),Ms(tO,rO,"esm2017")})();var ioe="firebase",soe="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(ioe,soe,"app");var rR={};const nR="@firebase/database",iR="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V7="";function aoe(t){V7=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ooe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Hr(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:Xm(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class loe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return Ga(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ooe(e)}}catch{}return new loe},Xl=B7("localStorage"),coe=B7("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new kb("@firebase/database"),uoe=function(){let t=1;return function(){return t++}}(),U7=function(t){const e=Nee(t),r=new wee;r.update(e);const n=r.digest();return LE.encodeByteArray(n)},xg=function(...t){let e="";for(let r=0;r<t.length;r++){const n=t[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=xg.apply(null,n):typeof n=="object"?e+=Hr(n):e+=n,e+=" "}return e};let hm=null,sR=!0;const doe=function(t,e){Se(!e,"Can't turn on custom loggers persistently."),Hu.logLevel=nt.VERBOSE,hm=Hu.log.bind(Hu)},dn=function(...t){if(sR===!0&&(sR=!1,hm===null&&coe.get("logging_enabled")===!0&&doe()),hm){const e=xg.apply(null,t);hm(e)}},bg=function(t){return function(...e){dn(t,...e)}},Ok=function(...t){const e="FIREBASE INTERNAL ERROR: "+xg(...t);Hu.error(e)},$a=function(...t){const e=`FIREBASE FATAL ERROR: ${xg(...t)}`;throw Hu.error(e),new Error(e)},Yn=function(...t){const e="FIREBASE WARNING: "+xg(...t);Hu.warn(e)},hoe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Yn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},z7=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},foe=function(t){if(document.readyState==="complete")t();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Md="[MIN_NAME]",jc="[MAX_NAME]",Ch=function(t,e){if(t===e)return 0;if(t===Md||e===jc)return-1;if(e===Md||t===jc)return 1;{const r=aR(t),n=aR(e);return r!==null?n!==null?r-n===0?t.length-e.length:r-n:-1:n!==null?1:t<e?-1:1}},moe=function(t,e){return t===e?0:t<e?-1:1},xf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Hr(e))},W2=function(t){if(typeof t!="object"||t===null)return Hr(t);const e=[];for(const n in t)e.push(n);e.sort();let r="{";for(let n=0;n<e.length;n++)n!==0&&(r+=","),r+=Hr(e[n]),r+=":",r+=W2(t[e[n]]);return r+="}",r},W7=function(t,e){const r=t.length;if(r<=e)return[t];const n=[];for(let i=0;i<r;i+=e)i+e>r?n.push(t.substring(i,r)):n.push(t.substring(i,i+e));return n};function Di(t,e){for(const r in t)t.hasOwnProperty(r)&&e(r,t[r])}const H7=function(t){Se(!z7(t),"Invalid JSON number");const e=11,r=52,n=(1<<e-1)-1;let i,s,a,l,c;t===0?(s=0,a=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),n),s=l+n,a=Math.round(t*Math.pow(2,r-l)-Math.pow(2,r))):(s=0,a=Math.round(t/Math.pow(2,1-n-r))));const u=[];for(c=r;c;c-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(h.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},poe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},goe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},yoe=new RegExp("^-?(0*)\\d{1,10}$"),voe=-2147483648,xoe=2147483647,aR=function(t){if(yoe.test(t)){const e=Number(t);if(e>=voe&&e<=xoe)return e}return null},Ah=function(t){try{t()}catch(e){setTimeout(()=>{const r=e.stack||"";throw Yn("Exception was thrown by user callback.",r),e},Math.floor(0))}},boe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fm=function(t,e){const r=setTimeout(t,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class woe{constructor(e,r){this.appCheckProvider=r,this.appName=e.name,Fn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Yn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _oe{constructor(e,r,n){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,n):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yn(e)}}class by{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}by.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="5",G7="v",q7="s",K7="r",Y7="f",Q7=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X7="ls",J7="p",Rk="ac",Z7="websocket",e9="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,r,n,i,s=!1,a="",l=!1,c=!1,u=null){this.secure=r,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Xl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function Soe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function r9(t,e,r){Se(typeof e=="string","typeof type must == string"),Se(typeof r=="object","typeof params must == object");let n;if(e===Z7)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===e9)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Soe(t)&&(r.ns=t.namespace);const i=[];return Di(r,(s,a)=>{i.push(s+"="+a)}),n+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class koe{constructor(){this.counters_={}}incrementCounter(e,r=1){Ga(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return tee(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_={},a_={};function G2(t){const e=t.toString();return s_[e]||(s_[e]=new koe),s_[e]}function Noe(t,e){const r=t.toString();return a_[r]||(a_[r]=e()),a_[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class joe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<n.length;++i)n[i]&&Ah(()=>{this.onMessage_(n[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="start",Eoe="close",Coe="pLPCommand",Aoe="pRTLPCB",n9="id",i9="pw",s9="ser",Toe="cb",Poe="seg",Ioe="ts",Ooe="d",Roe="dframe",a9=1870,o9=30,Moe=a9-o9,Doe=25e3,$oe=3e4;class Cu{constructor(e,r,n,i,s,a,l){this.connId=e,this.repoInfo=r,this.applicationId=n,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bg(e),this.stats_=G2(r),this.urlFn=c=>(this.appCheckToken&&(c[Rk]=this.appCheckToken),r9(r,e9,c))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new joe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($oe)),foe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new q2((...s)=>{const[a,l,c,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===oR)this.id=l,this.password=c;else if(a===Eoe)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const n={};n[oR]="t",n[s9]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Toe]=this.scriptTagHolder.uniqueCallbackIdentifier),n[G7]=H2,this.transportSessionId&&(n[q7]=this.transportSessionId),this.lastSessionId&&(n[X7]=this.lastSessionId),this.applicationId&&(n[J7]=this.applicationId),this.appCheckToken&&(n[Rk]=this.appCheckToken),typeof location<"u"&&location.hostname&&Q7.test(location.hostname)&&(n[K7]=Y7);const i=this.urlFn(n);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Cu.forceAllow_=!0}static forceDisallow(){Cu.forceDisallow_=!0}static isAvailable(){return Cu.forceAllow_?!0:!Cu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!poe()&&!goe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=Hr(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=u8(r),i=W7(n,Moe);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[Roe]="t",n[n9]=e,n[i9]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=Hr(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class q2{constructor(e,r,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=uoe(),window[Coe+this.uniqueCallbackIdentifier]=e,window[Aoe+this.uniqueCallbackIdentifier]=r,this.myIFrame=q2.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){dn("frame writing exception"),l.stack&&dn(l.stack),dn(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[n9]=this.myID,e[i9]=this.myPW,e[s9]=this.currentSerial;let r=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+o9+n.length<=a9;){const a=this.pendingSegs.shift();n=n+"&"+Poe+i+"="+a.seg+"&"+Ioe+i+"="+a.ts+"&"+Ooe+i+"="+a.d,i++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,n){this.pendingSegs.push({seg:e,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},i=setTimeout(n,Math.floor(Doe)),s=()=>{clearTimeout(i),n()};this.addTag(e,s)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const i=n.readyState;(!i||i==="loaded"||i==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Loe=16384,Foe=45e3;let Ev=null;typeof MozWebSocket<"u"?Ev=MozWebSocket:typeof WebSocket<"u"&&(Ev=WebSocket);class ts{constructor(e,r,n,i,s,a,l){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bg(this.connId),this.stats_=G2(r),this.connURL=ts.connectionURL_(r,a,l,i,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,n,i,s){const a={};return a[G7]=H2,typeof location<"u"&&location.hostname&&Q7.test(location.hostname)&&(a[K7]=Y7),r&&(a[q7]=r),n&&(a[X7]=n),i&&(a[Rk]=i),s&&(a[J7]=s),r9(e,Z7,a)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xl.set("previous_websocket_failure",!0);try{let n;v8(),this.mySock=new Ev(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ts.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&Ev!==null&&!ts.forceDisallow_}static previouslyFailed(){return Xl.isInMemoryStorage||Xl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Xl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=Xm(r);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Se(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const r=Hr(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=W7(r,Loe);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Foe))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ts.responsesRequiredToBeHealthy=2;ts.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{static get ALL_TRANSPORTS(){return[Cu,ts]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const r=ts&&ts.isAvailable();let n=r&&!ts.previouslyFailed();if(e.webSocketOnly&&(r||Yn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ts];else{const i=this.transports_=[];for(const s of op.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);op.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}op.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Voe=6e4,Boe=5e3,Uoe=10*1024,zoe=100*1024,o_="t",lR="d",Woe="s",cR="r",Hoe="e",uR="o",dR="a",hR="n",fR="p",Goe="h";class qoe{constructor(e,r,n,i,s,a,l,c,u,h){this.id=e,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bg("c:"+this.id+":"),this.transportManager_=new op(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=fm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zoe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Uoe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(o_ in e){const r=e[o_];r===dR?this.upgradeIfSecondaryHealthy_():r===cR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===uR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=xf("t",e),n=xf("d",e);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:dR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=xf("t",e),n=xf("d",e);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=xf(o_,e);if(lR in e){const n=e[lR];if(r===Goe){const i=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(r===hR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===Woe?this.onConnectionShutdown_(n):r===cR?this.onReset_(n):r===Hoe?Ok("Server Error: "+n):r===uR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ok("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),H2!==n&&Yn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),fm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Voe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Boe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{put(e,r,n,i){}merge(e,r,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,n){}onDisconnectMerge(e,r,n){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c9=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Se(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,r)}}on(e,r,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:n});const i=this.getInitialEvent(e);i&&r.apply(n,i)}off(e,r,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===r&&(!n||n===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Se(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends c9{static getInstance(){return new Cv}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!BE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Se(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=32,pR=768;let qt=class{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let n=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}};function Tt(){return new qt("")}function at(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pl(t){return t.pieces_.length-t.pieceNum_}function zt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new qt(t.pieces_,e)}function u9(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Koe(t){let e="";for(let r=t.pieceNum_;r<t.pieces_.length;r++)t.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[r])));return e||"/"}function d9(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function h9(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let r=t.pieceNum_;r<t.pieces_.length-1;r++)e.push(t.pieces_[r]);return new qt(e,0)}function Nr(t,e){const r=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);if(e instanceof qt)for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);else{const n=e.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&r.push(n[i])}return new qt(r,0)}function lt(t){return t.pieceNum_>=t.pieces_.length}function Ai(t,e){const r=at(t),n=at(e);if(r===null)return e;if(r===n)return Ai(zt(t),zt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function f9(t,e){if(pl(t)!==pl(e))return!1;for(let r=t.pieceNum_,n=e.pieceNum_;r<=t.pieces_.length;r++,n++)if(t.pieces_[r]!==e.pieces_[n])return!1;return!0}function is(t,e){let r=t.pieceNum_,n=e.pieceNum_;if(pl(t)>pl(e))return!1;for(;r<t.pieces_.length;){if(t.pieces_[r]!==e.pieces_[n])return!1;++r,++n}return!0}class Yoe{constructor(e,r){this.errorPrefix_=r,this.parts_=d9(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Sb(this.parts_[n]);m9(this)}}function Qoe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Sb(e),m9(t)}function Xoe(t){const e=t.parts_.pop();t.byteLength_-=Sb(e),t.parts_.length>0&&(t.byteLength_-=1)}function m9(t){if(t.byteLength_>pR)throw new Error(t.errorPrefix_+"has a key path longer than "+pR+" bytes ("+t.byteLength_+").");if(t.parts_.length>mR)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mR+") or object contains a cycle "+Vl(t))}function Vl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2 extends c9{static getInstance(){return new K2}constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return Se(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=1e3,Joe=60*5*1e3,gR=30*1e3,Zoe=1.3,ele=3e4,tle="server_kill",yR=3;class Sa extends l9{constructor(e,r,n,i,s,a,l,c){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=Sa.nextPersistentConnectionId_++,this.log_=bg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bf,this.maxReconnectDelay_=Joe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!v8())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");K2.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Cv.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,n){const i=++this.requestNumber_,s={r:i,a:e,b:r};this.log_(Hr(s)),Se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const r=new _b,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(e,r,n,i){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Se(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:r,query:e,tag:n};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(e){const r=e.query,n=r._path.toString(),i=r._queryIdentifier;this.log_("Listen on "+n+" for "+i);const s={p:n},a="q";e.tag&&(s.q=r._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,l=>{const c=l.d,u=l.s;Sa.warnOnListenWarnings_(c,r),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(n,i),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Ga(e,"w")){const n=_d(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const i='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Yn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||bee(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=xee(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,i=>{const s=i.s,a=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,n=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(e,r){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,r)}sendUnlisten_(e,r,n,i){this.log_("Unlisten on "+e+" for "+r);const s={p:e},a="n";i&&(s.q=n,s.t=i),this.sendRequest(a,s)}onDisconnectPut(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:n})}onDisconnectMerge(e,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:n})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,n,i){const s={p:r,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(e,r,n,i){this.putInternal("p",e,r,n,i)}merge(e,r,n,i){this.putInternal("m",e,r,n,i)}putInternal(e,r,n,i,s){this.initConnection_();const a={p:r,d:n};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,n,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const s=n.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Hr(e));const r=e.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):Ok("Unrecognized action received from server: "+Hr(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ele&&(this.reconnectDelay_=bf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Zoe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Sa.nextConnectionId_++,s=this.lastSessionId;let a=!1,l=null;const c=function(){l?l.close():(a=!0,n())},u=function(d){Se(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new qoe(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,n,m=>{Yn(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(tle)},s))}catch(d){this.log_("Failed to get token: "+d),a||(this.repoInfo_.nodeAdmin&&Yn(d),c())}}}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],sk(this.interruptReasons_)&&(this.reconnectDelay_=bf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let n;r?n=r.map(s=>W2(s)).join("$"):n="default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,r){const n=new qt(e).toString();let i;if(this.listens.has(n)){const s=this.listens.get(n);i=s.get(r),s.delete(r),s.size===0&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,r){dn("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yR&&(this.reconnectDelay_=gR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){dn("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+V7.replace(/\./g,"-")]=1,BE()?e["framework.cordova"]=1:y8()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Cv.getInstance().currentlyOnline();return sk(this.interruptReasons_)&&e}}Sa.nextPersistentConnectionId_=0;Sa.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new ut(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yb=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const n=new ut(Md,e),i=new ut(Md,r);return this.compare(n,i)!==0}minPost(){return ut.MIN}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j0;class p9 extends Yb{static get __EMPTY_NODE(){return j0}static set __EMPTY_NODE(e){j0=e}compare(e,r){return Ch(e.name,r.name)}isDefinedOn(e){throw bh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return ut.MIN}maxPost(){return new ut(jc,j0)}makePost(e,r){return Se(typeof e=="string","KeyIndex indexValue must always be a string."),new ut(e,j0)}toString(){return".key"}}const Gu=new p9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,r,n,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=r?n(e.key,r):1,i&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class $r{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n??$r.RED,this.left=i??Un.EMPTY_NODE,this.right=s??Un.EMPTY_NODE}copy(e,r,n,i,s){return new $r(e??this.key,r??this.value,n??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i=i.copy(null,r,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Un.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let n,i;if(n=this,r(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(e,n.key)===0){if(n.right.isEmpty())return Un.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}$r.RED=!0;$r.BLACK=!1;class rle{copy(e,r,n,i,s){return this}insert(e,r,n){return new $r(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Un{constructor(e,r=Un.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new Un(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,$r.BLACK,null,null))}remove(e){return new Un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$r.BLACK,null,null))}get(e){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(e,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(e){let r,n=this.root_,i=null;for(;!n.isEmpty();)if(r=this.comparator_(e,n.key),r===0){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(i=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new E0(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new E0(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new E0(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new E0(this.root_,null,this.comparator_,!0,e)}}Un.EMPTY_NODE=new rle;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nle(t,e){return Ch(t.name,e.name)}function Y2(t,e){return Ch(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mk;function ile(t){Mk=t}const g9=function(t){return typeof t=="number"?"number:"+H7(t):"string:"+t},y9=function(t){if(t.isLeafNode()){const e=t.val();Se(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ga(e,".sv"),"Priority must be a string or number.")}else Se(t===Mk||t.isEmpty(),"priority of unexpected type.");Se(t===Mk||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vR;class Or{static set __childrenNodeConstructor(e){vR=e}static get __childrenNodeConstructor(){return vR}constructor(e,r=Or.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,Se(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),y9(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Or(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Or.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return lt(e)?this:at(e)===".priority"?this.priorityNode_:Or.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:Or.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const n=at(e);return n===null?r:r.isEmpty()&&n!==".priority"?this:(Se(n!==".priority"||pl(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Or.__childrenNodeConstructor.EMPTY_NODE.updateChild(zt(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+g9(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=H7(this.value_):e+=this.value_,this.lazyHash_=U7(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Or.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Or.__childrenNodeConstructor?-1:(Se(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,n=typeof this.value_,i=Or.VALUE_TYPE_ORDER.indexOf(r),s=Or.VALUE_TYPE_ORDER.indexOf(n);return Se(i>=0,"Unknown leaf type: "+r),Se(s>=0,"Unknown leaf type: "+n),i===s?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}Or.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v9,x9;function sle(t){v9=t}function ale(t){x9=t}class ole extends Yb{compare(e,r){const n=e.node.getPriority(),i=r.node.getPriority(),s=n.compareTo(i);return s===0?Ch(e.name,r.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return ut.MIN}maxPost(){return new ut(jc,new Or("[PRIORITY-POST]",x9))}makePost(e,r){const n=v9(e);return new ut(r,new Or("[PRIORITY-POST]",n))}toString(){return".priority"}}const mn=new ole;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lle=Math.log(2);class cle{constructor(e){const r=s=>parseInt(Math.log(s)/lle,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const i=n(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Av=function(t,e,r,n){t.sort(e);const i=function(c,u){const h=u-c;let d,f;if(h===0)return null;if(h===1)return d=t[c],f=r?r(d):d,new $r(f,d.node,$r.BLACK,null,null);{const m=parseInt(h/2,10)+c,g=i(c,m),v=i(m+1,u);return d=t[m],f=r?r(d):d,new $r(f,d.node,$r.BLACK,g,v)}},s=function(c){let u=null,h=null,d=t.length;const f=function(g,v){const y=d-g,x=d;d-=g;const b=i(y+1,x),w=t[y],k=r?r(w):w;m(new $r(k,w.node,v,null,b))},m=function(g){u?(u.left=g,u=g):(h=g,u=g)};for(let g=0;g<c.count;++g){const v=c.nextBitIsOne(),y=Math.pow(2,c.count-(g+1));v?f(y,$r.BLACK):(f(y,$r.BLACK),f(y,$r.RED))}return h},a=new cle(t.length),l=s(a);return new Un(n||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l_;const ru={};class ga{static get Default(){return Se(ru&&mn,"ChildrenNode.ts has not been loaded"),l_=l_||new ga({".priority":ru},{".priority":mn}),l_}constructor(e,r){this.indexes_=e,this.indexSet_=r}get(e){const r=_d(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof Un?r:null}hasIndex(e){return Ga(this.indexSet_,e.toString())}addIndex(e,r){Se(e!==Gu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const s=r.getIterator(ut.Wrap);let a=s.getNext();for(;a;)i=i||e.isDefinedOn(a.node),n.push(a),a=s.getNext();let l;i?l=Av(n,e.getCompare()):l=ru;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const h=Object.assign({},this.indexes_);return h[c]=l,new ga(h,u)}addToIndexes(e,r){const n=av(this.indexes_,(i,s)=>{const a=_d(this.indexSet_,s);if(Se(a,"Missing index implementation for "+s),i===ru)if(a.isDefinedOn(e.node)){const l=[],c=r.getIterator(ut.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),Av(l,a.getCompare())}else return ru;else{const l=r.get(e.name);let c=i;return l&&(c=c.remove(new ut(e.name,l))),c.insert(e,e.node)}});return new ga(n,this.indexSet_)}removeFromIndexes(e,r){const n=av(this.indexes_,i=>{if(i===ru)return i;{const s=r.get(e.name);return s?i.remove(new ut(e.name,s)):i}});return new ga(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf;class _t{static get EMPTY_NODE(){return wf||(wf=new _t(new Un(Y2),null,ga.Default))}constructor(e,r,n){this.children_=e,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&y9(this.priorityNode_),this.children_.isEmpty()&&Se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wf}updatePriority(e){return this.children_.isEmpty()?this:new _t(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?wf:r}}getChild(e){const r=at(e);return r===null?this:this.getImmediateChild(r).getChild(zt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(Se(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const n=new ut(e,r);let i,s;r.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,r),s=this.indexMap_.addToIndexes(n,this.children_));const a=i.isEmpty()?wf:this.priorityNode_;return new _t(i,a,s)}}updateChild(e,r){const n=at(e);if(n===null)return r;{Se(at(e)!==".priority"||pl(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(zt(e),r);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let n=0,i=0,s=!0;if(this.forEachChild(mn,(a,l)=>{r[a]=l.val(e),n++,s&&_t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):s=!1}),!e&&s&&i<2*n){const a=[];for(const l in r)a[l]=r[l];return a}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+g9(this.getPriority().val())+":"),this.forEachChild(mn,(r,n)=>{const i=n.hash();i!==""&&(e+=":"+r+":"+i)}),this.lazyHash_=e===""?"":U7(e)}return this.lazyHash_}getPredecessorChildName(e,r,n){const i=this.resolveIndex_(n);if(i){const s=i.getPredecessorKey(new ut(e,r));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new ut(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new ut(r,this.children_.get(r)):null}forEachChild(e,r){const n=this.resolveIndex_(e);return n?n.inorderTraversal(i=>r(i.name,i.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ut.Wrap);let s=i.peek();for(;s!=null&&r.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ut.Wrap);let s=i.peek();for(;s!=null&&r.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wg?-1:0}withIndex(e){if(e===Gu||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new _t(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Gu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(mn),i=r.getIterator(mn);let s=n.getNext(),a=i.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=n.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Gu?null:this.indexMap_.get(e.toString())}}_t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ule extends _t{constructor(){super(new Un(Y2),_t.EMPTY_NODE,ga.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _t.EMPTY_NODE}isEmpty(){return!1}}const wg=new ule;Object.defineProperties(ut,{MIN:{value:new ut(Md,_t.EMPTY_NODE)},MAX:{value:new ut(jc,wg)}});p9.__EMPTY_NODE=_t.EMPTY_NODE;Or.__childrenNodeConstructor=_t;ile(wg);ale(wg);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dle=!0;function Wr(t,e=null){if(t===null)return _t.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Se(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const r=t;return new Or(r,Wr(e))}if(!(t instanceof Array)&&dle){const r=[];let n=!1;if(Di(t,(a,l)=>{if(a.substring(0,1)!=="."){const c=Wr(l);c.isEmpty()||(n=n||!c.getPriority().isEmpty(),r.push(new ut(a,c)))}}),r.length===0)return _t.EMPTY_NODE;const s=Av(r,nle,a=>a.name,Y2);if(n){const a=Av(r,mn.getCompare());return new _t(s,Wr(e),new ga({".priority":a},{".priority":mn}))}else return new _t(s,Wr(e),ga.Default)}else{let r=_t.EMPTY_NODE;return Di(t,(n,i)=>{if(Ga(t,n)&&n.substring(0,1)!=="."){const s=Wr(i);(s.isLeafNode()||!s.isEmpty())&&(r=r.updateImmediateChild(n,s))}}),r.updatePriority(Wr(e))}}sle(Wr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hle extends Yb{constructor(e){super(),this.indexPath_=e,Se(!lt(e)&&at(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const n=this.extractChild(e.node),i=this.extractChild(r.node),s=n.compareTo(i);return s===0?Ch(e.name,r.name):s}makePost(e,r){const n=Wr(e),i=_t.EMPTY_NODE.updateChild(this.indexPath_,n);return new ut(r,i)}maxPost(){const e=_t.EMPTY_NODE.updateChild(this.indexPath_,wg);return new ut(jc,e)}toString(){return d9(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fle extends Yb{compare(e,r){const n=e.node.compareTo(r.node);return n===0?Ch(e.name,r.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return ut.MIN}maxPost(){return ut.MAX}makePost(e,r){const n=Wr(e);return new ut(r,n)}toString(){return".value"}}const mle=new fle;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ple(t){return{type:"value",snapshotNode:t}}function gle(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function yle(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function xR(t,e,r){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:r}}function vle(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Md}hasEnd(){return this.endSet_}getIndexEndValue(){return Se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mn}copy(){const e=new Q2;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bR(t){const e={};if(t.isDefault())return e;let r;if(t.index_===mn?r="$priority":t.index_===mle?r="$value":t.index_===Gu?r="$key":(Se(t.index_ instanceof hle,"Unrecognized index type!"),r=t.index_.toString()),e.orderBy=Hr(r),t.startSet_){const n=t.startAfterSet_?"startAfter":"startAt";e[n]=Hr(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+Hr(t.indexStartName_))}if(t.endSet_){const n=t.endBeforeSet_?"endBefore":"endAt";e[n]=Hr(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+Hr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function wR(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let r=t.viewFrom_;r===""&&(t.isViewFromLeft()?r="l":r="r"),e.vf=r}return t.index_!==mn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends l9{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(Se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,r,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=bg("p:rest:"),this.listens_={}}listen(e,r,n,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=Tv.getListenId_(e,n),l={};this.listens_[a]=l;const c=bR(e._queryParams);this.restRequest_(s+".json",c,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,n),_d(this.listens_,a)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,r){const n=Tv.getListenId_(e,r);delete this.listens_[n]}get(e){const r=bR(e._queryParams),n=e._path.toString(),i=new _b;return this.restRequest_(n+".json",r,(s,a)=>{let l=a;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(n,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(r.auth=i.accessToken),s&&s.token&&(r.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+wh(r);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=Xm(l.responseText)}catch{Yn("Failed to parse JSON response for "+a+": "+l.responseText)}n(null,c)}else l.status!==401&&l.status!==404&&Yn("Got unsuccessful REST response for "+a+" Status: "+l.status),n(l.status);n=null}},l.open("GET",a,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xle{constructor(){this.rootNode_=_t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(){return{value:null,children:new Map}}function b9(t,e,r){if(lt(e))t.value=r,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,r);else{const n=at(e);t.children.has(n)||t.children.set(n,Pv());const i=t.children.get(n);e=zt(e),b9(i,e,r)}}function Dk(t,e,r){t.value!==null?r(e,t.value):ble(t,(n,i)=>{const s=new qt(e.toString()+"/"+n);Dk(i,s,r)})}function ble(t,e){t.children.forEach((r,n)=>{e(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wle{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r=Object.assign({},e);return this.last_&&Di(this.last_,(n,i)=>{r[n]=r[n]-i}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=10*1e3,_le=30*1e3,Sle=5*60*1e3;class kle{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new wle(e);const n=_R+(_le-_R)*Math.random();fm(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),r={};let n=!1;Di(e,(i,s)=>{s>0&&Ga(this.statsToReport_,i)&&(r[i]=s,n=!0)}),n&&this.server_.reportStats(r),fm(this.reportStats_.bind(this),Math.floor(Math.random()*2*Sle))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ts;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ts||(Ts={}));function w9(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _9(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function S9(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,r,n){this.path=e,this.affectedTree=r,this.revert=n,this.type=Ts.ACK_USER_WRITE,this.source=w9()}operationForChild(e){if(lt(this.path)){if(this.affectedTree.value!=null)return Se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new qt(e));return new Iv(Tt(),r,this.revert)}}else return Se(at(this.path)===e,"operationForChild called for unrelated child."),new Iv(zt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,r,n){this.source=e,this.path=r,this.snap=n,this.type=Ts.OVERWRITE}operationForChild(e){return lt(this.path)?new Ec(this.source,Tt(),this.snap.getImmediateChild(e)):new Ec(this.source,zt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,r,n){this.source=e,this.path=r,this.children=n,this.type=Ts.MERGE}operationForChild(e){if(lt(this.path)){const r=this.children.subtree(new qt(e));return r.isEmpty()?null:r.value?new Ec(this.source,Tt(),r.value):new lp(this.source,Tt(),r)}else return Se(at(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new lp(this.source,zt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,r,n){this.node_=e,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(lt(e))return this.isFullyInitialized()&&!this.filtered_;const r=at(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Nle(t,e,r,n){const i=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(vle(a.childName,a.snapshotNode))}),_f(t,i,"child_removed",e,n,r),_f(t,i,"child_added",e,n,r),_f(t,i,"child_moved",s,n,r),_f(t,i,"child_changed",e,n,r),_f(t,i,"value",e,n,r),i}function _f(t,e,r,n,i,s){const a=n.filter(l=>l.type===r);a.sort((l,c)=>Ele(t,l,c)),a.forEach(l=>{const c=jle(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,t.query_))})})}function jle(t,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ele(t,e,r){if(e.childName==null||r.childName==null)throw bh("Should only compare child_ events.");const n=new ut(e.childName,e.snapshotNode),i=new ut(r.childName,r.snapshotNode);return t.index_.compare(n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t,e){return{eventCache:t,serverCache:e}}function mm(t,e,r,n){return k9(new X2(e,r,n),t.serverCache)}function N9(t,e,r,n){return k9(t.eventCache,new X2(e,r,n))}function $k(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Cc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c_;const Cle=()=>(c_||(c_=new Un(moe)),c_);class Bt{static fromObject(e){let r=new Bt(null);return Di(e,(n,i)=>{r=r.set(new qt(n),i)}),r}constructor(e,r=Cle()){this.value=e,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:Tt(),value:this.value};if(lt(e))return null;{const n=at(e),i=this.children.get(n);if(i!==null){const s=i.findRootMostMatchingPathAndValue(zt(e),r);return s!=null?{path:Nr(new qt(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(lt(e))return this;{const r=at(e),n=this.children.get(r);return n!==null?n.subtree(zt(e)):new Bt(null)}}set(e,r){if(lt(e))return new Bt(r,this.children);{const n=at(e),s=(this.children.get(n)||new Bt(null)).set(zt(e),r),a=this.children.insert(n,s);return new Bt(this.value,a)}}remove(e){if(lt(e))return this.children.isEmpty()?new Bt(null):new Bt(null,this.children);{const r=at(e),n=this.children.get(r);if(n){const i=n.remove(zt(e));let s;return i.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,i),this.value===null&&s.isEmpty()?new Bt(null):new Bt(this.value,s)}else return this}}get(e){if(lt(e))return this.value;{const r=at(e),n=this.children.get(r);return n?n.get(zt(e)):null}}setTree(e,r){if(lt(e))return r;{const n=at(e),s=(this.children.get(n)||new Bt(null)).setTree(zt(e),r);let a;return s.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,s),new Bt(this.value,a)}}fold(e){return this.fold_(Tt(),e)}fold_(e,r){const n={};return this.children.inorderTraversal((i,s)=>{n[i]=s.fold_(Nr(e,i),r)}),r(e,this.value,n)}findOnPath(e,r){return this.findOnPath_(e,Tt(),r)}findOnPath_(e,r,n){const i=this.value?n(r,this.value):!1;if(i)return i;if(lt(e))return null;{const s=at(e),a=this.children.get(s);return a?a.findOnPath_(zt(e),Nr(r,s),n):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,Tt(),r)}foreachOnPath_(e,r,n){if(lt(e))return this;{this.value&&n(r,this.value);const i=at(e),s=this.children.get(i);return s?s.foreachOnPath_(zt(e),Nr(r,i),n):new Bt(null)}}foreach(e){this.foreach_(Tt(),e)}foreach_(e,r){this.children.inorderTraversal((n,i)=>{i.foreach_(Nr(e,n),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,n)=>{n.value&&e(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.writeTree_=e}static empty(){return new us(new Bt(null))}}function pm(t,e,r){if(lt(e))return new us(new Bt(r));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const i=n.path;let s=n.value;const a=Ai(i,e);return s=s.updateChild(a,r),new us(t.writeTree_.set(i,s))}else{const i=new Bt(r),s=t.writeTree_.setTree(e,i);return new us(s)}}}function SR(t,e,r){let n=t;return Di(r,(i,s)=>{n=pm(n,Nr(e,i),s)}),n}function kR(t,e){if(lt(e))return us.empty();{const r=t.writeTree_.setTree(e,new Bt(null));return new us(r)}}function Lk(t,e){return Wc(t,e)!=null}function Wc(t,e){const r=t.writeTree_.findRootMostValueAndPath(e);return r!=null?t.writeTree_.get(r.path).getChild(Ai(r.path,e)):null}function NR(t){const e=[],r=t.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(mn,(n,i)=>{e.push(new ut(n,i))}):t.writeTree_.children.inorderTraversal((n,i)=>{i.value!=null&&e.push(new ut(n,i.value))}),e}function el(t,e){if(lt(e))return t;{const r=Wc(t,e);return r!=null?new us(new Bt(r)):new us(t.writeTree_.subtree(e))}}function Fk(t){return t.writeTree_.isEmpty()}function Dd(t,e){return j9(Tt(),t.writeTree_,e)}function j9(t,e,r){if(e.value!=null)return r.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Se(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):r=j9(Nr(t,i),s,r)}),!r.getChild(t).isEmpty()&&n!==null&&(r=r.updateChild(Nr(t,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(t,e){return I9(e,t)}function Ale(t,e,r,n,i){Se(n>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:r,writeId:n,visible:i}),i&&(t.visibleWrites=pm(t.visibleWrites,e,r)),t.lastWriteId=n}function Tle(t,e){for(let r=0;r<t.allWrites.length;r++){const n=t.allWrites[r];if(n.writeId===e)return n}return null}function Ple(t,e){const r=t.allWrites.findIndex(l=>l.writeId===e);Se(r>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[r];t.allWrites.splice(r,1);let i=n.visible,s=!1,a=t.allWrites.length-1;for(;i&&a>=0;){const l=t.allWrites[a];l.visible&&(a>=r&&Ile(l,n.path)?i=!1:is(n.path,l.path)&&(s=!0)),a--}if(i){if(s)return Ole(t),!0;if(n.snap)t.visibleWrites=kR(t.visibleWrites,n.path);else{const l=n.children;Di(l,c=>{t.visibleWrites=kR(t.visibleWrites,Nr(n.path,c))})}return!0}else return!1}function Ile(t,e){if(t.snap)return is(t.path,e);for(const r in t.children)if(t.children.hasOwnProperty(r)&&is(Nr(t.path,r),e))return!0;return!1}function Ole(t){t.visibleWrites=C9(t.allWrites,Rle,Tt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Rle(t){return t.visible}function C9(t,e,r){let n=us.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const a=s.path;let l;if(s.snap)is(r,a)?(l=Ai(r,a),n=pm(n,l,s.snap)):is(a,r)&&(l=Ai(a,r),n=pm(n,Tt(),s.snap.getChild(l)));else if(s.children){if(is(r,a))l=Ai(r,a),n=SR(n,l,s.children);else if(is(a,r))if(l=Ai(a,r),lt(l))n=SR(n,Tt(),s.children);else{const c=_d(s.children,at(l));if(c){const u=c.getChild(zt(l));n=pm(n,Tt(),u)}}}else throw bh("WriteRecord should have .snap or .children")}}return n}function A9(t,e,r,n,i){if(!n&&!i){const s=Wc(t.visibleWrites,e);if(s!=null)return s;{const a=el(t.visibleWrites,e);if(Fk(a))return r;if(r==null&&!Lk(a,Tt()))return null;{const l=r||_t.EMPTY_NODE;return Dd(a,l)}}}else{const s=el(t.visibleWrites,e);if(!i&&Fk(s))return r;if(!i&&r==null&&!Lk(s,Tt()))return null;{const a=function(u){return(u.visible||i)&&(!n||!~n.indexOf(u.writeId))&&(is(u.path,e)||is(e,u.path))},l=C9(t.allWrites,a,e),c=r||_t.EMPTY_NODE;return Dd(l,c)}}}function Mle(t,e,r){let n=_t.EMPTY_NODE;const i=Wc(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mn,(s,a)=>{n=n.updateImmediateChild(s,a)}),n;if(r){const s=el(t.visibleWrites,e);return r.forEachChild(mn,(a,l)=>{const c=Dd(el(s,new qt(a)),l);n=n.updateImmediateChild(a,c)}),NR(s).forEach(a=>{n=n.updateImmediateChild(a.name,a.node)}),n}else{const s=el(t.visibleWrites,e);return NR(s).forEach(a=>{n=n.updateImmediateChild(a.name,a.node)}),n}}function Dle(t,e,r,n,i){Se(n||i,"Either existingEventSnap or existingServerSnap must exist");const s=Nr(e,r);if(Lk(t.visibleWrites,s))return null;{const a=el(t.visibleWrites,s);return Fk(a)?i.getChild(r):Dd(a,i.getChild(r))}}function $le(t,e,r,n){const i=Nr(e,r),s=Wc(t.visibleWrites,i);if(s!=null)return s;if(n.isCompleteForChild(r)){const a=el(t.visibleWrites,i);return Dd(a,n.getNode().getImmediateChild(r))}else return null}function Lle(t,e){return Wc(t.visibleWrites,e)}function Fle(t,e,r,n,i,s,a){let l;const c=el(t.visibleWrites,e),u=Wc(c,Tt());if(u!=null)l=u;else if(r!=null)l=Dd(c,r);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=a.getCompare(),f=s?l.getReverseIteratorFrom(n,a):l.getIteratorFrom(n,a);let m=f.getNext();for(;m&&h.length<i;)d(m,n)!==0&&h.push(m),m=f.getNext();return h}else return[]}function Vle(){return{visibleWrites:us.empty(),allWrites:[],lastWriteId:-1}}function Vk(t,e,r,n){return A9(t.writeTree,t.treePath,e,r,n)}function T9(t,e){return Mle(t.writeTree,t.treePath,e)}function jR(t,e,r,n){return Dle(t.writeTree,t.treePath,e,r,n)}function Ov(t,e){return Lle(t.writeTree,Nr(t.treePath,e))}function Ble(t,e,r,n,i,s){return Fle(t.writeTree,t.treePath,e,r,n,i,s)}function J2(t,e,r){return $le(t.writeTree,t.treePath,e,r)}function P9(t,e){return I9(Nr(t.treePath,e),t.writeTree)}function I9(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ule{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,n=e.childName;Se(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),Se(n!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const s=i.type;if(r==="child_added"&&s==="child_removed")this.changeMap.set(n,xR(n,e.snapshotNode,i.snapshotNode));else if(r==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&s==="child_changed")this.changeMap.set(n,yle(n,i.oldSnap));else if(r==="child_changed"&&s==="child_added")this.changeMap.set(n,gle(n,e.snapshotNode));else if(r==="child_changed"&&s==="child_changed")this.changeMap.set(n,xR(n,e.snapshotNode,i.oldSnap));else throw bh("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zle{getCompleteChild(e){return null}getChildAfterChild(e,r,n){return null}}const O9=new zle;class Z2{constructor(e,r,n=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new X2(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return J2(this.writes_,e,n)}}getChildAfterChild(e,r,n){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Cc(this.viewCache_),s=Ble(this.writes_,i,r,1,n,e);return s.length===0?null:s[0]}}function Wle(t,e){Se(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Se(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Hle(t,e,r,n,i){const s=new Ule;let a,l;if(r.type===Ts.OVERWRITE){const u=r;u.source.fromUser?a=Bk(t,e,u.path,u.snap,n,i,s):(Se(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!lt(u.path),a=Rv(t,e,u.path,u.snap,n,i,l,s))}else if(r.type===Ts.MERGE){const u=r;u.source.fromUser?a=qle(t,e,u.path,u.children,n,i,s):(Se(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),a=Uk(t,e,u.path,u.children,n,i,l,s))}else if(r.type===Ts.ACK_USER_WRITE){const u=r;u.revert?a=Qle(t,e,u.path,n,i,s):a=Kle(t,e,u.path,u.affectedTree,n,i,s)}else if(r.type===Ts.LISTEN_COMPLETE)a=Yle(t,e,r.path,n,s);else throw bh("Unknown operation type: "+r.type);const c=s.getChanges();return Gle(e,a,c),{viewCache:a,changes:c}}function Gle(t,e,r){const n=e.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=$k(t);(r.length>0||!t.eventCache.isFullyInitialized()||i&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&r.push(ple($k(e)))}}function R9(t,e,r,n,i,s){const a=e.eventCache;if(Ov(n,r)!=null)return e;{let l,c;if(lt(r))if(Se(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Cc(e),h=u instanceof _t?u:_t.EMPTY_NODE,d=T9(n,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Vk(n,Cc(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=at(r);if(u===".priority"){Se(pl(r)===1,"Can't have a priority with additional path components");const h=a.getNode();c=e.serverCache.getNode();const d=jR(n,r,h,c);d!=null?l=t.filter.updatePriority(h,d):l=a.getNode()}else{const h=zt(r);let d;if(a.isCompleteForChild(u)){c=e.serverCache.getNode();const f=jR(n,r,a.getNode(),c);f!=null?d=a.getNode().getImmediateChild(u).updateChild(h,f):d=a.getNode().getImmediateChild(u)}else d=J2(n,u,e.serverCache);d!=null?l=t.filter.updateChild(a.getNode(),u,d,h,i,s):l=a.getNode()}}return mm(e,l,a.isFullyInitialized()||lt(r),t.filter.filtersNodes())}}function Rv(t,e,r,n,i,s,a,l){const c=e.serverCache;let u;const h=a?t.filter:t.filter.getIndexedFilter();if(lt(r))u=h.updateFullNode(c.getNode(),n,null);else if(h.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(r,n);u=h.updateFullNode(c.getNode(),m,null)}else{const m=at(r);if(!c.isCompleteForPath(r)&&pl(r)>1)return e;const g=zt(r),y=c.getNode().getImmediateChild(m).updateChild(g,n);m===".priority"?u=h.updatePriority(c.getNode(),y):u=h.updateChild(c.getNode(),m,y,g,O9,null)}const d=N9(e,u,c.isFullyInitialized()||lt(r),h.filtersNodes()),f=new Z2(i,d,s);return R9(t,d,r,i,f,l)}function Bk(t,e,r,n,i,s,a){const l=e.eventCache;let c,u;const h=new Z2(i,e,s);if(lt(r))u=t.filter.updateFullNode(e.eventCache.getNode(),n,a),c=mm(e,u,!0,t.filter.filtersNodes());else{const d=at(r);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),n),c=mm(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=zt(r),m=l.getNode().getImmediateChild(d);let g;if(lt(f))g=n;else{const v=h.getCompleteChild(d);v!=null?u9(f)===".priority"&&v.getChild(h9(f)).isEmpty()?g=v:g=v.updateChild(f,n):g=_t.EMPTY_NODE}if(m.equals(g))c=e;else{const v=t.filter.updateChild(l.getNode(),d,g,f,h,a);c=mm(e,v,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function ER(t,e){return t.eventCache.isCompleteForChild(e)}function qle(t,e,r,n,i,s,a){let l=e;return n.foreach((c,u)=>{const h=Nr(r,c);ER(e,at(h))&&(l=Bk(t,l,h,u,i,s,a))}),n.foreach((c,u)=>{const h=Nr(r,c);ER(e,at(h))||(l=Bk(t,l,h,u,i,s,a))}),l}function CR(t,e,r){return r.foreach((n,i)=>{e=e.updateChild(n,i)}),e}function Uk(t,e,r,n,i,s,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;lt(r)?u=n:u=new Bt(null).setTree(r,n);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),g=CR(t,m,f);c=Rv(t,c,new qt(d),g,i,s,a,l)}}),u.children.inorderTraversal((d,f)=>{const m=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!m){const g=e.serverCache.getNode().getImmediateChild(d),v=CR(t,g,f);c=Rv(t,c,new qt(d),v,i,s,a,l)}}),c}function Kle(t,e,r,n,i,s,a){if(Ov(i,r)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(n.value!=null){if(lt(r)&&c.isFullyInitialized()||c.isCompleteForPath(r))return Rv(t,e,r,c.getNode().getChild(r),i,s,l,a);if(lt(r)){let u=new Bt(null);return c.getNode().forEachChild(Gu,(h,d)=>{u=u.set(new qt(h),d)}),Uk(t,e,r,u,i,s,l,a)}else return e}else{let u=new Bt(null);return n.foreach((h,d)=>{const f=Nr(r,h);c.isCompleteForPath(f)&&(u=u.set(h,c.getNode().getChild(f)))}),Uk(t,e,r,u,i,s,l,a)}}function Yle(t,e,r,n,i){const s=e.serverCache,a=N9(e,s.getNode(),s.isFullyInitialized()||lt(r),s.isFiltered());return R9(t,a,r,n,O9,i)}function Qle(t,e,r,n,i,s){let a;if(Ov(n,r)!=null)return e;{const l=new Z2(n,e,i),c=e.eventCache.getNode();let u;if(lt(r)||at(r)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Vk(n,Cc(e));else{const d=e.serverCache.getNode();Se(d instanceof _t,"serverChildren would be complete if leaf node"),h=T9(n,d)}h=h,u=t.filter.updateFullNode(c,h,s)}else{const h=at(r);let d=J2(n,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),d!=null?u=t.filter.updateChild(c,h,d,zt(r),l,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(c,h,_t.EMPTY_NODE,zt(r),l,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Vk(n,Cc(e)),a.isLeafNode()&&(u=t.filter.updateFullNode(u,a,s)))}return a=e.serverCache.isFullyInitialized()||Ov(n,Tt())!=null,mm(e,u,a,t.filter.filtersNodes())}}function Xle(t,e){const r=Cc(t.viewCache_);return r&&(t.query._queryParams.loadsAllData()||!lt(e)&&!r.getImmediateChild(at(e)).isEmpty())?r.getChild(e):null}function AR(t,e,r,n){e.type===Ts.MERGE&&e.source.queryId!==null&&(Se(Cc(t.viewCache_),"We should always have a full cache before handling merges"),Se($k(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Hle(t.processor_,i,e,r,n);return Wle(t.processor_,s.viewCache),Se(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Jle(t,s.changes,s.viewCache.eventCache.getNode())}function Jle(t,e,r,n){const i=t.eventRegistrations_;return Nle(t.eventGenerator_,e,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TR;function Zle(t){Se(!TR,"__referenceConstructor has already been defined"),TR=t}function eC(t,e,r,n){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return Se(s!=null,"SyncTree gave us an op for an invalid query."),AR(s,e,r,n)}else{let s=[];for(const a of t.views.values())s=s.concat(AR(a,e,r,n));return s}}function tC(t,e){let r=null;for(const n of t.views.values())r=r||Xle(n,e);return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PR;function ece(t){Se(!PR,"__referenceConstructor has already been defined"),PR=t}class IR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bt(null),this.pendingWriteTree_=Vle(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function M9(t,e,r,n,i){return Ale(t.pendingWriteTree_,e,r,n,i),i?Xb(t,new Ec(w9(),e,r)):[]}function Jl(t,e,r=!1){const n=Tle(t.pendingWriteTree_,e);if(Ple(t.pendingWriteTree_,e)){let s=new Bt(null);return n.snap!=null?s=s.set(Tt(),!0):Di(n.children,a=>{s=s.set(new qt(a),!0)}),Xb(t,new Iv(n.path,s,r))}else return[]}function Qb(t,e,r){return Xb(t,new Ec(_9(),e,r))}function tce(t,e,r){const n=Bt.fromObject(r);return Xb(t,new lp(_9(),e,n))}function rce(t,e,r,n){const i=L9(t,n);if(i!=null){const s=F9(i),a=s.path,l=s.queryId,c=Ai(a,e),u=new Ec(S9(l),c,r);return V9(t,a,u)}else return[]}function nce(t,e,r,n){const i=L9(t,n);if(i){const s=F9(i),a=s.path,l=s.queryId,c=Ai(a,e),u=Bt.fromObject(r),h=new lp(S9(l),c,u);return V9(t,a,h)}else return[]}function rC(t,e,r){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,l)=>{const c=Ai(a,e),u=tC(l,c);if(u)return u});return A9(i,e,s,r,!0)}function Xb(t,e){return D9(e,t.syncPointTree_,null,E9(t.pendingWriteTree_,Tt()))}function D9(t,e,r,n){if(lt(t.path))return $9(t,e,r,n);{const i=e.get(Tt());r==null&&i!=null&&(r=tC(i,Tt()));let s=[];const a=at(t.path),l=t.operationForChild(a),c=e.children.get(a);if(c&&l){const u=r?r.getImmediateChild(a):null,h=P9(n,a);s=s.concat(D9(l,c,u,h))}return i&&(s=s.concat(eC(i,t,n,r))),s}}function $9(t,e,r,n){const i=e.get(Tt());r==null&&i!=null&&(r=tC(i,Tt()));let s=[];return e.children.inorderTraversal((a,l)=>{const c=r?r.getImmediateChild(a):null,u=P9(n,a),h=t.operationForChild(a);h&&(s=s.concat($9(h,l,c,u)))}),i&&(s=s.concat(eC(i,t,n,r))),s}function L9(t,e){return t.tagToQueryMap.get(e)}function F9(t){const e=t.indexOf("$");return Se(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new qt(t.substr(0,e))}}function V9(t,e,r){const n=t.syncPointTree_.get(e);Se(n,"Missing sync point for query tag that we're tracking");const i=E9(t.pendingWriteTree_,e);return eC(n,r,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new nC(r)}node(){return this.node_}}class iC{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Nr(this.path_,e);return new iC(this.syncTree_,r)}node(){return rC(this.syncTree_,this.path_)}}const ice=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},OR=function(t,e,r){if(!t||typeof t!="object")return t;if(Se(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return sce(t[".sv"],e,r);if(typeof t[".sv"]=="object")return ace(t[".sv"],e);Se(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},sce=function(t,e,r){switch(t){case"timestamp":return r.timestamp;default:Se(!1,"Unexpected server value: "+t)}},ace=function(t,e,r){t.hasOwnProperty("increment")||Se(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&Se(!1,"Unexpected increment value: "+n);const i=e.node();if(Se(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const a=i.getValue();return typeof a!="number"?n:a+n},oce=function(t,e,r,n){return sC(e,new iC(r,t),n)},B9=function(t,e,r){return sC(t,new nC(e),r)};function sC(t,e,r){const n=t.getPriority().val(),i=OR(n,e.getImmediateChild(".priority"),r);let s;if(t.isLeafNode()){const a=t,l=OR(a.getValue(),e,r);return l!==a.getValue()||i!==a.getPriority().val()?new Or(l,Wr(i)):t}else{const a=t;return s=a,i!==a.getPriority().val()&&(s=s.updatePriority(new Or(i))),a.forEachChild(mn,(l,c)=>{const u=sC(c,e.getImmediateChild(l),r);u!==c&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e="",r=null,n={children:{},childCount:0}){this.name=e,this.parent=r,this.node=n}}function oC(t,e){let r=e instanceof qt?e:new qt(e),n=t,i=at(r);for(;i!==null;){const s=_d(n.node.children,i)||{children:{},childCount:0};n=new aC(i,n,s),r=zt(r),i=at(r)}return n}function Th(t){return t.node.value}function U9(t,e){t.node.value=e,zk(t)}function z9(t){return t.node.childCount>0}function lce(t){return Th(t)===void 0&&!z9(t)}function Jb(t,e){Di(t.node.children,(r,n)=>{e(new aC(r,t,n))})}function W9(t,e,r,n){r&&!n&&e(t),Jb(t,i=>{W9(i,e,!0,n)}),r&&n&&e(t)}function cce(t,e,r){let n=t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function _g(t){return new qt(t.parent===null?t.name:_g(t.parent)+"/"+t.name)}function zk(t){t.parent!==null&&uce(t.parent,t.name,t)}function uce(t,e,r){const n=lce(r),i=Ga(t.node.children,e);n&&i?(delete t.node.children[e],t.node.childCount--,zk(t)):!n&&!i&&(t.node.children[e]=r.node,t.node.childCount++,zk(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dce=/[\[\].#$\/\u0000-\u001F\u007F]/,hce=/[\[\].#$\u0000-\u001F\u007F]/,u_=10*1024*1024,H9=function(t){return typeof t=="string"&&t.length!==0&&!dce.test(t)},G9=function(t){return typeof t=="string"&&t.length!==0&&!hce.test(t)},fce=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),G9(t)},mce=function(t,e,r,n){lC(UE(t,"value"),e,r)},lC=function(t,e,r){const n=r instanceof qt?new Yoe(r,t):r;if(e===void 0)throw new Error(t+"contains undefined "+Vl(n));if(typeof e=="function")throw new Error(t+"contains a function "+Vl(n)+" with contents = "+e.toString());if(z7(e))throw new Error(t+"contains "+e.toString()+" "+Vl(n));if(typeof e=="string"&&e.length>u_/3&&Sb(e)>u_)throw new Error(t+"contains a string greater than "+u_+" utf8 bytes "+Vl(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Di(e,(a,l)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!H9(a)))throw new Error(t+" contains an invalid key ("+a+") "+Vl(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Qoe(n,a),lC(t,l,n),Xoe(n)}),i&&s)throw new Error(t+' contains ".value" child '+Vl(n)+" in addition to actual children.")}},q9=function(t,e,r,n){if(!G9(r))throw new Error(UE(t,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},pce=function(t,e,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),q9(t,e,r)},gce=function(t,e){if(at(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},yce=function(t,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!H9(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!fce(r))throw new Error(UE(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vce{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function K9(t,e){let r=null;for(let n=0;n<e.length;n++){const i=e[n],s=i.getPath();r!==null&&!f9(s,r.path)&&(t.eventLists_.push(r),r=null),r===null&&(r={events:[],path:s}),r.events.push(i)}r&&t.eventLists_.push(r)}function La(t,e,r){K9(t,r),xce(t,n=>is(n,e)||is(e,n))}function xce(t,e){t.recursionDepth_++;let r=!0;for(let n=0;n<t.eventLists_.length;n++){const i=t.eventLists_[n];if(i){const s=i.path;e(s)?(bce(t.eventLists_[n]),t.eventLists_[n]=null):r=!1}}r&&(t.eventLists_=[]),t.recursionDepth_--}function bce(t){for(let e=0;e<t.events.length;e++){const r=t.events[e];if(r!==null){t.events[e]=null;const n=r.getEventRunner();hm&&dn("event: "+r.toString()),Ah(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wce="repo_interrupt",_ce=25;class Sce{constructor(e,r,n,i){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vce,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pv(),this.transactionQueueTree_=new aC,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kce(t,e,r){if(t.stats_=G2(t.repoInfo_),t.forceRestClient_||boe())t.server_=new Tv(t.repoInfo_,(n,i,s,a)=>{RR(t,n,i,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>MR(t,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Hr(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new Sa(t.repoInfo_,e,(n,i,s,a)=>{RR(t,n,i,s,a)},n=>{MR(t,n)},n=>{jce(t,n)},t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=Noe(t.repoInfo_,()=>new kle(t.stats_,t.server_)),t.infoData_=new xle,t.infoSyncTree_=new IR({startListening:(n,i,s,a)=>{let l=[];const c=t.infoData_.getNode(n._path);return c.isEmpty()||(l=Qb(t.infoSyncTree_,n._path,c),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),uC(t,"connected",!1),t.serverSyncTree_=new IR({startListening:(n,i,s,a)=>(t.server_.listen(n,s,i,(l,c)=>{const u=a(l,c);La(t.eventQueue_,n._path,u)}),[]),stopListening:(n,i)=>{t.server_.unlisten(n,i)}})}function Nce(t){const r=t.infoData_.getNode(new qt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function cC(t){return ice({timestamp:Nce(t)})}function RR(t,e,r,n,i){t.dataUpdateCount++;const s=new qt(e);r=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,r):r;let a=[];if(i)if(n){const c=av(r,u=>Wr(u));a=nce(t.serverSyncTree_,s,c,i)}else{const c=Wr(r);a=rce(t.serverSyncTree_,s,c,i)}else if(n){const c=av(r,u=>Wr(u));a=tce(t.serverSyncTree_,s,c)}else{const c=Wr(r);a=Qb(t.serverSyncTree_,s,c)}let l=s;a.length>0&&(l=Zb(t,s)),La(t.eventQueue_,l,a)}function MR(t,e){uC(t,"connected",e),e===!1&&Cce(t)}function jce(t,e){Di(e,(r,n)=>{uC(t,r,n)})}function uC(t,e,r){const n=new qt("/.info/"+e),i=Wr(r);t.infoData_.updateSnapshot(n,i);const s=Qb(t.infoSyncTree_,n,i);La(t.eventQueue_,n,s)}function Y9(t){return t.nextWriteId_++}function Ece(t,e,r,n,i){dC(t,"set",{path:e.toString(),value:r,priority:n});const s=cC(t),a=Wr(r,n),l=rC(t.serverSyncTree_,e),c=B9(a,l,s),u=Y9(t),h=M9(t.serverSyncTree_,e,c,u,!0);K9(t.eventQueue_,h),t.server_.put(e.toString(),a.val(!0),(f,m)=>{const g=f==="ok";g||Yn("set at "+e+" failed: "+f);const v=Jl(t.serverSyncTree_,u,!g);La(t.eventQueue_,e,v),Tce(t,i,f,m)});const d=eV(t,e);Zb(t,d),La(t.eventQueue_,d,[])}function Cce(t){dC(t,"onDisconnectEvents");const e=cC(t),r=Pv();Dk(t.onDisconnect_,Tt(),(i,s)=>{const a=oce(i,s,t.serverSyncTree_,e);b9(r,i,a)});let n=[];Dk(r,Tt(),(i,s)=>{n=n.concat(Qb(t.serverSyncTree_,i,s));const a=eV(t,i);Zb(t,a)}),t.onDisconnect_=Pv(),La(t.eventQueue_,Tt(),n)}function Ace(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wce)}function dC(t,...e){let r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),dn(r,...e)}function Tce(t,e,r,n){e&&Ah(()=>{if(r==="ok")e(null);else{const i=(r||"error").toUpperCase();let s=i;n&&(s+=": "+n);const a=new Error(s);a.code=i,e(a)}})}function Q9(t,e,r){return rC(t.serverSyncTree_,e,r)||_t.EMPTY_NODE}function hC(t,e=t.transactionQueueTree_){if(e||ew(t,e),Th(e)){const r=J9(t,e);Se(r.length>0,"Sending zero length transaction queue"),r.every(i=>i.status===0)&&Pce(t,_g(e),r)}else z9(e)&&Jb(e,r=>{hC(t,r)})}function Pce(t,e,r){const n=r.map(u=>u.currentWriteId),i=Q9(t,e,n);let s=i;const a=i.hash();for(let u=0;u<r.length;u++){const h=r[u];Se(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Ai(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const l=s.val(!0),c=e;t.server_.put(c.toString(),l,u=>{dC(t,"transaction put response",{path:c.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let f=0;f<r.length;f++)r[f].status=2,h=h.concat(Jl(t.serverSyncTree_,r[f].currentWriteId)),r[f].onComplete&&d.push(()=>r[f].onComplete(null,!0,r[f].currentOutputSnapshotResolved)),r[f].unwatcher();ew(t,oC(t.transactionQueueTree_,e)),hC(t,t.transactionQueueTree_),La(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)Ah(d[f])}else{if(u==="datastale")for(let d=0;d<r.length;d++)r[d].status===3?r[d].status=4:r[d].status=0;else{Yn("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<r.length;d++)r[d].status=4,r[d].abortReason=u}Zb(t,e)}},a)}function Zb(t,e){const r=X9(t,e),n=_g(r),i=J9(t,r);return Ice(t,i,n),n}function Ice(t,e,r){if(e.length===0)return;const n=[];let i=[];const a=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=Ai(r,c.path);let h=!1,d;if(Se(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,d=c.abortReason,i=i.concat(Jl(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=_ce)h=!0,d="maxretry",i=i.concat(Jl(t.serverSyncTree_,c.currentWriteId,!0));else{const f=Q9(t,c.path,a);c.currentInputSnapshot=f;const m=e[l].update(f.val());if(m!==void 0){lC("transaction failed: Data returned ",m,c.path);let g=Wr(m);typeof m=="object"&&m!=null&&Ga(m,".priority")||(g=g.updatePriority(f.getPriority()));const y=c.currentWriteId,x=cC(t),b=B9(g,f,x);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=b,c.currentWriteId=Y9(t),a.splice(a.indexOf(y),1),i=i.concat(M9(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),i=i.concat(Jl(t.serverSyncTree_,y,!0))}else h=!0,d="nodata",i=i.concat(Jl(t.serverSyncTree_,c.currentWriteId,!0))}La(t.eventQueue_,r,i),i=[],h&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?n.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):n.push(()=>e[l].onComplete(new Error(d),!1,null))))}ew(t,t.transactionQueueTree_);for(let l=0;l<n.length;l++)Ah(n[l]);hC(t,t.transactionQueueTree_)}function X9(t,e){let r,n=t.transactionQueueTree_;for(r=at(e);r!==null&&Th(n)===void 0;)n=oC(n,r),e=zt(e),r=at(e);return n}function J9(t,e){const r=[];return Z9(t,e,r),r.sort((n,i)=>n.order-i.order),r}function Z9(t,e,r){const n=Th(e);if(n)for(let i=0;i<n.length;i++)r.push(n[i]);Jb(e,i=>{Z9(t,i,r)})}function ew(t,e){const r=Th(e);if(r){let n=0;for(let i=0;i<r.length;i++)r[i].status!==2&&(r[n]=r[i],n++);r.length=n,U9(e,r.length>0?r:void 0)}Jb(e,n=>{ew(t,n)})}function eV(t,e){const r=_g(X9(t,e)),n=oC(t.transactionQueueTree_,e);return cce(n,i=>{d_(t,i)}),d_(t,n),W9(n,i=>{d_(t,i)}),r}function d_(t,e){const r=Th(e);if(r){const n=[];let i=[],s=-1;for(let a=0;a<r.length;a++)r[a].status===3||(r[a].status===1?(Se(s===a-1,"All SENT items should be at beginning of queue."),s=a,r[a].status=3,r[a].abortReason="set"):(Se(r[a].status===0,"Unexpected transaction status in abort"),r[a].unwatcher(),i=i.concat(Jl(t.serverSyncTree_,r[a].currentWriteId,!0)),r[a].onComplete&&n.push(r[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?U9(e,void 0):r.length=s+1,La(t.eventQueue_,_g(e),i);for(let a=0;a<n.length;a++)Ah(n[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oce(t){let e="";const r=t.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let i=r[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Rce(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const r of t.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Yn(`Invalid query segment '${r}' in query '${t}'`)}return e}const DR=function(t,e){const r=Mce(t),n=r.namespace;r.domain==="firebase.com"&&$a(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&$a("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||hoe();const i=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new t9(r.host,r.secure,n,i,e,"",n!==r.subdomain),path:new qt(r.pathString)}},Mce=function(t){let e="",r="",n="",i="",s="",a=!0,l="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=Oce(t.substring(h,d)));const f=Rce(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(a=l==="https"||l==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")r="localhost";else if(m.split(".").length<=2)r=m;else{const g=e.indexOf(".");n=e.substring(0,g).toLowerCase(),r=e.substring(g+1),s=n}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:r,subdomain:n,secure:a,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,r,n,i){this._repo=e,this._path=r,this._queryParams=n,this._orderByCalled=i}get key(){return lt(this._path)?null:u9(this._path)}get ref(){return new Hc(this._repo,this._path)}get _queryIdentifier(){const e=wR(this._queryParams),r=W2(e);return r==="{}"?"default":r}get _queryObject(){return wR(this._queryParams)}isEqual(e){if(e=Ot(e),!(e instanceof fC))return!1;const r=this._repo===e._repo,n=f9(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return r&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Koe(this._path)}}class Hc extends fC{constructor(e,r){super(e,r,new Q2,!1)}get parent(){const e=h9(this._path);return e===null?null:new Hc(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function Dce(t,e){return t=Ot(t),t._checkNotDeleted("ref"),e!==void 0?$ce(t._root,e):t._root}function $ce(t,e){return t=Ot(t),at(t._path)===null?pce("child","path",e):q9("child","path",e),new Hc(t._repo,Nr(t._path,e))}function Lce(t,e){t=Ot(t),gce("set",t._path),mce("set",e,t._path);const r=new _b;return Ece(t._repo,t._path,e,null,r.wrapCallback(()=>{})),r.promise}Zle(Hc);ece(Hc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fce="FIREBASE_DATABASE_EMULATOR_HOST",Wk={};let Vce=!1;function Bce(t,e,r,n){const i=e.lastIndexOf(":"),s=e.substring(0,i),a=bl(s);t.repoInfo_=new t9(e,a,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,r),n&&(t.authTokenProvider_=n)}function Uce(t,e,r,n,i){let s=n||t.options.databaseURL;s===void 0&&(t.options.projectId||$a("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=DR(s,i),l=a.repoInfo,c;typeof process<"u"&&rR&&(c=rR[Fce]),c?(s=`http://${c}?ns=${l.namespace}`,a=DR(s,i),l=a.repoInfo):a.repoInfo.secure;const u=new _oe(t.name,t.options,e);yce("Invalid Firebase Database URL",a),lt(a.path)||$a("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Wce(l,t,u,new woe(t,r));return new Hce(h,t)}function zce(t,e){const r=Wk[e];(!r||r[t.key]!==t)&&$a(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Ace(t),delete r[t.key]}function Wce(t,e,r,n){let i=Wk[e.name];i||(i={},Wk[e.name]=i);let s=i[t.toURLString()];return s&&$a("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Sce(t,Vce,r,n),i[t.toURLString()]=s,s}class Hce{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kce(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hc(this._repo,Tt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zce(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$a("Cannot call "+e+" on a deleted database.")}}function Gce(t=WE(),e){const r=Nb(t,"database").getImmediate({identifier:e});if(!r._instanceStarted){const n=f8("database");n&&qce(r,...n)}return r}function qce(t,e,r,n={}){t=Ot(t),t._checkNotDeleted("useEmulator");const i=`${e}:${r}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&Ws(n,s.repoInfo_.emulatorOptions))return;$a("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&$a('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new by(by.OWNER);else if(n.mockUserToken){const l=typeof n.mockUserToken=="string"?n.mockUserToken:g8(n.mockUserToken,t.app.options.projectId);a=new by(l)}bl(e)&&(FE(e),VE("Database",!0)),Bce(s,i,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kce(t){aoe(Fc),bc(new ll("database",(e,{instanceIdentifier:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Uce(n,i,s,r)},"PUBLIC").setMultipleInstances(!0)),Ms(nR,iR,t),Ms(nR,iR,"esm2017")}Sa.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Sa.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Kce();const Yce={apiKey:"AIzaSyBsY9cFgrLX7lQlSpsU9uMkhPSYIawqzeI",authDomain:"ecoscope-89cb8.firebaseapp.com",projectId:"ecoscope-89cb8",storageBucket:"ecoscope-89cb8.firebasestorage.app",messagingSenderId:"614859320165",appId:"1:614859320165:web:eeb495360b25a5ba784f8c",measurementId:"G-ZSDT5YRPJ0"},mC=_8(Yce),Ne=Hae(mC),Ss=Xne(mC),Qce=Gce(mC),pC=E.createContext(void 0);function Xce({children:t}){const[e,r]=E.useState(null),[n,i]=E.useState(!1),s=async(h,d)=>{i(!0),localStorage.removeItem("user"),r(null);try{if(!h||!d)throw new Error("Email and password must not be empty.");const m=(await Rre(Ss,h,d)).user,g={id:m.uid,uid:m.uid,name:m.displayName||m.email||"",email:m.email||""};return m&&(r(g),localStorage.setItem("user",JSON.stringify(g))),null}catch(f){return console.error("Login error full object:",f),f.code==="auth/user-not-found"?"User not found. Please register first.":f.code==="auth/wrong-password"?"Incorrect password. Please try again.":f.code==="auth/invalid-email"?"Invalid email address.":f.code==="auth/user-disabled"?"User account is disabled.":f.message?f.message:"Login failed. Please try again."}finally{i(!1)}},a=async(h,d,f)=>{i(!0);try{if(!d||!f||!h)return"Name, email, and password must not be empty.";if(!l(d))return"Invalid email format.";if(f.length<6)return"Password must be at least 6 characters.";const g=(await Ore(Ss,d,f)).user;return g?(await Dre(g,{displayName:h}),await(async()=>{for(let y=1;y<=3;y++){try{const x=Ss.currentUser;if(x&&x.uid===g.uid){await Zt(Re(Ne,"users",g.uid),{uid:g.uid,name:h,email:g.email}),console.log("Firestore write successful on attempt",y);return}else console.warn("Auth user not ready, attempt",y)}catch(x){if(console.error("Firestore write error during registration attempt",y,x),y===3)throw x}await new Promise(x=>setTimeout(x,1e3))}})(),null):"Registration failed. Please try again."}catch(m){return console.error("Registration error:",m),m.code==="auth/email-already-in-use"?"Email is already in use. Please login or use a different email.":m.message?m.message:"Registration failed. Please try again."}finally{i(!1)}},l=h=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h),c=async()=>{i(!0);try{const h=new la,f=(await ane(Ss,h)).user,m={id:f.uid,uid:f.uid,name:f.displayName||"",email:f.email||""};await(async()=>{for(let x=1;x<=3;x++){try{const b=Ss.currentUser;if(b&&b.uid===f.uid){await Zt(Re(Ne,"users",f.uid),{uid:f.uid,name:f.displayName||"",email:f.email||""},{merge:!0}),console.log("Firestore write successful on attempt",x);return}else console.warn("Auth user not ready, attempt",x)}catch(b){if(console.error("Firestore write error during Google login attempt",x,b),x===3)throw b}await new Promise(b=>setTimeout(b,1e3))}})();const v=Re(Ne,"users",f.uid);await(async()=>{const x=[];x.push(Zt(Re(v,"profile","data"),{})),x.push(Zt(Re(v,"cart","items"),{items:[]})),await Promise.all(x)})(),r(m),localStorage.setItem("user",JSON.stringify(m))}catch(h){console.error("Google login error:",h)}finally{i(!1)}},u=async()=>{try{await Vre(Ss),r(null),localStorage.removeItem("user")}catch(h){console.error("Logout error:",h)}};return E.useEffect(()=>{const h=Ss.onAuthStateChanged(d=>{if(d){const f={id:d.uid,uid:d.uid,name:d.displayName||d.email||"",email:d.email||""};r(f),localStorage.setItem("user",JSON.stringify(f))}else r(null),localStorage.removeItem("user")});return()=>h()},[]),o.jsx(pC.Provider,{value:{currentUser:e,user:e,login:s,register:a,loginWithGoogle:c,logout:u,isLoading:n},children:t})}function wr(){const t=E.useContext(pC);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const tV=E.createContext(void 0),rV=({children:t})=>{const{currentUser:e}=wr(),[r,n]=E.useState([]),[i,s]=E.useState([]),[a,l]=E.useState({totalPoints:0,level:0,totalScans:0,avgScore:0,co2Saved:0,rank:0,badges:0,weeklyGoal:0,currentWeekScans:0,streakDays:0,coursesCompleted:0,recipesViewed:0,transportTrips:0,esgReports:0,goals:[],investmentsMade:0,totalCarbonFootprint:0,monthlyReduction:0,carbonGoal:0,maxSustainabilityScore:1e3,weeklyFootprint:[0,0,0,0,0,0,0],categoryBreakdown:{transport:0,energy:0,food:0,waste:0},topCategory:"none",monthlyTrend:0,sustainabilityScore:0,achievements:[],communityHelpCount:0}),[c,u]=E.useState(new Set),[h,d]=E.useState(new Map),[f,m]=E.useState(new Set),[g,v]=E.useState(new Set),[y,x]=E.useState(new Set);D.useEffect(()=>{if(!e){u(new Set),d(new Map),m(new Set),v(new Set),x(new Set);return}const me=Re(Ne,"users",e.uid),we=gt(me,"enrolledCourses"),de=gt(me,"courseProgress"),xe=gt(me,"likedArticles"),De=gt(me,"bookmarkedArticles"),Le=gt(me,"registeredWebinars");Sr(we).then($e=>{const ke=new Set;$e.forEach(Be=>{const Ae=Be.data();Ae.courseId&&ke.add(Ae.courseId)}),u(ke)}).catch($e=>{console.error("Error loading enrolled courses:",$e)}),Sr(de).then($e=>{const ke=new Map;$e.forEach(Be=>{const Ae=Be.data();Ae.courseId&&typeof Ae.progress=="number"&&ke.set(Ae.courseId,Ae.progress)}),d(ke)}).catch($e=>{console.error("Error loading course progress:",$e)}),Sr(xe).then($e=>{const ke=new Set;$e.forEach(Be=>{const Ae=Be.data();Ae.articleId&&ke.add(Ae.articleId)}),m(ke)}).catch($e=>{console.error("Error loading liked articles:",$e)}),Sr(De).then($e=>{const ke=new Set;$e.forEach(Be=>{const Ae=Be.data();Ae.articleId&&ke.add(Ae.articleId)}),v(ke)}).catch($e=>{console.error("Error loading bookmarked articles:",$e)}),Sr(Le).then($e=>{const ke=new Set;$e.forEach(Be=>{const Ae=Be.data();Ae.webinarId&&ke.add(Ae.webinarId)}),x(ke)}).catch($e=>{console.error("Error loading registered webinars:",$e)})},[e]);const b=async me=>{if(!e)return;const we=Re(Ne,"users",e.uid),de=gt(we,"enrolledCourses");try{const xe=await Sr(de),De=pu(Ne);xe.forEach(Le=>{De.delete(Le.ref)}),me.forEach(Le=>{const $e=Re(de);De.set($e,{courseId:Le})}),await De.commit()}catch(xe){console.error("Error updating enrolled courses in Firestore:",xe)}},w=async me=>{if(!e)return;const we=Re(Ne,"users",e.uid),de=gt(we,"likedArticles");try{const xe=await Sr(de),De=pu(Ne);xe.forEach(Le=>{De.delete(Le.ref)}),me.forEach(Le=>{const $e=Re(de);De.set($e,{articleId:Le})}),await De.commit(),console.log("Successfully updated liked articles in Firestore")}catch(xe){console.error("Error updating liked articles in Firestore:",xe)}},k=async me=>{if(!e)return;const we=Re(Ne,"users",e.uid),de=gt(we,"bookmarkedArticles");try{const xe=await Sr(de),De=pu(Ne);xe.forEach(Le=>{De.delete(Le.ref)}),me.forEach(Le=>{const $e=Re(de);De.set($e,{articleId:Le})}),await De.commit(),console.log("Successfully updated bookmarked articles in Firestore")}catch(xe){console.error("Error updating bookmarked articles in Firestore:",xe)}},S=async me=>{if(!e)return;const we=Re(Ne,"users",e.uid),de=gt(we,"registeredWebinars");try{const xe=await Sr(de),De=pu(Ne);xe.forEach(Le=>{De.delete(Le.ref)}),me.forEach(Le=>{const $e=Re(de);De.set($e,{webinarId:Le})}),await De.commit(),console.log("Successfully updated registered webinars in Firestore")}catch(xe){console.error("Error updating registered webinars in Firestore:",xe)}},P=async me=>{if(!e)return;const we=Re(Ne,"users",e.uid),de=gt(we,"courseProgress");try{const xe=await Sr(de),De=pu(Ne);xe.forEach(Le=>{De.delete(Le.ref)}),me.forEach((Le,$e)=>{const ke=Re(de);De.set(ke,{courseId:$e,progress:Le})}),await De.commit()}catch(xe){console.error("Error updating course progress in Firestore:",xe)}},N=me=>{u(we=>{const de=new Set(we);return de.add(me),b(de),de})},_=me=>{m(we=>{const de=new Set(we);return de.has(me)?de.delete(me):de.add(me),w(de),de})},T=me=>{v(we=>{const de=new Set(we);return de.has(me)?de.delete(me):de.add(me),k(de),de})},j=me=>{x(we=>{const de=new Set(we);return de.has(me)||(de.add(me),S(de)),de})},C=(me,we)=>{d(de=>{const xe=new Map(de);return xe.set(me,we),P(xe),xe})};D.useEffect(()=>{if(!e)return;const me=i.length,we=r.reduce((Ae,ir)=>Ae+(ir.amount||0),0),de=me>0?Math.round(i.reduce((Ae,ir)=>Ae+(ir.sustainabilityScore||0),0)/me):0,xe=new Date,De=new Date(xe);De.setDate(xe.getDate()-xe.getDay());const Le=i.filter(Ae=>{const ir=new Date(Ae.date);return ir>=De&&ir<=xe}).length,$e=new Set(i.map(Ae=>Ae.date.split("T")[0]));let ke=0;for(let Ae=0;Ae<30;Ae++){const ir=new Date;ir.setDate(xe.getDate()-Ae);const Bi=ir.toISOString().split("T")[0];if($e.has(Bi))ke++;else break}const Be=me*10+we*5;l(Ae=>({...Ae,totalScans:me,co2Saved:we,avgScore:de,currentWeekScans:Le,streakDays:ke,totalPoints:Be,recipesViewed:Ae.recipesViewed}))},[i,r,e]);const[I,R]=E.useState([]),[$,z]=E.useState({}),[W,M]=E.useState("all"),[F,B]=E.useState("all"),[J,U]=E.useState("all"),[H,q]=E.useState("all"),[oe,ve]=E.useState("insights"),[se,V]=D.useState(!0);D.useEffect(()=>{let me=()=>{},we=()=>{},de=()=>{};if(!e){V(!1),R([]),z({}),M("all"),B("all"),l({totalPoints:0,level:0,totalScans:0,avgScore:0,co2Saved:0,rank:0,badges:0,weeklyGoal:0,currentWeekScans:0,streakDays:0,coursesCompleted:0,recipesViewed:0,transportTrips:0,esgReports:0,investmentsMade:0,totalCarbonFootprint:0,monthlyReduction:0,carbonGoal:0,maxSustainabilityScore:1e3,weeklyFootprint:[0,0,0,0,0,0,0],categoryBreakdown:{transport:0,energy:0,food:0,waste:0},topCategory:"none",monthlyTrend:0,achievements:[],sustainabilityScore:0,goals:[],communityHelpCount:0}),n([]),s([]);return}V(!0);const xe=Re(Ne,"users",e.uid),De=gt(xe,"carbonEntries"),Le=gt(xe,"scannedProducts");return me=On(xe,$e=>{if(console.log("UserDataContext: user stats snapshot received",$e.data()),$e.exists()){const ke=$e.data();console.log("Fetched recipesViewed from Firestore:",ke.recipesViewed);const Be=[{id:1,name:"Green Streak Master",description:"12 consecutive days",icon:hr,color:"yellow"},{id:2,name:"Carbon Reducer",description:"Saved 67.8kg CO",icon:dt,color:"green"},{id:3,name:"AI Collaborator",description:"92% recommendation accuracy",icon:ha,color:"blue"}];l(Ae=>({...Ae,totalPoints:Number(ke.totalPoints)||0,level:Number(ke.level)||0,totalScans:Number(ke.totalScans)||0,avgScore:Number(ke.avgScore)||0,co2Saved:Number(ke.co2Saved)||0,rank:Number(ke.rank)||0,badges:Number(ke.badges)||0,weeklyGoal:Number(ke.weeklyGoal)||0,currentWeekScans:Number(ke.currentWeekScans)||0,streakDays:Number(ke.streakDays)||0,coursesCompleted:Number(ke.coursesCompleted)||0,recipesViewed:typeof ke.recipesViewed=="number"?ke.recipesViewed:0,transportTrips:Number(ke.transportTrips)||0,esgReports:Number(ke.esgReports)||0,investmentsMade:Number(ke.investmentsMade)||0,monthlyReduction:Number(ke.monthlyReduction)||0,carbonGoal:Number(ke.carbonGoal)||0,maxSustainabilityScore:Number(ke.maxSustainabilityScore)||1e3,weeklyFootprint:Array.isArray(ke.weeklyFootprint)?ke.weeklyFootprint.map(Number).filter(ir=>!isNaN(ir)):[0,0,0,0,0,0,0],categoryBreakdown:ke.categoryBreakdown||{transport:0,energy:0,food:0,waste:0},topCategory:ke.topCategory||"none",monthlyTrend:Number(ke.monthlyTrend)||0,sustainabilityScore:Number(ke.sustainabilityScore)||0,achievements:Array.isArray(ke.achievements)&&ke.achievements.length>0?ke.achievements:Be,goals:ke.goals??[]}))}else if(e){const ke={totalPoints:0,level:1,totalScans:0,avgScore:0,co2Saved:0,rank:0,badges:0,weeklyGoal:75,currentWeekScans:0,streakDays:0,coursesCompleted:0,recipesViewed:0,transportTrips:0,esgReports:0,goals:[],investmentsMade:0,monthlyReduction:0,carbonGoal:0,maxSustainabilityScore:1e3,weeklyFootprint:[0,0,0,0,0,0,0],categoryBreakdown:{transport:0,energy:0,food:0,waste:0},topCategory:"none",achievements:[],monthlyTrend:0,sustainabilityScore:0,totalCarbonFootprint:0,communityHelpCount:0};Zt(xe,ke).then(()=>l(ke)).catch(Be=>console.error("Error setting initial user stats:",Be))}else console.error("Cannot set initial user stats: no authenticated user");V(!1)},$e=>{console.error("Error fetching user stats:",$e),V(!1)}),we=On(De,$e=>{const ke=$e.docs.map(Be=>({id:Be.id,...Be.data()}));n(ke)},$e=>{console.error("Error fetching carbon entries:",$e)}),de=On(Le,$e=>{const ke={};$e.docs.forEach(Be=>{var ir;const Ae={...Be.data(),date:((ir=Be.data().timestamp)==null?void 0:ir.toDate().toISOString())||new Date().toISOString()};Ae.source==="ProductScanner"&&(!ke[Ae.id]||new Date(Ae.date)>new Date(ke[Ae.id].date||0))&&(ke[Ae.id]=Ae)}),s(Object.values(ke).sort((Be,Ae)=>new Date(Ae.date).getTime()-new Date(Be.date).getTime()))},$e=>{console.error("Error fetching scanned products:",$e)}),()=>{me(),we(),de()}},[e]),D.useEffect(()=>{},[e]),D.useEffect(()=>{const me=de=>{const xe={};for(const De in de)if(de.hasOwnProperty(De)){const Le=de[De],{icon:$e,...ke}=Le.recommendation||{};xe[De]={...Le,recommendation:ke}}return xe},we=de=>{if(de===void 0)return null;if(de===null||typeof de!="object")return de;if(Array.isArray(de))return de.map(De=>we(De));const xe={};for(const De in de)de.hasOwnProperty(De)&&(xe[De]=we(de[De]));return xe};if(e){const de=Re(Ne,"users",e.uid),xe=me($),De=we({completedActions:I,actionProgress:xe,selectedAICategory:W,selectedAIPriority:F,selectedCategory:J,selectedPriority:H,selectedTab:oe});console.log("Saving AI Recommendations state to Firestore:",De),cr(de,De).then(()=>{console.log("Successfully saved AI Recommendations state to Firestore")}).catch(Le=>{console.error("Error saving AI Recommendations state to Firestore:",Le),console.error("Error details:",JSON.stringify(Le,Object.getOwnPropertyNames(Le)))})}localStorage.setItem("completedActions",JSON.stringify(I)),localStorage.setItem("actionProgress",JSON.stringify($)),localStorage.setItem("selectedAICategory",W),localStorage.setItem("selectedAIPriority",F),localStorage.setItem("selectedCategory",J),localStorage.setItem("selectedPriority",H),localStorage.setItem("selectedTab",oe)},[I,$,W,F,J,H,oe]),D.useEffect(()=>{e||(R([]),z({}),M("all"),B("all"),U("all"),q("all"),localStorage.removeItem("completedActions"),localStorage.removeItem("actionProgress"),localStorage.removeItem("selectedAICategory"),localStorage.removeItem("selectedAIPriority"),localStorage.removeItem("selectedCategory"),localStorage.removeItem("selectedPriority"))},[e]),D.useEffect(()=>{localStorage.setItem("completedActions",JSON.stringify(I)),localStorage.setItem("actionProgress",JSON.stringify($))},[I,$]),D.useEffect(()=>{e||(R([]),z({}),M("all"),B("all"),U("all"),q("all"))},[e]);const X=async me=>{var we;if(e){const de=Re(Ne,"users",e.uid);try{const xe={...me,achievements:((we=me.achievements)==null?void 0:we.map(({icon:De,...Le})=>Le))||[]};Object.keys(xe).forEach(De=>{xe[De]===void 0&&(xe[De]=null)}),await cr(de,{...xe})}catch(xe){console.error("Error updating user stats:",xe)}}},ee=async me=>{if(e){const we=Re(Ne,"users",e.uid),de=gt(we,"carbonEntries");try{const xe=await Rd(de,{...me,date:new Date().toISOString()});n(Le=>[{id:xe.id,...me,date:new Date().toISOString()},...Le]);const De={...a,co2Saved:(a.co2Saved||0)+me.amount,totalPoints:(a.totalPoints||0)+Math.floor(me.amount*10),currentWeekScans:(a.currentWeekScans||0)+1};l(De),X(De)}catch(xe){console.error("Error adding carbon entry:",xe)}}},ue=async me=>{if(e){const we=Re(Ne,"users",e.uid),de=gt(we,"scannedProducts");try{const xe=await Sr(Nc(de,Zae("id","==",me.id)));if(xe.empty)await Rd(de,{...me,alternatives:me.alternatives||[],source:me.source||"ProductScanner",date:new Date().toISOString(),timestamp:Nv()});else{const Le=xe.docs[0].ref,$e={...me};Object.keys($e).forEach(ke=>{$e[ke]===void 0&&($e[ke]=null)}),await cr(Le,{...$e,alternatives:me.alternatives||[],source:me.source||"ProductScanner",timestamp:Nv()})}const De={...a,totalScans:(a.totalScans||0)+1,avgScore:(a.totalScans||0)===0?me.sustainabilityScore:Math.round(((a.avgScore||0)*(a.totalScans||0)+me.sustainabilityScore)/((a.totalScans||0)+1)),totalPoints:(a.totalPoints||0)+Math.floor(me.sustainabilityScore/10),currentWeekScans:(a.currentWeekScans||0)+1};l(De),X(De)}catch(xe){console.error("Error adding scanned product:",xe)}}},ge=async me=>{if(e){const we=Re(Ne,"users",e.uid);try{const de=await Zo(we);if(de.exists()){const xe=de.data(),$e=[...(xe==null?void 0:xe.cart)||[],me].map(ke=>{const Be={...ke};return Object.keys(Be).forEach(Ae=>{Be[Ae]===void 0&&(Be[Ae]=null)}),Be});await cr(we,{cart:$e})}}catch(de){console.error("Error adding product to cart:",de)}}},K=async me=>{const we={...a,totalPoints:(a.totalPoints||0)+me};l(de=>({...de,totalPoints:(de.totalPoints||0)+me})),X(we)},G=async me=>{if((a.totalPoints||0)>=me){const we={...a,totalPoints:(a.totalPoints||0)-me};return l(we),await X(we),!0}return!1},he=async(me,we)=>{console.log("Incrementing user stat: ${stat} by ${points}");const de=typeof a[me]=="number"?a[me]+1:1,xe={...a,[me]:de,totalPoints:typeof a.totalPoints=="number"?a.totalPoints+we:we};console.log("Updated stats before Firestore update:",xe),l(xe);try{if(e){const De=Re(Ne,"users",e.uid);await cr(De,{[me]:de,totalPoints:xe.totalPoints}),console.log("Successfully updated user stat field in Firestore");const Le=await Zo(De);Le.exists()?console.log("Verified updated user stat in Firestore:",Le.data()):console.warn("User document not found after update")}}catch(De){console.error("Error updating user stat field in Firestore:",De)}},_e=()=>{he("coursesCompleted",50)},qe=async()=>{if(e)try{const me=Re(Ne,"users",e.uid);await cr(me,{recipesViewed:tR(1),totalPoints:tR(10)}),l(we=>({...we,recipesViewed:(we.recipesViewed||0)+1,totalPoints:(we.totalPoints||0)+10})),console.log("Successfully incremented recipesViewed and totalPoints in Firestore")}catch(me){console.error("Error incrementing recipesViewed in Firestore:",me)}},Kt=()=>{he("transportTrips",20)};return o.jsx(tV.Provider,{value:{carbonEntries:r,scannedProducts:i,userStats:a,completedActions:I,actionProgress:$,setCompletedActions:R,setActionProgress:z,selectedAICategory:W,selectedAIPriority:F,setSelectedAICategory:M,setSelectedAIPriority:B,selectedCategory:J,setSelectedCategory:U,selectedPriority:H,setSelectedPriority:q,selectedTab:oe,setSelectedTab:ve,enrolledCourses:c,courseProgress:h,enrollInCourse:N,updateCourseProgress:C,likedArticles:f,bookmarkedArticles:g,registeredWebinars:y,likeArticle:_,bookmarkArticle:T,registerWebinar:j,addCarbonEntry:ee,addScannedProduct:ue,addPoints:K,redeemReward:G,addToCart:ge,incrementCourseCompleted:_e,incrementRecipeViewed:qe,incrementTransportTrip:Kt,loading:se},children:t})},Xn=()=>{const t=E.useContext(tV);if(t===void 0)throw new Error("useUserData must be used within a UserDataProvider");return t},nV=E.createContext(void 0),iV=({children:t})=>{const[e,r]=E.useState([]),[n,i]=E.useState(!0),{user:s}=wr(),{toast:a}=Ks(),{addPoints:l}=Xn();E.useEffect(()=>{let f;if(s&&s.uid){console.log(`Subscribing to cart for user ${s.uid}`);const m=Re(Ne,"users",s.uid,"cart","items");i(!0),f=On(m,g=>{if(g.exists()){const v=g.data();console.log("Cart data received:",v),v&&Array.isArray(v.items)?r(v.items):r([])}else console.log("Cart document does not exist, initializing empty cart"),r([]);i(!1)},g=>{console.error("Error fetching cart data:",g),r([]),i(!1),a({title:"Error loading cart",description:"Could not load your cart data.",variant:"destructive"})})}else console.log("No user logged in, clearing cart"),r([]),i(!1);return()=>{f&&(console.log("Unsubscribing from cart"),f())}},[s,a]);const c=async f=>{if(!s||!s.uid){a({title:"Login Required",description:"Please log in to add items to your cart.",variant:"destructive"});return}try{console.log(`Adding product ${f.id} to cart for user ${s.uid}`);const m=Re(Ne,"users",s.uid,"cart","items"),g=await Zo(m);let v=[];g.exists()&&Array.isArray(g.data().items)?v=g.data().items:(console.log("Cart document does not exist or items field missing, initializing empty cart"),await Zt(m,{items:[]},{merge:!0}),v=[]);const y=v.findIndex(b=>b.id===f.id);let x;y>-1?(x=[...v],x[y].quantity+=1):x=[...v,{id:f.id,quantity:1,name:f.name,price:f.price,image:f.image,brand:null}],await Zt(m,{items:x},{merge:!0}),console.log("Cart updated successfully"),l(10),a({title:"Added to Cart!",description:`${f.name} added to cart. You earned 10 points!`})}catch(m){console.error("Error adding to cart:",m),a({title:"Error adding to cart",description:"Could not add the product to your cart. Please try again.",variant:"destructive"})}},u=async f=>{if(!s||!s.uid){a({title:"Login Required",description:"Please log in to manage your cart.",variant:"destructive"});return}try{const m=Re(Ne,"users",s.uid,"cart","items"),g=await Zo(m);let v=[];g.exists()&&Array.isArray(g.data().items)?v=g.data().items:(await cr(m,{items:[]}),v=[]);const y=v.filter(x=>x.id!==f);await Zt(m,{items:y},{merge:!0}),a({title:"Removed from Cart",description:"Product removed from your cart."})}catch(m){console.error("Error removing from cart:",m),a({title:"Error removing from cart",description:"Could not remove the product from your cart. Please try again.",variant:"destructive"})}},h=async(f,m)=>{if(!s||!s.uid){a({title:"Login Required",description:"Please log in to update your cart.",variant:"destructive"});return}if(m<=0){u(f);return}try{const g=Re(Ne,"users",s.uid,"cart","items"),v=await Zo(g);let y=[];v.exists()&&Array.isArray(v.data().items)?y=v.data().items:(await Zt(g,{items:[]},{merge:!0}),y=[]);const x=y.findIndex(b=>b.id===f);if(x>-1){const b=[...y];b[x].quantity=m,await Zt(g,{items:b},{merge:!0})}else console.warn(`Attempted to update quantity for product ${f} not found in cart.`)}catch(g){console.error("Error updating quantity:",g),a({title:"Error updating quantity",description:"Could not update the product quantity. Please try again.",variant:"destructive"})}},d=async()=>{if(!s||!s.uid){a({title:"Login Required",description:"Please log in to clear your cart.",variant:"destructive"});return}try{console.log(`Clearing cart for user ${s.uid}`);const f=Re(Ne,"users",s.uid,"cart","items");await Zt(f,{items:[]},{merge:!0}),console.log("Cart cleared successfully"),a({title:"Cart Cleared",description:"Your shopping cart has been cleared."})}catch(f){console.error("Error clearing cart:",f),a({title:"Error clearing cart",description:"Could not clear your cart. Please try again.",variant:"destructive"})}};return o.jsx(nV.Provider,{value:{cartItems:e,addToCart:c,removeFromCart:u,updateQuantity:h,clearCart:d,loadingCart:n},children:t})},Ph=()=>{const t=E.useContext(nV);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},sV=E.createContext(void 0),Ya=()=>{const t=E.useContext(sV);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},Jce=({children:t})=>{const{currentUser:e}=wr(),[r,n]=E.useState([]),[i,s]=E.useState(0),[a,l]=E.useState(!0),{isLoading:c}=wr();E.useEffect(()=>{if(c){l(!0);return}if(!e){console.info("No currentUser found in NotificationsContextNew, clearing notifications."),n([]),s(0);return}l(!0),console.log("Setting up notifications listener for user:",e.uid);let g;return(async()=>{const y=Re(Ne,"users",e.uid),x=gt(y,"notifications"),b=Nc(x,Od("timestamp","desc"),eoe(50));try{const w=await Sr(b),k=[];let S=0;w.forEach(P=>{const N=P.data();k.push({id:P.id,...N}),N.read||S++}),n(k),s(S),l(!1),g=On(b,P=>{const N=[];let _=0;P.forEach(T=>{const j=T.data();N.push({id:T.id,...j}),j.read||_++}),n(N),s(_)},P=>{P.code==="permission-denied"?(console.warn("Firestore permission denied for notifications:",P.message),n([]),s(0)):console.error("Error fetching notifications from Firestore:",P)})}catch(w){console.error("Unexpected error setting up notifications listener:",w),n([]),s(0),l(!1)}})(),()=>{g&&g()}},[e,c]);const m={notifications:r,unreadCount:i,addNotification:async g=>{if(!e)return;const v=Re(Ne,"users",e.uid),y=gt(v,"notifications"),{icon:x,...b}=g;try{await Rd(y,{...b,timestamp:new Date,read:!1})}catch(w){console.error("Error adding notification to Firestore:",w)}},markAsRead:async g=>{if(!e)return;const v=Re(Ne,"users",e.uid),y=Re(v,"notifications",g);try{await cr(y,{read:!0})}catch(x){console.error("Error marking notification as read in Firestore:",x)}},markAllAsRead:async()=>{if(!e)return;const g=Re(Ne,"users",e.uid),v=gt(g,"notifications");try{const x=(await Sr(v)).docs.map(b=>cr(b.ref,{read:!0}));await Promise.all(x)}catch(y){console.error("Error marking all notifications as read in Firestore:",y)}},clearAllNotifications:async()=>{if(!e)return;const g=Re(Ne,"users",e.uid),v=gt(g,"notifications");try{const y=await Sr(v),x=pu(Ne);y.docs.forEach(b=>{x.delete(b.ref)}),await x.commit()}catch(y){console.error("Error clearing all notifications in Firestore:",y)}},loading:a};return o.jsx(sV.Provider,{value:m,children:t})},re=E.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:vt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));re.displayName="Card";const je=E.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:vt("flex flex-col space-y-1.5 p-6",t),...e}));je.displayName="CardHeader";const Ce=E.forwardRef(({className:t,...e},r)=>o.jsx("h3",{ref:r,className:vt("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ce.displayName="CardTitle";const Zce=E.forwardRef(({className:t,...e},r)=>o.jsx("p",{ref:r,className:vt("text-sm text-muted-foreground",t),...e}));Zce.displayName="CardDescription";const ce=E.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:vt("p-6 pt-0",t),...e}));ce.displayName="CardContent";const eue=E.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:vt("flex items-center p-6 pt-0",t),...e}));eue.displayName="CardFooter";const tue=cb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Q=E.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},s)=>{const a=n?md:"button";return o.jsx(a,{className:vt(tue({variant:e,size:r,className:t})),ref:s,...i})});Q.displayName="Button";const st=E.forwardRef(({className:t,type:e,...r},n)=>o.jsx("input",{type:e,className:vt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));st.displayName="Input";function rue(t,e=[]){let r=[];function n(s,a){const l=E.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:f,children:m,...g}=d,v=(f==null?void 0:f[t][c])||l,y=E.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:m})}function h(d,f){const m=(f==null?void 0:f[t][c])||l,g=E.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(l){const c=(l==null?void 0:l[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,nue(i,...e)]}function nue(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var iue=E.createContext(void 0);function aV(t){const e=E.useContext(iue);return t||e||"ltr"}var h_="rovingFocusGroup.onEntryFocus",sue={bubbles:!1,cancelable:!0},tw="RovingFocusGroup",[Hk,oV,aue]=P$(tw),[oue,lV]=rue(tw,[aue]),[lue,cue]=oue(tw),cV=E.forwardRef((t,e)=>o.jsx(Hk.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Hk.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(uue,{...t,ref:e})})}));cV.displayName=tw;var uue=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...d}=t,f=E.useRef(null),m=yn(e,f),g=aV(s),[v=null,y]=sb({prop:a,defaultProp:l,onChange:c}),[x,b]=E.useState(!1),w=Qn(u),k=oV(r),S=E.useRef(!1),[P,N]=E.useState(0);return E.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(h_,w),()=>_.removeEventListener(h_,w)},[w]),o.jsx(lue,{scope:r,orientation:n,dir:g,loop:i,currentTabStopId:v,onItemFocus:E.useCallback(_=>y(_),[y]),onItemShiftTab:E.useCallback(()=>b(!0),[]),onFocusableItemAdd:E.useCallback(()=>N(_=>_+1),[]),onFocusableItemRemove:E.useCallback(()=>N(_=>_-1),[]),children:o.jsx(mt.div,{tabIndex:x||P===0?-1:0,"data-orientation":n,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:ht(t.onMouseDown,()=>{S.current=!0}),onFocus:ht(t.onFocus,_=>{const T=!S.current;if(_.target===_.currentTarget&&T&&!x){const j=new CustomEvent(h_,sue);if(_.currentTarget.dispatchEvent(j),!j.defaultPrevented){const C=k().filter(W=>W.focusable),I=C.find(W=>W.active),R=C.find(W=>W.id===v),z=[I,R,...C].filter(Boolean).map(W=>W.ref.current);hV(z,h)}}S.current=!1}),onBlur:ht(t.onBlur,()=>b(!1))})})}),uV="RovingFocusGroupItem",dV=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:s,...a}=t,l=im(),c=s||l,u=cue(uV,r),h=u.currentTabStopId===c,d=oV(r),{onFocusableItemAdd:f,onFocusableItemRemove:m}=u;return E.useEffect(()=>{if(n)return f(),()=>m()},[n,f,m]),o.jsx(Hk.ItemSlot,{scope:r,id:c,focusable:n,active:i,children:o.jsx(mt.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ht(t.onMouseDown,g=>{n?u.onItemFocus(c):g.preventDefault()}),onFocus:ht(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ht(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=fue(g,u.orientation,u.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=d().filter(b=>b.focusable).map(b=>b.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const b=x.indexOf(g.currentTarget);x=u.loop?mue(x,b+1):x.slice(b+1)}setTimeout(()=>hV(x))}})})})});dV.displayName=uV;var due={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hue(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function fue(t,e,r){const n=hue(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return due[n]}function hV(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function mue(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var pue=cV,gue=dV,gC="Tabs",[yue,V3e]=eg(gC,[lV]),fV=lV(),[vue,yC]=yue(gC),mV=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=aV(l),[d,f]=sb({prop:n,onChange:i,defaultProp:s});return o.jsx(vue,{scope:r,baseId:im(),value:d,onValueChange:f,orientation:a,dir:h,activationMode:c,children:o.jsx(mt.div,{dir:h,"data-orientation":a,...u,ref:e})})});mV.displayName=gC;var pV="TabsList",gV=E.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...i}=t,s=yC(pV,r),a=fV(r);return o.jsx(pue,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:n,children:o.jsx(mt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});gV.displayName=pV;var yV="TabsTrigger",vV=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...s}=t,a=yC(yV,r),l=fV(r),c=wV(a.baseId,n),u=_V(a.baseId,n),h=n===a.value;return o.jsx(gue,{asChild:!0,...l,focusable:!i,active:h,children:o.jsx(mt.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:ht(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?a.onValueChange(n):d.preventDefault()}),onKeyDown:ht(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(n)}),onFocus:ht(t.onFocus,()=>{const d=a.activationMode!=="manual";!h&&!i&&d&&a.onValueChange(n)})})})});vV.displayName=yV;var xV="TabsContent",bV=E.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:i,children:s,...a}=t,l=yC(xV,r),c=wV(l.baseId,n),u=_V(l.baseId,n),h=n===l.value,d=E.useRef(h);return E.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),o.jsx(Lc,{present:i||h,children:({present:f})=>o.jsx(mt.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});bV.displayName=xV;function wV(t,e){return`${t}-trigger-${e}`}function _V(t,e){return`${t}-content-${e}`}var xue=mV,SV=gV,kV=vV,NV=bV;const Jn=xue,Zn=E.forwardRef(({className:t,grid:e=!1,...r},n)=>o.jsx(SV,{ref:n,className:vt(e?"grid w-full grid-cols-3 lg:grid-cols-6 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground":"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));Zn.displayName=SV.displayName;const Xe=E.forwardRef(({className:t,...e},r)=>o.jsx(kV,{ref:r,className:vt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Xe.displayName=kV.displayName;const Oe=E.forwardRef(({className:t,...e},r)=>o.jsx(NV,{ref:r,className:vt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Oe.displayName=NV.displayName;const bue=cb("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ne({className:t,variant:e,...r}){return o.jsx("div",{className:vt(bue({variant:e}),t),...r})}const Mv=({onNavigate:t,activeTab:e,toggleLoginForm:r,cartItems:n=[],updateCartItem:i,removeFromCart:s,clearCart:a})=>{const[l,c]=E.useState(!1),[u,h]=E.useState(null),[d,f]=E.useState(!1),[m,g]=E.useState(!1),{theme:v,toggleTheme:y}=XZ(),{unreadCount:x}=Ya(),{user:b,logout:w}=wr(),k=n.reduce(($,z)=>$+z.quantity,0),S=n.reduce(($,z)=>{const W=typeof z.price=="number"?z.price:0;return $+W*z.quantity},0),P=[{id:"scanner",label:"AI Scanner",icon:Go},{id:"chatbot",label:"EcoBot Assistant",icon:ay},{id:"carbon-tracker",label:"Carbon Tracker",icon:vr},{id:"ai-recommendations",label:"AI Recommendations",icon:ha}],N=[{id:"marketplace",label:"Marketplace",icon:fn},{id:"community",label:"Community",icon:Wm},{id:"education",label:"Education",icon:Ho},{id:"rewards",label:"Rewards",icon:nm}],_=[{id:"smart-insights",label:"Smart Insights",icon:vn},{id:"comparison",label:"Product Comparison",icon:vd}],T=[{id:"recipe-finder",label:"Eco Recipes",icon:Yy},{id:"transportation-planner",label:"Transport Planner",icon:Ff},{id:"lifecycle",label:"Product Lifecycle",icon:vd}],j=()=>{w(),f(!1)},C=()=>{g(!m),h(null),f(!1)},I=($,z)=>{z<=0?s==null||s($):i==null||i($,z)},R=()=>{t("checkout"),g(!1)};return E.useEffect(()=>{const $=z=>{z.target.closest(".dropdown-container")||(h(null),f(!1),g(!1))};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]),E.useEffect(()=>{h(null),f(!1),g(!1)},[e]),o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-100 shadow-sm dark:bg-gray-900/95 dark:border-gray-800",children:o.jsxs("div",{className:"container mx-auto px-4 h-20",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer group min-w-[160px]",onClick:()=>t("home"),children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 via-green-600 to-teal-600 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-emerald-400/50 transition-all duration-700 group-hover:scale-110 group-hover:rotate-12 animate-float",children:o.jsx(dt,{className:"w-6 h-6 text-white transform group-hover:scale-110 transition-all duration-700"})}),o.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-emerald-400 to-teal-400 rounded-xl blur opacity-0 group-hover:opacity-40 transition-all duration-700 animate-pulse-glow"})]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-emerald-700 via-green-600 to-teal-600 bg-clip-text text-transparent group-hover:from-emerald-600 group-hover:via-green-500 group-hover:to-teal-500 transition-all duration-700 animate-gradient-x",children:"EcoScope"}),o.jsx("p",{className:"text-xs text-gray-500 group-hover:text-emerald-600 transition-colors duration-500 dark:text-gray-400",children:"Sustainability"})]})]}),o.jsxs("div",{className:"hidden lg:flex items-center space-x-1 flex-1 justify-center max-w-4xl",children:[P.slice(0,4).map($=>o.jsxs(Q,{variant:e===$.id?"default":"ghost",size:"sm",className:`px-3 py-2 text-sm h-9 transition-all duration-200 ${e===$.id?"bg-emerald-600 text-white hover:bg-emerald-700 shadow-md":"text-gray-700 hover:text-emerald-600 hover:bg-emerald-50 dark:text-gray-300 dark:hover:text-emerald-400 dark:hover:bg-emerald-900/20"}`,onClick:()=>t($.id),children:[o.jsx($.icon,{className:"w-4 h-4 mr-2"}),$.label]},$.id)),o.jsxs("div",{className:"relative dropdown-container",children:[o.jsxs(Q,{variant:"ghost",size:"sm",className:"px-3 py-2 text-sm text-gray-700 hover:text-emerald-600 hover:bg-emerald-50 h-9 transition-all duration-200 dark:text-gray-300 dark:hover:text-emerald-400 dark:hover:bg-emerald-900/20",onMouseEnter:()=>h("smart-tools"),onMouseLeave:()=>h(null),children:["Smart Tools",o.jsx(V1,{className:"w-3 h-3 ml-1"})]}),u==="smart-tools"&&o.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-xl shadow-2xl z-50 animate-fade-in dark:bg-gray-800 dark:border-gray-700",onMouseEnter:()=>h("smart-tools"),onMouseLeave:()=>h(null),children:o.jsx("div",{className:"p-3 space-y-1",children:_.map($=>o.jsxs(Q,{variant:"ghost",size:"sm",className:`w-full justify-start px-3 py-2 text-sm h-9 transition-all duration-200 rounded-lg ${e===$.id?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-200":"text-gray-600 hover:bg-gray-50 hover:text-emerald-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-emerald-400"}`,onClick:()=>{t($.id),h(null)},children:[o.jsx($.icon,{className:"w-4 h-4 mr-3"}),$.label]},$.id))})})]}),o.jsxs("div",{className:"relative dropdown-container",children:[o.jsxs(Q,{variant:"ghost",size:"sm",className:"px-3 py-2 text-sm text-gray-700 hover:text-emerald-600 hover:bg-emerald-50 h-9 transition-all duration-200 dark:text-gray-300 dark:hover:text-emerald-400 dark:hover:bg-emerald-900/20",onMouseEnter:()=>h("more"),onMouseLeave:()=>h(null),children:["More",o.jsx(V1,{className:"w-3 h-3 ml-1"})]}),u==="more"&&o.jsx("div",{className:"absolute top-full left-0 mt-1 w-72 bg-white border border-gray-200 rounded-xl shadow-2xl z-50 max-h-96 overflow-y-auto animate-fade-in dark:bg-gray-800 dark:border-gray-700",onMouseEnter:()=>h("more"),onMouseLeave:()=>h(null),children:o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-emerald-700 uppercase tracking-wide border-b border-emerald-100 dark:text-emerald-400 dark:border-emerald-800",children:"Main Features"}),o.jsx("div",{className:"mt-2 space-y-1",children:N.map($=>o.jsxs(Q,{variant:e===$.id?"default":"ghost",size:"sm",className:`w-full justify-start px-3 py-2 text-sm h-9 transition-all duration-200 rounded-lg ${e===$.id?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-200":"text-gray-600 hover:bg-gray-50 hover:text-emerald-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-emerald-400"}`,onClick:()=>{t($.id),h(null)},children:[o.jsx($.icon,{className:"w-4 h-4 mr-3"}),$.label]},$.id))})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-emerald-700 uppercase tracking-wide border-b border-emerald-100 dark:text-emerald-400 dark:border-emerald-800",children:"Lifestyle"}),o.jsx("div",{className:"mt-2 space-y-1",children:T.map($=>o.jsxs(Q,{variant:e===$.id?"default":"ghost",size:"sm",className:`w-full justify-start pl-6 transition-all duration-200 rounded-lg ${e===$.id?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-200":"text-gray-600 hover:bg-gray-50 hover:text-emerald-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-emerald-400"}`,onClick:()=>{t($.id),h(null)},children:[o.jsx($.icon,{className:"w-4 h-4 mr-3"}),$.label]},$.id))})]})]})})]})]}),o.jsxs("div",{className:"hidden lg:flex items-center space-x-4 min-w-[200px] justify-end",children:[o.jsxs("div",{className:"relative dropdown-container",children:[o.jsxs(Q,{variant:"ghost",size:"sm",className:"p-2 hover:bg-emerald-50 transition-colors duration-200 rounded-lg dark:hover:bg-emerald-900/20 relative",onClick:C,children:[o.jsx(fn,{className:"w-5 h-5"}),k>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:k>99?"99+":k})]}),m&&o.jsxs("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white border border-gray-200 rounded-xl shadow-2xl z-50 max-h-96 overflow-hidden dark:bg-gray-800 dark:border-gray-700",children:[o.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-600",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Shopping Cart"}),n.length>0&&o.jsxs(Q,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",onClick:()=>a==null?void 0:a(),children:[o.jsx(tg,{className:"w-4 h-4 mr-1"}),"Clear"]})]})}),o.jsx("div",{className:"max-h-64 overflow-y-auto",children:n.length===0?o.jsxs("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[o.jsx(fn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"Your cart is empty"}),o.jsx(Q,{size:"sm",className:"mt-3 bg-emerald-600 hover:bg-emerald-700",onClick:()=>{t("marketplace"),g(!1)},children:"Browse Products"})]}):o.jsx("div",{className:"p-2",children:n.map($=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[o.jsx("img",{src:$.image||"/api/placeholder/40/40",alt:$.name,className:"w-10 h-10 rounded-lg object-cover"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:$.name}),o.jsxs("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:["$",typeof $.price=="number"?$.price.toFixed(2):"N/A"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Q,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-600",onClick:()=>I($.id,$.quantity-1),children:o.jsx(kE,{className:"w-3 h-3"})}),o.jsx("span",{className:"text-sm font-medium w-8 text-center",children:$.quantity}),o.jsx(Q,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-600",onClick:()=>I($.id,$.quantity+1),children:o.jsx(es,{className:"w-3 h-3"})})]})]},$.id))})}),n.length>0&&o.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-600",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Total:"}),o.jsxs("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:["$",S.toFixed(2)]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Q,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:R,children:"Checkout"}),o.jsx(Q,{variant:"outline",className:"w-full",onClick:()=>{t("marketplace"),g(!1)},children:"Continue Shopping"})]})]})]})]}),o.jsxs(Q,{variant:"ghost",size:"sm",className:"p-2 hover:bg-emerald-50 transition-colors duration-200 rounded-lg dark:hover:bg-emerald-900/20 relative",onClick:()=>t("notifications"),children:[o.jsx(Wo,{className:"w-5 h-5"}),x>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:x>99?"99+":x})]}),o.jsx(Q,{variant:"ghost",size:"sm",className:"p-2 hover:bg-emerald-50 transition-colors duration-200 rounded-lg dark:hover:bg-emerald-900/20",onClick:y,children:v==="dark"?o.jsx(qS,{className:"w-5 h-5"}):o.jsx(KP,{className:"w-5 h-5"})}),b?o.jsxs("div",{className:"relative dropdown-container",children:[o.jsxs(Q,{variant:"ghost",size:"sm",className:"flex items-center space-x-2 p-2 hover:bg-emerald-50 transition-colors duration-200 rounded-lg dark:hover:bg-emerald-900/20",onClick:()=>f(!d),children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-400 to-green-500 rounded-full flex items-center justify-center",children:o.jsx(Cs,{className:"w-4 h-4 text-white"})}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:b.name}),o.jsx(V1,{className:"w-4 h-4"})]}),d&&o.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white border border-gray-200 rounded-xl shadow-lg z-50 dark:bg-gray-800 dark:border-gray-700",children:o.jsxs("div",{className:"p-2",children:[o.jsxs(Q,{variant:"ghost",size:"sm",className:"w-full justify-start text-left p-3 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>{t("profile"),f(!1)},children:[o.jsx(Cs,{className:"w-4 h-4 mr-3"}),"View Profile"]}),o.jsxs(Q,{variant:"ghost",size:"sm",className:"w-full justify-start text-left p-3 hover:bg-red-50 text-red-600 dark:hover:bg-red-400 dark:hover:bg-red-900/20",onClick:j,children:[o.jsx(GS,{className:"w-4 h-4 mr-3"}),"Logout"]})]})})]}):r&&o.jsx(Q,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-sm px-4 h-9 shadow-lg hover:shadow-xl transition-all duration-200",onClick:()=>{b?t("scanner"):r&&r()},children:"Get Started"})]}),o.jsxs("div",{className:"lg:hidden flex items-center space-x-4",children:[o.jsxs(Q,{variant:"ghost",size:"sm",className:"p-2 hover:bg-emerald-50 transition-colors duration-200 rounded-lg dark:hover:bg-emerald-900/20 relative",onClick:C,children:[o.jsx(fn,{className:"w-5 h-5"}),k>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:k>99?"99+":k})]}),o.jsxs(Q,{variant:"ghost",size:"sm",className:"p-2 hover:bg-emerald-50 transition-colors duration-200 rounded-lg dark:hover:bg-emerald-900/20 relative",onClick:()=>t("notifications"),children:[o.jsx(Wo,{className:"w-5 h-5"}),x>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:x>99?"99+":x})]}),o.jsx(Q,{variant:"ghost",size:"sm",className:"p-2 hover:bg-emerald-50 transition-colors duration-200 rounded-lg dark:hover:bg-emerald-900/20",onClick:y,children:v==="dark"?o.jsx(qS,{className:"w-5 h-5"}):o.jsx(KP,{className:"w-5 h-5"})}),b?o.jsx(Q,{variant:"ghost",size:"sm",className:"p-2 hover:bg-emerald-50 transition-colors duration-200 rounded-lg dark:hover:bg-emerald-900/20",onClick:()=>t("profile"),children:o.jsx(Cs,{className:"w-5 h-5"})}):r&&o.jsx(Q,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-700 text-sm px-4 h-9 shadow-lg hover:shadow-xl transition-all duration-200",onClick:r,children:"Get Started"})]}),o.jsx(Q,{variant:"ghost",size:"sm",className:"lg:hidden p-2",onClick:()=>c(!l),children:l?o.jsx(rg,{className:"w-5 h-5"}):o.jsx(DY,{className:"w-5 h-5"})})]}),l&&o.jsx("div",{className:"lg:hidden border-t border-gray-200 py-4 bg-white max-h-[80vh] overflow-y-auto animate-fade-in dark:bg-gray-900 dark:border-gray-700",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide dark:text-gray-400",children:"Quick Access"}),P.map($=>o.jsxs(Q,{variant:e===$.id?"default":"ghost",className:"w-full justify-start transition-all duration-200",onClick:()=>{t($.id),c(!1)},children:[o.jsx($.icon,{className:"w-4 h-4 mr-3"}),$.label]},$.id))]}),o.jsx("div",{className:"mb-4 px-4 space-y-2",children:o.jsxs(Q,{variant:"outline",className:"w-full justify-start relative",onClick:()=>{g(!0),c(!1)},children:[o.jsx(fn,{className:"w-4 h-4 mr-3"}),"Shopping Cart",k>0&&o.jsx("span",{className:"absolute right-3 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:k>99?"99+":k})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-emerald-700 uppercase tracking-wide border-b border-emerald-100 dark:text-emerald-400 dark:border-emerald-800",children:"Main Features"}),N.map($=>o.jsxs(Q,{variant:e===$.id?"default":"ghost",className:"w-full justify-start transition-all duration-200",onClick:()=>{t($.id),c(!1)},children:[o.jsx($.icon,{className:"w-4 h-4 mr-3"}),$.label]},$.id))]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-emerald-700 uppercase tracking-wide border-b border-emerald-100 dark:text-emerald-400 dark:border-emerald-800",children:"Smart Tools"}),_.map($=>o.jsxs(Q,{variant:e===$.id?"default":"ghost",className:"w-full justify-start pl-6 transition-all duration-200",onClick:()=>{t($.id),c(!1)},children:[o.jsx($.icon,{className:"w-4 h-4 mr-3"}),$.label]},$.id))]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-emerald-700 uppercase tracking-wide border-b border-emerald-100 dark:text-emerald-400 dark:border-emerald-800",children:"Lifestyle"}),T.map($=>o.jsxs(Q,{variant:e===$.id?"default":"ghost",className:"w-full justify-start pl-6 transition-all duration-200",onClick:()=>{t($.id),c(!1)},children:[o.jsx($.icon,{className:"w-4 h-4 mr-3"}),$.label]},$.id))]}),o.jsx("div",{className:"pt-4 border-t border-gray-200 space-y-2 dark:border-gray-700",children:b?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-4 py-2",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-400 to-green-500 rounded-full flex items-center justify-center",children:o.jsx(Cs,{className:"w-4 h-4 text-white"})}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:b.name})]})}),o.jsxs(Q,{variant:"ghost",className:"w-full justify-start",onClick:()=>{t("profile"),c(!1)},children:[o.jsx(Cs,{className:"w-4 h-4 mr-3"})," Profile"]}),o.jsxs(Q,{variant:"ghost",className:"w-full justify-start text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",onClick:j,children:[o.jsx(GS,{className:"w-4 h-4 mr-3"})," Logout"]})]}):r&&o.jsx(Q,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:r,children:"Get Started"})})]})})]})})};var f_="focusScope.autoFocusOnMount",m_="focusScope.autoFocusOnUnmount",$R={bubbles:!1,cancelable:!0},wue="FocusScope",jV=E.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[l,c]=E.useState(null),u=Qn(i),h=Qn(s),d=E.useRef(null),f=yn(e,v=>c(v)),m=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(n){let v=function(w){if(m.paused||!l)return;const k=w.target;l.contains(k)?d.current=k:mo(d.current,{select:!0})},y=function(w){if(m.paused||!l)return;const k=w.relatedTarget;k!==null&&(l.contains(k)||mo(d.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&mo(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),b.disconnect()}}},[n,l,m.paused]),E.useEffect(()=>{if(l){FR.add(m);const v=document.activeElement;if(!l.contains(v)){const x=new CustomEvent(f_,$R);l.addEventListener(f_,u),l.dispatchEvent(x),x.defaultPrevented||(_ue(Eue(EV(l)),{select:!0}),document.activeElement===v&&mo(l))}return()=>{l.removeEventListener(f_,u),setTimeout(()=>{const x=new CustomEvent(m_,$R);l.addEventListener(m_,h),l.dispatchEvent(x),x.defaultPrevented||mo(v??document.body,{select:!0}),l.removeEventListener(m_,h),FR.remove(m)},0)}}},[l,u,h,m]);const g=E.useCallback(v=>{if(!r&&!n||m.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(y&&x){const b=v.currentTarget,[w,k]=Sue(b);w&&k?!v.shiftKey&&x===k?(v.preventDefault(),r&&mo(w,{select:!0})):v.shiftKey&&x===w&&(v.preventDefault(),r&&mo(k,{select:!0})):x===b&&v.preventDefault()}},[r,n,m.paused]);return o.jsx(mt.div,{tabIndex:-1,...a,ref:f,onKeyDown:g})});jV.displayName=wue;function _ue(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(mo(n,{select:e}),document.activeElement!==r)return}function Sue(t){const e=EV(t),r=LR(e,t),n=LR(e.reverse(),t);return[r,n]}function EV(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function LR(t,e){for(const r of t)if(!kue(r,{upTo:e}))return r}function kue(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Nue(t){return t instanceof HTMLInputElement&&"select"in t}function mo(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Nue(t)&&e&&t.select()}}var FR=jue();function jue(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=VR(t,e),t.unshift(e)},remove(e){var r;t=VR(t,e),(r=t[0])==null||r.resume()}}}function VR(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function Eue(t){return t.filter(e=>e.tagName!=="A")}var p_=0;function Cue(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??BR()),document.body.insertAdjacentElement("beforeend",t[1]??BR()),p_++,()=>{p_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),p_--}},[])}function BR(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var wy="right-scroll-bar-position",_y="width-before-scroll-bar",Aue="with-scroll-bars-hidden",Tue="--removed-body-scroll-bar-size";function g_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Pue(t,e){var r=E.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var Iue=typeof window<"u"?E.useLayoutEffect:E.useEffect,UR=new WeakMap;function Oue(t,e){var r=Pue(null,function(n){return t.forEach(function(i){return g_(i,n)})});return Iue(function(){var n=UR.get(r);if(n){var i=new Set(n),s=new Set(t),a=r.current;i.forEach(function(l){s.has(l)||g_(l,null)}),s.forEach(function(l){i.has(l)||g_(l,a)})}UR.set(r,t)},[t]),r}function Rue(t){return t}function Mue(t,e){e===void 0&&(e=Rue);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(s){var a=e(s,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(s){for(n=!0;r.length;){var a=r;r=[],a.forEach(s)}r={push:function(l){return s(l)},filter:function(){return r}}},assignMedium:function(s){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(s),a=r}var c=function(){var h=a;a=[],h.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),r}}}};return i}function Due(t){t===void 0&&(t={});var e=Mue(null);return e.options=As({async:!0,ssr:!1},t),e}var CV=function(t){var e=t.sideCar,r=ag(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return E.createElement(n,As({},r))};CV.isSideCarExport=!0;function $ue(t,e){return t.useMedium(e),CV}var AV=Due(),y_=function(){},rw=E.forwardRef(function(t,e){var r=E.useRef(null),n=E.useState({onScrollCapture:y_,onWheelCapture:y_,onTouchMoveCapture:y_}),i=n[0],s=n[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,d=t.shards,f=t.sideCar,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,y=t.as,x=y===void 0?"div":y,b=t.gapMode,w=ag(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,S=Oue([r,e]),P=As(As({},w),i);return E.createElement(E.Fragment,null,h&&E.createElement(k,{sideCar:AV,removeScrollBar:u,shards:d,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:r,gapMode:b}),a?E.cloneElement(E.Children.only(l),As(As({},P),{ref:S})):E.createElement(x,As({},P,{className:c,ref:S}),l))});rw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rw.classNames={fullWidth:_y,zeroRight:wy};var Lue=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Fue(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Lue();return e&&t.setAttribute("nonce",e),t}function Vue(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Bue(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Uue=function(){var t=0,e=null;return{add:function(r){t==0&&(e=Fue())&&(Vue(e,r),Bue(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},zue=function(){var t=Uue();return function(e,r){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},TV=function(){var t=zue(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},Wue={left:0,top:0,right:0,gap:0},v_=function(t){return parseInt(t||"",10)||0},Hue=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[v_(r),v_(n),v_(i)]},Gue=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Wue;var e=Hue(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},que=TV(),qu="data-scroll-locked",Kue=function(t,e,r,n){var i=t.left,s=t.top,a=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(Aue,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(qu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wy,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(_y,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(wy," .").concat(wy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(_y," .").concat(_y,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(qu,`] {
    `).concat(Tue,": ").concat(l,`px;
  }
`)},zR=function(){var t=parseInt(document.body.getAttribute(qu)||"0",10);return isFinite(t)?t:0},Yue=function(){E.useEffect(function(){return document.body.setAttribute(qu,(zR()+1).toString()),function(){var t=zR()-1;t<=0?document.body.removeAttribute(qu):document.body.setAttribute(qu,t.toString())}},[])},Que=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;Yue();var s=E.useMemo(function(){return Gue(i)},[i]);return E.createElement(que,{styles:Kue(s,!e,i,r?"":"!important")})},Gk=!1;if(typeof window<"u")try{var C0=Object.defineProperty({},"passive",{get:function(){return Gk=!0,!0}});window.addEventListener("test",C0,C0),window.removeEventListener("test",C0,C0)}catch{Gk=!1}var nu=Gk?{passive:!1}:!1,Xue=function(t){return t.tagName==="TEXTAREA"},PV=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!Xue(t)&&r[e]==="visible")},Jue=function(t){return PV(t,"overflowY")},Zue=function(t){return PV(t,"overflowX")},WR=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=IV(t,n);if(i){var s=OV(t,n),a=s[1],l=s[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},ede=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},tde=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},IV=function(t,e){return t==="v"?Jue(e):Zue(e)},OV=function(t,e){return t==="v"?ede(e):tde(e)},rde=function(t,e){return t==="h"&&e==="rtl"?-1:1},nde=function(t,e,r,n,i){var s=rde(t,window.getComputedStyle(e).direction),a=s*n,l=r.target,c=e.contains(l),u=!1,h=a>0,d=0,f=0;do{var m=OV(t,l),g=m[0],v=m[1],y=m[2],x=v-y-s*g;(g||x)&&IV(t,l)&&(d+=x,f+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(d)<1||!i)||!h&&(Math.abs(f)<1||!i))&&(u=!0),u},A0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},HR=function(t){return[t.deltaX,t.deltaY]},GR=function(t){return t&&"current"in t?t.current:t},ide=function(t,e){return t[0]===e[0]&&t[1]===e[1]},sde=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ade=0,iu=[];function ode(t){var e=E.useRef([]),r=E.useRef([0,0]),n=E.useRef(),i=E.useState(ade++)[0],s=E.useState(TV)[0],a=E.useRef(t);E.useEffect(function(){a.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Rte([t.lockRef.current],(t.shards||[]).map(GR),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=E.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var x=A0(v),b=r.current,w="deltaX"in v?v.deltaX:b[0]-x[0],k="deltaY"in v?v.deltaY:b[1]-x[1],S,P=v.target,N=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in v&&N==="h"&&P.type==="range")return!1;var _=WR(N,P);if(!_)return!0;if(_?S=N:(S=N==="v"?"h":"v",_=WR(N,P)),!_)return!1;if(!n.current&&"changedTouches"in v&&(w||k)&&(n.current=S),!S)return!0;var T=n.current||S;return nde(T,y,v,T==="h"?w:k,!0)},[]),c=E.useCallback(function(v){var y=v;if(!(!iu.length||iu[iu.length-1]!==s)){var x="deltaY"in y?HR(y):A0(y),b=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&ide(S.delta,x)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var w=(a.current.shards||[]).map(GR).filter(Boolean).filter(function(S){return S.contains(y.target)}),k=w.length>0?l(y,w[0]):!a.current.noIsolation;k&&y.cancelable&&y.preventDefault()}}},[]),u=E.useCallback(function(v,y,x,b){var w={name:v,delta:y,target:x,should:b,shadowParent:lde(x)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(k){return k!==w})},1)},[]),h=E.useCallback(function(v){r.current=A0(v),n.current=void 0},[]),d=E.useCallback(function(v){u(v.type,HR(v),v.target,l(v,t.lockRef.current))},[]),f=E.useCallback(function(v){u(v.type,A0(v),v.target,l(v,t.lockRef.current))},[]);E.useEffect(function(){return iu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,nu),document.addEventListener("touchmove",c,nu),document.addEventListener("touchstart",h,nu),function(){iu=iu.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,nu),document.removeEventListener("touchmove",c,nu),document.removeEventListener("touchstart",h,nu)}},[]);var m=t.removeScrollBar,g=t.inert;return E.createElement(E.Fragment,null,g?E.createElement(s,{styles:sde(i)}):null,m?E.createElement(Que,{gapMode:t.gapMode}):null)}function lde(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const cde=$ue(AV,ode);var RV=E.forwardRef(function(t,e){return E.createElement(rw,As({},t,{ref:e,sideCar:cde}))});RV.classNames=rw.classNames;var ude=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},su=new WeakMap,T0=new WeakMap,P0={},x_=0,MV=function(t){return t&&(t.host||MV(t.parentNode))},dde=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=MV(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},hde=function(t,e,r,n){var i=dde(e,Array.isArray(t)?t:[t]);P0[r]||(P0[r]=new WeakMap);var s=P0[r],a=[],l=new Set,c=new Set(i),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};i.forEach(u);var h=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(l.has(f))h(f);else try{var m=f.getAttribute(n),g=m!==null&&m!=="false",v=(su.get(f)||0)+1,y=(s.get(f)||0)+1;su.set(f,v),s.set(f,y),a.push(f),v===1&&g&&T0.set(f,!0),y===1&&f.setAttribute(r,"true"),g||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return h(e),l.clear(),x_++,function(){a.forEach(function(d){var f=su.get(d)-1,m=s.get(d)-1;su.set(d,f),s.set(d,m),f||(T0.has(d)||d.removeAttribute(n),T0.delete(d)),m||d.removeAttribute(r)}),x_--,x_||(su=new WeakMap,su=new WeakMap,T0=new WeakMap,P0={})}},fde=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=ude(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),hde(n,i,r,"aria-hidden")):function(){return null}},vC="Dialog",[DV,B3e]=eg(vC),[mde,ys]=DV(vC),$V=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,l=E.useRef(null),c=E.useRef(null),[u=!1,h]=sb({prop:n,defaultProp:i,onChange:s});return o.jsx(mde,{scope:e,triggerRef:l,contentRef:c,contentId:im(),titleId:im(),descriptionId:im(),open:u,onOpenChange:h,onOpenToggle:E.useCallback(()=>h(d=>!d),[h]),modal:a,children:r})};$V.displayName=vC;var LV="DialogTrigger",FV=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ys(LV,r),s=yn(e,i.triggerRef);return o.jsx(mt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":wC(i.open),...n,ref:s,onClick:ht(t.onClick,i.onOpenToggle)})});FV.displayName=LV;var xC="DialogPortal",[pde,VV]=DV(xC,{forceMount:void 0}),BV=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:i}=t,s=ys(xC,e);return o.jsx(pde,{scope:e,forceMount:r,children:E.Children.map(n,a=>o.jsx(Lc,{present:r||s.open,children:o.jsx(bE,{asChild:!0,container:i,children:a})}))})};BV.displayName=xC;var Dv="DialogOverlay",UV=E.forwardRef((t,e)=>{const r=VV(Dv,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=ys(Dv,t.__scopeDialog);return s.modal?o.jsx(Lc,{present:n||s.open,children:o.jsx(gde,{...i,ref:e})}):null});UV.displayName=Dv;var gde=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ys(Dv,r);return o.jsx(RV,{as:md,allowPinchZoom:!0,shards:[i.contentRef],children:o.jsx(mt.div,{"data-state":wC(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Ac="DialogContent",zV=E.forwardRef((t,e)=>{const r=VV(Ac,t.__scopeDialog),{forceMount:n=r.forceMount,...i}=t,s=ys(Ac,t.__scopeDialog);return o.jsx(Lc,{present:n||s.open,children:s.modal?o.jsx(yde,{...i,ref:e}):o.jsx(vde,{...i,ref:e})})});zV.displayName=Ac;var yde=E.forwardRef((t,e)=>{const r=ys(Ac,t.__scopeDialog),n=E.useRef(null),i=yn(e,r.contentRef,n);return E.useEffect(()=>{const s=n.current;if(s)return fde(s)},[]),o.jsx(WV,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ht(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ht(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&s.preventDefault()}),onFocusOutside:ht(t.onFocusOutside,s=>s.preventDefault())})}),vde=E.forwardRef((t,e)=>{const r=ys(Ac,t.__scopeDialog),n=E.useRef(!1),i=E.useRef(!1);return o.jsx(WV,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,s),s.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),WV=E.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,l=ys(Ac,r),c=E.useRef(null),u=yn(e,c);return Cue(),o.jsxs(o.Fragment,{children:[o.jsx(jV,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s,children:o.jsx(ib,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":wC(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(xde,{titleId:l.titleId}),o.jsx(wde,{contentRef:c,descriptionId:l.descriptionId})]})]})}),bC="DialogTitle",HV=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ys(bC,r);return o.jsx(mt.h2,{id:i.titleId,...n,ref:e})});HV.displayName=bC;var GV="DialogDescription",qV=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ys(GV,r);return o.jsx(mt.p,{id:i.descriptionId,...n,ref:e})});qV.displayName=GV;var KV="DialogClose",YV=E.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,i=ys(KV,r);return o.jsx(mt.button,{type:"button",...n,ref:e,onClick:ht(t.onClick,()=>i.onOpenChange(!1))})});YV.displayName=KV;function wC(t){return t?"open":"closed"}var QV="DialogTitleWarning",[U3e,XV]=IK(QV,{contentName:Ac,titleName:bC,docsSlug:"dialog"}),xde=({titleId:t})=>{const e=XV(QV),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},bde="DialogDescriptionWarning",wde=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${XV(bde).contentName}}.`;return E.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},_de=$V,Sde=FV,kde=BV,JV=UV,ZV=zV,eB=HV,tB=qV,Nde=YV;const _C=_de,rB=Sde,jde=kde,nB=E.forwardRef(({className:t,...e},r)=>o.jsx(JV,{ref:r,className:vt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));nB.displayName=JV.displayName;const nw=E.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(jde,{children:[o.jsx(nB,{}),o.jsxs(ZV,{ref:n,className:vt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,o.jsxs(Nde,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(rg,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));nw.displayName=ZV.displayName;const iw=({className:t,...e})=>o.jsx("div",{className:vt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});iw.displayName="DialogHeader";const sw=E.forwardRef(({className:t,...e},r)=>o.jsx(eB,{ref:r,className:vt("text-lg font-semibold leading-none tracking-tight",t),...e}));sw.displayName=eB.displayName;const SC=E.forwardRef(({className:t,...e},r)=>o.jsx(tB,{ref:r,className:vt("text-sm text-muted-foreground",t),...e}));SC.displayName=tB.displayName;var Ede="Label",iB=E.forwardRef((t,e)=>o.jsx(mt.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));iB.displayName=Ede;var sB=iB;const Cde=cb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ct=E.forwardRef(({className:t,...e},r)=>o.jsx(sB,{ref:r,className:vt(Cde(),t),...e}));Ct.displayName=sB.displayName;var Ade="Separator",qR="horizontal",Tde=["horizontal","vertical"],aB=E.forwardRef((t,e)=>{const{decorative:r,orientation:n=qR,...i}=t,s=Pde(n)?n:qR,l=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return o.jsx(mt.div,{"data-orientation":s,...l,...i,ref:e})});aB.displayName=Ade;function Pde(t){return Tde.includes(t)}var oB=aB;const lB=E.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},i)=>o.jsx(oB,{ref:i,decorative:r,orientation:e,className:vt("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));lB.displayName=oB.displayName;const kC=({isOpen:t,onClose:e,onSuccess:r})=>{const[n,i]=E.useState(!0),[s,a]=E.useState(!1),[l,c]=E.useState({name:"",email:"",password:""}),{login:u,register:h,loginWithGoogle:d,isLoading:f}=wr(),[m,g]=D.useState(null),v=k=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k),y=async k=>{if(k.preventDefault(),g(null),n){if(!l.email){g("Email is required."),nn.error("Email is required.");return}if(!v(l.email)){g("Please enter a valid email address."),nn.error("Please enter a valid email address.");return}if(!l.password){g("Password is required."),nn.error("Password is required.");return}if(l.password.length<6){g("Password must be at least 6 characters."),nn.error("Password must be at least 6 characters.");return}}else{if(!l.name.trim()){g("Please enter your full name."),nn.error("Please enter your full name.");return}if(!l.email){g("Email is required."),nn.error("Email is required.");return}if(!v(l.email)){g("Please enter a valid email address."),nn.error("Please enter a valid email address.");return}if(!l.password){g("Password is required."),nn.error("Password is required.");return}if(l.password.length<6){g("Password must be at least 6 characters."),nn.error("Password must be at least 6 characters.");return}}try{if(n){const S=await u(l.email,l.password);if(typeof S=="string"&&S!==""){g(S),nn.error(S);return}nn.success("Successfully logged in!"),r()}else{const S=await h(l.name,l.email,l.password);if(typeof S=="string"&&S!==""){g(S),nn.error(S);return}nn.success("Successfully registered! Please login."),i(!0),c({name:"",email:"",password:""})}}catch{nn.error(n?"Login failed":"Registration failed")}},x=async()=>{try{await d(),nn.success("Successfully logged in with Google!"),r()}catch{nn.error("Google login failed")}},b=()=>{c({name:"",email:"",password:""}),a(!1)},w=()=>{i(!n),b()};return o.jsx(_C,{open:t,onOpenChange:e,children:o.jsxs(nw,{className:"sm:max-w-md bg-white dark:bg-gray-900 border-emerald-100 dark:border-emerald-800",children:[o.jsx(iw,{children:o.jsx(sw,{className:"text-2xl font-bold text-center bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:n?"Welcome Back":"Join EcoScope"})}),o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[!n&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ct,{htmlFor:"name",className:"text-gray-700 dark:text-gray-300",children:"Full Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),o.jsx(st,{id:"name",type:"text",placeholder:"Enter your full name",value:l.name,onChange:k=>c({...l,name:k.target.value}),className:"pl-10 border-emerald-200 dark:border-emerald-700 focus:border-emerald-400",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ct,{htmlFor:"email",className:"text-gray-700 dark:text-gray-300",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(MY,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),o.jsx(st,{id:"email",type:"email",placeholder:"Enter your email",value:l.email,onChange:k=>c({...l,email:k.target.value}),className:"pl-10 border-emerald-200 dark:border-emerald-700 focus:border-emerald-400",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ct,{htmlFor:"password",className:"text-gray-700 dark:text-gray-300",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(RY,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),o.jsx(st,{id:"password",type:s?"text":"password",placeholder:"Enter your password",value:l.password,onChange:k=>c({...l,password:k.target.value}),className:"pl-10 pr-10 border-emerald-200 dark:border-emerald-700 focus:border-emerald-400",required:!0}),o.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:s?o.jsx(CY,{className:"h-4 w-4"}):o.jsx(sL,{className:"h-4 w-4"})})]})]}),o.jsx(Q,{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white",children:f?"Please wait...":n?"Sign In":"Create Account"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(lB,{className:"my-4"}),o.jsx("span",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-900 px-2 text-sm text-gray-500",children:"or"})]}),o.jsxs(Q,{type:"button",variant:"outline",onClick:x,disabled:f,className:"w-full border-emerald-200 dark:border-emerald-700 hover:bg-emerald-50 dark:hover:bg-emerald-900/20",children:[o.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:w,className:"text-sm text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 dark:hover:text-emerald-300",children:n?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})},Ide=({onGetStarted:t})=>{const[e,r]=E.useState(!1),{user:n}=wr(),i=()=>{n?t():r(!0)},s=()=>{r(!1),t()};return o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 dark:from-gray-900 dark:via-gray-800 dark:to-emerald-900 min-h-screen transition-colors duration-300 pt-20",children:[" ",o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-emerald-400/30 to-green-300/30 dark:from-emerald-600/20 dark:to-green-500/20 rounded-full mix-blend-multiply filter blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-gradient-to-r from-teal-300/30 to-cyan-300/30 dark:from-teal-500/20 dark:to-cyan-400/20 rounded-full mix-blend-multiply filter blur-3xl animate-pulse delay-1000"}),o.jsx("div",{className:"absolute bottom-20 left-1/4 w-80 h-80 bg-gradient-to-r from-green-400/30 to-emerald-400/30 dark:from-green-500/20 dark:to-emerald-400/20 rounded-full mix-blend-multiply filter blur-3xl animate-pulse delay-2000"})]}),o.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[o.jsx(dt,{className:"absolute top-20 left-20 w-8 h-8 text-emerald-400 dark:text-emerald-300 opacity-60 animate-float",style:{animationDelay:"0s"}}),o.jsx(fa,{className:"absolute top-40 right-40 w-6 h-6 text-teal-400 dark:text-teal-300 opacity-50 animate-bounce",style:{animationDelay:"1s"}}),o.jsx(dt,{className:"absolute top-60 right-20 w-10 h-10 text-green-400 dark:text-green-300 opacity-40 animate-float",style:{animationDelay:"2s"}}),o.jsx(fa,{className:"absolute bottom-60 left-1/3 w-7 h-7 text-emerald-300 dark:text-emerald-200 opacity-45 animate-bounce",style:{animationDelay:"3s"}}),o.jsx(dt,{className:"absolute bottom-40 right-1/4 w-9 h-9 text-teal-400 dark:text-teal-300 opacity-35 animate-float",style:{animationDelay:"4s"}})]}),o.jsxs("div",{className:"container mx-auto px-4 py-20 relative z-10",children:[" ",o.jsxs("div",{className:"text-center max-w-6xl mx-auto",children:[o.jsx("div",{className:"mb-8 inline-flex",children:o.jsxs(ne,{className:"bg-white/20 dark:bg-gray-800/20 backdrop-blur-md border border-white/30 dark:border-gray-700/30 text-emerald-700 dark:text-emerald-300 px-8 py-3 text-base font-medium shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[o.jsx(fa,{className:"w-5 h-5 mr-2"}),"AI-Powered Sustainability Intelligence"]})}),o.jsxs("h1",{className:"text-6xl md:text-8xl font-bold mb-10 leading-tight",children:[o.jsx("span",{className:"bg-gradient-to-r from-emerald-600 via-green-500 to-teal-600 bg-clip-text text-transparent drop-shadow-sm",children:"Discover Nature's"}),o.jsx("br",{}),o.jsx("span",{className:"text-slate-800 dark:text-gray-200 font-light tracking-wide",children:"Hidden Impact in"}),o.jsx("br",{}),o.jsx("span",{className:"bg-gradient-to-r from-emerald-600 via-green-500 to-teal-600 bg-clip-text text-transparent drop-shadow-sm",children:"Every Product"})]}),o.jsxs("p",{className:"text-xl md:text-2xl text-slate-600 dark:text-gray-300 mb-14 max-w-4xl mx-auto leading-relaxed font-light tracking-wide",children:["Harness the power of AI to reveal the environmental story behind every product.",o.jsx("br",{className:"hidden md:block"}),"Make choices that honor our planet's future."]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center mb-20",children:[o.jsxs(Q,{size:"lg",className:"group text-xl px-12 py-6 bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white shadow-2xl hover:shadow-green-500/25 transition-all duration-500 transform hover:scale-105 hover:-translate-y-1 rounded-2xl border-0",onClick:i,children:[o.jsx(Go,{className:"w-6 h-6 mr-3 group-hover:rotate-12 transition-transform duration-300"}),"Begin Your Journey",o.jsx(Kl,{className:"w-6 h-6 ml-3 group-hover:translate-x-1 transition-transform duration-300"})]}),o.jsxs(Q,{size:"lg",variant:"outline",className:"text-xl px-12 py-6 border-2 border-emerald-200/50 dark:border-emerald-700/50 bg-white/30 dark:bg-gray-800/30 backdrop-blur-sm text-emerald-700 dark:text-emerald-300 hover:border-emerald-400 dark:hover:border-emerald-500 hover:bg-white/50 dark:hover:bg-gray-800/50 hover:shadow-xl transition-all duration-500 hover:scale-105 hover:-translate-y-1 rounded-2xl",onClick:i,children:[o.jsx(fa,{className:"w-5 h-5 mr-3"}),"Explore Demo"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-24",children:[o.jsxs("div",{className:"group text-center p-8 bg-white/40 dark:bg-gray-800/40 backdrop-blur-xl rounded-3xl border border-white/20 dark:border-gray-700/20 shadow-xl hover:shadow-2xl hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-500 hover:transform hover:scale-105 hover:-translate-y-2",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:rotate-12 group-hover:scale-110 transition-all duration-300 shadow-lg",children:o.jsx(Go,{className:"w-8 h-8 text-white"})}),o.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent mb-3",children:"1M+"}),o.jsx("div",{className:"text-slate-600 dark:text-gray-400 font-medium",children:"Products Analyzed"})]}),o.jsxs("div",{className:"group text-center p-8 bg-white/40 dark:bg-gray-800/40 backdrop-blur-xl rounded-3xl border border-white/20 dark:border-gray-700/20 shadow-xl hover:shadow-2xl hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-500 hover:transform hover:scale-105 hover:-translate-y-2",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:rotate-12 group-hover:scale-110 transition-all duration-300 shadow-lg",children:o.jsx(yr,{className:"w-8 h-8 text-white"})}),o.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent mb-3",children:"250K+"}),o.jsx("div",{className:"text-slate-600 dark:text-gray-400 font-medium",children:"Eco Warriors"})]}),o.jsxs("div",{className:"group text-center p-8 bg-white/40 dark:bg-gray-800/40 backdrop-blur-xl rounded-3xl border border-white/20 dark:border-gray-700/20 shadow-xl hover:shadow-2xl hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-500 hover:transform hover:scale-105 hover:-translate-y-2",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-500 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:rotate-12 group-hover:scale-110 transition-all duration-300 shadow-lg",children:o.jsx(pd,{className:"w-8 h-8 text-white"})}),o.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent mb-3",children:"500T"}),o.jsx("div",{className:"text-slate-600 dark:text-gray-400 font-medium",children:"CO Prevented"})]}),o.jsxs("div",{className:"group text-center p-8 bg-white/40 dark:bg-gray-800/40 backdrop-blur-xl rounded-3xl border border-white/20 dark:border-gray-700/20 shadow-xl hover:shadow-2xl hover:bg-white/50 dark:hover:bg-gray-800/50 transition-all duration-500 hover:transform hover:scale-105 hover:-translate-y-2",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-green-500 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:rotate-12 group-hover:scale-110 transition-all duration-300 shadow-lg",children:o.jsx(vn,{className:"w-8 h-8 text-white"})}),o.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent mb-3",children:"98%"}),o.jsx("div",{className:"text-slate-600 dark:text-gray-400 font-medium",children:"Accuracy Rate"})]})]})]})]}),o.jsx(kC,{isOpen:e,onClose:()=>r(!1),onSuccess:s})]})},Ode=()=>{const t=[{icon:ha,title:"AI Nature Intelligence",description:"Advanced machine learning models analyze products through the lens of natural ecosystems with 98% accuracy.",badge:"Core Feature",gradient:"from-emerald-500 to-green-500"},{icon:Go,title:"Multi-Input Harmony",description:"Scan barcodes, upload images, take photos, or describe products naturally. Our AI understands it all like nature intended.",badge:"Smart Tech",gradient:"from-green-500 to-teal-500"},{icon:Ta,title:"Ecosystem Impact Score",description:"Comprehensive scoring for carbon footprint, water usage, biodiversity impact, energy efficiency, and ethical sourcing.",badge:"Comprehensive",gradient:"from-teal-500 to-blue-500"},{icon:yr,title:"Green Community",description:"Join a global forest of conscious consumers. Share insights, nurture knowledge, and grow together sustainably.",badge:"Social Impact",gradient:"from-blue-500 to-indigo-500"},{icon:pd,title:"Earth's Database",description:"Access sustainability data from major environmental databases and nature-centered lifecycle assessments.",badge:"Data Rich",gradient:"from-indigo-500 to-purple-500"},{icon:vn,title:"Growth Tracking",description:"Track your environmental impact like a growing tree with detailed analytics and personalized eco-recommendations.",badge:"Personal Growth",gradient:"from-purple-500 to-pink-500"}],e=[{icon:Ky,title:"Vision Capture",description:"Take a photo like capturing nature's moment"},{icon:Go,title:"Instant Recognition",description:"Barcode scanning as swift as a leaf falling"},{icon:aL,title:"Memory Upload",description:"Share existing images from your digital garden"},{icon:TY,title:"Natural Language",description:"Describe products as you would to a friend"}];return o.jsxs("section",{className:"py-24 bg-gradient-to-br from-sage-50 via-emerald-50 to-green-50 dark:bg-gradient-to-br dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-5",children:[o.jsx(qo,{className:"absolute top-20 left-10 w-32 h-32 text-emerald-600 animate-pulse"}),o.jsx(EY,{className:"absolute top-40 right-20 w-24 h-24 text-blue-600 animate-bounce",style:{animationDelay:"1s"}}),o.jsx(ly,{className:"absolute bottom-40 left-1/4 w-28 h-28 text-teal-600 animate-pulse",style:{animationDelay:"2s"}}),o.jsx(qS,{className:"absolute bottom-20 right-1/3 w-36 h-36 text-amber-500 animate-pulse",style:{animationDelay:"3s"}})]}),o.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[o.jsxs("div",{className:"text-center mb-20",children:[o.jsx(ne,{className:"mb-6 bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-800 dark:bg-gradient-to-r dark:from-emerald-700 dark:to-green-700 dark:text-emerald-200 border-emerald-200 px-6 py-2 text-lg",children:" Powerful Features"}),o.jsxs("h2",{className:"text-5xl md:text-6xl font-bold mb-8 text-slate-800 dark:text-slate-200",children:["Everything You Need for",o.jsx("span",{className:"bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent block mt-2",children:"Harmonious Living"})]}),o.jsx("p",{className:"text-2xl text-slate-600 dark:text-slate-400 max-w-4xl mx-auto leading-relaxed font-light",children:"Our comprehensive platform combines cutting-edge AI with earth's wisdom to give you unprecedented insights into product sustainability."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 mb-24",children:t.map((r,n)=>o.jsxs(re,{className:"group hover:shadow-2xl transition-all duration-500 border-0 bg-white/80 backdrop-blur-sm overflow-hidden",children:[o.jsxs(je,{className:"pb-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-r ${r.gradient} flex items-center justify-center group-hover:scale-110 group-hover:rotate-12 transition-all duration-500 shadow-lg`,children:o.jsx(r.icon,{className:"w-8 h-8 text-white"})}),o.jsx(ne,{variant:"outline",className:"text-xs bg-white/70 dark:bg-gray-700/70 border-emerald-200 text-emerald-700 dark:text-emerald-300",children:r.badge})]}),o.jsx(Ce,{className:"text-2xl group-hover:text-emerald-700 dark:group-hover:text-emerald-400 transition-colors duration-300",children:r.title})]}),o.jsx(ce,{children:o.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed text-lg",children:r.description})})]},n))}),o.jsxs("div",{className:"bg-gradient-to-r from-emerald-100/80 to-green-100/80 backdrop-blur-sm rounded-3xl p-16 border border-emerald-200",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h3",{className:"text-4xl font-bold mb-6 text-slate-800 dark:text-slate-200",children:"Multiple Paths to Wisdom"}),o.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400 max-w-3xl mx-auto leading-relaxed",children:"Like nature's diverse pathways, our AI understands products from any input method. Choose the path that feels most natural to you."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((r,n)=>o.jsxs("div",{className:"text-center p-8 bg-white/90 backdrop-blur-sm rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 group border border-white/50",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-500 to-green-600 rounded-3xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 group-hover:rotate-12 transition-all duration-500 shadow-lg",children:o.jsx(r.icon,{className:"w-10 h-10 text-white"})}),o.jsx("h4",{className:"font-bold text-xl mb-3 text-slate-800",children:r.title}),o.jsx("p",{className:"text-slate-600 leading-relaxed",children:r.description})]},n))})]}),o.jsxs("div",{className:"mt-24",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx(ne,{className:"mb-6 bg-gradient-to-r from-purple-100 to-emerald-100 dark:from-purple-700 dark:to-emerald-700 text-purple-800 dark:text-purple-200 border-purple-200 px-6 py-2 text-lg",children:" AI Intelligence"}),o.jsx("h3",{className:"text-4xl font-bold mb-6 text-slate-800 dark:text-slate-200",children:"Nature-Inspired AI Capabilities"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[o.jsxs("div",{className:"text-center p-10 bg-gradient-to-br from-purple-50 to-emerald-50 dark:from-purple-900 dark:to-emerald-900 rounded-3xl border border-purple-100 dark:border-purple-700",children:[o.jsx(ha,{className:"w-16 h-16 text-purple-600 dark:text-purple-400 mx-auto mb-6"}),o.jsx("h4",{className:"font-bold text-2xl mb-4 text-slate-800 dark:text-slate-200",children:"Neural Vision"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed text-lg",children:"Extract and interpret information from images using neural networks inspired by natural vision systems."})]}),o.jsxs("div",{className:"text-center p-10 bg-gradient-to-br from-blue-50 to-teal-50 dark:from-blue-900 dark:to-teal-900 rounded-3xl border border-blue-100 dark:border-blue-700",children:[o.jsx(UY,{className:"w-16 h-16 text-blue-600 dark:text-blue-400 mx-auto mb-6"}),o.jsx("h4",{className:"font-bold text-2xl mb-4 text-slate-800 dark:text-slate-200",children:"Trust Indicators"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed text-lg",children:"Transparent confidence estimates and uncertainty measurements, honest like nature itself."})]}),o.jsxs("div",{className:"text-center p-10 bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-900 dark:to-green-900 rounded-3xl border border-emerald-100 dark:border-emerald-700",children:[o.jsx(Kr,{className:"w-16 h-16 text-emerald-600 dark:text-emerald-400 mx-auto mb-6"}),o.jsx("h4",{className:"font-bold text-2xl mb-4 text-slate-800 dark:text-slate-200",children:"Cross-Pollination"}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed text-lg",children:"Validate findings across multiple sustainability databases and certification ecosystems."})]})]})]})]})]})},KR=["personal-care","food-beverage","electronics","clothing","home-garden","beauty-cosmetics","sports-outdoor","baby-kids","automotive","books-media","health-wellness","kitchen-dining","office-supplies","pet-supplies","toys-games"],Rde={"personal-care":["oral-care","hair-care","body-care","skincare","hygiene"],"food-beverage":["organic","beverages","snacks","dairy","meat-alternatives"],electronics:["mobile","computers","home-audio","wearables","accessories"],clothing:["activewear","casual","formal","sustainable-fashion","accessories"],"home-garden":["furniture","decor","gardening","storage","lighting"],"beauty-cosmetics":["makeup","skincare","haircare","fragrance","tools"],"sports-outdoor":["fitness","outdoor-gear","cycling","water-sports","team-sports"],"baby-kids":["feeding","clothing","toys","safety","nursery"],automotive:["accessories","maintenance","electronics","safety","eco-friendly"],"books-media":["books","e-books","audiobooks","magazines","educational"],"health-wellness":["supplements","fitness","medical","mental-health","nutrition"],"kitchen-dining":["cookware","appliances","storage","utensils","tableware"],"office-supplies":["stationery","electronics","furniture","organization","eco-friendly"],"pet-supplies":["food","toys","accessories","health","grooming"],"toys-games":["educational","outdoor","board-games","electronic","eco-friendly"]},YR=["EcoLife","GreenChoice","SustainableLiving","NatureBest","PlanetFriendly","EarthWise","GreenTech","EcoSmart","NaturalChoice","SustainaBrand","BioPure","EcoVital","GreenLiving","PurePlanet","EcoMinded","NatureFirst","GreenHeart","EcoSolutions","SustainableChoice","PlanetCare","EcoFresh","GreenWave","NaturePath","EcoBlend","SustainableLife","GreenGlow","EcoPure","NatureShine","SustainableStyle","EcoSphere","GreenGood","EcoBoost","NaturalGlow","SustainableWorld","EcoFlow","GreenBridge","EcoZen","NatureLux","SustainableCore","EcoRise"],QR=["California, USA","Vermont, USA","Oregon, USA","British Columbia, Canada","Bavaria, Germany","Tuscany, Italy","Provence, France","Kerala, India","Tasmania, Australia","Costa Rica","Ecuador","Peru","Chile","New Zealand","Sweden","Denmark","Netherlands","Switzerland","Japan","South Korea","Taiwan","Thailand","Vietnam","Morocco","Ghana","Kenya","Madagascar","Fair Trade Certified"],Mde=["USDA Organic","Fair Trade","B-Corp","Carbon Neutral","Cradle to Cradle","FSC Certified","Energy Star","EPEAT Gold","GREENGUARD","Rainforest Alliance","Non-GMO","Vegan Certified","Cruelty-Free","Biodegradable","Compostable","Recyclable","Ocean Positive","Climate Neutral","Sustainable Packaging","Renewable Energy","Zero Waste","Water Efficient","Local Sourcing"],Dde=["Bamboo","Recycled Plastic","Organic Cotton","Hemp","Cork","Recycled Metal","Sustainable Wood","Bioplastic","Organic Linen","Recycled Paper","Natural Rubber","Coconut Fiber","Seaweed Extract","Mushroom Leather","Recycled Glass","Bio-based Materials"],$de=["Biodegradable","Compostable","Recyclable","Zero Waste","Plastic-Free","Carbon Neutral","Renewable Energy","Fair Trade","Organic","Non-GMO","Vegan","Cruelty-Free","Sustainable Packaging","Water Efficient","Energy Efficient","Durable","Reusable","Refillable","Minimal Packaging","Local Sourcing","Ethically Made","Chemical-Free","Natural Ingredients"],Lde=t=>{const e=KR[Math.floor(Math.random()*KR.length)],r=Rde[e],n=r[Math.floor(Math.random()*r.length)],i=YR[Math.floor(Math.random()*YR.length)],s=QR[Math.floor(Math.random()*QR.length)],l={"personal-care":["Eco Toothbrush","Natural Shampoo","Organic Body Wash","Sustainable Deodorant","Bamboo Comb"],"food-beverage":["Organic Almonds","Plant-Based Milk","Fair Trade Coffee","Organic Granola","Natural Energy Bar"],electronics:["Solar Charger","Eco Phone Case","Recycled Speaker","Energy Monitor","Green Laptop Stand"],clothing:["Organic T-Shirt","Sustainable Jeans","Eco Jacket","Hemp Hoodie","Recycled Sneakers"],"home-garden":["Bamboo Furniture","Solar Garden Light","Organic Seeds","Compost Bin","Eco Plant Pot"],"beauty-cosmetics":["Natural Lipstick","Organic Foundation","Eco Mascara","Sustainable Brush Set","Green Cleanser"],"sports-outdoor":["Eco Yoga Mat","Sustainable Water Bottle","Organic Activewear","Solar Backpack","Recycled Ball"],"baby-kids":["Organic Baby Food","Sustainable Toys","Eco Diapers","Natural Baby Wash","Wooden Blocks"],automotive:["Eco Car Wash","Solar Car Charger","Recycled Floor Mats","Natural Air Freshener","Sustainable Cover"],"books-media":["Recycled Notebook","Sustainable Pen Set","Eco Calendar","Natural Bookmark","Green Journal"],"health-wellness":["Organic Vitamins","Natural Protein Powder","Eco Yoga Block","Sustainable Pill Case","Herbal Tea"],"kitchen-dining":["Bamboo Cutting Board","Eco Food Storage","Natural Dish Soap","Sustainable Utensils","Glass Containers"],"office-supplies":["Recycled Paper","Eco Pen Set","Sustainable Desk Organizer","Natural Rubber Eraser","Green Folders"],"pet-supplies":["Organic Pet Food","Eco Pet Toys","Natural Pet Shampoo","Sustainable Pet Bed","Recycled Leash"],"toys-games":["Wooden Puzzle","Eco Building Blocks","Natural Playdough","Sustainable Board Game","Organic Stuffed Animal"]}[e]||["Eco Product","Green Item","Sustainable Good","Natural Product","Organic Item"],c=l[Math.floor(Math.random()*l.length)],u=["Premium","Deluxe","Pro","Advanced","Classic","Essential","Ultimate","Complete","Natural","Pure"],d=`${u[Math.floor(Math.random()*u.length)]} ${c}`,f=Math.floor(Math.random()*40)+60,m=Math.round((Math.random()*200+10)*100)/100,g=Math.round(m*(1+Math.random()*.5)*100)/100,v=Math.round((Math.random()*2+3)*10)/10,y=Math.floor(Math.random()*5e3)+10,x=$de.sort(()=>.5-Math.random()).slice(0,Math.floor(Math.random()*6)+3),b=Mde.sort(()=>.5-Math.random()).slice(0,Math.floor(Math.random()*4)+1),w=Dde.sort(()=>.5-Math.random()).slice(0,Math.floor(Math.random()*3)+1),k=["0.5","1.2","2.1","3.4","4.7","5.9","7.2","8.8","10.3","12.6","15.4","18.7","22.1","25.8","30.2"],S=k[Math.floor(Math.random()*k.length)],P=["15%","25%","35%","45%","55%","65%","75%","80%","85%","90%"],N=`${P[Math.floor(Math.random()*P.length)]} less water than conventional`,_=["100% Renewable","Solar Powered","Wind Energy","Hydroelectric","Mixed Renewable","Carbon Neutral Grid"],T=_[Math.floor(Math.random()*_.length)],j=["Fair Trade Certified","Living Wage","Ethical Manufacturing","Worker Cooperatives","B-Corp Standards"],C=j[Math.floor(Math.random()*j.length)];return{id:t,name:d,brand:i,price:m,originalPrice:g,rating:v,reviews:y,sustainabilityScore:f,category:e,subcategory:n,image:`https://images.unsplash.com/photo-${15e11+t}?w=400&h=300&fit=crop`,features:x,co2Saved:`${S} kg`,description:`${d} by ${i}. Made with sustainable practices and eco-friendly materials. Supports environmental conservation while delivering premium quality and performance.`,inStock:Math.random()>.1,fastShipping:Math.random()>.3,certifications:b,materials:w,origin:s,barcode:`${String(t).padStart(3,"0")}${Math.floor(Math.random()*1e9).toString().padStart(9,"0")}`,ingredients:e==="food-beverage"?"Organic ingredients, natural preservatives, no artificial additives":void 0,nutritionFacts:e==="food-beverage"?{calories:Math.floor(Math.random()*300)+50,protein:`${Math.floor(Math.random()*20)+2}g`,carbs:`${Math.floor(Math.random()*40)+5}g`,fat:`${Math.floor(Math.random()*15)+1}g`,fiber:`${Math.floor(Math.random()*10)+1}g`}:void 0,packaging:{type:["Recyclable Cardboard","Compostable Packaging","Reusable Container","Minimal Packaging","Biodegradable Wrap"][Math.floor(Math.random()*5)],recyclable:Math.random()>.2,biodegradable:Math.random()>.3,plasticFree:Math.random()>.4},carbonFootprint:{production:`${(Math.random()*5+.5).toFixed(1)} kg CO`,transport:`${(Math.random()*2+.2).toFixed(1)} kg CO`,total:`${(Math.random()*7+.7).toFixed(1)} kg CO`},waterUsage:N,energySource:T,laborPractices:C,animalTesting:Math.random()<.1,vegan:Math.random()>.3,alternatives:[{name:`Alternative ${c}`,score:f+Math.floor(Math.random()*10)-5,reason:["Better packaging","Local sourcing","Lower carbon footprint","Fair trade certified"][Math.floor(Math.random()*4)],priceComparison:["Similar price","15% more expensive","10% cheaper","20% more expensive"][Math.floor(Math.random()*4)]},{name:`Premium ${c}`,score:f+Math.floor(Math.random()*8)-4,reason:["Organic materials","Renewable energy use","Zero waste production","Circular economy"][Math.floor(Math.random()*4)],priceComparison:["25% more expensive","30% more expensive","20% more expensive","Similar price"][Math.floor(Math.random()*4)]}],detailedAnalysis:{environmentalImpact:`This product has a ${f}% lower environmental impact compared to conventional alternatives. Key benefits include reduced carbon emissions, sustainable material sourcing, and eco-friendly packaging.`,socialImpact:`Supports ${C} and contributes to community development. Manufacturing follows ethical standards with fair wages and safe working conditions.`,economicImpact:`Priced competitively at $${m}, offering good value for sustainable features. ${Math.round((g-m)/g*100)}% savings compared to MSRP.`,recommendations:["Consider bulk purchasing to reduce packaging waste","Look for refill options to extend product lifecycle","Recycle packaging according to local guidelines","Share product reviews to help others make sustainable choices"]}}},$d=Array.from({length:1e4},(t,e)=>Lde(e+1)),Sf=t=>$d.filter(e=>e.category===t),NC=t=>{const e=t.toLowerCase();return $d.filter(r=>r.name.toLowerCase().includes(e)||r.brand.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||r.features.some(n=>n.toLowerCase().includes(e))||r.materials.some(n=>n.toLowerCase().includes(e)))},gm=t=>[...$d].sort(()=>.5-Math.random()).slice(0,t),cB=E.createContext(void 0),Fde=({children:t})=>{const{currentUser:e}=wr(),[r,n]=E.useState([]);E.useEffect(()=>{if(!e){n([]);return}const a=Re(Ne,"users",e.uid),l=Re(a,"productComparison","comparisonProducts"),c=On(l,u=>{if(u.exists()){const h=u.data();h&&h.products?n(h.products):n([])}else n([])},u=>{console.error("Error fetching product comparison from Firestore:",u),n([])});return()=>c()},[e]),E.useEffect(()=>{if(!e)return;const a=Re(Ne,"users",e.uid),l=Re(a,"productComparison","comparisonProducts");Zt(l,{products:r}).catch(c=>{console.error("Error saving product comparison to Firestore:",c)})},[r,e]);const i=a=>{n(l=>l.find(c=>c.id===a.id)||l.length>=10?l:[...l,a])},s=()=>{n([])};return o.jsx(cB.Provider,{value:{comparisonProducts:r,setComparisonProducts:n,addProductToComparison:i,clearComparison:s},children:t})},uB=()=>{const t=E.useContext(cB);if(!t)throw new Error("useProductComparison must be used within a ProductComparisonProvider");return t},Vde=({scannedProduct:t,setScannedProduct:e,onTabChange:r,saveScannedProduct:n})=>{$E();const{scannedProducts:i,addScannedProduct:s}=Xn(),{addToCart:a}=Ph(),{addProductToComparison:l}=uB(),{addNotification:c}=Ya(),[u,h]=E.useState(!1),[d,f]=E.useState(null),[m,g]=E.useState(!1),[v,y]=E.useState(""),[x,b]=E.useState([]),[w,k]=E.useState(null),[S,P]=E.useState(null),N=E.useRef(null),_=E.useRef(null);E.useEffect(()=>{t&&f(t)},[t]),E.useEffect(()=>{if(d&&!i.some(F=>F.id===d.id.toString())){const F=new Date;s({id:d.id.toString(),name:d.name,brand:d.brand,sustainabilityScore:d.sustainabilityScore,category:d.category,date:`${(F.getMonth()+1).toString().padStart(2,"0")}/${F.getDate().toString().padStart(2,"0")}/${F.getFullYear()}`,alternatives:d.alternatives||[],source:"ProductScanner"})}},[d,s,i]),E.useEffect(()=>()=>{S&&S.getTracks().forEach(M=>M.stop())},[S]);const T=()=>{h(!0),setTimeout(()=>{var B;const M=gm(1)[0],F={id:M.id,name:M.name,brand:M.brand,sustainabilityScore:M.sustainabilityScore,price:M.price,image:`https://images.unsplash.com/${M.image}?w=400&h=400&fit=crop`,carbon:M.carbonFootprint.total,water:M.waterUsage,packaging:M.packaging.type,certifications:M.certifications,materials:M.materials,origin:M.origin,barcode:M.barcode,alternatives:M.alternatives,features:M.features,inStock:M.inStock,rating:M.rating,reviews:M.reviews,description:M.description,category:M.category,sustainability:{carbon:Math.floor(M.sustainabilityScore*.9),water:Math.floor(M.sustainabilityScore*.95),waste:Math.floor(M.sustainabilityScore*.85),energy:Math.floor(M.sustainabilityScore*.92),ethics:Math.floor(M.sustainabilityScore*1.05),overall:M.sustainabilityScore},stages:[{name:"Raw Material Sourcing",status:"completed",location:"California, USA",duration:"2 weeks",impact:{co2:1.2,water:500,energy:300},details:"Sustainable sourcing of raw materials from certified farms.",icon:()=>o.jsx(Lf,{className:"w-6 h-6 text-white"})},{name:"Manufacturing",status:"active",location:"Oregon, USA",duration:"4 weeks",impact:{co2:2.5,water:800,energy:1200},details:"Eco-friendly manufacturing processes with renewable energy.",icon:()=>o.jsx(Lf,{className:"w-6 h-6 text-white"})},{name:"Transportation",status:"pending",location:"Distribution Center",duration:"1 week",impact:{co2:.8,water:100,energy:400},details:"Low-emission transportation to retail locations.",icon:()=>o.jsx(KS,{className:"w-6 h-6 text-white"})},{name:"Retail",status:"pending",location:"Various Stores",duration:"Ongoing",impact:{co2:.5,water:50,energy:200},details:"Sustainable retail practices and packaging.",icon:()=>o.jsx(vd,{className:"w-6 h-6 text-white"})}]};f(F),c({type:"scanning",title:"Product Scanned",message:`You scanned ${M.name} by ${M.brand}.`,read:!1,source:"scanner",actionable:!0,action:"View"}),l({id:M.id.toString(),name:M.name,brand:M.brand,sustainabilityScore:M.sustainabilityScore,category:M.category,date:new Date().toISOString(),price:M.price,image:`https://images.unsplash.com/${M.image}?w=400&h=400&fit=crop`,metrics:{carbon:Math.floor(M.sustainabilityScore*.9),water:Math.floor(M.sustainabilityScore*.95),waste:Math.floor(M.sustainabilityScore*.85),energy:Math.floor(M.sustainabilityScore*.92),ethics:Math.floor(M.sustainabilityScore*1.05)},certifications:M.certifications||[],pros:[M.vegan?"Vegan friendly":"Quality materials",(B=M.packaging)!=null&&B.recyclable?"Recyclable packaging":"Durable design","Good sustainability score"],cons:[M.price>50?"Higher price point":"Limited color options","Consider shipping impact"],rating:M.rating,reviews:M.reviews,inStock:M.inStock,features:M.features}),h(!1)},2e3)},j=async()=>{try{const M=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});P(M),g(!0),setTimeout(()=>{N.current&&(N.current.srcObject=M)},100)}catch(M){console.error("Error accessing camera:",M),alert("Unable to access camera. Please check permissions or try uploading an image instead.")}},C=()=>{S&&(S.getTracks().forEach(M=>M.stop()),P(null)),g(!1),f(null)},I=M=>{const F=M.target.files[0];if(F&&F.type.startsWith("image/")){const B=new FileReader;B.onload=J=>{k(J.target.result),T()},B.readAsDataURL(F)}},R=()=>{if(v.trim()){const F=gm(20).filter(B=>B.name.toLowerCase().includes(v.toLowerCase())||B.brand.toLowerCase().includes(v.toLowerCase())||B.category.toLowerCase().includes(v.toLowerCase())||B.barcode.includes(v));b(F)}else b([])},$=M=>{h(!0),b([]),y(""),setTimeout(()=>{const F={id:M.id,name:M.name,brand:M.brand,sustainabilityScore:M.sustainabilityScore,price:M.price,image:`https://images.unsplash.com/${M.image}?w=400&h=400&fit=crop`,carbon:M.carbonFootprint.total,water:M.waterUsage,packaging:M.packaging.type,certifications:M.certifications,materials:M.materials,origin:M.origin,barcode:M.barcode,alternatives:M.alternatives,features:M.features,inStock:M.inStock,rating:M.rating,reviews:M.reviews,description:M.description,category:M.category,sustainability:{carbon:Math.floor(M.sustainabilityScore*.9),water:Math.floor(M.sustainabilityScore*.95),waste:Math.floor(M.sustainabilityScore*.85),energy:Math.floor(M.sustainabilityScore*.92),ethics:Math.floor(M.sustainabilityScore*1.05),overall:M.sustainabilityScore},stages:[{name:"Raw Material Sourcing",status:"completed",location:"California, USA",duration:"2 weeks",impact:{co2:1.2,water:500,energy:300},details:"Sustainable sourcing of raw materials from certified farms.",icon:()=>o.jsx(Lf,{className:"w-6 h-6 text-white"})},{name:"Manufacturing",status:"active",location:"Oregon, USA",duration:"4 weeks",impact:{co2:2.5,water:800,energy:1200},details:"Eco-friendly manufacturing processes with renewable energy.",icon:()=>o.jsx(Lf,{className:"w-6 h-6 text-white"})},{name:"Transportation",status:"pending",location:"Distribution Center",duration:"1 week",impact:{co2:.8,water:100,energy:400},details:"Low-emission transportation to retail locations.",icon:()=>o.jsx(KS,{className:"w-6 h-6 text-white"})},{name:"Retail",status:"pending",location:"Various Stores",duration:"Ongoing",impact:{co2:.5,water:50,energy:200},details:"Sustainable retail practices and packaging.",icon:()=>o.jsx(vd,{className:"w-6 h-6 text-white"})}]};f(F),c({type:"scanning",title:"Product Scanned",message:`You scanned ${M.name} by ${M.brand}.`,read:!1,source:"scanner",actionable:!0,action:"View"}),h(!1)},2e3)},z=()=>{var M;(M=_.current)==null||M.click()},W=M=>M>=80?"text-green-600 bg-green-100":M>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return o.jsxs("div",{className:"space-y-6",children:[i.length>0&&o.jsxs(re,{className:"bg-white/95 dark:bg-slate-800 backdrop-blur-sm border-slate-200/50 dark:border-slate-700 shadow-lg rounded-2xl",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-slate-800 dark:text-slate-200",children:"Recent Scans"})}),o.jsx(ce,{children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.slice(0,6).map(M=>o.jsxs("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200",children:M.name}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:M.brand})]}),o.jsx(ne,{className:W(M.sustainabilityScore),children:M.sustainabilityScore})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:M.category}),o.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:M.date})]})]},M.id))})})]}),o.jsxs(re,{className:"bg-white/95 dark:bg-slate-800 backdrop-blur-sm border-slate-200/50 dark:border-slate-700 shadow-lg rounded-2xl",children:[o.jsx(je,{className:"pb-4",children:o.jsxs(Ce,{className:"flex items-center justify-between text-slate-800 dark:text-slate-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-xl flex items-center justify-center",children:o.jsx(Ky,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xl font-bold",children:"Smart Product Scanner"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-normal",children:"Instant sustainability analysis"})]})]}),o.jsxs(ne,{variant:"outline",className:"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-700",children:[o.jsx(Cr,{className:"w-3 h-3 mr-1"}),"AI Powered"]})]})}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs(re,{className:"p-4 border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3 flex items-center",children:[o.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Search Products"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(st,{placeholder:"Search by name, brand, or barcode...",value:v,onChange:M=>y(M.target.value),className:"flex-1",onKeyPress:M=>M.key==="Enter"&&R()}),o.jsx(Q,{onClick:R,size:"sm",children:o.jsx(Kn,{className:"w-4 h-4"})})]}),x.length>0&&o.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 mt-2",children:x.map(M=>o.jsx("div",{className:"p-2 border border-slate-200 dark:border-slate-700 rounded cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",onClick:()=>$(M),children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:`https://images.unsplash.com/${M.image}?w=40&h=40&fit=crop`,alt:M.name,className:"w-8 h-8 object-cover rounded"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:M.name}),o.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:[M.brand,"  ",M.category]})]}),o.jsx(ne,{className:`text-xs px-2 py-1 ${W(M.sustainabilityScore)}`,children:M.sustainabilityScore})]})},M.id))})]})]}),o.jsxs(re,{className:"p-4 border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3 flex items-center",children:[o.jsx(aL,{className:"w-4 h-4 mr-2"}),"Upload Files"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Q,{onClick:z,variant:"outline",className:"w-full",children:[o.jsx(AY,{className:"w-4 h-4 mr-2"}),"Choose File"]}),o.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:I,className:"hidden"}),w&&o.jsx("div",{className:"mt-2",children:o.jsx("img",{src:w,alt:"Uploaded product",className:"w-full h-24 object-cover rounded border border-slate-200 dark:border-slate-700"})})]})]})]}),o.jsx("div",{className:"bg-slate-900 rounded-xl overflow-hidden shadow-lg",children:o.jsx("div",{className:"bg-slate-800 h-64 flex items-center justify-center relative",children:m?o.jsxs("div",{className:"w-full h-full relative",children:[o.jsx("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),o.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-center",children:[o.jsxs(ne,{className:"bg-red-600 text-white border-0",children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-2 animate-pulse"}),"LIVE"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{variant:"outline",size:"sm",onClick:z,className:"bg-slate-800/80 border-slate-600 text-white hover:bg-slate-700",children:[o.jsx(qP,{className:"w-3 h-3 mr-1"}),"Photo"]}),o.jsxs(Q,{variant:"outline",size:"sm",onClick:C,className:"bg-slate-800/80 border-slate-600 text-white hover:bg-slate-700",children:[o.jsx(WY,{className:"w-3 h-3 mr-1"}),"Stop"]})]})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"w-48 h-48 border-2 border-white border-dashed rounded-lg flex items-center justify-center",children:u?o.jsxs("div",{className:"text-center",children:[o.jsx(Go,{className:"w-12 h-12 mx-auto mb-2 text-white animate-spin"}),o.jsx("p",{className:"text-white text-sm",children:"Analyzing product..."})]}):o.jsxs("div",{className:"text-center",children:[o.jsx(Go,{className:"w-12 h-12 mx-auto mb-2 text-white"}),o.jsx("p",{className:"text-white text-sm",children:"Aim at product"})]})})}),o.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:o.jsx(Q,{onClick:T,disabled:u,className:"bg-white/20 dark:bg-white/10 hover:bg-white/30 dark:hover:bg-white/20 rounded-full w-16 h-16 border-2 border-white dark:border-white/50 backdrop-blur-sm",children:o.jsx(Go,{className:"w-6 h-6 text-white"})})})]}):o.jsxs("div",{className:"text-center",children:[o.jsx(Ky,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),o.jsx("p",{className:"text-slate-300 mb-4",children:"Point your camera at any product"}),o.jsxs("div",{className:"flex gap-3 justify-center",children:[o.jsxs(Q,{onClick:j,className:"bg-slate-700 hover:bg-slate-600 border border-slate-600",children:[o.jsx(LY,{className:"w-4 h-4 mr-2"}),"Start Camera"]}),o.jsxs(Q,{onClick:z,variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[o.jsx(qP,{className:"w-4 h-4 mr-2"}),"Take Photo"]})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-slate-50/80 dark:bg-slate-700 rounded-xl border border-slate-200/50 dark:border-slate-700",children:[o.jsx(Cr,{className:"w-8 h-8 mx-auto mb-2 text-slate-600 dark:text-slate-300"}),o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-1",children:"Instant Analysis"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Real-time sustainability scoring"})]}),o.jsxs("div",{className:"text-center p-4 bg-slate-50/80 dark:bg-slate-700 rounded-xl border border-slate-200/50 dark:border-slate-700",children:[o.jsx(dt,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-1",children:"Impact Assessment"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Environmental footprint analysis"})]}),o.jsxs("div",{className:"text-center p-4 bg-slate-50/80 dark:bg-slate-700 rounded-xl border border-slate-200/50 dark:border-slate-700",children:[o.jsx(fn,{className:"w-8 h-8 mx-auto mb-2 text-slate-600 dark:text-slate-300"}),o.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-1",children:"Smart Alternatives"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Better product suggestions"})]})]}),d&&o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("img",{src:d.image,alt:d.name,className:"w-20 h-20 object-cover rounded-lg"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:d.name}),o.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:d.brand}),o.jsxs("p",{className:"text-lg font-bold text-green-600",children:["$",d.price]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("div",{className:"flex text-yellow-400",children:"".repeat(Math.floor(d.rating))}),o.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:["(",d.reviews,")"]})]})]})]}),o.jsx(ne,{className:`text-2xl font-bold px-4 py-2 ${W(d.sustainabilityScore)}`,children:d.sustainabilityScore})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[o.jsx(dt,{className:"w-6 h-6 mx-auto mb-1 text-green-600"}),o.jsx("div",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:d.sustainability.carbon}),o.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Carbon"})]}),o.jsxs("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[o.jsx(fi,{className:"w-6 h-6 mx-auto mb-1 text-blue-600"}),o.jsx("div",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:d.sustainability.water}),o.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Water"})]}),o.jsxs("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[o.jsx(Cr,{className:"w-6 h-6 mx-auto mb-1 text-purple-600"}),o.jsx("div",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:d.sustainability.energy}),o.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Energy"})]}),o.jsxs("div",{className:"text-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[o.jsx(ls,{className:"w-6 h-6 mx-auto mb-1 text-red-600"}),o.jsx("div",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:d.sustainability.ethics}),o.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Ethics"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Environmental Impact"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Carbon Footprint:"}),o.jsx("span",{className:"font-medium",children:d.carbon})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Water Usage:"}),o.jsx("span",{className:"font-medium",children:d.water})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Packaging:"}),o.jsx("span",{className:"font-medium",children:d.packaging})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Product Info"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Origin:"}),o.jsx("span",{className:"font-medium",children:d.origin})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Stock:"}),o.jsx("span",{className:`font-medium ${d.inStock?"text-green-600":"text-red-600"}`,children:d.inStock?"In Stock":"Out of Stock"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Barcode:"}),o.jsx("span",{className:"font-medium text-xs",children:d.barcode})]})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Key Features"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:d.features.slice(0,6).map((M,F)=>o.jsx(ne,{variant:"outline",className:"border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 bg-slate-50 dark:bg-slate-700",children:M},F))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Certifications"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:d.certifications.map((M,F)=>o.jsxs(ne,{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 border-green-200 dark:border-green-700",children:[o.jsx(Yt,{className:"w-3 h-3 mr-1"}),M]},F))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Better Alternatives"}),d.alternatives.map((M,F)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg border border-slate-200/50 dark:border-slate-700",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:M.name}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:M.reason}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:M.priceComparison})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{variant:"outline",className:"border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300",children:M.score}),o.jsx(Kl,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"})]})]},F))]}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-6",children:[d&&o.jsx(o.Fragment,{children:o.jsx(Q,{className:"bg-slate-800 hover:bg-slate-900 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-foreground",onClick:()=>{e(d),r&&r("lifecycle")},children:"View Full Analysis"})}),o.jsx(Q,{variant:"outline",className:"border-slate-300 dark:border-slate-700",onClick:()=>{var M,F,B,J,U;d&&l({id:d.id.toString(),name:d.name,brand:d.brand,sustainabilityScore:d.sustainabilityScore,category:d.category,date:new Date().toISOString(),price:d.price,image:d.image,metrics:{carbon:((M=d.sustainability)==null?void 0:M.carbon)||0,water:((F=d.sustainability)==null?void 0:F.water)||0,waste:((B=d.sustainability)==null?void 0:B.waste)||0,energy:((J=d.sustainability)==null?void 0:J.energy)||0,ethics:((U=d.sustainability)==null?void 0:U.ethics)||0},certifications:d.certifications||[],pros:d.pros||[],cons:d.cons||[],rating:d.rating,reviews:d.reviews,inStock:d.inStock,features:d.features}),r&&r("comparison")},children:"Compare Products"}),o.jsxs(Q,{variant:"outline",className:"border-green-300 text-green-700 hover:bg-green-50 dark:hover:bg-green-900",onClick:()=>{d&&d.price!==void 0&&a({id:d.id.toString(),name:d.name,price:d.price,image:d.image||"",brand:d.brand||null})},children:[o.jsx(fn,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})]})]})})]})]})]})};function Bde(t,e=[]){let r=[];function n(s,a){const l=E.createContext(a),c=r.length;r=[...r,a];function u(d){const{scope:f,children:m,...g}=d,v=(f==null?void 0:f[t][c])||l,y=E.useMemo(()=>g,Object.values(g));return o.jsx(v.Provider,{value:y,children:m})}function h(d,f){const m=(f==null?void 0:f[t][c])||l,g=E.useContext(m);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,h]}const i=()=>{const s=r.map(a=>E.createContext(a));return function(l){const c=(l==null?void 0:l[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[n,Ude(i,...e)]}function Ude(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}var jC="Progress",EC=100,[zde,z3e]=Bde(jC),[Wde,Hde]=zde(jC),dB=E.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:s=Gde,...a}=t;(i||i===0)&&!XR(i)&&console.error(qde(`${i}`,"Progress"));const l=XR(i)?i:EC;n!==null&&!JR(n,l)&&console.error(Kde(`${n}`,"Progress"));const c=JR(n,l)?n:null,u=$v(c)?s(c,l):void 0;return o.jsx(Wde,{scope:r,value:c,max:l,children:o.jsx(mt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":$v(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":mB(c,l),"data-value":c??void 0,"data-max":l,...a,ref:e})})});dB.displayName=jC;var hB="ProgressIndicator",fB=E.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,i=Hde(hB,r);return o.jsx(mt.div,{"data-state":mB(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});fB.displayName=hB;function Gde(t,e){return`${Math.round(t/e*100)}%`}function mB(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function $v(t){return typeof t=="number"}function XR(t){return $v(t)&&!isNaN(t)&&t>0}function JR(t,e){return $v(t)&&!isNaN(t)&&t<=e&&t>=0}function qde(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${EC}\`.`}function Kde(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${EC} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pB=dB,Yde=fB;const Ht=E.forwardRef(({className:t,value:e,...r},n)=>o.jsx(pB,{ref:n,className:vt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:o.jsx(Yde,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ht.displayName=pB.displayName;var Qde=Array.isArray,ei=Qde,Xde=typeof Xg=="object"&&Xg&&Xg.Object===Object&&Xg,gB=Xde,Jde=gB,Zde=typeof self=="object"&&self&&self.Object===Object&&self,ehe=Jde||Zde||Function("return this")(),Qs=ehe,the=Qs,rhe=the.Symbol,Sg=rhe,ZR=Sg,yB=Object.prototype,nhe=yB.hasOwnProperty,ihe=yB.toString,kf=ZR?ZR.toStringTag:void 0;function she(t){var e=nhe.call(t,kf),r=t[kf];try{t[kf]=void 0;var n=!0}catch{}var i=ihe.call(t);return n&&(e?t[kf]=r:delete t[kf]),i}var ahe=she,ohe=Object.prototype,lhe=ohe.toString;function che(t){return lhe.call(t)}var uhe=che,e4=Sg,dhe=ahe,hhe=uhe,fhe="[object Null]",mhe="[object Undefined]",t4=e4?e4.toStringTag:void 0;function phe(t){return t==null?t===void 0?mhe:fhe:t4&&t4 in Object(t)?dhe(t):hhe(t)}var Qa=phe;function ghe(t){return t!=null&&typeof t=="object"}var Xa=ghe,yhe=Qa,vhe=Xa,xhe="[object Symbol]";function bhe(t){return typeof t=="symbol"||vhe(t)&&yhe(t)==xhe}var Ih=bhe,whe=ei,_he=Ih,She=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,khe=/^\w*$/;function Nhe(t,e){if(whe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||_he(t)?!0:khe.test(t)||!She.test(t)||e!=null&&t in Object(e)}var CC=Nhe;function jhe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Nl=jhe;const Oh=bt(Nl);var Ehe=Qa,Che=Nl,Ahe="[object AsyncFunction]",The="[object Function]",Phe="[object GeneratorFunction]",Ihe="[object Proxy]";function Ohe(t){if(!Che(t))return!1;var e=Ehe(t);return e==The||e==Phe||e==Ahe||e==Ihe}var AC=Ohe;const Ve=bt(AC);var Rhe=Qs,Mhe=Rhe["__core-js_shared__"],Dhe=Mhe,b_=Dhe,r4=function(){var t=/[^.]+$/.exec(b_&&b_.keys&&b_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function $he(t){return!!r4&&r4 in t}var Lhe=$he,Fhe=Function.prototype,Vhe=Fhe.toString;function Bhe(t){if(t!=null){try{return Vhe.call(t)}catch{}try{return t+""}catch{}}return""}var vB=Bhe,Uhe=AC,zhe=Lhe,Whe=Nl,Hhe=vB,Ghe=/[\\^$.*+?()[\]{}|]/g,qhe=/^\[object .+?Constructor\]$/,Khe=Function.prototype,Yhe=Object.prototype,Qhe=Khe.toString,Xhe=Yhe.hasOwnProperty,Jhe=RegExp("^"+Qhe.call(Xhe).replace(Ghe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zhe(t){if(!Whe(t)||zhe(t))return!1;var e=Uhe(t)?Jhe:qhe;return e.test(Hhe(t))}var efe=Zhe;function tfe(t,e){return t==null?void 0:t[e]}var rfe=tfe,nfe=efe,ife=rfe;function sfe(t,e){var r=ife(t,e);return nfe(r)?r:void 0}var Gc=sfe,afe=Gc,ofe=afe(Object,"create"),aw=ofe,n4=aw;function lfe(){this.__data__=n4?n4(null):{},this.size=0}var cfe=lfe;function ufe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var dfe=ufe,hfe=aw,ffe="__lodash_hash_undefined__",mfe=Object.prototype,pfe=mfe.hasOwnProperty;function gfe(t){var e=this.__data__;if(hfe){var r=e[t];return r===ffe?void 0:r}return pfe.call(e,t)?e[t]:void 0}var yfe=gfe,vfe=aw,xfe=Object.prototype,bfe=xfe.hasOwnProperty;function wfe(t){var e=this.__data__;return vfe?e[t]!==void 0:bfe.call(e,t)}var _fe=wfe,Sfe=aw,kfe="__lodash_hash_undefined__";function Nfe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Sfe&&e===void 0?kfe:e,this}var jfe=Nfe,Efe=cfe,Cfe=dfe,Afe=yfe,Tfe=_fe,Pfe=jfe;function Rh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Rh.prototype.clear=Efe;Rh.prototype.delete=Cfe;Rh.prototype.get=Afe;Rh.prototype.has=Tfe;Rh.prototype.set=Pfe;var Ife=Rh;function Ofe(){this.__data__=[],this.size=0}var Rfe=Ofe;function Mfe(t,e){return t===e||t!==t&&e!==e}var TC=Mfe,Dfe=TC;function $fe(t,e){for(var r=t.length;r--;)if(Dfe(t[r][0],e))return r;return-1}var ow=$fe,Lfe=ow,Ffe=Array.prototype,Vfe=Ffe.splice;function Bfe(t){var e=this.__data__,r=Lfe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Vfe.call(e,r,1),--this.size,!0}var Ufe=Bfe,zfe=ow;function Wfe(t){var e=this.__data__,r=zfe(e,t);return r<0?void 0:e[r][1]}var Hfe=Wfe,Gfe=ow;function qfe(t){return Gfe(this.__data__,t)>-1}var Kfe=qfe,Yfe=ow;function Qfe(t,e){var r=this.__data__,n=Yfe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Xfe=Qfe,Jfe=Rfe,Zfe=Ufe,eme=Hfe,tme=Kfe,rme=Xfe;function Mh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Mh.prototype.clear=Jfe;Mh.prototype.delete=Zfe;Mh.prototype.get=eme;Mh.prototype.has=tme;Mh.prototype.set=rme;var lw=Mh,nme=Gc,ime=Qs,sme=nme(ime,"Map"),PC=sme,i4=Ife,ame=lw,ome=PC;function lme(){this.size=0,this.__data__={hash:new i4,map:new(ome||ame),string:new i4}}var cme=lme;function ume(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var dme=ume,hme=dme;function fme(t,e){var r=t.__data__;return hme(e)?r[typeof e=="string"?"string":"hash"]:r.map}var cw=fme,mme=cw;function pme(t){var e=mme(this,t).delete(t);return this.size-=e?1:0,e}var gme=pme,yme=cw;function vme(t){return yme(this,t).get(t)}var xme=vme,bme=cw;function wme(t){return bme(this,t).has(t)}var _me=wme,Sme=cw;function kme(t,e){var r=Sme(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var Nme=kme,jme=cme,Eme=gme,Cme=xme,Ame=_me,Tme=Nme;function Dh(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Dh.prototype.clear=jme;Dh.prototype.delete=Eme;Dh.prototype.get=Cme;Dh.prototype.has=Ame;Dh.prototype.set=Tme;var IC=Dh,xB=IC,Pme="Expected a function";function OC(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Pme);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(OC.Cache||xB),r}OC.Cache=xB;var bB=OC;const Ime=bt(bB);var Ome=bB,Rme=500;function Mme(t){var e=Ome(t,function(n){return r.size===Rme&&r.clear(),n}),r=e.cache;return e}var Dme=Mme,$me=Dme,Lme=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fme=/\\(\\)?/g,Vme=$me(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Lme,function(r,n,i,s){e.push(i?s.replace(Fme,"$1"):n||r)}),e}),Bme=Vme;function Ume(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var RC=Ume,s4=Sg,zme=RC,Wme=ei,Hme=Ih,Gme=1/0,a4=s4?s4.prototype:void 0,o4=a4?a4.toString:void 0;function wB(t){if(typeof t=="string")return t;if(Wme(t))return zme(t,wB)+"";if(Hme(t))return o4?o4.call(t):"";var e=t+"";return e=="0"&&1/t==-Gme?"-0":e}var qme=wB,Kme=qme;function Yme(t){return t==null?"":Kme(t)}var _B=Yme,Qme=ei,Xme=CC,Jme=Bme,Zme=_B;function epe(t,e){return Qme(t)?t:Xme(t,e)?[t]:Jme(Zme(t))}var SB=epe,tpe=Ih,rpe=1/0;function npe(t){if(typeof t=="string"||tpe(t))return t;var e=t+"";return e=="0"&&1/t==-rpe?"-0":e}var uw=npe,ipe=SB,spe=uw;function ape(t,e){e=ipe(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[spe(e[r++])];return r&&r==n?t:void 0}var MC=ape,ope=MC;function lpe(t,e,r){var n=t==null?void 0:ope(t,e);return n===void 0?r:n}var kB=lpe;const pi=bt(kB);function cpe(t){return t==null}var upe=cpe;const Ge=bt(upe);var dpe=Qa,hpe=ei,fpe=Xa,mpe="[object String]";function ppe(t){return typeof t=="string"||!hpe(t)&&fpe(t)&&dpe(t)==mpe}var gpe=ppe;const kg=bt(gpe);var NB={exports:{}},jt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC=Symbol.for("react.element"),$C=Symbol.for("react.portal"),dw=Symbol.for("react.fragment"),hw=Symbol.for("react.strict_mode"),fw=Symbol.for("react.profiler"),mw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),ype=Symbol.for("react.server_context"),gw=Symbol.for("react.forward_ref"),yw=Symbol.for("react.suspense"),vw=Symbol.for("react.suspense_list"),xw=Symbol.for("react.memo"),bw=Symbol.for("react.lazy"),vpe=Symbol.for("react.offscreen"),jB;jB=Symbol.for("react.module.reference");function Fi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case DC:switch(t=t.type,t){case dw:case fw:case hw:case yw:case vw:return t;default:switch(t=t&&t.$$typeof,t){case ype:case pw:case gw:case bw:case xw:case mw:return t;default:return e}}case $C:return e}}}jt.ContextConsumer=pw;jt.ContextProvider=mw;jt.Element=DC;jt.ForwardRef=gw;jt.Fragment=dw;jt.Lazy=bw;jt.Memo=xw;jt.Portal=$C;jt.Profiler=fw;jt.StrictMode=hw;jt.Suspense=yw;jt.SuspenseList=vw;jt.isAsyncMode=function(){return!1};jt.isConcurrentMode=function(){return!1};jt.isContextConsumer=function(t){return Fi(t)===pw};jt.isContextProvider=function(t){return Fi(t)===mw};jt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===DC};jt.isForwardRef=function(t){return Fi(t)===gw};jt.isFragment=function(t){return Fi(t)===dw};jt.isLazy=function(t){return Fi(t)===bw};jt.isMemo=function(t){return Fi(t)===xw};jt.isPortal=function(t){return Fi(t)===$C};jt.isProfiler=function(t){return Fi(t)===fw};jt.isStrictMode=function(t){return Fi(t)===hw};jt.isSuspense=function(t){return Fi(t)===yw};jt.isSuspenseList=function(t){return Fi(t)===vw};jt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===dw||t===fw||t===hw||t===yw||t===vw||t===vpe||typeof t=="object"&&t!==null&&(t.$$typeof===bw||t.$$typeof===xw||t.$$typeof===mw||t.$$typeof===pw||t.$$typeof===gw||t.$$typeof===jB||t.getModuleId!==void 0)};jt.typeOf=Fi;NB.exports=jt;var EB=NB.exports,xpe=Qa,bpe=Xa,wpe="[object Number]";function _pe(t){return typeof t=="number"||bpe(t)&&xpe(t)==wpe}var CB=_pe;const Spe=bt(CB);var kpe=CB;function Npe(t){return kpe(t)&&t!=+t}var jpe=Npe;const $h=bt(jpe);var En=function(e){return e===0?0:e>0?1:-1},Zl=function(e){return kg(e)&&e.indexOf("%")===e.length-1},ye=function(e){return Spe(e)&&!$h(e)},Er=function(e){return ye(e)||kg(e)},Epe=0,qc=function(e){var r=++Epe;return"".concat(e||"").concat(r)},Cn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ye(e)&&!kg(e))return n;var s;if(Zl(e)){var a=e.indexOf("%");s=r*parseFloat(e.slice(0,a))/100}else s=+e;return $h(s)&&(s=n),i&&s>r&&(s=r),s},ko=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Cpe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},er=function(e,r){return ye(e)&&ye(r)?function(n){return e+n*(r-e)}:function(){return r}};function Lv(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):pi(n,e))===r})}function Ku(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function qk(t){"@babel/helpers - typeof";return qk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qk(t)}var Ape=["viewBox","children"],Tpe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],l4=["points","pathLength"],w_={svg:Ape,polygon:l4,polyline:l4},LC=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Fv=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),!Oh(n))return null;var i={};return Object.keys(n).forEach(function(s){LC.includes(s)&&(i[s]=r||function(a){return n[s](n,a)})}),i},Ppe=function(e,r,n){return function(i){return e(r,n,i),null}},Tc=function(e,r,n){if(!Oh(e)||qk(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];LC.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=Ppe(a,r,n))}),i},Ipe=["children"],Ope=["children"];function c4(t,e){if(t==null)return{};var r=Rpe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Kk(t){"@babel/helpers - typeof";return Kk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kk(t)}var u4={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},ka=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},d4=null,__=null,FC=function t(e){if(e===d4&&Array.isArray(__))return __;var r=[];return E.Children.forEach(e,function(n){Ge(n)||(EB.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),__=r,d4=e,r};function gi(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return ka(i)}):n=[ka(e)],FC(t).forEach(function(i){var s=pi(i,"type.displayName")||pi(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function oi(t,e){var r=gi(t,e);return r&&r[0]}var h4=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!ye(n)||n<=0||!ye(i)||i<=0)},Mpe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Dpe=function(e){return e&&e.type&&kg(e.type)&&Mpe.indexOf(e.type)>=0},AB=function(e){return e&&Kk(e)==="object"&&"clipDot"in e},$pe=function(e,r,n,i){var s,a=(s=w_==null?void 0:w_[i])!==null&&s!==void 0?s:[];return!Ve(e)&&(i&&a.includes(r)||Tpe.includes(r))||n&&LC.includes(r)},Me=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(E.isValidElement(e)&&(i=e.props),!Oh(i))return null;var s={};return Object.keys(i).forEach(function(a){var l;$pe((l=i)===null||l===void 0?void 0:l[a],a,r,n)&&(s[a]=i[a])}),s},Yk=function t(e,r){if(e===r)return!0;var n=E.Children.count(e);if(n!==E.Children.count(r))return!1;if(n===0)return!0;if(n===1)return f4(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=e[i],a=r[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!f4(s,a))return!1}return!0},f4=function(e,r){if(Ge(e)&&Ge(r))return!0;if(!Ge(e)&&!Ge(r)){var n=e.props||{},i=n.children,s=c4(n,Ipe),a=r.props||{},l=a.children,c=c4(a,Ope);return i&&l?Ku(s,c)&&Yk(i,l):!i&&!l?Ku(s,c):!1}return!1},m4=function(e,r){var n=[],i={};return FC(e).forEach(function(s,a){if(Dpe(s))n.push(s);else if(s){var l=ka(s.type),c=r[l]||{},u=c.handler,h=c.once;if(u&&(!h||!i[l])){var d=u(s,l,a);n.push(d),i[l]=!0}}}),n},Lpe=function(e){var r=e&&e.type;return r&&u4[r]?u4[r]:null},Fpe=function(e,r){return FC(r).indexOf(e)},Vpe=["children","width","height","viewBox","className","style","title","desc"];function Qk(){return Qk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qk.apply(this,arguments)}function Bpe(t,e){if(t==null)return{};var r=Upe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Upe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Xk(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,s=t.className,a=t.style,l=t.title,c=t.desc,u=Bpe(t,Vpe),h=i||{width:r,height:n,x:0,y:0},d=He("recharts-surface",s);return D.createElement("svg",Qk({},Me(u,!0,"svg"),{className:d,width:r,height:n,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),D.createElement("title",null,l),D.createElement("desc",null,c),e)}var zpe=["children","className"];function Jk(){return Jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jk.apply(this,arguments)}function Wpe(t,e){if(t==null)return{};var r=Hpe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var tt=D.forwardRef(function(t,e){var r=t.children,n=t.className,i=Wpe(t,zpe),s=He("recharts-layer",n);return D.createElement("g",Jk({className:s},Me(i,!0),{ref:e}),r)}),ds=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]};function Gpe(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=t[n+e];return s}var qpe=Gpe,Kpe=qpe;function Ype(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Kpe(t,e,r)}var Qpe=Ype,Xpe="\\ud800-\\udfff",Jpe="\\u0300-\\u036f",Zpe="\\ufe20-\\ufe2f",ege="\\u20d0-\\u20ff",tge=Jpe+Zpe+ege,rge="\\ufe0e\\ufe0f",nge="\\u200d",ige=RegExp("["+nge+Xpe+tge+rge+"]");function sge(t){return ige.test(t)}var TB=sge;function age(t){return t.split("")}var oge=age,PB="\\ud800-\\udfff",lge="\\u0300-\\u036f",cge="\\ufe20-\\ufe2f",uge="\\u20d0-\\u20ff",dge=lge+cge+uge,hge="\\ufe0e\\ufe0f",fge="["+PB+"]",Zk="["+dge+"]",eN="\\ud83c[\\udffb-\\udfff]",mge="(?:"+Zk+"|"+eN+")",IB="[^"+PB+"]",OB="(?:\\ud83c[\\udde6-\\uddff]){2}",RB="[\\ud800-\\udbff][\\udc00-\\udfff]",pge="\\u200d",MB=mge+"?",DB="["+hge+"]?",gge="(?:"+pge+"(?:"+[IB,OB,RB].join("|")+")"+DB+MB+")*",yge=DB+MB+gge,vge="(?:"+[IB+Zk+"?",Zk,OB,RB,fge].join("|")+")",xge=RegExp(eN+"(?="+eN+")|"+vge+yge,"g");function bge(t){return t.match(xge)||[]}var wge=bge,_ge=oge,Sge=TB,kge=wge;function Nge(t){return Sge(t)?kge(t):_ge(t)}var jge=Nge,Ege=Qpe,Cge=TB,Age=jge,Tge=_B;function Pge(t){return function(e){e=Tge(e);var r=Cge(e)?Age(e):void 0,n=r?r[0]:e.charAt(0),i=r?Ege(r,1).join(""):e.slice(1);return n[t]()+i}}var Ige=Pge,Oge=Ige,Rge=Oge("toUpperCase"),Mge=Rge;const ww=bt(Mge);function Mt(t){return function(){return t}}const $B=Math.cos,Vv=Math.sin,vs=Math.sqrt,Bv=Math.PI,_w=2*Bv,tN=Math.PI,rN=2*tN,Bl=1e-6,Dge=rN-Bl;function LB(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function $ge(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return LB;const r=10**e;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Lge{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?LB:$ge(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,s,a){this._append`C${+e},${+r},${+n},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,r,n,i,s){if(e=+e,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=n-e,u=i-r,h=a-e,d=l-r,f=h*h+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>Bl)if(!(Math.abs(d*c-u*h)>Bl)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-a,g=i-l,v=c*c+u*u,y=m*m+g*g,x=Math.sqrt(v),b=Math.sqrt(f),w=s*Math.tan((tN-Math.acos((v+f-y)/(2*x*b)))/2),k=w/b,S=w/x;Math.abs(k-1)>Bl&&this._append`L${e+k*h},${r+k*d}`,this._append`A${s},${s},0,0,${+(d*m>h*g)},${this._x1=e+S*c},${this._y1=r+S*u}`}}arc(e,r,n,i,s,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),u=e+l,h=r+c,d=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Bl||Math.abs(this._y1-h)>Bl)&&this._append`L${u},${h}`,n&&(f<0&&(f=f%rN+rN),f>Dge?this._append`A${n},${n},0,1,${d},${e-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=h}`:f>Bl&&this._append`A${n},${n},0,${+(f>=tN)},${d},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function VC(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Lge(e)}function BC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function FB(t){this._context=t}FB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Sw(t){return new FB(t)}function VB(t){return t[0]}function BB(t){return t[1]}function UB(t,e){var r=Mt(!0),n=null,i=Sw,s=null,a=VC(l);t=typeof t=="function"?t:t===void 0?VB:Mt(t),e=typeof e=="function"?e:e===void 0?BB:Mt(e);function l(c){var u,h=(c=BC(c)).length,d,f=!1,m;for(n==null&&(s=i(m=a())),u=0;u<=h;++u)!(u<h&&r(d=c[u],u,c))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,u,c),+e(d,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Mt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Mt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Mt(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(s=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=s=null:s=i(n=c),l):n},l}function I0(t,e,r){var n=null,i=Mt(!0),s=null,a=Sw,l=null,c=VC(u);t=typeof t=="function"?t:t===void 0?VB:Mt(+t),e=typeof e=="function"?e:Mt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?BB:Mt(+r);function u(d){var f,m,g,v=(d=BC(d)).length,y,x=!1,b,w=new Array(v),k=new Array(v);for(s==null&&(l=a(b=c())),f=0;f<=v;++f){if(!(f<v&&i(y=d[f],f,d))===x)if(x=!x)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=f-1;g>=m;--g)l.point(w[g],k[g]);l.lineEnd(),l.areaEnd()}x&&(w[f]=+t(y,f,d),k[f]=+e(y,f,d),l.point(n?+n(y,f,d):w[f],r?+r(y,f,d):k[f]))}if(b)return l=null,b+""||null}function h(){return UB().defined(i).curve(a).context(s)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:Mt(+d),n=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Mt(+d),u):t},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Mt(+d),u):n},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:Mt(+d),r=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Mt(+d),u):e},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Mt(+d),u):r},u.lineX0=u.lineY0=function(){return h().x(t).y(e)},u.lineY1=function(){return h().x(t).y(r)},u.lineX1=function(){return h().x(n).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Mt(!!d),u):i},u.curve=function(d){return arguments.length?(a=d,s!=null&&(l=a(s)),u):a},u.context=function(d){return arguments.length?(d==null?s=l=null:l=a(s=d),u):s},u}class zB{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Fge(t){return new zB(t,!0)}function Vge(t){return new zB(t,!1)}const UC={draw(t,e){const r=vs(e/Bv);t.moveTo(r,0),t.arc(0,0,r,0,_w)}},Bge={draw(t,e){const r=vs(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},WB=vs(1/3),Uge=WB*2,zge={draw(t,e){const r=vs(e/Uge),n=r*WB;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Wge={draw(t,e){const r=vs(e),n=-r/2;t.rect(n,n,r,r)}},Hge=.8908130915292852,HB=Vv(Bv/10)/Vv(7*Bv/10),Gge=Vv(_w/10)*HB,qge=-$B(_w/10)*HB,Kge={draw(t,e){const r=vs(e*Hge),n=Gge*r,i=qge*r;t.moveTo(0,-r),t.lineTo(n,i);for(let s=1;s<5;++s){const a=_w*s/5,l=$B(a),c=Vv(a);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*i,c*n+l*i)}t.closePath()}},S_=vs(3),Yge={draw(t,e){const r=-vs(e/(S_*3));t.moveTo(0,r*2),t.lineTo(-S_*r,-r),t.lineTo(S_*r,-r),t.closePath()}},bi=-.5,wi=vs(3)/2,nN=1/vs(12),Qge=(nN/2+1)*3,Xge={draw(t,e){const r=vs(e/Qge),n=r/2,i=r*nN,s=n,a=r*nN+r,l=-s,c=a;t.moveTo(n,i),t.lineTo(s,a),t.lineTo(l,c),t.lineTo(bi*n-wi*i,wi*n+bi*i),t.lineTo(bi*s-wi*a,wi*s+bi*a),t.lineTo(bi*l-wi*c,wi*l+bi*c),t.lineTo(bi*n+wi*i,bi*i-wi*n),t.lineTo(bi*s+wi*a,bi*a-wi*s),t.lineTo(bi*l+wi*c,bi*c-wi*l),t.closePath()}};function Jge(t,e){let r=null,n=VC(i);t=typeof t=="function"?t:Mt(t||UC),e=typeof e=="function"?e:Mt(e===void 0?64:+e);function i(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Mt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Mt(+s),i):e},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function Uv(){}function zv(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function GB(t){this._context=t}GB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:zv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:zv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Zge(t){return new GB(t)}function qB(t){this._context=t}qB.prototype={areaStart:Uv,areaEnd:Uv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:zv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function e0e(t){return new qB(t)}function KB(t){this._context=t}KB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:zv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function t0e(t){return new KB(t)}function YB(t){this._context=t}YB.prototype={areaStart:Uv,areaEnd:Uv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function r0e(t){return new YB(t)}function p4(t){return t<0?-1:1}function g4(t,e,r){var n=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(n||i<0&&-0),a=(r-t._y1)/(i||n<0&&-0),l=(s*i+a*n)/(n+i);return(p4(s)+p4(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function y4(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function k_(t,e,r){var n=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,i+l*e,s-l,a-l*r,s,a)}function Wv(t){this._context=t}Wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k_(this,this._t0,y4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,k_(this,y4(this,r=g4(this,t,e)),r);break;default:k_(this,this._t0,r=g4(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function QB(t){this._context=new XB(t)}(QB.prototype=Object.create(Wv.prototype)).point=function(t,e){Wv.prototype.point.call(this,e,t)};function XB(t){this._context=t}XB.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,s){this._context.bezierCurveTo(e,t,n,r,s,i)}};function n0e(t){return new Wv(t)}function i0e(t){return new QB(t)}function JB(t){this._context=t}JB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=v4(t),i=v4(e),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function v4(t){var e,r=t.length-1,n,i=new Array(r),s=new Array(r),a=new Array(r);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,s[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/s[e-1],s[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/s[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function s0e(t){return new JB(t)}function kw(t,e){this._context=t,this._t=e}kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function a0e(t){return new kw(t,.5)}function o0e(t){return new kw(t,0)}function l0e(t){return new kw(t,1)}function Ld(t,e){if((a=t.length)>1)for(var r=1,n,i,s=t[e[0]],a,l=s.length;r<a;++r)for(i=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function iN(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function c0e(t,e){return t[e]}function u0e(t){const e=[];return e.key=t,e}function d0e(){var t=Mt([]),e=iN,r=Ld,n=c0e;function i(s){var a=Array.from(t.apply(this,arguments),u0e),l,c=a.length,u=-1,h;for(const d of s)for(l=0,++u;l<c;++l)(a[l][u]=[0,+n(d,a[l].key,u,s)]).data=d;for(l=0,h=BC(e(a));l<c;++l)a[h[l]].index=l;return r(a,h),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Mt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:Mt(+s),i):n},i.order=function(s){return arguments.length?(e=s==null?iN:typeof s=="function"?s:Mt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(r=s??Ld,i):r},i}function h0e(t,e){if((n=t.length)>0){for(var r,n,i=0,s=t[0].length,a;i<s;++i){for(a=r=0;r<n;++r)a+=t[r][i][1]||0;if(a)for(r=0;r<n;++r)t[r][i][1]/=a}Ld(t,e)}}function f0e(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,s=n.length;r<s;++r){for(var a=0,l=0;a<i;++a)l+=t[a][r][1]||0;n[r][1]+=n[r][0]=-l/2}Ld(t,e)}}function m0e(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,s,a;n<s;++n){for(var l=0,c=0,u=0;l<a;++l){for(var h=t[e[l]],d=h[n][1]||0,f=h[n-1][1]||0,m=(d-f)/2,g=0;g<l;++g){var v=t[e[g]],y=v[n][1]||0,x=v[n-1][1]||0;m+=y-x}c+=d,u+=m*d}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Ld(t,e)}}function cp(t){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(t)}var p0e=["type","size","sizeType"];function sN(){return sN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sN.apply(this,arguments)}function x4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function b4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(r),!0).forEach(function(n){g0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g0e(t,e,r){return e=y0e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y0e(t){var e=v0e(t,"string");return cp(e)=="symbol"?e:e+""}function v0e(t,e){if(cp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x0e(t,e){if(t==null)return{};var r=b0e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function b0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var ZB={symbolCircle:UC,symbolCross:Bge,symbolDiamond:zge,symbolSquare:Wge,symbolStar:Kge,symbolTriangle:Yge,symbolWye:Xge},w0e=Math.PI/180,_0e=function(e){var r="symbol".concat(ww(e));return ZB[r]||UC},S0e=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*w0e;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},k0e=function(e,r){ZB["symbol".concat(ww(e))]=r},zC=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,s=i===void 0?64:i,a=e.sizeType,l=a===void 0?"area":a,c=x0e(e,p0e),u=b4(b4({},c),{},{type:n,size:s,sizeType:l}),h=function(){var y=_0e(n),x=Jge().type(y).size(S0e(s,l,n));return x()},d=u.className,f=u.cx,m=u.cy,g=Me(u,!0);return f===+f&&m===+m&&s===+s?D.createElement("path",sN({},g,{className:He("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(m,")"),d:h()})):null};zC.registerSymbol=k0e;function Fd(t){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fd(t)}function aN(){return aN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aN.apply(this,arguments)}function w4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function N0e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w4(Object(r),!0).forEach(function(n){up(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E0e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tU(n.key),n)}}function C0e(t,e,r){return e&&E0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function A0e(t,e,r){return e=Hv(e),T0e(t,eU()?Reflect.construct(e,r||[],Hv(t).constructor):e.apply(t,r))}function T0e(t,e){if(e&&(Fd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P0e(t)}function P0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eU=function(){return!!t})()}function Hv(t){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hv(t)}function I0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oN(t,e)}function oN(t,e){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oN(t,e)}function up(t,e,r){return e=tU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tU(t){var e=O0e(t,"string");return Fd(e)=="symbol"?e:e+""}function O0e(t,e){if(Fd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _i=32,WC=function(t){function e(){return j0e(this,e),A0e(this,e,arguments)}return I0e(e,t),C0e(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=_i/2,a=_i/6,l=_i/3,c=n.inactive?i:n.color;if(n.type==="plainline")return D.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:_i,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return D.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(_i,"M").concat(2*l,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return D.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(_i/8,"h").concat(_i,"v").concat(_i*3/4,"h").concat(-_i,"z"),className:"recharts-legend-icon"});if(D.isValidElement(n.legendIcon)){var u=N0e({},n);return delete u.legendIcon,D.cloneElement(n.legendIcon,u)}return D.createElement(zC,{fill:c,cx:s,cy:s,size:_i,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,a=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,h={x:0,y:0,width:_i,height:_i},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,g){var v=m.formatter||c,y=He(up(up({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=Ve(m.value)?null:m.value;ds(!Ve(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return D.createElement("li",aN({className:y,style:d,key:"legend-item-".concat(g)},Tc(n.props,m,g)),D.createElement(Xk,{width:a,height:a,viewBox:h,style:f},n.renderIcon(m)),D.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},v?v(x,m,g):x))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,a=n.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return D.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(E.PureComponent);up(WC,"displayName","Legend");up(WC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var R0e=lw;function M0e(){this.__data__=new R0e,this.size=0}var D0e=M0e;function $0e(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var L0e=$0e;function F0e(t){return this.__data__.get(t)}var V0e=F0e;function B0e(t){return this.__data__.has(t)}var U0e=B0e,z0e=lw,W0e=PC,H0e=IC,G0e=200;function q0e(t,e){var r=this.__data__;if(r instanceof z0e){var n=r.__data__;if(!W0e||n.length<G0e-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new H0e(n)}return r.set(t,e),this.size=r.size,this}var K0e=q0e,Y0e=lw,Q0e=D0e,X0e=L0e,J0e=V0e,Z0e=U0e,eye=K0e;function Lh(t){var e=this.__data__=new Y0e(t);this.size=e.size}Lh.prototype.clear=Q0e;Lh.prototype.delete=X0e;Lh.prototype.get=J0e;Lh.prototype.has=Z0e;Lh.prototype.set=eye;var rU=Lh,tye="__lodash_hash_undefined__";function rye(t){return this.__data__.set(t,tye),this}var nye=rye;function iye(t){return this.__data__.has(t)}var sye=iye,aye=IC,oye=nye,lye=sye;function Gv(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new aye;++e<r;)this.add(t[e])}Gv.prototype.add=Gv.prototype.push=oye;Gv.prototype.has=lye;var nU=Gv;function cye(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var iU=cye;function uye(t,e){return t.has(e)}var sU=uye,dye=nU,hye=iU,fye=sU,mye=1,pye=2;function gye(t,e,r,n,i,s){var a=r&mye,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var d=-1,f=!0,m=r&pye?new dye:void 0;for(s.set(t,e),s.set(e,t);++d<l;){var g=t[d],v=e[d];if(n)var y=a?n(v,g,d,e,t,s):n(g,v,d,t,e,s);if(y!==void 0){if(y)continue;f=!1;break}if(m){if(!hye(e,function(x,b){if(!fye(m,b)&&(g===x||i(g,x,r,n,s)))return m.push(b)})){f=!1;break}}else if(!(g===v||i(g,v,r,n,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var aU=gye,yye=Qs,vye=yye.Uint8Array,xye=vye;function bye(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var wye=bye;function _ye(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var HC=_ye,_4=Sg,S4=xye,Sye=TC,kye=aU,Nye=wye,jye=HC,Eye=1,Cye=2,Aye="[object Boolean]",Tye="[object Date]",Pye="[object Error]",Iye="[object Map]",Oye="[object Number]",Rye="[object RegExp]",Mye="[object Set]",Dye="[object String]",$ye="[object Symbol]",Lye="[object ArrayBuffer]",Fye="[object DataView]",k4=_4?_4.prototype:void 0,N_=k4?k4.valueOf:void 0;function Vye(t,e,r,n,i,s,a){switch(r){case Fye:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Lye:return!(t.byteLength!=e.byteLength||!s(new S4(t),new S4(e)));case Aye:case Tye:case Oye:return Sye(+t,+e);case Pye:return t.name==e.name&&t.message==e.message;case Rye:case Dye:return t==e+"";case Iye:var l=Nye;case Mye:var c=n&Eye;if(l||(l=jye),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;n|=Cye,a.set(t,e);var h=kye(l(t),l(e),n,i,s,a);return a.delete(t),h;case $ye:if(N_)return N_.call(t)==N_.call(e)}return!1}var Bye=Vye;function Uye(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var oU=Uye,zye=oU,Wye=ei;function Hye(t,e,r){var n=e(t);return Wye(t)?n:zye(n,r(t))}var Gye=Hye;function qye(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}var Kye=qye;function Yye(){return[]}var Qye=Yye,Xye=Kye,Jye=Qye,Zye=Object.prototype,eve=Zye.propertyIsEnumerable,N4=Object.getOwnPropertySymbols,tve=N4?function(t){return t==null?[]:(t=Object(t),Xye(N4(t),function(e){return eve.call(t,e)}))}:Jye,rve=tve;function nve(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var ive=nve,sve=Qa,ave=Xa,ove="[object Arguments]";function lve(t){return ave(t)&&sve(t)==ove}var cve=lve,j4=cve,uve=Xa,lU=Object.prototype,dve=lU.hasOwnProperty,hve=lU.propertyIsEnumerable,fve=j4(function(){return arguments}())?j4:function(t){return uve(t)&&dve.call(t,"callee")&&!hve.call(t,"callee")},GC=fve,qv={exports:{}};function mve(){return!1}var pve=mve;qv.exports;(function(t,e){var r=Qs,n=pve,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,l=a?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;t.exports=u})(qv,qv.exports);var cU=qv.exports,gve=9007199254740991,yve=/^(?:0|[1-9]\d*)$/;function vve(t,e){var r=typeof t;return e=e??gve,!!e&&(r=="number"||r!="symbol"&&yve.test(t))&&t>-1&&t%1==0&&t<e}var qC=vve,xve=9007199254740991;function bve(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=xve}var KC=bve,wve=Qa,_ve=KC,Sve=Xa,kve="[object Arguments]",Nve="[object Array]",jve="[object Boolean]",Eve="[object Date]",Cve="[object Error]",Ave="[object Function]",Tve="[object Map]",Pve="[object Number]",Ive="[object Object]",Ove="[object RegExp]",Rve="[object Set]",Mve="[object String]",Dve="[object WeakMap]",$ve="[object ArrayBuffer]",Lve="[object DataView]",Fve="[object Float32Array]",Vve="[object Float64Array]",Bve="[object Int8Array]",Uve="[object Int16Array]",zve="[object Int32Array]",Wve="[object Uint8Array]",Hve="[object Uint8ClampedArray]",Gve="[object Uint16Array]",qve="[object Uint32Array]",Vt={};Vt[Fve]=Vt[Vve]=Vt[Bve]=Vt[Uve]=Vt[zve]=Vt[Wve]=Vt[Hve]=Vt[Gve]=Vt[qve]=!0;Vt[kve]=Vt[Nve]=Vt[$ve]=Vt[jve]=Vt[Lve]=Vt[Eve]=Vt[Cve]=Vt[Ave]=Vt[Tve]=Vt[Pve]=Vt[Ive]=Vt[Ove]=Vt[Rve]=Vt[Mve]=Vt[Dve]=!1;function Kve(t){return Sve(t)&&_ve(t.length)&&!!Vt[wve(t)]}var Yve=Kve;function Qve(t){return function(e){return t(e)}}var uU=Qve,Kv={exports:{}};Kv.exports;(function(t,e){var r=gB,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,a=s&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=l})(Kv,Kv.exports);var Xve=Kv.exports,Jve=Yve,Zve=uU,E4=Xve,C4=E4&&E4.isTypedArray,exe=C4?Zve(C4):Jve,dU=exe,txe=ive,rxe=GC,nxe=ei,ixe=cU,sxe=qC,axe=dU,oxe=Object.prototype,lxe=oxe.hasOwnProperty;function cxe(t,e){var r=nxe(t),n=!r&&rxe(t),i=!r&&!n&&ixe(t),s=!r&&!n&&!i&&axe(t),a=r||n||i||s,l=a?txe(t.length,String):[],c=l.length;for(var u in t)(e||lxe.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||sxe(u,c)))&&l.push(u);return l}var uxe=cxe,dxe=Object.prototype;function hxe(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||dxe;return t===r}var fxe=hxe;function mxe(t,e){return function(r){return t(e(r))}}var hU=mxe,pxe=hU,gxe=pxe(Object.keys,Object),yxe=gxe,vxe=fxe,xxe=yxe,bxe=Object.prototype,wxe=bxe.hasOwnProperty;function _xe(t){if(!vxe(t))return xxe(t);var e=[];for(var r in Object(t))wxe.call(t,r)&&r!="constructor"&&e.push(r);return e}var Sxe=_xe,kxe=AC,Nxe=KC;function jxe(t){return t!=null&&Nxe(t.length)&&!kxe(t)}var Ng=jxe,Exe=uxe,Cxe=Sxe,Axe=Ng;function Txe(t){return Axe(t)?Exe(t):Cxe(t)}var Nw=Txe,Pxe=Gye,Ixe=rve,Oxe=Nw;function Rxe(t){return Pxe(t,Oxe,Ixe)}var Mxe=Rxe,A4=Mxe,Dxe=1,$xe=Object.prototype,Lxe=$xe.hasOwnProperty;function Fxe(t,e,r,n,i,s){var a=r&Dxe,l=A4(t),c=l.length,u=A4(e),h=u.length;if(c!=h&&!a)return!1;for(var d=c;d--;){var f=l[d];if(!(a?f in e:Lxe.call(e,f)))return!1}var m=s.get(t),g=s.get(e);if(m&&g)return m==e&&g==t;var v=!0;s.set(t,e),s.set(e,t);for(var y=a;++d<c;){f=l[d];var x=t[f],b=e[f];if(n)var w=a?n(b,x,f,e,t,s):n(x,b,f,t,e,s);if(!(w===void 0?x===b||i(x,b,r,n,s):w)){v=!1;break}y||(y=f=="constructor")}if(v&&!y){var k=t.constructor,S=e.constructor;k!=S&&"constructor"in t&&"constructor"in e&&!(typeof k=="function"&&k instanceof k&&typeof S=="function"&&S instanceof S)&&(v=!1)}return s.delete(t),s.delete(e),v}var Vxe=Fxe,Bxe=Gc,Uxe=Qs,zxe=Bxe(Uxe,"DataView"),Wxe=zxe,Hxe=Gc,Gxe=Qs,qxe=Hxe(Gxe,"Promise"),Kxe=qxe,Yxe=Gc,Qxe=Qs,Xxe=Yxe(Qxe,"Set"),fU=Xxe,Jxe=Gc,Zxe=Qs,ebe=Jxe(Zxe,"WeakMap"),tbe=ebe,lN=Wxe,cN=PC,uN=Kxe,dN=fU,hN=tbe,mU=Qa,Fh=vB,T4="[object Map]",rbe="[object Object]",P4="[object Promise]",I4="[object Set]",O4="[object WeakMap]",R4="[object DataView]",nbe=Fh(lN),ibe=Fh(cN),sbe=Fh(uN),abe=Fh(dN),obe=Fh(hN),Ul=mU;(lN&&Ul(new lN(new ArrayBuffer(1)))!=R4||cN&&Ul(new cN)!=T4||uN&&Ul(uN.resolve())!=P4||dN&&Ul(new dN)!=I4||hN&&Ul(new hN)!=O4)&&(Ul=function(t){var e=mU(t),r=e==rbe?t.constructor:void 0,n=r?Fh(r):"";if(n)switch(n){case nbe:return R4;case ibe:return T4;case sbe:return P4;case abe:return I4;case obe:return O4}return e});var lbe=Ul,j_=rU,cbe=aU,ube=Bye,dbe=Vxe,M4=lbe,D4=ei,$4=cU,hbe=dU,fbe=1,L4="[object Arguments]",F4="[object Array]",O0="[object Object]",mbe=Object.prototype,V4=mbe.hasOwnProperty;function pbe(t,e,r,n,i,s){var a=D4(t),l=D4(e),c=a?F4:M4(t),u=l?F4:M4(e);c=c==L4?O0:c,u=u==L4?O0:u;var h=c==O0,d=u==O0,f=c==u;if(f&&$4(t)){if(!$4(e))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new j_),a||hbe(t)?cbe(t,e,r,n,i,s):ube(t,e,c,r,n,i,s);if(!(r&fbe)){var m=h&&V4.call(t,"__wrapped__"),g=d&&V4.call(e,"__wrapped__");if(m||g){var v=m?t.value():t,y=g?e.value():e;return s||(s=new j_),i(v,y,r,n,s)}}return f?(s||(s=new j_),dbe(t,e,r,n,i,s)):!1}var gbe=pbe,ybe=gbe,B4=Xa;function pU(t,e,r,n,i){return t===e?!0:t==null||e==null||!B4(t)&&!B4(e)?t!==t&&e!==e:ybe(t,e,r,n,pU,i)}var YC=pU,vbe=rU,xbe=YC,bbe=1,wbe=2;function _be(t,e,r,n){var i=r.length,s=i,a=!n;if(t==null)return!s;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<s;){l=r[i];var c=l[0],u=t[c],h=l[1];if(a&&l[2]){if(u===void 0&&!(c in t))return!1}else{var d=new vbe;if(n)var f=n(u,h,c,t,e,d);if(!(f===void 0?xbe(h,u,bbe|wbe,n,d):f))return!1}}return!0}var Sbe=_be,kbe=Nl;function Nbe(t){return t===t&&!kbe(t)}var gU=Nbe,jbe=gU,Ebe=Nw;function Cbe(t){for(var e=Ebe(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,jbe(i)]}return e}var Abe=Cbe;function Tbe(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var yU=Tbe,Pbe=Sbe,Ibe=Abe,Obe=yU;function Rbe(t){var e=Ibe(t);return e.length==1&&e[0][2]?Obe(e[0][0],e[0][1]):function(r){return r===t||Pbe(r,t,e)}}var Mbe=Rbe;function Dbe(t,e){return t!=null&&e in Object(t)}var $be=Dbe,Lbe=SB,Fbe=GC,Vbe=ei,Bbe=qC,Ube=KC,zbe=uw;function Wbe(t,e,r){e=Lbe(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var a=zbe(e[n]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&Ube(i)&&Bbe(a,i)&&(Vbe(t)||Fbe(t)))}var Hbe=Wbe,Gbe=$be,qbe=Hbe;function Kbe(t,e){return t!=null&&qbe(t,e,Gbe)}var Ybe=Kbe,Qbe=YC,Xbe=kB,Jbe=Ybe,Zbe=CC,ewe=gU,twe=yU,rwe=uw,nwe=1,iwe=2;function swe(t,e){return Zbe(t)&&ewe(e)?twe(rwe(t),e):function(r){var n=Xbe(r,t);return n===void 0&&n===e?Jbe(r,t):Qbe(e,n,nwe|iwe)}}var awe=swe;function owe(t){return t}var Vh=owe;function lwe(t){return function(e){return e==null?void 0:e[t]}}var cwe=lwe,uwe=MC;function dwe(t){return function(e){return uwe(e,t)}}var hwe=dwe,fwe=cwe,mwe=hwe,pwe=CC,gwe=uw;function ywe(t){return pwe(t)?fwe(gwe(t)):mwe(t)}var vwe=ywe,xwe=Mbe,bwe=awe,wwe=Vh,_we=ei,Swe=vwe;function kwe(t){return typeof t=="function"?t:t==null?wwe:typeof t=="object"?_we(t)?bwe(t[0],t[1]):xwe(t):Swe(t)}var Xs=kwe;function Nwe(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var vU=Nwe;function jwe(t){return t!==t}var Ewe=jwe;function Cwe(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var Awe=Cwe,Twe=vU,Pwe=Ewe,Iwe=Awe;function Owe(t,e,r){return e===e?Iwe(t,e,r):Twe(t,Pwe,r)}var Rwe=Owe,Mwe=Rwe;function Dwe(t,e){var r=t==null?0:t.length;return!!r&&Mwe(t,e,0)>-1}var $we=Dwe;function Lwe(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var Fwe=Lwe;function Vwe(){}var Bwe=Vwe,E_=fU,Uwe=Bwe,zwe=HC,Wwe=1/0,Hwe=E_&&1/zwe(new E_([,-0]))[1]==Wwe?function(t){return new E_(t)}:Uwe,Gwe=Hwe,qwe=nU,Kwe=$we,Ywe=Fwe,Qwe=sU,Xwe=Gwe,Jwe=HC,Zwe=200;function e1e(t,e,r){var n=-1,i=Kwe,s=t.length,a=!0,l=[],c=l;if(r)a=!1,i=Ywe;else if(s>=Zwe){var u=e?null:Xwe(t);if(u)return Jwe(u);a=!1,i=Qwe,c=new qwe}else c=e?[]:l;e:for(;++n<s;){var h=t[n],d=e?e(h):h;if(h=r||h!==0?h:0,a&&d===d){for(var f=c.length;f--;)if(c[f]===d)continue e;e&&c.push(d),l.push(h)}else i(c,d,r)||(c!==l&&c.push(d),l.push(h))}return l}var t1e=e1e,r1e=Xs,n1e=t1e;function i1e(t,e){return t&&t.length?n1e(t,r1e(e)):[]}var s1e=i1e;const U4=bt(s1e);function xU(t,e,r){return e===!0?U4(t,r):Ve(e)?U4(t,e):t}function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}var a1e=["ref"];function z4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z4(Object(r),!0).forEach(function(n){jw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wU(n.key),n)}}function l1e(t,e,r){return e&&W4(t.prototype,e),r&&W4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c1e(t,e,r){return e=Yv(e),u1e(t,bU()?Reflect.construct(e,r||[],Yv(t).constructor):e.apply(t,r))}function u1e(t,e){if(e&&(Vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d1e(t)}function d1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bU=function(){return!!t})()}function Yv(t){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yv(t)}function h1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fN(t,e)}function fN(t,e){return fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fN(t,e)}function jw(t,e,r){return e=wU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wU(t){var e=f1e(t,"string");return Vd(e)=="symbol"?e:e+""}function f1e(t,e){if(Vd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m1e(t,e){if(t==null)return{};var r=p1e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function p1e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function g1e(t){return t.value}function y1e(t,e){if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return D.createElement(t,e);e.ref;var r=m1e(e,a1e);return D.createElement(WC,r)}var H4=1,Yu=function(t){function e(){var r;o1e(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=c1e(this,e,[].concat(i)),jw(r,"lastBoundingBox",{width:-1,height:-1}),r}return h1e(e,t),l1e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>H4||Math.abs(i.height-this.lastBoundingBox.height)>H4)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ra({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,a=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,h=i.chartHeight,d,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();f={top:((h||0)-g.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ra(ra({},d),f)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,a=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,h=i.payload,d=ra(ra({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return D.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){n.wrapperNode=m}},y1e(s,ra(ra({},this.props),{},{payload:xU(h,u,g1e)})))}}],[{key:"getWithHeight",value:function(n,i){var s=ra(ra({},this.defaultProps),n.props),a=s.layout;return a==="vertical"&&ye(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||i}:null}}])}(E.PureComponent);jw(Yu,"displayName","Legend");jw(Yu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var G4=Sg,v1e=GC,x1e=ei,q4=G4?G4.isConcatSpreadable:void 0;function b1e(t){return x1e(t)||v1e(t)||!!(q4&&t&&t[q4])}var w1e=b1e,_1e=oU,S1e=w1e;function _U(t,e,r,n,i){var s=-1,a=t.length;for(r||(r=S1e),i||(i=[]);++s<a;){var l=t[s];e>0&&r(l)?e>1?_U(l,e-1,r,n,i):_1e(i,l):n||(i[i.length]=l)}return i}var SU=_U;function k1e(t){return function(e,r,n){for(var i=-1,s=Object(e),a=n(e),l=a.length;l--;){var c=a[t?l:++i];if(r(s[c],c,s)===!1)break}return e}}var N1e=k1e,j1e=N1e,E1e=j1e(),C1e=E1e,A1e=C1e,T1e=Nw;function P1e(t,e){return t&&A1e(t,e,T1e)}var kU=P1e,I1e=Ng;function O1e(t,e){return function(r,n){if(r==null)return r;if(!I1e(r))return t(r,n);for(var i=r.length,s=e?i:-1,a=Object(r);(e?s--:++s<i)&&n(a[s],s,a)!==!1;);return r}}var R1e=O1e,M1e=kU,D1e=R1e,$1e=D1e(M1e),QC=$1e,L1e=QC,F1e=Ng;function V1e(t,e){var r=-1,n=F1e(t)?Array(t.length):[];return L1e(t,function(i,s,a){n[++r]=e(i,s,a)}),n}var NU=V1e;function B1e(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var U1e=B1e,K4=Ih;function z1e(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,s=K4(t),a=e!==void 0,l=e===null,c=e===e,u=K4(e);if(!l&&!u&&!s&&t>e||s&&a&&c&&!l&&!u||n&&a&&c||!r&&c||!i)return 1;if(!n&&!s&&!u&&t<e||u&&r&&i&&!n&&!s||l&&r&&i||!a&&i||!c)return-1}return 0}var W1e=z1e,H1e=W1e;function G1e(t,e,r){for(var n=-1,i=t.criteria,s=e.criteria,a=i.length,l=r.length;++n<a;){var c=H1e(i[n],s[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return t.index-e.index}var q1e=G1e,C_=RC,K1e=MC,Y1e=Xs,Q1e=NU,X1e=U1e,J1e=uU,Z1e=q1e,e_e=Vh,t_e=ei;function r_e(t,e,r){e.length?e=C_(e,function(s){return t_e(s)?function(a){return K1e(a,s.length===1?s[0]:s)}:s}):e=[e_e];var n=-1;e=C_(e,J1e(Y1e));var i=Q1e(t,function(s,a,l){var c=C_(e,function(u){return u(s)});return{criteria:c,index:++n,value:s}});return X1e(i,function(s,a){return Z1e(s,a,r)})}var n_e=r_e;function i_e(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var s_e=i_e,a_e=s_e,Y4=Math.max;function o_e(t,e,r){return e=Y4(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=Y4(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),a_e(t,this,l)}}var l_e=o_e;function c_e(t){return function(){return t}}var u_e=c_e,d_e=Gc,h_e=function(){try{var t=d_e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),jU=h_e,f_e=u_e,Q4=jU,m_e=Vh,p_e=Q4?function(t,e){return Q4(t,"toString",{configurable:!0,enumerable:!1,value:f_e(e),writable:!0})}:m_e,g_e=p_e,y_e=800,v_e=16,x_e=Date.now;function b_e(t){var e=0,r=0;return function(){var n=x_e(),i=v_e-(n-r);if(r=n,i>0){if(++e>=y_e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var w_e=b_e,__e=g_e,S_e=w_e,k_e=S_e(__e),N_e=k_e,j_e=Vh,E_e=l_e,C_e=N_e;function A_e(t,e){return C_e(E_e(t,e,j_e),t+"")}var T_e=A_e,P_e=TC,I_e=Ng,O_e=qC,R_e=Nl;function M_e(t,e,r){if(!R_e(r))return!1;var n=typeof e;return(n=="number"?I_e(r)&&O_e(e,r.length):n=="string"&&e in r)?P_e(r[e],t):!1}var Ew=M_e,D_e=SU,$_e=n_e,L_e=T_e,X4=Ew,F_e=L_e(function(t,e){if(t==null)return[];var r=e.length;return r>1&&X4(t,e[0],e[1])?e=[]:r>2&&X4(e[0],e[1],e[2])&&(e=[e[0]]),$_e(t,D_e(e,1),[])}),V_e=F_e;const XC=bt(V_e);function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function mN(){return mN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mN.apply(this,arguments)}function B_e(t,e){return H_e(t)||W_e(t,e)||z_e(t,e)||U_e()}function U_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z_e(t,e){if(t){if(typeof t=="string")return J4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J4(t,e)}}function J4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function W_e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function H_e(t){if(Array.isArray(t))return t}function Z4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function A_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z4(Object(r),!0).forEach(function(n){G_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function G_e(t,e,r){return e=q_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q_e(t){var e=K_e(t,"string");return dp(e)=="symbol"?e:e+""}function K_e(t,e){if(dp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y_e(t){return Array.isArray(t)&&Er(t[0])&&Er(t[1])?t.join(" ~ "):t}var Q_e=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,l=a===void 0?{}:a,c=e.labelStyle,u=c===void 0?{}:c,h=e.payload,d=e.formatter,f=e.itemSorter,m=e.wrapperClassName,g=e.labelClassName,v=e.label,y=e.labelFormatter,x=e.accessibilityLayer,b=x===void 0?!1:x,w=function(){if(h&&h.length){var I={padding:0,margin:0},R=(f?XC(h,f):h).map(function($,z){if($.type==="none")return null;var W=A_({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},l),M=$.formatter||d||Y_e,F=$.value,B=$.name,J=F,U=B;if(M&&J!=null&&U!=null){var H=M(F,B,$,z,h);if(Array.isArray(H)){var q=B_e(H,2);J=q[0],U=q[1]}else J=H}return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:W},Er(U)?D.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Er(U)?D.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,D.createElement("span",{className:"recharts-tooltip-item-value"},J),D.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:I},R)}return null},k=A_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),S=A_({margin:0},u),P=!Ge(v),N=P?v:"",_=He("recharts-default-tooltip",m),T=He("recharts-tooltip-label",g);P&&y&&h!==void 0&&h!==null&&(N=y(v,h));var j=b?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",mN({className:_,style:k},j),D.createElement("p",{className:T,style:S},D.isValidElement(N)?N:"".concat(N)),w())};function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function R0(t,e,r){return e=X_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X_e(t){var e=J_e(t,"string");return hp(e)=="symbol"?e:e+""}function J_e(t,e){if(hp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nf="recharts-tooltip-wrapper",Z_e={visibility:"hidden"};function eSe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return He(Nf,R0(R0(R0(R0({},"".concat(Nf,"-right"),ye(r)&&e&&ye(e.x)&&r>=e.x),"".concat(Nf,"-left"),ye(r)&&e&&ye(e.x)&&r<e.x),"".concat(Nf,"-bottom"),ye(n)&&e&&ye(e.y)&&n>=e.y),"".concat(Nf,"-top"),ye(n)&&e&&ye(e.y)&&n<e.y))}function e5(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&ye(s[n]))return s[n];var h=r[n]-l-i,d=r[n]+i;if(e[n])return a[n]?h:d;if(a[n]){var f=h,m=c[n];return f<m?Math.max(d,c[n]):Math.max(h,c[n])}var g=d+l,v=c[n]+u;return g>v?Math.max(h,c[n]):Math.max(d,c[n])}function tSe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function rSe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,h,d;return a.height>0&&a.width>0&&r?(h=e5({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),d=e5({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=tSe({translateX:h,translateY:d,useTranslate3d:l})):u=Z_e,{cssProperties:u,cssClasses:eSe({translateX:h,translateY:d,coordinate:r})}}function Bd(t){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(t)}function t5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function r5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t5(Object(r),!0).forEach(function(n){gN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CU(n.key),n)}}function sSe(t,e,r){return e&&iSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function aSe(t,e,r){return e=Qv(e),oSe(t,EU()?Reflect.construct(e,r||[],Qv(t).constructor):e.apply(t,r))}function oSe(t,e){if(e&&(Bd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lSe(t)}function lSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EU=function(){return!!t})()}function Qv(t){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qv(t)}function cSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pN(t,e)}function pN(t,e){return pN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},pN(t,e)}function gN(t,e,r){return e=CU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CU(t){var e=uSe(t,"string");return Bd(e)=="symbol"?e:e+""}function uSe(t,e){if(Bd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n5=1,dSe=function(t){function e(){var r;nSe(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=aSe(this,e,[].concat(i)),gN(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),gN(r,"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,u,h;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(h=r.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}}),r}return cSe(e,t),sSe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>n5||Math.abs(n.height-this.state.lastBoundingBox.height)>n5)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,h=i.coordinate,d=i.hasPayload,f=i.isAnimationActive,m=i.offset,g=i.position,v=i.reverseDirection,y=i.useTranslate3d,x=i.viewBox,b=i.wrapperStyle,w=rSe({allowEscapeViewBox:a,coordinate:h,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:x}),k=w.cssClasses,S=w.cssProperties,P=r5(r5({transition:f&&s?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},b);return D.createElement("div",{tabIndex:-1,className:k,style:P,ref:function(_){n.wrapperNode=_}},u)}}])}(E.PureComponent),hSe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ii={isSsr:hSe(),get:function(e){return Ii[e]},set:function(e,r){if(typeof e=="string")Ii[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(i){Ii[i]=e[i]})}}};function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(t)}function i5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function s5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i5(Object(r),!0).forEach(function(n){JC(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TU(n.key),n)}}function pSe(t,e,r){return e&&mSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gSe(t,e,r){return e=Xv(e),ySe(t,AU()?Reflect.construct(e,r||[],Xv(t).constructor):e.apply(t,r))}function ySe(t,e){if(e&&(Ud(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vSe(t)}function vSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AU=function(){return!!t})()}function Xv(t){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xv(t)}function xSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yN(t,e)}function yN(t,e){return yN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},yN(t,e)}function JC(t,e,r){return e=TU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TU(t){var e=bSe(t,"string");return Ud(e)=="symbol"?e:e+""}function bSe(t,e){if(Ud(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ud(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wSe(t){return t.dataKey}function _Se(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(Q_e,e)}var Nn=function(t){function e(){return fSe(this,e),gSe(this,e,arguments)}return xSe(e,t),pSe(e,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,h=i.coordinate,d=i.filterNull,f=i.isAnimationActive,m=i.offset,g=i.payload,v=i.payloadUniqBy,y=i.position,x=i.reverseDirection,b=i.useTranslate3d,w=i.viewBox,k=i.wrapperStyle,S=g??[];d&&S.length&&(S=xU(g.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),v,wSe));var P=S.length>0;return D.createElement(dSe,{allowEscapeViewBox:a,animationDuration:l,animationEasing:c,isAnimationActive:f,active:s,coordinate:h,hasPayload:P,offset:m,position:y,reverseDirection:x,useTranslate3d:b,viewBox:w,wrapperStyle:k},_Se(u,s5(s5({},this.props),{},{payload:S})))}}])}(E.PureComponent);JC(Nn,"displayName","Tooltip");JC(Nn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ii.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var SSe=Qs,kSe=function(){return SSe.Date.now()},NSe=kSe,jSe=/\s/;function ESe(t){for(var e=t.length;e--&&jSe.test(t.charAt(e)););return e}var CSe=ESe,ASe=CSe,TSe=/^\s+/;function PSe(t){return t&&t.slice(0,ASe(t)+1).replace(TSe,"")}var ISe=PSe,OSe=ISe,a5=Nl,RSe=Ih,o5=NaN,MSe=/^[-+]0x[0-9a-f]+$/i,DSe=/^0b[01]+$/i,$Se=/^0o[0-7]+$/i,LSe=parseInt;function FSe(t){if(typeof t=="number")return t;if(RSe(t))return o5;if(a5(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=a5(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=OSe(t);var r=DSe.test(t);return r||$Se.test(t)?LSe(t.slice(2),r?2:8):MSe.test(t)?o5:+t}var PU=FSe,VSe=Nl,T_=NSe,l5=PU,BSe="Expected a function",USe=Math.max,zSe=Math.min;function WSe(t,e,r){var n,i,s,a,l,c,u=0,h=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(BSe);e=l5(e)||0,VSe(r)&&(h=!!r.leading,d="maxWait"in r,s=d?USe(l5(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function m(P){var N=n,_=i;return n=i=void 0,u=P,a=t.apply(_,N),a}function g(P){return u=P,l=setTimeout(x,e),h?m(P):a}function v(P){var N=P-c,_=P-u,T=e-N;return d?zSe(T,s-_):T}function y(P){var N=P-c,_=P-u;return c===void 0||N>=e||N<0||d&&_>=s}function x(){var P=T_();if(y(P))return b(P);l=setTimeout(x,v(P))}function b(P){return l=void 0,f&&n?m(P):(n=i=void 0,a)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=i=l=void 0}function k(){return l===void 0?a:b(T_())}function S(){var P=T_(),N=y(P);if(n=arguments,i=this,c=P,N){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(x,e),m(c)}return l===void 0&&(l=setTimeout(x,e)),a}return S.cancel=w,S.flush=k,S}var HSe=WSe,GSe=HSe,qSe=Nl,KSe="Expected a function";function YSe(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(KSe);return qSe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),GSe(t,e,{leading:n,maxWait:e,trailing:i})}var QSe=YSe;const IU=bt(QSe);function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function c5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function M0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c5(Object(r),!0).forEach(function(n){XSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XSe(t,e,r){return e=JSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JSe(t){var e=ZSe(t,"string");return fp(e)=="symbol"?e:e+""}function ZSe(t,e){if(fp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eke(t,e){return ike(t)||nke(t,e)||rke(t,e)||tke()}function tke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rke(t,e){if(t){if(typeof t=="string")return u5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u5(t,e)}}function u5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nke(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function ike(t){if(Array.isArray(t))return t}var Pc=E.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,s=t.width,a=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,h=u===void 0?0:u,d=t.minHeight,f=t.maxHeight,m=t.children,g=t.debounce,v=g===void 0?0:g,y=t.id,x=t.className,b=t.onResize,w=t.style,k=w===void 0?{}:w,S=E.useRef(null),P=E.useRef();P.current=b,E.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var N=E.useState({containerWidth:i.width,containerHeight:i.height}),_=eke(N,2),T=_[0],j=_[1],C=E.useCallback(function(R,$){j(function(z){var W=Math.round(R),M=Math.round($);return z.containerWidth===W&&z.containerHeight===M?z:{containerWidth:W,containerHeight:M}})},[]);E.useEffect(function(){var R=function(B){var J,U=B[0].contentRect,H=U.width,q=U.height;C(H,q),(J=P.current)===null||J===void 0||J.call(P,H,q)};v>0&&(R=IU(R,v,{trailing:!0,leading:!1}));var $=new ResizeObserver(R),z=S.current.getBoundingClientRect(),W=z.width,M=z.height;return C(W,M),$.observe(S.current),function(){$.disconnect()}},[C,v]);var I=E.useMemo(function(){var R=T.containerWidth,$=T.containerHeight;if(R<0||$<0)return null;ds(Zl(a)||Zl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),ds(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=Zl(a)?R:a,W=Zl(c)?$:c;r&&r>0&&(z?W=z/r:W&&(z=W*r),f&&W>f&&(W=f)),ds(z>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,W,a,c,h,d,r);var M=!Array.isArray(m)&&ka(m.type).endsWith("Chart");return D.Children.map(m,function(F){return EB.isElement(F)?E.cloneElement(F,M0({width:z,height:W},M?{style:M0({height:"100%",width:"100%",maxHeight:W,maxWidth:z},F.props.style)}:{})):F})},[r,m,c,f,d,h,T,a]);return D.createElement("div",{id:y?"".concat(y):void 0,className:He("recharts-responsive-container",x),style:M0(M0({},k),{},{width:a,height:c,minWidth:h,minHeight:d,maxHeight:f}),ref:S},I)}),Cw=function(e){return null};Cw.displayName="Cell";function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function d5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d5(Object(r),!0).forEach(function(n){ske(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ske(t,e,r){return e=ake(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ake(t){var e=oke(t,"string");return mp(e)=="symbol"?e:e+""}function oke(t,e){if(mp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var au={widthCache:{},cacheCount:0},lke=2e3,cke={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},h5="recharts_measurement_span";function uke(t){var e=vN({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var ym=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ii.isSsr)return{width:0,height:0};var n=uke(r),i=JSON.stringify({text:e,copyStyle:n});if(au.widthCache[i])return au.widthCache[i];try{var s=document.getElementById(h5);s||(s=document.createElement("span"),s.setAttribute("id",h5),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=vN(vN({},cke),n);Object.assign(s.style,a),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return au.widthCache[i]=c,++au.cacheCount>lke&&(au.cacheCount=0,au.widthCache={}),c}catch{return{width:0,height:0}}},dke=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function Jv(t,e){return pke(t)||mke(t,e)||fke(t,e)||hke()}function hke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fke(t,e){if(t){if(typeof t=="string")return f5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f5(t,e)}}function f5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mke(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function pke(t){if(Array.isArray(t))return t}function gke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vke(n.key),n)}}function yke(t,e,r){return e&&m5(t.prototype,e),r&&m5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vke(t){var e=xke(t,"string");return pp(e)=="symbol"?e:e+""}function xke(t,e){if(pp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var p5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bke=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,wke=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,OU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_ke=Object.keys(OU),Au="NaN";function Ske(t,e){return t*OU[e]}var D0=function(){function t(e,r){gke(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!bke.test(r)&&(this.num=NaN,this.unit=""),_ke.includes(r)&&(this.num=Ske(e,r),this.unit="px")}return yke(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=wke.exec(r))!==null&&n!==void 0?n:[],s=Jv(i,3),a=s[1],l=s[2];return new t(parseFloat(a),l??"")}}])}();function RU(t){if(t.includes(Au))return Au;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=p5.exec(e))!==null&&r!==void 0?r:[],i=Jv(n,4),s=i[1],a=i[2],l=i[3],c=D0.parse(s??""),u=D0.parse(l??""),h=a==="*"?c.multiply(u):c.divide(u);if(h.isNaN())return Au;e=e.replace(p5,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=g5.exec(e))!==null&&d!==void 0?d:[],m=Jv(f,4),g=m[1],v=m[2],y=m[3],x=D0.parse(g??""),b=D0.parse(y??""),w=v==="+"?x.add(b):x.subtract(b);if(w.isNaN())return Au;e=e.replace(g5,w.toString())}return e}var y5=/\(([^()]*)\)/;function kke(t){for(var e=t;e.includes("(");){var r=y5.exec(e),n=Jv(r,2),i=n[1];e=e.replace(y5,RU(i))}return e}function Nke(t){var e=t.replace(/\s+/g,"");return e=kke(e),e=RU(e),e}function jke(t){try{return Nke(t)}catch{return Au}}function P_(t){var e=jke(t.slice(5,-1));return e===Au?"":e}var Eke=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Cke=["dx","dy","angle","className","breakAll"];function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xN.apply(this,arguments)}function v5(t,e){if(t==null)return{};var r=Ake(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ake(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function x5(t,e){return Oke(t)||Ike(t,e)||Pke(t,e)||Tke()}function Tke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pke(t,e){if(t){if(typeof t=="string")return b5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b5(t,e)}}function b5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ike(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Oke(t){if(Array.isArray(t))return t}var MU=/[ \f\n\r\t\v\u2028\u2029]+/,DU=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var s=[];Ge(r)||(n?s=r.toString().split(""):s=r.toString().split(MU));var a=s.map(function(c){return{word:c,width:ym(c,i).width}}),l=n?0:ym("",i).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}},Rke=function(e,r,n,i,s){var a=e.maxLines,l=e.children,c=e.style,u=e.breakAll,h=ye(a),d=l,f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(W,M){var F=M.word,B=M.width,J=W[W.length-1];if(J&&(i==null||s||J.width+B+n<Number(i)))J.words.push(F),J.width+=B+n;else{var U={words:[F],width:B};W.push(U)}return W},[])},m=f(r),g=function(z){return z.reduce(function(W,M){return W.width>M.width?W:M})};if(!h)return m;for(var v="",y=function(z){var W=d.slice(0,z),M=DU({breakAll:u,style:c,children:W+v}).wordsWithComputedWidth,F=f(M),B=F.length>a||g(F).width>Number(i);return[B,F]},x=0,b=d.length-1,w=0,k;x<=b&&w<=d.length-1;){var S=Math.floor((x+b)/2),P=S-1,N=y(P),_=x5(N,2),T=_[0],j=_[1],C=y(S),I=x5(C,1),R=I[0];if(!T&&!R&&(x=S+1),T&&R&&(b=S-1),!T&&R){k=j;break}w++}return k||m},w5=function(e){var r=Ge(e)?[]:e.toString().split(MU);return[{words:r}]},Mke=function(e){var r=e.width,n=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,l=e.maxLines;if((r||n)&&!Ii.isSsr){var c,u,h=DU({breakAll:a,children:i,style:s});if(h){var d=h.wordsWithComputedWidth,f=h.spaceWidth;c=d,u=f}else return w5(i);return Rke({breakAll:a,children:i,maxLines:l,style:s},c,u,r,n)}return w5(i)},_5="#808080",Ic=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,s=i===void 0?0:i,a=e.lineHeight,l=a===void 0?"1em":a,c=e.capHeight,u=c===void 0?"0.71em":c,h=e.scaleToFit,d=h===void 0?!1:h,f=e.textAnchor,m=f===void 0?"start":f,g=e.verticalAnchor,v=g===void 0?"end":g,y=e.fill,x=y===void 0?_5:y,b=v5(e,Eke),w=E.useMemo(function(){return Mke({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:d,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,d,b.style,b.width]),k=b.dx,S=b.dy,P=b.angle,N=b.className,_=b.breakAll,T=v5(b,Cke);if(!Er(n)||!Er(s))return null;var j=n+(ye(k)?k:0),C=s+(ye(S)?S:0),I;switch(v){case"start":I=P_("calc(".concat(u,")"));break;case"middle":I=P_("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=P_("calc(".concat(w.length-1," * -").concat(l,")"));break}var R=[];if(d){var $=w[0].width,z=b.width;R.push("scale(".concat((ye(z)?z/$:1)/$,")"))}return P&&R.push("rotate(".concat(P,", ").concat(j,", ").concat(C,")")),R.length&&(T.transform=R.join(" ")),D.createElement("text",xN({},Me(T,!0),{x:j,y:C,className:He("recharts-text",N),textAnchor:m,fill:x.includes("url")?_5:x}),w.map(function(W,M){var F=W.words.join(_?"":" ");return D.createElement("tspan",{x:j,dy:M===0?I:l,key:"".concat(F,"-").concat(M)},F)}))};function tl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Dke(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZC(t){let e,r,n;t.length!==2?(e=tl,r=(l,c)=>tl(t(l),c),n=(l,c)=>t(l)-c):(e=t===tl||t===Dke?t:$ke,r=t,n=t);function i(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const d=u+h>>>1;r(l[d],c)<0?u=d+1:h=d}while(u<h)}return u}function s(l,c,u=0,h=l.length){if(u<h){if(e(c,c)!==0)return h;do{const d=u+h>>>1;r(l[d],c)<=0?u=d+1:h=d}while(u<h)}return u}function a(l,c,u=0,h=l.length){const d=i(l,c,u,h-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:i,center:a,right:s}}function $ke(){return 0}function $U(t){return t===null?NaN:+t}function*Lke(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Fke=ZC(tl),jg=Fke.right;ZC($U).center;class S5 extends Map{constructor(e,r=Uke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(k5(this,e))}has(e){return super.has(k5(this,e))}set(e,r){return super.set(Vke(this,e),r)}delete(e){return super.delete(Bke(this,e))}}function k5({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Vke({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Bke({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Uke(t){return t!==null&&typeof t=="object"?t.valueOf():t}function zke(t=tl){if(t===tl)return LU;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function LU(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Wke=Math.sqrt(50),Hke=Math.sqrt(10),Gke=Math.sqrt(2);function Zv(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),a=s>=Wke?10:s>=Hke?5:s>=Gke?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?Zv(t,e,r*2):[l,c,u]}function bN(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,s,a]=n?Zv(e,t,r):Zv(t,e,r);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(n)if(a<0)for(let u=0;u<l;++u)c[u]=(s-u)/-a;else for(let u=0;u<l;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(i+u)/-a;else for(let u=0;u<l;++u)c[u]=(i+u)*a;return c}function wN(t,e,r){return e=+e,t=+t,r=+r,Zv(t,e,r)[2]}function _N(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?wN(e,t,r):wN(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function N5(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function j5(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function FU(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?LU:zke(i);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,h=Math.log(c),d=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*d*(c-d)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(e-u*d/c+f)),g=Math.min(n,Math.floor(e+(c-u)*d/c+f));FU(t,e,m,g,i)}const s=t[e];let a=r,l=n;for(jf(t,r,e),i(t[n],s)>0&&jf(t,r,n);a<l;){for(jf(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[r],s)===0?jf(t,r,l):(++l,jf(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function jf(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function qke(t,e,r){if(t=Float64Array.from(Lke(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return j5(t);if(e>=1)return N5(t);var n,i=(n-1)*e,s=Math.floor(i),a=N5(FU(t,s).subarray(0,s+1)),l=j5(t.subarray(s+1));return a+(l-a)*(i-s)}}function Kke(t,e,r=$U){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,s=Math.floor(i),a=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return a+(l-a)*(i-s)}}function Yke(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(i);++n<i;)s[n]=t+n*r;return s}function Vi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ja(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const SN=Symbol("implicit");function eA(){var t=new S5,e=[],r=[],n=SN;function i(s){let a=t.get(s);if(a===void 0){if(n!==SN)return n;t.set(s,a=e.push(s)-1)}return r[a%r.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new S5;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return eA(e,r).unknown(n)},Vi.apply(i,arguments),i}function gp(){var t=eA().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,s,a,l=!1,c=0,u=0,h=.5;delete t.unknown;function d(){var f=e().length,m=i<n,g=m?i:n,v=m?n:i;s=(v-g)/Math.max(1,f-c+u*2),l&&(s=Math.floor(s)),g+=(v-g-s*(f-c))*h,a=s*(1-c),l&&(g=Math.round(g),a=Math.round(a));var y=Yke(f).map(function(x){return g+s*x});return r(m?y.reverse():y)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,d()):[n,i]},t.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,l=!0,d()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(f){return arguments.length?(l=!!f,d()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),d()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},t.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},t.copy=function(){return gp(e(),[n,i]).round(l).paddingInner(c).paddingOuter(u).align(h)},Vi.apply(d(),arguments)}function VU(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return VU(e())},t}function vm(){return VU(gp.apply(null,arguments).paddingInner(1))}function tA(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function BU(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Eg(){}var yp=.7,ex=1/yp,Qu="\\s*([+-]?\\d+)\\s*",vp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qke=/^#([0-9a-f]{3,8})$/,Xke=new RegExp(`^rgb\\(${Qu},${Qu},${Qu}\\)$`),Jke=new RegExp(`^rgb\\(${Fs},${Fs},${Fs}\\)$`),Zke=new RegExp(`^rgba\\(${Qu},${Qu},${Qu},${vp}\\)$`),eNe=new RegExp(`^rgba\\(${Fs},${Fs},${Fs},${vp}\\)$`),tNe=new RegExp(`^hsl\\(${vp},${Fs},${Fs}\\)$`),rNe=new RegExp(`^hsla\\(${vp},${Fs},${Fs},${vp}\\)$`),E5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tA(Eg,xp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:C5,formatHex:C5,formatHex8:nNe,formatHsl:iNe,formatRgb:A5,toString:A5});function C5(){return this.rgb().formatHex()}function nNe(){return this.rgb().formatHex8()}function iNe(){return UU(this).formatHsl()}function A5(){return this.rgb().formatRgb()}function xp(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Qke.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?T5(e):r===3?new zn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?$0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?$0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Xke.exec(t))?new zn(e[1],e[2],e[3],1):(e=Jke.exec(t))?new zn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zke.exec(t))?$0(e[1],e[2],e[3],e[4]):(e=eNe.exec(t))?$0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=tNe.exec(t))?O5(e[1],e[2]/100,e[3]/100,1):(e=rNe.exec(t))?O5(e[1],e[2]/100,e[3]/100,e[4]):E5.hasOwnProperty(t)?T5(E5[t]):t==="transparent"?new zn(NaN,NaN,NaN,0):null}function T5(t){return new zn(t>>16&255,t>>8&255,t&255,1)}function $0(t,e,r,n){return n<=0&&(t=e=r=NaN),new zn(t,e,r,n)}function sNe(t){return t instanceof Eg||(t=xp(t)),t?(t=t.rgb(),new zn(t.r,t.g,t.b,t.opacity)):new zn}function kN(t,e,r,n){return arguments.length===1?sNe(t):new zn(t,e,r,n??1)}function zn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}tA(zn,kN,BU(Eg,{brighter(t){return t=t==null?ex:Math.pow(ex,t),new zn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yp:Math.pow(yp,t),new zn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zn(dc(this.r),dc(this.g),dc(this.b),tx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P5,formatHex:P5,formatHex8:aNe,formatRgb:I5,toString:I5}));function P5(){return`#${ec(this.r)}${ec(this.g)}${ec(this.b)}`}function aNe(){return`#${ec(this.r)}${ec(this.g)}${ec(this.b)}${ec((isNaN(this.opacity)?1:this.opacity)*255)}`}function I5(){const t=tx(this.opacity);return`${t===1?"rgb(":"rgba("}${dc(this.r)}, ${dc(this.g)}, ${dc(this.b)}${t===1?")":`, ${t})`}`}function tx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ec(t){return t=dc(t),(t<16?"0":"")+t.toString(16)}function O5(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new rs(t,e,r,n)}function UU(t){if(t instanceof rs)return new rs(t.h,t.s,t.l,t.opacity);if(t instanceof Eg||(t=xp(t)),!t)return new rs;if(t instanceof rs)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),s=Math.max(e,r,n),a=NaN,l=s-i,c=(s+i)/2;return l?(e===s?a=(r-n)/l+(r<n)*6:r===s?a=(n-e)/l+2:a=(e-r)/l+4,l/=c<.5?s+i:2-s-i,a*=60):l=c>0&&c<1?0:a,new rs(a,l,c,t.opacity)}function oNe(t,e,r,n){return arguments.length===1?UU(t):new rs(t,e,r,n??1)}function rs(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}tA(rs,oNe,BU(Eg,{brighter(t){return t=t==null?ex:Math.pow(ex,t),new rs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yp:Math.pow(yp,t),new rs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new zn(I_(t>=240?t-240:t+120,i,n),I_(t,i,n),I_(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new rs(R5(this.h),L0(this.s),L0(this.l),tx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=tx(this.opacity);return`${t===1?"hsl(":"hsla("}${R5(this.h)}, ${L0(this.s)*100}%, ${L0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function R5(t){return t=(t||0)%360,t<0?t+360:t}function L0(t){return Math.max(0,Math.min(1,t||0))}function I_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const rA=t=>()=>t;function lNe(t,e){return function(r){return t+r*e}}function cNe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function uNe(t){return(t=+t)==1?zU:function(e,r){return r-e?cNe(e,r,t):rA(isNaN(e)?r:e)}}function zU(t,e){var r=e-t;return r?lNe(t,r):rA(isNaN(t)?e:t)}const M5=function t(e){var r=uNe(e);function n(i,s){var a=r((i=kN(i)).r,(s=kN(s)).r),l=r(i.g,s.g),c=r(i.b,s.b),u=zU(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=l(h),i.b=c(h),i.opacity=u(h),i+""}}return n.gamma=t,n}(1);function dNe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=t[i]*(1-s)+e[i]*s;return n}}function hNe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fNe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),s=new Array(r),a;for(a=0;a<n;++a)i[a]=Bh(t[a],e[a]);for(;a<r;++a)s[a]=e[a];return function(l){for(a=0;a<n;++a)s[a]=i[a](l);return s}}function mNe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function rx(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function pNe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Bh(t[i],e[i]):n[i]=e[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var NN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O_=new RegExp(NN.source,"g");function gNe(t){return function(){return t}}function yNe(t){return function(e){return t(e)+""}}function vNe(t,e){var r=NN.lastIndex=O_.lastIndex=0,n,i,s,a=-1,l=[],c=[];for(t=t+"",e=e+"";(n=NN.exec(t))&&(i=O_.exec(e));)(s=i.index)>r&&(s=e.slice(r,s),l[a]?l[a]+=s:l[++a]=s),(n=n[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,c.push({i:a,x:rx(n,i)})),r=O_.lastIndex;return r<e.length&&(s=e.slice(r),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?yNe(c[0].x):gNe(e):(e=c.length,function(u){for(var h=0,d;h<e;++h)l[(d=c[h]).i]=d.x(u);return l.join("")})}function Bh(t,e){var r=typeof e,n;return e==null||r==="boolean"?rA(e):(r==="number"?rx:r==="string"?(n=xp(e))?(e=n,M5):vNe:e instanceof xp?M5:e instanceof Date?mNe:hNe(e)?dNe:Array.isArray(e)?fNe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pNe:rx)(t,e)}function nA(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function xNe(t,e){e===void 0&&(e=t,t=Bh);for(var r=0,n=e.length-1,i=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(i,i=e[++r]);return function(a){var l=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return s[l](a-l)}}function bNe(t){return function(){return t}}function nx(t){return+t}var D5=[0,1];function An(t){return t}function jN(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:bNe(isNaN(e)?NaN:.5)}function wNe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function _Ne(t,e,r){var n=t[0],i=t[1],s=e[0],a=e[1];return i<n?(n=jN(i,n),s=r(a,s)):(n=jN(n,i),s=r(s,a)),function(l){return s(n(l))}}function SNe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),s=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=jN(t[a],t[a+1]),s[a]=r(e[a],e[a+1]);return function(l){var c=jg(t,l,1,n)-1;return s[c](i[c](l))}}function Cg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Aw(){var t=D5,e=D5,r=Bh,n,i,s,a=An,l,c,u;function h(){var f=Math.min(t.length,e.length);return a!==An&&(a=wNe(t[0],t[f-1])),l=f>2?SNe:_Ne,c=u=null,d}function d(f){return f==null||isNaN(f=+f)?s:(c||(c=l(t.map(n),e,r)))(n(a(f)))}return d.invert=function(f){return a(i((u||(u=l(e,t.map(n),rx)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,nx),h()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),h()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),r=nA,h()},d.clamp=function(f){return arguments.length?(a=f?!0:An,h()):a!==An},d.interpolate=function(f){return arguments.length?(r=f,h()):r},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,m){return n=f,i=m,h()}}function iA(){return Aw()(An,An)}function kNe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ix(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function zd(t){return t=ix(Math.abs(t)),t?t[1]:NaN}function NNe(t,e){return function(r,n){for(var i=r.length,s=[],a=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function jNe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var ENe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bp(t){if(!(e=ENe.exec(t)))throw new Error("invalid format: "+t);var e;return new sA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bp.prototype=sA.prototype;function sA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}sA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CNe(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var WU;function ANe(t,e){var r=ix(t,e);if(!r)return t+"";var n=r[0],i=r[1],s=i-(WU=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+ix(t,Math.max(0,e+s-1))[0]}function $5(t,e){var r=ix(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const L5={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:kNe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$5(t*100,e),r:$5,s:ANe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function F5(t){return t}var V5=Array.prototype.map,B5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function TNe(t){var e=t.grouping===void 0||t.thousands===void 0?F5:NNe(V5.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?F5:jNe(V5.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(d){d=bp(d);var f=d.fill,m=d.align,g=d.sign,v=d.symbol,y=d.zero,x=d.width,b=d.comma,w=d.precision,k=d.trim,S=d.type;S==="n"?(b=!0,S="g"):L5[S]||(w===void 0&&(w=12),k=!0,S="g"),(y||f==="0"&&m==="=")&&(y=!0,f="0",m="=");var P=v==="$"?r:v==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",N=v==="$"?n:/[%p]/.test(S)?a:"",_=L5[S],T=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function j(C){var I=P,R=N,$,z,W;if(S==="c")R=_(C)+R,C="";else{C=+C;var M=C<0||1/C<0;if(C=isNaN(C)?c:_(Math.abs(C),w),k&&(C=CNe(C)),M&&+C==0&&g!=="+"&&(M=!1),I=(M?g==="("?g:l:g==="-"||g==="("?"":g)+I,R=(S==="s"?B5[8+WU/3]:"")+R+(M&&g==="("?")":""),T){for($=-1,z=C.length;++$<z;)if(W=C.charCodeAt($),48>W||W>57){R=(W===46?i+C.slice($+1):C.slice($))+R,C=C.slice(0,$);break}}}b&&!y&&(C=e(C,1/0));var F=I.length+C.length+R.length,B=F<x?new Array(x-F+1).join(f):"";switch(b&&y&&(C=e(B+C,B.length?x-R.length:1/0),B=""),m){case"<":C=I+C+R+B;break;case"=":C=I+B+C+R;break;case"^":C=B.slice(0,F=B.length>>1)+I+C+R+B.slice(F);break;default:C=B+I+C+R;break}return s(C)}return j.toString=function(){return d+""},j}function h(d,f){var m=u((d=bp(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(zd(f)/3)))*3,v=Math.pow(10,-g),y=B5[8+g/3];return function(x){return m(v*x)+y}}return{format:u,formatPrefix:h}}var F0,aA,HU;PNe({thousands:",",grouping:[3],currency:["$",""]});function PNe(t){return F0=TNe(t),aA=F0.format,HU=F0.formatPrefix,F0}function INe(t){return Math.max(0,-zd(Math.abs(t)))}function ONe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zd(e)/3)))*3-zd(Math.abs(t)))}function RNe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zd(e)-zd(t))+1}function GU(t,e,r,n){var i=_N(t,e,r),s;switch(n=bp(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=ONe(i,a))&&(n.precision=s),HU(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=RNe(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=INe(i))&&(n.precision=s-(n.type==="%")*2);break}}return aA(n)}function jl(t){var e=t.domain;return t.ticks=function(r){var n=e();return bN(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return GU(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,s=n.length-1,a=n[i],l=n[s],c,u,h=10;for(l<a&&(u=a,a=l,l=u,u=i,i=s,s=u);h-- >0;){if(u=wN(a,l,r),u===c)return n[i]=a,n[s]=l,e(n);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function sx(){var t=iA();return t.copy=function(){return Cg(t,sx())},Vi.apply(t,arguments),jl(t)}function qU(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,nx),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return qU(t).unknown(e)},t=arguments.length?Array.from(t,nx):[0,1],jl(r)}function KU(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],s=t[n],a;return s<i&&(a=r,r=n,n=a,a=i,i=s,s=a),t[r]=e.floor(i),t[n]=e.ceil(s),t}function U5(t){return Math.log(t)}function z5(t){return Math.exp(t)}function MNe(t){return-Math.log(-t)}function DNe(t){return-Math.exp(-t)}function $Ne(t){return isFinite(t)?+("1e"+t):t<0?0:t}function LNe(t){return t===10?$Ne:t===Math.E?Math.exp:e=>Math.pow(t,e)}function FNe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function W5(t){return(e,r)=>-t(-e,r)}function oA(t){const e=t(U5,z5),r=e.domain;let n=10,i,s;function a(){return i=FNe(n),s=LNe(n),r()[0]<0?(i=W5(i),s=W5(s),t(MNe,DNe)):t(U5,z5),e}return e.base=function(l){return arguments.length?(n=+l,a()):n},e.domain=function(l){return arguments.length?(r(l),a()):r()},e.ticks=l=>{const c=r();let u=c[0],h=c[c.length-1];const d=h<u;d&&([u,h]=[h,u]);let f=i(u),m=i(h),g,v;const y=l==null?10:+l;let x=[];if(!(n%1)&&m-f<y){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(g=1;g<n;++g)if(v=f<0?g/s(-f):g*s(f),!(v<u)){if(v>h)break;x.push(v)}}else for(;f<=m;++f)for(g=n-1;g>=1;--g)if(v=f>0?g/s(-f):g*s(f),!(v<u)){if(v>h)break;x.push(v)}x.length*2<y&&(x=bN(u,h,y))}else x=bN(f,m,Math.min(m-f,y)).map(s);return d?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=bp(c)).precision==null&&(c.trim=!0),c=aA(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return h=>{let d=h/s(Math.round(i(h)));return d*n<n-.5&&(d*=n),d<=u?c(h):""}},e.nice=()=>r(KU(r(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function YU(){const t=oA(Aw()).domain([1,10]);return t.copy=()=>Cg(t,YU()).base(t.base()),Vi.apply(t,arguments),t}function H5(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function G5(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lA(t){var e=1,r=t(H5(e),G5(e));return r.constant=function(n){return arguments.length?t(H5(e=+n),G5(e)):e},jl(r)}function QU(){var t=lA(Aw());return t.copy=function(){return Cg(t,QU()).constant(t.constant())},Vi.apply(t,arguments)}function q5(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function VNe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function BNe(t){return t<0?-t*t:t*t}function cA(t){var e=t(An,An),r=1;function n(){return r===1?t(An,An):r===.5?t(VNe,BNe):t(q5(r),q5(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},jl(e)}function uA(){var t=cA(Aw());return t.copy=function(){return Cg(t,uA()).exponent(t.exponent())},Vi.apply(t,arguments),t}function UNe(){return uA.apply(null,arguments).exponent(.5)}function K5(t){return Math.sign(t)*t*t}function zNe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function XU(){var t=iA(),e=[0,1],r=!1,n;function i(s){var a=zNe(t(s));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(s){return t.invert(K5(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,nx)).map(K5)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return XU(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Vi.apply(i,arguments),jl(i)}function JU(){var t=[],e=[],r=[],n;function i(){var a=0,l=Math.max(1,e.length);for(r=new Array(l-1);++a<l;)r[a-1]=Kke(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?n:e[jg(r,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(tl),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return JU().domain(t).range(e).unknown(n)},Vi.apply(s,arguments)}function ZU(){var t=0,e=1,r=1,n=[.5],i=[0,1],s;function a(c){return c!=null&&c<=c?i[jg(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},a.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},a.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return n.slice()},a.copy=function(){return ZU().domain([t,e]).range(i).unknown(s)},Vi.apply(jl(a),arguments)}function ez(){var t=[.5],e=[0,1],r,n=1;function i(s){return s!=null&&s<=s?e[jg(t,s,0,n)]:r}return i.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return ez().domain(t).range(e).unknown(r)},Vi.apply(i,arguments)}const R_=new Date,M_=new Date;function Ir(t,e,r,n){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<a);return c},i.filter=s=>Ir(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),r&&(i.count=(s,a)=>(R_.setTime(+s),M_.setTime(+a),t(R_),t(M_),Math.floor(r(R_,M_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?a=>n(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const ax=Ir(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ax.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ir(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):ax);ax.range;const ya=1e3,Ti=ya*60,va=Ti*60,Fa=va*24,dA=Fa*7,Y5=Fa*30,D_=Fa*365,tc=Ir(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ya)},(t,e)=>(e-t)/ya,t=>t.getUTCSeconds());tc.range;const hA=Ir(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ya)},(t,e)=>{t.setTime(+t+e*Ti)},(t,e)=>(e-t)/Ti,t=>t.getMinutes());hA.range;const fA=Ir(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ti)},(t,e)=>(e-t)/Ti,t=>t.getUTCMinutes());fA.range;const mA=Ir(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ya-t.getMinutes()*Ti)},(t,e)=>{t.setTime(+t+e*va)},(t,e)=>(e-t)/va,t=>t.getHours());mA.range;const pA=Ir(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*va)},(t,e)=>(e-t)/va,t=>t.getUTCHours());pA.range;const Ag=Ir(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ti)/Fa,t=>t.getDate()-1);Ag.range;const Tw=Ir(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fa,t=>t.getUTCDate()-1);Tw.range;const tz=Ir(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fa,t=>Math.floor(t/Fa));tz.range;function Kc(t){return Ir(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ti)/dA)}const Pw=Kc(0),ox=Kc(1),WNe=Kc(2),HNe=Kc(3),Wd=Kc(4),GNe=Kc(5),qNe=Kc(6);Pw.range;ox.range;WNe.range;HNe.range;Wd.range;GNe.range;qNe.range;function Yc(t){return Ir(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/dA)}const Iw=Yc(0),lx=Yc(1),KNe=Yc(2),YNe=Yc(3),Hd=Yc(4),QNe=Yc(5),XNe=Yc(6);Iw.range;lx.range;KNe.range;YNe.range;Hd.range;QNe.range;XNe.range;const gA=Ir(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());gA.range;const yA=Ir(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());yA.range;const Va=Ir(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Va.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ir(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Va.range;const Ba=Ir(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ba.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ir(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Ba.range;function rz(t,e,r,n,i,s){const a=[[tc,1,ya],[tc,5,5*ya],[tc,15,15*ya],[tc,30,30*ya],[s,1,Ti],[s,5,5*Ti],[s,15,15*Ti],[s,30,30*Ti],[i,1,va],[i,3,3*va],[i,6,6*va],[i,12,12*va],[n,1,Fa],[n,2,2*Fa],[r,1,dA],[e,1,Y5],[e,3,3*Y5],[t,1,D_]];function l(u,h,d){const f=h<u;f&&([u,h]=[h,u]);const m=d&&typeof d.range=="function"?d:c(u,h,d),g=m?m.range(u,+h+1):[];return f?g.reverse():g}function c(u,h,d){const f=Math.abs(h-u)/d,m=ZC(([,,y])=>y).right(a,f);if(m===a.length)return t.every(_N(u/D_,h/D_,d));if(m===0)return ax.every(Math.max(_N(u,h,d),1));const[g,v]=a[f/a[m-1][2]<a[m][2]/f?m-1:m];return g.every(v)}return[l,c]}const[JNe,ZNe]=rz(Ba,yA,Iw,tz,pA,fA),[eje,tje]=rz(Va,gA,Pw,Ag,mA,hA);function $_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function L_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ef(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function rje(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,u=Cf(i),h=Af(i),d=Cf(s),f=Af(s),m=Cf(a),g=Af(a),v=Cf(l),y=Af(l),x=Cf(c),b=Af(c),w={a:M,A:F,b:B,B:J,c:null,d:tM,e:tM,f:Nje,g:Mje,G:$je,H:_je,I:Sje,j:kje,L:nz,m:jje,M:Eje,p:U,q:H,Q:iM,s:sM,S:Cje,u:Aje,U:Tje,V:Pje,w:Ije,W:Oje,x:null,X:null,y:Rje,Y:Dje,Z:Lje,"%":nM},k={a:q,A:oe,b:ve,B:se,c:null,d:rM,e:rM,f:Uje,g:Jje,G:eEe,H:Fje,I:Vje,j:Bje,L:sz,m:zje,M:Wje,p:V,q:X,Q:iM,s:sM,S:Hje,u:Gje,U:qje,V:Kje,w:Yje,W:Qje,x:null,X:null,y:Xje,Y:Zje,Z:tEe,"%":nM},S={a:j,A:C,b:I,B:R,c:$,d:Z5,e:Z5,f:vje,g:J5,G:X5,H:eM,I:eM,j:mje,L:yje,m:fje,M:pje,p:T,q:hje,Q:bje,s:wje,S:gje,u:oje,U:lje,V:cje,w:aje,W:uje,x:z,X:W,y:J5,Y:X5,Z:dje,"%":xje};w.x=P(r,w),w.X=P(n,w),w.c=P(e,w),k.x=P(r,k),k.X=P(n,k),k.c=P(e,k);function P(ee,ue){return function(ge){var K=[],G=-1,he=0,_e=ee.length,qe,Kt,me;for(ge instanceof Date||(ge=new Date(+ge));++G<_e;)ee.charCodeAt(G)===37&&(K.push(ee.slice(he,G)),(Kt=Q5[qe=ee.charAt(++G)])!=null?qe=ee.charAt(++G):Kt=qe==="e"?" ":"0",(me=ue[qe])&&(qe=me(ge,Kt)),K.push(qe),he=G+1);return K.push(ee.slice(he,G)),K.join("")}}function N(ee,ue){return function(ge){var K=Ef(1900,void 0,1),G=_(K,ee,ge+="",0),he,_e;if(G!=ge.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(ue&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(he=L_(Ef(K.y,0,1)),_e=he.getUTCDay(),he=_e>4||_e===0?lx.ceil(he):lx(he),he=Tw.offset(he,(K.V-1)*7),K.y=he.getUTCFullYear(),K.m=he.getUTCMonth(),K.d=he.getUTCDate()+(K.w+6)%7):(he=$_(Ef(K.y,0,1)),_e=he.getDay(),he=_e>4||_e===0?ox.ceil(he):ox(he),he=Ag.offset(he,(K.V-1)*7),K.y=he.getFullYear(),K.m=he.getMonth(),K.d=he.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),_e="Z"in K?L_(Ef(K.y,0,1)).getUTCDay():$_(Ef(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(_e+5)%7:K.w+K.U*7-(_e+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,L_(K)):$_(K)}}function _(ee,ue,ge,K){for(var G=0,he=ue.length,_e=ge.length,qe,Kt;G<he;){if(K>=_e)return-1;if(qe=ue.charCodeAt(G++),qe===37){if(qe=ue.charAt(G++),Kt=S[qe in Q5?ue.charAt(G++):qe],!Kt||(K=Kt(ee,ge,K))<0)return-1}else if(qe!=ge.charCodeAt(K++))return-1}return K}function T(ee,ue,ge){var K=u.exec(ue.slice(ge));return K?(ee.p=h.get(K[0].toLowerCase()),ge+K[0].length):-1}function j(ee,ue,ge){var K=m.exec(ue.slice(ge));return K?(ee.w=g.get(K[0].toLowerCase()),ge+K[0].length):-1}function C(ee,ue,ge){var K=d.exec(ue.slice(ge));return K?(ee.w=f.get(K[0].toLowerCase()),ge+K[0].length):-1}function I(ee,ue,ge){var K=x.exec(ue.slice(ge));return K?(ee.m=b.get(K[0].toLowerCase()),ge+K[0].length):-1}function R(ee,ue,ge){var K=v.exec(ue.slice(ge));return K?(ee.m=y.get(K[0].toLowerCase()),ge+K[0].length):-1}function $(ee,ue,ge){return _(ee,e,ue,ge)}function z(ee,ue,ge){return _(ee,r,ue,ge)}function W(ee,ue,ge){return _(ee,n,ue,ge)}function M(ee){return a[ee.getDay()]}function F(ee){return s[ee.getDay()]}function B(ee){return c[ee.getMonth()]}function J(ee){return l[ee.getMonth()]}function U(ee){return i[+(ee.getHours()>=12)]}function H(ee){return 1+~~(ee.getMonth()/3)}function q(ee){return a[ee.getUTCDay()]}function oe(ee){return s[ee.getUTCDay()]}function ve(ee){return c[ee.getUTCMonth()]}function se(ee){return l[ee.getUTCMonth()]}function V(ee){return i[+(ee.getUTCHours()>=12)]}function X(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var ue=P(ee+="",w);return ue.toString=function(){return ee},ue},parse:function(ee){var ue=N(ee+="",!1);return ue.toString=function(){return ee},ue},utcFormat:function(ee){var ue=P(ee+="",k);return ue.toString=function(){return ee},ue},utcParse:function(ee){var ue=N(ee+="",!0);return ue.toString=function(){return ee},ue}}}var Q5={"-":"",_:" ",0:"0"},Vr=/^\s*\d+/,nje=/^%/,ije=/[\\^$*+?|[\]().{}]/g;function yt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(e)+i:i)}function sje(t){return t.replace(ije,"\\$&")}function Cf(t){return new RegExp("^(?:"+t.map(sje).join("|")+")","i")}function Af(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function aje(t,e,r){var n=Vr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function oje(t,e,r){var n=Vr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function lje(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function cje(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function uje(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function X5(t,e,r){var n=Vr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function J5(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function dje(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function hje(t,e,r){var n=Vr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function fje(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Z5(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function mje(t,e,r){var n=Vr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function eM(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function pje(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function gje(t,e,r){var n=Vr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function yje(t,e,r){var n=Vr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function vje(t,e,r){var n=Vr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function xje(t,e,r){var n=nje.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function bje(t,e,r){var n=Vr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function wje(t,e,r){var n=Vr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function tM(t,e){return yt(t.getDate(),e,2)}function _je(t,e){return yt(t.getHours(),e,2)}function Sje(t,e){return yt(t.getHours()%12||12,e,2)}function kje(t,e){return yt(1+Ag.count(Va(t),t),e,3)}function nz(t,e){return yt(t.getMilliseconds(),e,3)}function Nje(t,e){return nz(t,e)+"000"}function jje(t,e){return yt(t.getMonth()+1,e,2)}function Eje(t,e){return yt(t.getMinutes(),e,2)}function Cje(t,e){return yt(t.getSeconds(),e,2)}function Aje(t){var e=t.getDay();return e===0?7:e}function Tje(t,e){return yt(Pw.count(Va(t)-1,t),e,2)}function iz(t){var e=t.getDay();return e>=4||e===0?Wd(t):Wd.ceil(t)}function Pje(t,e){return t=iz(t),yt(Wd.count(Va(t),t)+(Va(t).getDay()===4),e,2)}function Ije(t){return t.getDay()}function Oje(t,e){return yt(ox.count(Va(t)-1,t),e,2)}function Rje(t,e){return yt(t.getFullYear()%100,e,2)}function Mje(t,e){return t=iz(t),yt(t.getFullYear()%100,e,2)}function Dje(t,e){return yt(t.getFullYear()%1e4,e,4)}function $je(t,e){var r=t.getDay();return t=r>=4||r===0?Wd(t):Wd.ceil(t),yt(t.getFullYear()%1e4,e,4)}function Lje(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+yt(e/60|0,"0",2)+yt(e%60,"0",2)}function rM(t,e){return yt(t.getUTCDate(),e,2)}function Fje(t,e){return yt(t.getUTCHours(),e,2)}function Vje(t,e){return yt(t.getUTCHours()%12||12,e,2)}function Bje(t,e){return yt(1+Tw.count(Ba(t),t),e,3)}function sz(t,e){return yt(t.getUTCMilliseconds(),e,3)}function Uje(t,e){return sz(t,e)+"000"}function zje(t,e){return yt(t.getUTCMonth()+1,e,2)}function Wje(t,e){return yt(t.getUTCMinutes(),e,2)}function Hje(t,e){return yt(t.getUTCSeconds(),e,2)}function Gje(t){var e=t.getUTCDay();return e===0?7:e}function qje(t,e){return yt(Iw.count(Ba(t)-1,t),e,2)}function az(t){var e=t.getUTCDay();return e>=4||e===0?Hd(t):Hd.ceil(t)}function Kje(t,e){return t=az(t),yt(Hd.count(Ba(t),t)+(Ba(t).getUTCDay()===4),e,2)}function Yje(t){return t.getUTCDay()}function Qje(t,e){return yt(lx.count(Ba(t)-1,t),e,2)}function Xje(t,e){return yt(t.getUTCFullYear()%100,e,2)}function Jje(t,e){return t=az(t),yt(t.getUTCFullYear()%100,e,2)}function Zje(t,e){return yt(t.getUTCFullYear()%1e4,e,4)}function eEe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Hd(t):Hd.ceil(t),yt(t.getUTCFullYear()%1e4,e,4)}function tEe(){return"+0000"}function nM(){return"%"}function iM(t){return+t}function sM(t){return Math.floor(+t/1e3)}var ou,oz,lz;rEe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rEe(t){return ou=rje(t),oz=ou.format,ou.parse,lz=ou.utcFormat,ou.utcParse,ou}function nEe(t){return new Date(t)}function iEe(t){return t instanceof Date?+t:+new Date(+t)}function vA(t,e,r,n,i,s,a,l,c,u){var h=iA(),d=h.invert,f=h.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),y=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),k=u("%Y");function S(P){return(c(P)<P?m:l(P)<P?g:a(P)<P?v:s(P)<P?y:n(P)<P?i(P)<P?x:b:r(P)<P?w:k)(P)}return h.invert=function(P){return new Date(d(P))},h.domain=function(P){return arguments.length?f(Array.from(P,iEe)):f().map(nEe)},h.ticks=function(P){var N=f();return t(N[0],N[N.length-1],P??10)},h.tickFormat=function(P,N){return N==null?S:u(N)},h.nice=function(P){var N=f();return(!P||typeof P.range!="function")&&(P=e(N[0],N[N.length-1],P??10)),P?f(KU(N,P)):h},h.copy=function(){return Cg(h,vA(t,e,r,n,i,s,a,l,c,u))},h}function sEe(){return Vi.apply(vA(eje,tje,Va,gA,Pw,Ag,mA,hA,tc,oz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aEe(){return Vi.apply(vA(JNe,ZNe,Ba,yA,Iw,Tw,pA,fA,tc,lz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ow(){var t=0,e=1,r,n,i,s,a=An,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:a(i===0?.5:(d=(s(d)-r)*i,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,r=s(t=+t),n=s(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(a=d,u):a};function h(d){return function(f){var m,g;return arguments.length?([m,g]=f,a=d(m,g),u):[a(0),a(1)]}}return u.range=h(Bh),u.rangeRound=h(nA),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return s=d,r=d(t),n=d(e),i=r===n?0:1/(n-r),u}}function El(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cz(){var t=jl(Ow()(An));return t.copy=function(){return El(t,cz())},Ja.apply(t,arguments)}function uz(){var t=oA(Ow()).domain([1,10]);return t.copy=function(){return El(t,uz()).base(t.base())},Ja.apply(t,arguments)}function dz(){var t=lA(Ow());return t.copy=function(){return El(t,dz()).constant(t.constant())},Ja.apply(t,arguments)}function xA(){var t=cA(Ow());return t.copy=function(){return El(t,xA()).exponent(t.exponent())},Ja.apply(t,arguments)}function oEe(){return xA.apply(null,arguments).exponent(.5)}function hz(){var t=[],e=An;function r(n){if(n!=null&&!isNaN(n=+n))return e((jg(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(tl),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>qke(t,s/n))},r.copy=function(){return hz(e).domain(t)},Ja.apply(r,arguments)}function Rw(){var t=0,e=.5,r=1,n=1,i,s,a,l,c,u=An,h,d=!1,f;function m(v){return isNaN(v=+v)?f:(v=.5+((v=+h(v))-s)*(n*v<n*s?l:c),u(d?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([t,e,r]=v,i=h(t=+t),s=h(e=+e),a=h(r=+r),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),n=s<i?-1:1,m):[t,e,r]},m.clamp=function(v){return arguments.length?(d=!!v,m):d},m.interpolator=function(v){return arguments.length?(u=v,m):u};function g(v){return function(y){var x,b,w;return arguments.length?([x,b,w]=y,u=xNe(v,[x,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(Bh),m.rangeRound=g(nA),m.unknown=function(v){return arguments.length?(f=v,m):f},function(v){return h=v,i=v(t),s=v(e),a=v(r),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),n=s<i?-1:1,m}}function fz(){var t=jl(Rw()(An));return t.copy=function(){return El(t,fz())},Ja.apply(t,arguments)}function mz(){var t=oA(Rw()).domain([.1,1,10]);return t.copy=function(){return El(t,mz()).base(t.base())},Ja.apply(t,arguments)}function pz(){var t=lA(Rw());return t.copy=function(){return El(t,pz()).constant(t.constant())},Ja.apply(t,arguments)}function bA(){var t=cA(Rw());return t.copy=function(){return El(t,bA()).exponent(t.exponent())},Ja.apply(t,arguments)}function lEe(){return bA.apply(null,arguments).exponent(.5)}const aM=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gp,scaleDiverging:fz,scaleDivergingLog:mz,scaleDivergingPow:bA,scaleDivergingSqrt:lEe,scaleDivergingSymlog:pz,scaleIdentity:qU,scaleImplicit:SN,scaleLinear:sx,scaleLog:YU,scaleOrdinal:eA,scalePoint:vm,scalePow:uA,scaleQuantile:JU,scaleQuantize:ZU,scaleRadial:XU,scaleSequential:cz,scaleSequentialLog:uz,scaleSequentialPow:xA,scaleSequentialQuantile:hz,scaleSequentialSqrt:oEe,scaleSequentialSymlog:dz,scaleSqrt:UNe,scaleSymlog:QU,scaleThreshold:ez,scaleTime:sEe,scaleUtc:aEe,tickFormat:GU},Symbol.toStringTag,{value:"Module"}));var cEe=Ih;function uEe(t,e,r){for(var n=-1,i=t.length;++n<i;){var s=t[n],a=e(s);if(a!=null&&(l===void 0?a===a&&!cEe(a):r(a,l)))var l=a,c=s}return c}var Mw=uEe;function dEe(t,e){return t>e}var gz=dEe,hEe=Mw,fEe=gz,mEe=Vh;function pEe(t){return t&&t.length?hEe(t,mEe,fEe):void 0}var gEe=pEe;const Ro=bt(gEe);function yEe(t,e){return t<e}var yz=yEe,vEe=Mw,xEe=yz,bEe=Vh;function wEe(t){return t&&t.length?vEe(t,bEe,xEe):void 0}var _Ee=wEe;const Dw=bt(_Ee);var SEe=RC,kEe=Xs,NEe=NU,jEe=ei;function EEe(t,e){var r=jEe(t)?SEe:NEe;return r(t,kEe(e))}var CEe=EEe,AEe=SU,TEe=CEe;function PEe(t,e){return AEe(TEe(t,e),1)}var IEe=PEe;const OEe=bt(IEe);var REe=YC;function MEe(t,e){return REe(t,e)}var DEe=MEe;const gl=bt(DEe);var Uh=1e9,$Ee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_A,Xt=!0,$i="[DecimalError] ",hc=$i+"Invalid argument: ",wA=$i+"Exponent out of range: ",zh=Math.floor,zl=Math.pow,LEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ci,Mr=1e7,Ut=7,vz=9007199254740991,cx=zh(vz/Ut),Ie={};Ie.absoluteValue=Ie.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ie.comparedTo=Ie.cmp=function(t){var e,r,n,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Ie.decimalPlaces=Ie.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ut;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ie.dividedBy=Ie.div=function(t){return Na(this,new this.constructor(t))};Ie.dividedToIntegerBy=Ie.idiv=function(t){var e=this,r=e.constructor;return It(Na(e,new r(t),0,1),r.precision)};Ie.equals=Ie.eq=function(t){return!this.cmp(t)};Ie.exponent=function(){return xr(this)};Ie.greaterThan=Ie.gt=function(t){return this.cmp(t)>0};Ie.greaterThanOrEqualTo=Ie.gte=function(t){return this.cmp(t)>=0};Ie.isInteger=Ie.isint=function(){return this.e>this.d.length-2};Ie.isNegative=Ie.isneg=function(){return this.s<0};Ie.isPositive=Ie.ispos=function(){return this.s>0};Ie.isZero=function(){return this.s===0};Ie.lessThan=Ie.lt=function(t){return this.cmp(t)<0};Ie.lessThanOrEqualTo=Ie.lte=function(t){return this.cmp(t)<1};Ie.logarithm=Ie.log=function(t){var e,r=this,n=r.constructor,i=n.precision,s=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(ci))throw Error($i+"NaN");if(r.s<1)throw Error($i+(r.s?"NaN":"-Infinity"));return r.eq(ci)?new n(0):(Xt=!1,e=Na(wp(r,s),wp(t,s),s),Xt=!0,It(e,i))};Ie.minus=Ie.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?wz(e,t):xz(e,(t.s=-t.s,t))};Ie.modulo=Ie.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error($i+"NaN");return r.s?(Xt=!1,e=Na(r,t,0,1).times(t),Xt=!0,r.minus(e)):It(new n(r),i)};Ie.naturalExponential=Ie.exp=function(){return bz(this)};Ie.naturalLogarithm=Ie.ln=function(){return wp(this)};Ie.negated=Ie.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ie.plus=Ie.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?xz(e,t):wz(e,(t.s=-t.s,t))};Ie.precision=Ie.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(hc+t);if(e=xr(i)+1,n=i.d.length-1,r=n*Ut+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ie.squareRoot=Ie.sqrt=function(){var t,e,r,n,i,s,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error($i+"NaN")}for(t=xr(l),Xt=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Ps(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=zh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(i.toString()),r=c.precision,i=a=r+3;;)if(s=n,n=s.plus(Na(l,s,a+2)).times(.5),Ps(s.d).slice(0,a)===(e=Ps(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(It(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;a+=4}return Xt=!0,It(n,r)};Ie.times=Ie.mul=function(t){var e,r,n,i,s,a,l,c,u,h=this,d=h.constructor,f=h.d,m=(t=new d(t)).d;if(!h.s||!t.s)return new d(0);for(t.s*=h.s,r=h.e+t.e,c=f.length,u=m.length,c<u&&(s=f,f=m,m=s,a=c,c=u,u=a),s=[],a=c+u,n=a;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=c+n;i>n;)l=s[i]+m[n]*f[i-n-1]+e,s[i--]=l%Mr|0,e=l/Mr|0;s[i]=(s[i]+e)%Mr|0}for(;!s[--a];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Xt?It(t,d.precision):t};Ie.toDecimalPlaces=Ie.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(qs(t,0,Uh),e===void 0?e=n.rounding:qs(e,0,8),It(r,t+xr(r)+1,e))};Ie.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Oc(n,!0):(qs(t,0,Uh),e===void 0?e=i.rounding:qs(e,0,8),n=It(new i(n),t+1,e),r=Oc(n,!0,t+1)),r};Ie.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?Oc(i):(qs(t,0,Uh),e===void 0?e=s.rounding:qs(e,0,8),n=It(new s(i),t+xr(i)+1,e),r=Oc(n.abs(),!1,t+xr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ie.toInteger=Ie.toint=function(){var t=this,e=t.constructor;return It(new e(t),xr(t)+1,e.rounding)};Ie.toNumber=function(){return+this};Ie.toPower=Ie.pow=function(t){var e,r,n,i,s,a,l=this,c=l.constructor,u=12,h=+(t=new c(t));if(!t.s)return new c(ci);if(l=new c(l),!l.s){if(t.s<1)throw Error($i+"Infinity");return l}if(l.eq(ci))return l;if(n=c.precision,t.eq(ci))return It(l,n);if(e=t.e,r=t.d.length-1,a=e>=r,s=l.s,a){if((r=h<0?-h:h)<=vz){for(i=new c(ci),e=Math.ceil(n/Ut+4),Xt=!1;r%2&&(i=i.times(l),lM(i.d,e)),r=zh(r/2),r!==0;)l=l.times(l),lM(l.d,e);return Xt=!0,t.s<0?new c(ci).div(i):It(i,n)}}else if(s<0)throw Error($i+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Xt=!1,i=t.times(wp(l,n+u)),Xt=!0,i=bz(i),i.s=s,i};Ie.toPrecision=function(t,e){var r,n,i=this,s=i.constructor;return t===void 0?(r=xr(i),n=Oc(i,r<=s.toExpNeg||r>=s.toExpPos)):(qs(t,1,Uh),e===void 0?e=s.rounding:qs(e,0,8),i=It(new s(i),t,e),r=xr(i),n=Oc(i,t<=r||r<=s.toExpNeg,t)),n};Ie.toSignificantDigits=Ie.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(qs(t,1,Uh),e===void 0?e=n.rounding:qs(e,0,8)),It(new n(r),t,e)};Ie.toString=Ie.valueOf=Ie.val=Ie.toJSON=Ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=xr(t),r=t.constructor;return Oc(t,e<=r.toExpNeg||e>=r.toExpPos)};function xz(t,e){var r,n,i,s,a,l,c,u,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Xt?It(e,d):e;if(c=t.d,u=e.d,a=t.e,i=e.e,c=c.slice(),s=a-i,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,i=a,l=c.length),a=Math.ceil(d/Ut),l=a>l?a+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Mr|0,c[s]%=Mr;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Xt?It(e,d):e}function qs(t,e,r){if(t!==~~t||t<e||t>r)throw Error(hc+t)}function Ps(t){var e,r,n,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)n=t[e]+"",r=Ut-n.length,r&&(s+=vo(r)),s+=n;a=t[e],n=a+"",r=Ut-n.length,r&&(s+=vo(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Na=function(){function t(n,i){var s,a=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+a,n[l]=s%Mr|0,a=s/Mr|0;return a&&n.unshift(a),n}function e(n,i,s,a){var l,c;if(s!=a)c=s>a?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function r(n,i,s){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*Mr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a){var l,c,u,h,d,f,m,g,v,y,x,b,w,k,S,P,N,_,T=n.constructor,j=n.s==i.s?1:-1,C=n.d,I=i.d;if(!n.s)return new T(n);if(!i.s)throw Error($i+"Division by zero");for(c=n.e-i.e,N=I.length,S=C.length,m=new T(j),g=m.d=[],u=0;I[u]==(C[u]||0);)++u;if(I[u]>(C[u]||0)&&--c,s==null?b=s=T.precision:a?b=s+(xr(n)-xr(i))+1:b=s,b<0)return new T(0);if(b=b/Ut+2|0,u=0,N==1)for(h=0,I=I[0],b++;(u<S||h)&&b--;u++)w=h*Mr+(C[u]||0),g[u]=w/I|0,h=w%I|0;else{for(h=Mr/(I[0]+1)|0,h>1&&(I=t(I,h),C=t(C,h),N=I.length,S=C.length),k=N,v=C.slice(0,N),y=v.length;y<N;)v[y++]=0;_=I.slice(),_.unshift(0),P=I[0],I[1]>=Mr/2&&++P;do h=0,l=e(I,v,N,y),l<0?(x=v[0],N!=y&&(x=x*Mr+(v[1]||0)),h=x/P|0,h>1?(h>=Mr&&(h=Mr-1),d=t(I,h),f=d.length,y=v.length,l=e(d,v,f,y),l==1&&(h--,r(d,N<f?_:I,f))):(h==0&&(l=h=1),d=I.slice()),f=d.length,f<y&&d.unshift(0),r(v,d,y),l==-1&&(y=v.length,l=e(I,v,N,y),l<1&&(h++,r(v,N<y?_:I,y))),y=v.length):l===0&&(h++,v=[0]),g[u++]=h,l&&v[0]?v[y++]=C[k]||0:(v=[C[k]],y=1);while((k++<S||v[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,It(m,a?s+xr(m)+1:s)}}();function bz(t,e){var r,n,i,s,a,l,c=0,u=0,h=t.constructor,d=h.precision;if(xr(t)>16)throw Error(wA+xr(t));if(!t.s)return new h(ci);for(e==null?(Xt=!1,l=d):l=e,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(n=Math.log(zl(2,u))/Math.LN10*2+5|0,l+=n,r=i=s=new h(ci),h.precision=l;;){if(i=It(i.times(t),l),r=r.times(++c),a=s.plus(Na(i,r,l)),Ps(a.d).slice(0,l)===Ps(s.d).slice(0,l)){for(;u--;)s=It(s.times(s),l);return h.precision=d,e==null?(Xt=!0,It(s,d)):s}s=a}}function xr(t){for(var e=t.e*Ut,r=t.d[0];r>=10;r/=10)e++;return e}function F_(t,e,r){if(e>t.LN10.sd())throw Xt=!0,r&&(t.precision=r),Error($i+"LN10 precision limit exceeded");return It(new t(t.LN10),e)}function vo(t){for(var e="";t--;)e+="0";return e}function wp(t,e){var r,n,i,s,a,l,c,u,h,d=1,f=10,m=t,g=m.d,v=m.constructor,y=v.precision;if(m.s<1)throw Error($i+(m.s?"NaN":"-Infinity"));if(m.eq(ci))return new v(0);if(e==null?(Xt=!1,u=y):u=e,m.eq(10))return e==null&&(Xt=!0),F_(v,u);if(u+=f,v.precision=u,r=Ps(g),n=r.charAt(0),s=xr(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=Ps(m.d),n=r.charAt(0),d++;s=xr(m),n>1?(m=new v("0."+r),s++):m=new v(n+"."+r.slice(1))}else return c=F_(v,u+2,y).times(s+""),m=wp(new v(n+"."+r.slice(1)),u-f).plus(c),v.precision=y,e==null?(Xt=!0,It(m,y)):m;for(l=a=m=Na(m.minus(ci),m.plus(ci),u),h=It(m.times(m),u),i=3;;){if(a=It(a.times(h),u),c=l.plus(Na(a,new v(i),u)),Ps(c.d).slice(0,u)===Ps(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(F_(v,u+2,y).times(s+""))),l=Na(l,new v(d),u),v.precision=y,e==null?(Xt=!0,It(l,y)):l;l=c,i+=2}}function oM(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=zh(r/Ut),t.d=[],n=(r+1)%Ut,r<0&&(n+=Ut),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Ut;n<i;)t.d.push(+e.slice(n,n+=Ut));e=e.slice(n),n=Ut-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Xt&&(t.e>cx||t.e<-cx))throw Error(wA+r)}else t.s=0,t.e=0,t.d=[0];return t}function It(t,e,r){var n,i,s,a,l,c,u,h,d=t.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(n=e-a,n<0)n+=Ut,i=e,u=d[h=0];else{if(h=Math.ceil((n+1)/Ut),s=d.length,h>=s)return t;for(u=s=d[h],a=1;s>=10;s/=10)a++;n%=Ut,i=n-Ut+a}if(r!==void 0&&(s=zl(10,a-i-1),l=u/s%10|0,c=e<0||d[h+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?i>0?u/zl(10,a-i):0:d[h-1])%10&1||r==(t.s<0?8:7))),e<1||!d[0])return c?(s=xr(t),d.length=1,e=e-s-1,d[0]=zl(10,(Ut-e%Ut)%Ut),t.e=zh(-e/Ut)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(n==0?(d.length=h,s=1,h--):(d.length=h+1,s=zl(10,Ut-n),d[h]=i>0?(u/zl(10,a-i)%zl(10,i)|0)*s:0),c)for(;;)if(h==0){(d[0]+=s)==Mr&&(d[0]=1,++t.e);break}else{if(d[h]+=s,d[h]!=Mr)break;d[h--]=0,s=1}for(n=d.length;d[--n]===0;)d.pop();if(Xt&&(t.e>cx||t.e<-cx))throw Error(wA+xr(t));return t}function wz(t,e){var r,n,i,s,a,l,c,u,h,d,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Xt?It(e,m):e;if(c=t.d,d=e.d,n=e.e,u=t.e,c=c.slice(),a=u-n,a){for(h=a<0,h?(r=c,a=-a,l=d.length):(r=d,n=u,l=c.length),i=Math.max(Math.ceil(m/Ut),l)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=d.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=d[i]){h=c[i]<d[i];break}a=0}for(h&&(r=c,c=d,d=r,e.s=-e.s),l=c.length,i=d.length-l;i>0;--i)c[l++]=0;for(i=d.length;i>a;){if(c[--i]<d[i]){for(s=i;s&&c[--s]===0;)c[s]=Mr-1;--c[s],c[i]+=Mr}c[i]-=d[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Xt?It(e,m):e):new f(0)}function Oc(t,e,r){var n,i=xr(t),s=Ps(t.d),a=s.length;return e?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+vo(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+vo(-i-1)+s,r&&(n=r-a)>0&&(s+=vo(n))):i>=a?(s+=vo(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+vo(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=vo(n))),t.s<0?"-"+s:s}function lM(t,e){if(t.length>e)return t.length=e,!0}function _z(t){var e,r,n;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(hc+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return oM(a,s.toString())}else if(typeof s!="string")throw Error(hc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,LEe.test(s))oM(a,s);else throw Error(hc+s)}if(i.prototype=Ie,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=_z,i.config=i.set=FEe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function FEe(t){if(!t||typeof t!="object")throw Error($i+"Object expected");var e,r,n,i=["precision",1,Uh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(zh(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(hc+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(hc+r+": "+n);return this}var _A=_z($Ee);ci=new _A(1);const At=_A;function VEe(t){return WEe(t)||zEe(t)||UEe(t)||BEe()}function BEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UEe(t,e){if(t){if(typeof t=="string")return EN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EN(t,e)}}function zEe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function WEe(t){if(Array.isArray(t))return EN(t)}function EN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var HEe=function(e){return e},Sz={"@@functional/placeholder":!0},kz=function(e){return e===Sz},cM=function(e){return function r(){return arguments.length===0||arguments.length===1&&kz(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},GEe=function t(e,r){return e===1?r:cM(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.filter(function(l){return l!==Sz}).length;return a>=e?r.apply(void 0,i):t(e-a,cM(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var h=i.map(function(d){return kz(d)?c.shift():d});return r.apply(void 0,VEe(h).concat(c))}))})},$w=function(e){return GEe(e.length,e)},CN=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},qEe=$w(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),KEe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return HEe;var i=r.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},AN=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Nz=function(e){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return r&&s.every(function(l,c){return l===r[c]})||(r=s,n=e.apply(void 0,s)),n}};function YEe(t){var e;return t===0?e=1:e=Math.floor(new At(t).abs().log(10).toNumber())+1,e}function QEe(t,e,r){for(var n=new At(t),i=0,s=[];n.lt(e)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var XEe=$w(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),JEe=$w(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),ZEe=$w(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Lw={rangeStep:QEe,getDigitCount:YEe,interpolateNumber:XEe,uninterpolateNumber:JEe,uninterpolateTruncation:ZEe};function TN(t){return r2e(t)||t2e(t)||jz(t)||e2e()}function e2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t2e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function r2e(t){if(Array.isArray(t))return PN(t)}function _p(t,e){return s2e(t)||i2e(t,e)||jz(t,e)||n2e()}function n2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jz(t,e){if(t){if(typeof t=="string")return PN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PN(t,e)}}function PN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i2e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),l;!(n=(l=a.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){i=!0,s=c}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw s}}return r}}function s2e(t){if(Array.isArray(t))return t}function Ez(t){var e=_p(t,2),r=e[0],n=e[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function Cz(t,e,r){if(t.lte(0))return new At(0);var n=Lw.getDigitCount(t.toNumber()),i=new At(10).pow(n),s=t.div(i),a=n!==1?.05:.1,l=new At(Math.ceil(s.div(a).toNumber())).add(r).mul(a),c=l.mul(i);return e?c:new At(Math.ceil(c))}function a2e(t,e,r){var n=1,i=new At(t);if(!i.isint()&&r){var s=Math.abs(t);s<1?(n=new At(10).pow(Lw.getDigitCount(t)-1),i=new At(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new At(Math.floor(t)))}else t===0?i=new At(Math.floor((e-1)/2)):r||(i=new At(Math.floor(t)));var a=Math.floor((e-1)/2),l=KEe(qEe(function(c){return i.add(new At(c-a).mul(n)).toNumber()}),CN);return l(0,e)}function Az(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new At(0),tickMin:new At(0),tickMax:new At(0)};var s=Cz(new At(e).sub(t).div(r-1),n,i),a;t<=0&&e>=0?a=new At(0):(a=new At(t).add(e).div(2),a=a.sub(new At(a).mod(s)));var l=Math.ceil(a.sub(t).div(s).toNumber()),c=Math.ceil(new At(e).sub(a).div(s).toNumber()),u=l+c+1;return u>r?Az(t,e,r,n,i+1):(u<r&&(c=e>0?c+(r-u):c,l=e>0?l:l+(r-u)),{step:s,tickMin:a.sub(new At(l).mul(s)),tickMax:a.add(new At(c).mul(s))})}function o2e(t){var e=_p(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),l=Ez([r,n]),c=_p(l,2),u=c[0],h=c[1];if(u===-1/0||h===1/0){var d=h===1/0?[u].concat(TN(CN(0,i-1).map(function(){return 1/0}))):[].concat(TN(CN(0,i-1).map(function(){return-1/0})),[h]);return r>n?AN(d):d}if(u===h)return a2e(u,i,s);var f=Az(u,h,a,s),m=f.step,g=f.tickMin,v=f.tickMax,y=Lw.rangeStep(g,v.add(new At(.1).mul(m)),m);return r>n?AN(y):y}function l2e(t,e){var r=_p(t,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Ez([n,i]),l=_p(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var h=Math.max(e,2),d=Cz(new At(u).sub(c).div(h-1),s,0),f=[].concat(TN(Lw.rangeStep(new At(c),new At(u).sub(new At(.99).mul(d)),d)),[u]);return n>i?AN(f):f}var c2e=Nz(o2e),u2e=Nz(l2e),d2e="Invariant failed";function Rc(t,e){throw new Error(d2e)}var h2e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function ux(){return ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ux.apply(this,arguments)}function f2e(t,e){return y2e(t)||g2e(t,e)||p2e(t,e)||m2e()}function m2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p2e(t,e){if(t){if(typeof t=="string")return uM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uM(t,e)}}function uM(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function y2e(t){if(Array.isArray(t))return t}function v2e(t,e){if(t==null)return{};var r=x2e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function b2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w2e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iz(n.key),n)}}function _2e(t,e,r){return e&&w2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S2e(t,e,r){return e=dx(e),k2e(t,Tz()?Reflect.construct(e,r||[],dx(t).constructor):e.apply(t,r))}function k2e(t,e){if(e&&(Gd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N2e(t)}function N2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tz=function(){return!!t})()}function dx(t){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dx(t)}function j2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IN(t,e)}function IN(t,e){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},IN(t,e)}function Pz(t,e,r){return e=Iz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Iz(t){var e=E2e(t,"string");return Gd(e)=="symbol"?e:e+""}function E2e(t,e){if(Gd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tg=function(t){function e(){return b2e(this,e),S2e(this,e,arguments)}return j2e(e,t),_2e(e,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,a=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,h=n.xAxis,d=n.yAxis,f=v2e(n,h2e),m=Me(f,!1);this.props.direction==="x"&&h.type!=="number"&&Rc();var g=c.map(function(v){var y=u(v,l),x=y.x,b=y.y,w=y.value,k=y.errorVal;if(!k)return null;var S=[],P,N;if(Array.isArray(k)){var _=f2e(k,2);P=_[0],N=_[1]}else P=N=k;if(s==="vertical"){var T=h.scale,j=b+i,C=j+a,I=j-a,R=T(w-P),$=T(w+N);S.push({x1:$,y1:C,x2:$,y2:I}),S.push({x1:R,y1:j,x2:$,y2:j}),S.push({x1:R,y1:C,x2:R,y2:I})}else if(s==="horizontal"){var z=d.scale,W=x+i,M=W-a,F=W+a,B=z(w-P),J=z(w+N);S.push({x1:M,y1:J,x2:F,y2:J}),S.push({x1:W,y1:B,x2:W,y2:J}),S.push({x1:M,y1:B,x2:F,y2:B})}return D.createElement(tt,ux({className:"recharts-errorBar",key:"bar-".concat(S.map(function(U){return"".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))},m),S.map(function(U){return D.createElement("line",ux({},U,{key:"line-".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))}))});return D.createElement(tt,{className:"recharts-errorBars"},g)}}])}(D.Component);Pz(Tg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Pz(Tg,"displayName","ErrorBar");function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function dM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ol(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dM(Object(r),!0).forEach(function(n){C2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C2e(t,e,r){return e=A2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A2e(t){var e=T2e(t,"string");return Sp(e)=="symbol"?e:e+""}function T2e(t,e){if(Sp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oz=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=oi(r,Yu);if(!a)return null;var l=Yu.defaultProps,c=l!==void 0?Ol(Ol({},l),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:s==="children"?u=(n||[]).reduce(function(h,d){var f=d.item,m=d.props,g=m.sectors||m.data||[];return h.concat(g.map(function(v){return{type:a.props.iconType||f.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(n||[]).map(function(h){var d=h.item,f=d.type.defaultProps,m=f!==void 0?Ol(Ol({},f),d.props):{},g=m.dataKey,v=m.name,y=m.legendType,x=m.hide;return{inactive:x,dataKey:g,type:c.iconType||y||"square",color:SA(d),value:v||g,payload:m}}),Ol(Ol(Ol({},c),Yu.getWithHeight(a,i)),{},{payload:u,item:a})};function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}function hM(t){return R2e(t)||O2e(t)||I2e(t)||P2e()}function P2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I2e(t,e){if(t){if(typeof t=="string")return ON(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ON(t,e)}}function O2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function R2e(t){if(Array.isArray(t))return ON(t)}function ON(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fM(Object(r),!0).forEach(function(n){Xu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xu(t,e,r){return e=M2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M2e(t){var e=D2e(t,"string");return kp(e)=="symbol"?e:e+""}function D2e(t,e){if(kp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tr(t,e,r){return Ge(t)||Ge(e)?r:Er(e)?pi(t,e,r):Ve(e)?e(t):r}function xm(t,e,r,n){var i=OEe(t,function(l){return tr(l,e)});if(r==="number"){var s=i.filter(function(l){return ye(l)||parseFloat(l)});return s.length?[Dw(s),Ro(s)]:[1/0,-1/0]}var a=n?i.filter(function(l){return!Ge(l)}):i;return a.map(function(l){return Er(l)||l instanceof Date?l:""})}var $2e=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var h=u>0?i[u-1].coordinate:i[l-1].coordinate,d=i[u].coordinate,f=u>=l-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(En(d-h)!==En(f-d)){var g=[];if(En(f-d)===En(c[1]-c[0])){m=f;var v=d+c[1]-c[0];g[0]=Math.min(v,(v+h)/2),g[1]=Math.max(v,(v+h)/2)}else{m=h;var y=f+c[1]-c[0];g[0]=Math.min(d,(y+d)/2),g[1]=Math.max(d,(y+d)/2)}var x=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>x[0]&&e<=x[1]||e>=g[0]&&e<=g[1]){a=i[u].index;break}}else{var b=Math.min(h,f),w=Math.max(h,f);if(e>(b+d)/2&&e<=(w+d)/2){a=i[u].index;break}}}else for(var k=0;k<l;k++)if(k===0&&e<=(n[k].coordinate+n[k+1].coordinate)/2||k>0&&k<l-1&&e>(n[k].coordinate+n[k-1].coordinate)/2&&e<=(n[k].coordinate+n[k+1].coordinate)/2||k===l-1&&e>(n[k].coordinate+n[k-1].coordinate)/2){a=n[k].index;break}return a},SA=function(e){var r,n=e,i=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?lr(lr({},e.type.defaultProps),e.props):e.props,a=s.stroke,l=s.fill,c;switch(i){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:l;break;default:c=l;break}return c},L2e=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var h=s[l[c]].stackGroups,d=Object.keys(h),f=0,m=d.length;f<m;f++){var g=h[d[f]],v=g.items,y=g.cateAxisId,x=v.filter(function(N){return ka(N.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,w=b!==void 0?lr(lr({},b),x[0].props):x[0].props,k=w.barSize,S=w[y];a[S]||(a[S]=[]);var P=Ge(k)?r:k;a[S].push({item:x[0],stackList:x.slice(1),barSize:Ge(P)?void 0:Cn(P,n,0)})}}return a},F2e=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,l=e.maxBarSize,c=a.length;if(c<1)return null;var u=Cn(r,i,0,!0),h,d=[];if(a[0].barSize===+a[0].barSize){var f=!1,m=i/c,g=a.reduce(function(k,S){return k+S.barSize||0},0);g+=(c-1)*u,g>=i&&(g-=(c-1)*u,u=0),g>=i&&m>0&&(f=!0,m*=.9,g=c*m);var v=(i-g)/2>>0,y={offset:v-u,size:0};h=a.reduce(function(k,S){var P={item:S.item,position:{offset:y.offset+y.size+u,size:f?m:S.barSize}},N=[].concat(hM(k),[P]);return y=N[N.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(_){N.push({item:_,position:y})}),N},d)}else{var x=Cn(n,i,0,!0);i-2*x-(c-1)*u<=0&&(u=0);var b=(i-2*x-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;h=a.reduce(function(k,S,P){var N=[].concat(hM(k),[{item:S.item,position:{offset:x+(b+u)*P+(b-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(_){N.push({item:_,position:N[N.length-1].position})}),N},d)}return h},V2e=function(e,r,n,i){var s=n.children,a=n.width,l=n.margin,c=a-(l.left||0)-(l.right||0),u=Oz({children:s,legendWidth:c});if(u){var h=i||{},d=h.width,f=h.height,m=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&ye(e[m]))return lr(lr({},e),{},Xu({},m,e[m]+(d||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&ye(e[g]))return lr(lr({},e),{},Xu({},g,e[g]+(f||0)))}return e},B2e=function(e,r,n){return Ge(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},Rz=function(e,r,n,i,s){var a=r.props.children,l=gi(a,Tg).filter(function(u){return B2e(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,h){var d=tr(h,n);if(Ge(d))return u;var f=Array.isArray(d)?[Dw(d),Ro(d)]:[d,d],m=c.reduce(function(g,v){var y=tr(h,v,0),x=f[0]-Math.abs(Array.isArray(y)?y[0]:y),b=f[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(x,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},U2e=function(e,r,n,i,s){var a=r.map(function(l){return Rz(e,l,n,s,i)}).filter(function(l){return!Ge(l)});return a&&a.length?a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Mz=function(e,r,n,i,s){var a=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&Rz(e,c,u,i)||xm(e,u,n,s)});if(n==="number")return a.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return a.reduce(function(c,u){for(var h=0,d=u.length;h<d;h++)l[u[h]]||(l[u[h]]=!0,c.push(u[h]));return c},[])},Dz=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},$z=function(e,r,n,i){if(i)return e.map(function(c){return c.coordinate});var s,a,l=e.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===n&&(a=!0),c.coordinate});return s||l.push(r),a||l.push(n),l},xa=function(e,r,n){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&a==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?En(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(d){var f=s?s.indexOf(d):d;return{coordinate:i(f)+u,value:d,offset:u}});return h.filter(function(d){return!$h(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:i(d)+u,value:d,index:f,offset:u}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,f){return{coordinate:i(d)+u,value:s?s[d]:d,index:f,offset:u}})},V_=new WeakMap,V0=function(e,r){if(typeof r!="function")return e;V_.has(e)||V_.set(e,new WeakMap);var n=V_.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},Lz=function(e,r,n){var i=e.scale,s=e.type,a=e.layout,l=e.axisType;if(i==="auto")return a==="radial"&&l==="radiusAxis"?{scale:gp(),realScaleType:"band"}:a==="radial"&&l==="angleAxis"?{scale:sx(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:vm(),realScaleType:"point"}:s==="category"?{scale:gp(),realScaleType:"band"}:{scale:sx(),realScaleType:"linear"};if(kg(i)){var c="scale".concat(ww(i));return{scale:(aM[c]||vm)(),realScaleType:aM[c]?c:"point"}}return Ve(i)?{scale:i}:{scale:vm(),realScaleType:"point"}},mM=1e-4,Fz=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),s=Math.min(i[0],i[1])-mM,a=Math.max(i[0],i[1])+mM,l=e(r[0]),c=e(r[n-1]);(l<s||l>a||c<s||c>a)&&e.domain([r[0],r[n-1]])}},z2e=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},W2e=function(e,r){if(!r||r.length!==2||!ye(r[0])||!ye(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!ye(e[0])||e[0]<n)&&(s[0]=n),(!ye(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<n&&(s[1]=n),s},H2e=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var s=0,a=0,l=0;l<r;++l){var c=$h(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=s,e[l][n][1]=s+c,s=e[l][n][1]):(e[l][n][0]=a,e[l][n][1]=a+c,a=e[l][n][1])}},G2e=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var s=0,a=0;a<r;++a){var l=$h(e[a][n][1])?e[a][n][0]:e[a][n][1];l>=0?(e[a][n][0]=s,e[a][n][1]=s+l,s=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},q2e={sign:H2e,expand:h0e,none:Ld,silhouette:f0e,wiggle:m0e,positive:G2e},K2e=function(e,r,n){var i=r.map(function(l){return l.props.dataKey}),s=q2e[n],a=d0e().keys(i).value(function(l,c){return+tr(l,c,0)}).order(iN).offset(s);return a(e)},Y2e=function(e,r,n,i,s,a){if(!e)return null;var l=a?r.reverse():r,c={},u=l.reduce(function(d,f){var m,g=(m=f.type)!==null&&m!==void 0&&m.defaultProps?lr(lr({},f.type.defaultProps),f.props):f.props,v=g.stackId,y=g.hide;if(y)return d;var x=g[n],b=d[x]||{hasStack:!1,stackGroups:{}};if(Er(v)){var w=b.stackGroups[v]||{numericAxisId:n,cateAxisId:i,items:[]};w.items.push(f),b.hasStack=!0,b.stackGroups[v]=w}else b.stackGroups[qc("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[f]};return lr(lr({},d),{},Xu({},x,b))},c),h={};return Object.keys(u).reduce(function(d,f){var m=u[f];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,y){var x=m.stackGroups[y];return lr(lr({},v),{},Xu({},y,{numericAxisId:n,cateAxisId:i,items:x.items,stackedData:K2e(e,x.items,s)}))},g)}return lr(lr({},d),{},Xu({},f,m))},h)},Vz=function(e,r){var n=r.realScaleType,i=r.type,s=r.tickCount,a=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var h=c2e(u,s,l);return e.domain([Dw(h),Ro(h)]),{niceTicks:h}}if(s&&i==="number"){var d=e.domain(),f=u2e(d,s,l);return{niceTicks:f}}return null};function hx(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ge(i[e.dataKey])){var l=Lv(r,"value",i[e.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=tr(i,Ge(a)?e.dataKey:a);return Ge(c)?null:e.scale(c)}var pM=function(e){var r=e.axis,n=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+i:null;var c=tr(a,r.dataKey,r.domain[l]);return Ge(c)?null:r.scale(c)-s/2+i},Q2e=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return i<=0&&s>=0?0:s<0?s:i}return n[0]},X2e=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?lr(lr({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Er(s)){var a=r[s];if(a){var l=a.items.indexOf(e);return l>=0?a.stackedData[l]:null}}return null},J2e=function(e){return e.reduce(function(r,n){return[Dw(n.concat([r[0]]).filter(ye)),Ro(n.concat([r[1]]).filter(ye))]},[1/0,-1/0])},Bz=function(e,r,n){return Object.keys(e).reduce(function(i,s){var a=e[s],l=a.stackedData,c=l.reduce(function(u,h){var d=J2e(h.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},gM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RN=function(e,r,n){if(Ve(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(ye(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(gM.test(e[0])){var s=+gM.exec(e[0])[1];i[0]=r[0]-s}else Ve(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(ye(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(yM.test(e[1])){var a=+yM.exec(e[1])[1];i[1]=r[1]+a}else Ve(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},fx=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var s=XC(r,function(d){return d.coordinate}),a=1/0,l=1,c=s.length;l<c;l++){var u=s[l],h=s[l-1];a=Math.min((u.coordinate||0)-(h.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},vM=function(e,r,n){return!e||!e.length||gl(e,pi(n,"type.defaultProps.domain"))?r:e},Uz=function(e,r){var n=e.type.defaultProps?lr(lr({},e.type.defaultProps),e.props):e.props,i=n.dataKey,s=n.name,a=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,h=n.hide;return lr(lr({},Me(e,!1)),{},{dataKey:i,unit:a,formatter:l,name:s||i,color:SA(e),value:tr(r,i),type:c,payload:r,chartType:u,hide:h})};function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function xM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xM(Object(r),!0).forEach(function(n){zz(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zz(t,e,r){return e=Z2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z2e(t){var e=eCe(t,"string");return Np(e)=="symbol"?e:e+""}function eCe(t,e){if(Np(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tCe(t,e){return sCe(t)||iCe(t,e)||nCe(t,e)||rCe()}function rCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nCe(t,e){if(t){if(typeof t=="string")return bM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bM(t,e)}}function bM(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iCe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function sCe(t){if(Array.isArray(t))return t}var mx=Math.PI/180,aCe=function(e){return e*180/Math.PI},xt=function(e,r,n,i){return{x:e+Math.cos(-mx*i)*n,y:r+Math.sin(-mx*i)*n}},Wz=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Hz=function(e,r,n,i,s){var a=e.width,l=e.height,c=e.startAngle,u=e.endAngle,h=Cn(e.cx,a,a/2),d=Cn(e.cy,l,l/2),f=Wz(a,l,n),m=Cn(e.innerRadius,f,0),g=Cn(e.outerRadius,f,f*.8),v=Object.keys(r);return v.reduce(function(y,x){var b=r[x],w=b.domain,k=b.reversed,S;if(Ge(b.range))i==="angleAxis"?S=[c,u]:i==="radiusAxis"&&(S=[m,g]),k&&(S=[S[1],S[0]]);else{S=b.range;var P=S,N=tCe(P,2);c=N[0],u=N[1]}var _=Lz(b,s),T=_.realScaleType,j=_.scale;j.domain(w).range(S),Fz(j);var C=Vz(j,aa(aa({},b),{},{realScaleType:T})),I=aa(aa(aa({},b),C),{},{range:S,radius:g,realScaleType:T,scale:j,cx:h,cy:d,innerRadius:m,outerRadius:g,startAngle:c,endAngle:u});return aa(aa({},y),{},zz({},x,I))},{})},oCe=function(e,r){var n=e.x,i=e.y,s=r.x,a=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-a,2))},lCe=function(e,r){var n=e.x,i=e.y,s=r.cx,a=r.cy,l=oCe({x:n,y:i},{x:s,y:a});if(l<=0)return{radius:l};var c=(n-s)/l,u=Math.acos(c);return i>a&&(u=2*Math.PI-u),{radius:l,angle:aCe(u),angleInRadian:u}},cCe=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),a=Math.min(i,s);return{startAngle:r-a*360,endAngle:n-a*360}},uCe=function(e,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),a=Math.floor(i/360),l=Math.min(s,a);return e+l*360},wM=function(e,r){var n=e.x,i=e.y,s=lCe({x:n,y:i},r),a=s.radius,l=s.angle,c=r.innerRadius,u=r.outerRadius;if(a<c||a>u)return!1;if(a===0)return!0;var h=cCe(r),d=h.startAngle,f=h.endAngle,m=l,g;if(d<=f){for(;m>f;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=f}else{for(;m>d;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=d}return g?aa(aa({},r),{},{radius:a,angle:uCe(m,r)}):null},Gz=function(e){return!E.isValidElement(e)&&!Ve(e)&&typeof e!="boolean"?e.className:""};function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}var dCe=["offset"];function hCe(t){return gCe(t)||pCe(t)||mCe(t)||fCe()}function fCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mCe(t,e){if(t){if(typeof t=="string")return MN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MN(t,e)}}function pCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gCe(t){if(Array.isArray(t))return MN(t)}function MN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yCe(t,e){if(t==null)return{};var r=vCe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vCe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _r(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_M(Object(r),!0).forEach(function(n){xCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_M(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xCe(t,e,r){return e=bCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bCe(t){var e=wCe(t,"string");return jp(e)=="symbol"?e:e+""}function wCe(t,e){if(jp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ep(){return Ep=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ep.apply(this,arguments)}var _Ce=function(e){var r=e.value,n=e.formatter,i=Ge(e.children)?r:e.children;return Ve(n)?n(i):i},SCe=function(e,r){var n=En(r-e),i=Math.min(Math.abs(r-e),360);return n*i},kCe=function(e,r,n){var i=e.position,s=e.viewBox,a=e.offset,l=e.className,c=s,u=c.cx,h=c.cy,d=c.innerRadius,f=c.outerRadius,m=c.startAngle,g=c.endAngle,v=c.clockWise,y=(d+f)/2,x=SCe(m,g),b=x>=0?1:-1,w,k;i==="insideStart"?(w=m+b*a,k=v):i==="insideEnd"?(w=g-b*a,k=!v):i==="end"&&(w=g+b*a,k=v),k=x<=0?k:!k;var S=xt(u,h,y,w),P=xt(u,h,y,w+(k?1:-1)*359),N="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(k?0:1,`,
    `).concat(P.x,",").concat(P.y),_=Ge(e.id)?qc("recharts-radial-line-"):e.id;return D.createElement("text",Ep({},n,{dominantBaseline:"central",className:He("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:_,d:N})),D.createElement("textPath",{xlinkHref:"#".concat(_)},r))},NCe=function(e){var r=e.viewBox,n=e.offset,i=e.position,s=r,a=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,h=s.startAngle,d=s.endAngle,f=(h+d)/2;if(i==="outside"){var m=xt(a,l,u+n,f),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,x=xt(a,l,y,f),b=x.x,w=x.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},jCe=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,s=e.position,a=r,l=a.x,c=a.y,u=a.width,h=a.height,d=h>=0?1:-1,f=d*i,m=d>0?"end":"start",g=d>0?"start":"end",v=u>=0?1:-1,y=v*i,x=v>0?"end":"start",b=v>0?"start":"end";if(s==="top"){var w={x:l+u/2,y:c-d*i,textAnchor:"middle",verticalAnchor:m};return _r(_r({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(s==="bottom"){var k={x:l+u/2,y:c+h+f,textAnchor:"middle",verticalAnchor:g};return _r(_r({},k),n?{height:Math.max(n.y+n.height-(c+h),0),width:u}:{})}if(s==="left"){var S={x:l-y,y:c+h/2,textAnchor:x,verticalAnchor:"middle"};return _r(_r({},S),n?{width:Math.max(S.x-n.x,0),height:h}:{})}if(s==="right"){var P={x:l+u+y,y:c+h/2,textAnchor:b,verticalAnchor:"middle"};return _r(_r({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:h}:{})}var N=n?{width:u,height:h}:{};return s==="insideLeft"?_r({x:l+y,y:c+h/2,textAnchor:b,verticalAnchor:"middle"},N):s==="insideRight"?_r({x:l+u-y,y:c+h/2,textAnchor:x,verticalAnchor:"middle"},N):s==="insideTop"?_r({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:g},N):s==="insideBottom"?_r({x:l+u/2,y:c+h-f,textAnchor:"middle",verticalAnchor:m},N):s==="insideTopLeft"?_r({x:l+y,y:c+f,textAnchor:b,verticalAnchor:g},N):s==="insideTopRight"?_r({x:l+u-y,y:c+f,textAnchor:x,verticalAnchor:g},N):s==="insideBottomLeft"?_r({x:l+y,y:c+h-f,textAnchor:b,verticalAnchor:m},N):s==="insideBottomRight"?_r({x:l+u-y,y:c+h-f,textAnchor:x,verticalAnchor:m},N):Oh(s)&&(ye(s.x)||Zl(s.x))&&(ye(s.y)||Zl(s.y))?_r({x:l+Cn(s.x,u),y:c+Cn(s.y,h),textAnchor:"end",verticalAnchor:"end"},N):_r({x:l+u/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},N)},ECe=function(e){return"cx"in e&&ye(e.cx)};function Lr(t){var e=t.offset,r=e===void 0?5:e,n=yCe(t,dCe),i=_r({offset:r},n),s=i.viewBox,a=i.position,l=i.value,c=i.children,u=i.content,h=i.className,d=h===void 0?"":h,f=i.textBreakAll;if(!s||Ge(l)&&Ge(c)&&!E.isValidElement(u)&&!Ve(u))return null;if(E.isValidElement(u))return E.cloneElement(u,i);var m;if(Ve(u)){if(m=E.createElement(u,i),E.isValidElement(m))return m}else m=_Ce(i);var g=ECe(s),v=Me(i,!0);if(g&&(a==="insideStart"||a==="insideEnd"||a==="end"))return kCe(i,m,v);var y=g?NCe(i):jCe(i);return D.createElement(Ic,Ep({className:He("recharts-label",d)},v,y,{breakAll:f}),m)}Lr.displayName="Label";var qz=function(e){var r=e.cx,n=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,h=e.outerRadius,d=e.x,f=e.y,m=e.top,g=e.left,v=e.width,y=e.height,x=e.clockWise,b=e.labelViewBox;if(b)return b;if(ye(v)&&ye(y)){if(ye(d)&&ye(f))return{x:d,y:f,width:v,height:y};if(ye(m)&&ye(g))return{x:m,y:g,width:v,height:y}}return ye(d)&&ye(f)?{x:d,y:f,width:0,height:0}:ye(r)&&ye(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:h||c||l||0,clockWise:x}:e.viewBox?e.viewBox:{}},CCe=function(e,r){return e?e===!0?D.createElement(Lr,{key:"label-implicit",viewBox:r}):Er(e)?D.createElement(Lr,{key:"label-implicit",viewBox:r,value:e}):E.isValidElement(e)?e.type===Lr?E.cloneElement(e,{key:"label-implicit",viewBox:r}):D.createElement(Lr,{key:"label-implicit",content:e,viewBox:r}):Ve(e)?D.createElement(Lr,{key:"label-implicit",content:e,viewBox:r}):Oh(e)?D.createElement(Lr,Ep({viewBox:r},e,{key:"label-implicit"})):null:null},ACe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,s=qz(e),a=gi(i,Lr).map(function(c,u){return E.cloneElement(c,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return a;var l=CCe(e.label,r||s);return[l].concat(hCe(a))};Lr.parseViewBox=qz;Lr.renderCallByParent=ACe;function TCe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var PCe=TCe;const Kz=bt(PCe);function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}var ICe=["valueAccessor"],OCe=["data","dataKey","clockWise","id","textBreakAll"];function RCe(t){return LCe(t)||$Ce(t)||DCe(t)||MCe()}function MCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DCe(t,e){if(t){if(typeof t=="string")return DN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DN(t,e)}}function $Ce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LCe(t){if(Array.isArray(t))return DN(t)}function DN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},px.apply(this,arguments)}function SM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SM(Object(r),!0).forEach(function(n){FCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FCe(t,e,r){return e=VCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VCe(t){var e=BCe(t,"string");return Cp(e)=="symbol"?e:e+""}function BCe(t,e){if(Cp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NM(t,e){if(t==null)return{};var r=UCe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function UCe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var zCe=function(e){return Array.isArray(e.value)?Kz(e.value):e.value};function hs(t){var e=t.valueAccessor,r=e===void 0?zCe:e,n=NM(t,ICe),i=n.data,s=n.dataKey,a=n.clockWise,l=n.id,c=n.textBreakAll,u=NM(n,OCe);return!i||!i.length?null:D.createElement(tt,{className:"recharts-label-list"},i.map(function(h,d){var f=Ge(s)?r(h,d):tr(h&&h.payload,s),m=Ge(l)?{}:{id:"".concat(l,"-").concat(d)};return D.createElement(Lr,px({},Me(h,!0),u,m,{parentViewBox:h.parentViewBox,value:f,textBreakAll:c,viewBox:Lr.parseViewBox(Ge(a)?h:kM(kM({},h),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}hs.displayName="LabelList";function WCe(t,e){return t?t===!0?D.createElement(hs,{key:"labelList-implicit",data:e}):D.isValidElement(t)||Ve(t)?D.createElement(hs,{key:"labelList-implicit",data:e,content:t}):Oh(t)?D.createElement(hs,px({data:e},t,{key:"labelList-implicit"})):null:null}function HCe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=gi(n,hs).map(function(a,l){return E.cloneElement(a,{data:e,key:"labelList-".concat(l)})});if(!r)return i;var s=WCe(t.label,e);return[s].concat(RCe(i))}hs.renderCallByParent=HCe;function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function $N(){return $N=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$N.apply(this,arguments)}function jM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function EM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jM(Object(r),!0).forEach(function(n){GCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GCe(t,e,r){return e=qCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qCe(t){var e=KCe(t,"string");return Ap(e)=="symbol"?e:e+""}function KCe(t,e){if(Ap(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YCe=function(e,r){var n=En(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},B0=function(e){var r=e.cx,n=e.cy,i=e.radius,s=e.angle,a=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,h=c*(l?1:-1)+i,d=Math.asin(c/h)/mx,f=u?s:s+a*d,m=xt(r,n,h,f),g=xt(r,n,i,f),v=u?s-a*d:s,y=xt(r,n,h*Math.cos(d*mx),v);return{center:m,circleTangency:g,lineTangency:y,theta:d}},Yz=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,l=e.endAngle,c=YCe(a,l),u=a+c,h=xt(r,n,s,a),d=xt(r,n,s,u),f="M ".concat(h.x,",").concat(h.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var m=xt(r,n,i,a),g=xt(r,n,i,u);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},QCe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,h=e.endAngle,d=En(h-u),f=B0({cx:r,cy:n,radius:s,angle:u,sign:d,cornerRadius:a,cornerIsExternal:c}),m=f.circleTangency,g=f.lineTangency,v=f.theta,y=B0({cx:r,cy:n,radius:s,angle:h,sign:-d,cornerRadius:a,cornerIsExternal:c}),x=y.circleTangency,b=y.lineTangency,w=y.theta,k=c?Math.abs(u-h):Math.abs(u-h)-v-w;if(k<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Yz({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:u,endAngle:h});var S="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(k>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var P=B0({cx:r,cy:n,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),N=P.circleTangency,_=P.lineTangency,T=P.theta,j=B0({cx:r,cy:n,radius:i,angle:h,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),C=j.circleTangency,I=j.lineTangency,R=j.theta,$=c?Math.abs(u-h):Math.abs(u-h)-T-R;if($<0&&a===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,").concat(+($>180),",").concat(+(d>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},XCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Qz=function(e){var r=EM(EM({},XCe),e),n=r.cx,i=r.cy,s=r.innerRadius,a=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,h=r.startAngle,d=r.endAngle,f=r.className;if(a<s||h===d)return null;var m=He("recharts-sector",f),g=a-s,v=Cn(l,g,0,!0),y;return v>0&&Math.abs(h-d)<360?y=QCe({cx:n,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:h,endAngle:d}):y=Yz({cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:h,endAngle:d}),D.createElement("path",$N({},Me(r,!0),{className:m,d:y,role:"img"}))};function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function LN(){return LN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LN.apply(this,arguments)}function CM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function AM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CM(Object(r),!0).forEach(function(n){JCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JCe(t,e,r){return e=ZCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZCe(t){var e=eAe(t,"string");return Tp(e)=="symbol"?e:e+""}function eAe(t,e){if(Tp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TM={curveBasisClosed:e0e,curveBasisOpen:t0e,curveBasis:Zge,curveBumpX:Fge,curveBumpY:Vge,curveLinearClosed:r0e,curveLinear:Sw,curveMonotoneX:n0e,curveMonotoneY:i0e,curveNatural:s0e,curveStep:a0e,curveStepAfter:l0e,curveStepBefore:o0e},U0=function(e){return e.x===+e.x&&e.y===+e.y},Tf=function(e){return e.x},Pf=function(e){return e.y},tAe=function(e,r){if(Ve(e))return e;var n="curve".concat(ww(e));return(n==="curveMonotone"||n==="curveBump")&&r?TM["".concat(n).concat(r==="vertical"?"Y":"X")]:TM[n]||Sw},rAe=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,s=i===void 0?[]:i,a=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,h=tAe(n,l),d=u?s.filter(function(v){return U0(v)}):s,f;if(Array.isArray(a)){var m=u?a.filter(function(v){return U0(v)}):a,g=d.map(function(v,y){return AM(AM({},v),{},{base:m[y]})});return l==="vertical"?f=I0().y(Pf).x1(Tf).x0(function(v){return v.base.x}):f=I0().x(Tf).y1(Pf).y0(function(v){return v.base.y}),f.defined(U0).curve(h),f(g)}return l==="vertical"&&ye(a)?f=I0().y(Pf).x1(Tf).x0(a):ye(a)?f=I0().x(Tf).y1(Pf).y0(a):f=UB().x(Tf).y(Pf),f.defined(U0).curve(h),f(d)},fc=function(e){var r=e.className,n=e.points,i=e.path,s=e.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?rAe(e):i;return D.createElement("path",LN({},Me(e,!1),Fv(e),{className:He("recharts-curve",r),d:a,ref:s}))},Xz={exports:{}},nAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",iAe=nAe,sAe=iAe;function Jz(){}function Zz(){}Zz.resetWarningCache=Jz;var aAe=function(){function t(n,i,s,a,l,c){if(c!==sAe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Zz,resetWarningCache:Jz};return r.PropTypes=r,r};Xz.exports=aAe();var oAe=Xz.exports;const Ze=bt(oAe);var lAe=Object.getOwnPropertyNames,cAe=Object.getOwnPropertySymbols,uAe=Object.prototype.hasOwnProperty;function PM(t,e){return function(n,i,s){return t(n,i,s)&&e(n,i,s)}}function z0(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var s=i.cache,a=s.get(r),l=s.get(n);if(a&&l)return a===n&&l===r;s.set(r,n),s.set(n,r);var c=t(r,n,i);return s.delete(r),s.delete(n),c}}function IM(t){return lAe(t).concat(cAe(t))}var eW=Object.hasOwn||function(t,e){return uAe.call(t,e)};function Wh(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var tW="_owner",OM=Object.getOwnPropertyDescriptor,RM=Object.keys;function dAe(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function hAe(t,e){return Wh(t.getTime(),e.getTime())}function MM(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.entries(),s=0,a,l;(a=i.next())&&!a.done;){for(var c=e.entries(),u=!1,h=0;(l=c.next())&&!l.done;){var d=a.value,f=d[0],m=d[1],g=l.value,v=g[0],y=g[1];!u&&!n[h]&&(u=r.equals(f,v,s,h,t,e,r)&&r.equals(m,y,f,v,t,e,r))&&(n[h]=!0),h++}if(!u)return!1;s++}return!0}function fAe(t,e,r){var n=RM(t),i=n.length;if(RM(e).length!==i)return!1;for(var s;i-- >0;)if(s=n[i],s===tW&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!eW(e,s)||!r.equals(t[s],e[s],s,s,t,e,r))return!1;return!0}function If(t,e,r){var n=IM(t),i=n.length;if(IM(e).length!==i)return!1;for(var s,a,l;i-- >0;)if(s=n[i],s===tW&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!eW(e,s)||!r.equals(t[s],e[s],s,s,t,e,r)||(a=OM(t,s),l=OM(e,s),(a||l)&&(!a||!l||a.configurable!==l.configurable||a.enumerable!==l.enumerable||a.writable!==l.writable)))return!1;return!0}function mAe(t,e){return Wh(t.valueOf(),e.valueOf())}function pAe(t,e){return t.source===e.source&&t.flags===e.flags}function DM(t,e,r){if(t.size!==e.size)return!1;for(var n={},i=t.values(),s,a;(s=i.next())&&!s.done;){for(var l=e.values(),c=!1,u=0;(a=l.next())&&!a.done;)!c&&!n[u]&&(c=r.equals(s.value,a.value,s.value,a.value,t,e,r))&&(n[u]=!0),u++;if(!c)return!1}return!0}function gAe(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}var yAe="[object Arguments]",vAe="[object Boolean]",xAe="[object Date]",bAe="[object Map]",wAe="[object Number]",_Ae="[object Object]",SAe="[object RegExp]",kAe="[object Set]",NAe="[object String]",jAe=Array.isArray,$M=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,LM=Object.assign,EAe=Object.prototype.toString.call.bind(Object.prototype.toString);function CAe(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areMapsEqual,i=t.areObjectsEqual,s=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,l=t.areSetsEqual,c=t.areTypedArraysEqual;return function(h,d,f){if(h===d)return!0;if(h==null||d==null||typeof h!="object"||typeof d!="object")return h!==h&&d!==d;var m=h.constructor;if(m!==d.constructor)return!1;if(m===Object)return i(h,d,f);if(jAe(h))return e(h,d,f);if($M!=null&&$M(h))return c(h,d,f);if(m===Date)return r(h,d,f);if(m===RegExp)return a(h,d,f);if(m===Map)return n(h,d,f);if(m===Set)return l(h,d,f);var g=EAe(h);return g===xAe?r(h,d,f):g===SAe?a(h,d,f):g===bAe?n(h,d,f):g===kAe?l(h,d,f):g===_Ae?typeof h.then!="function"&&typeof d.then!="function"&&i(h,d,f):g===yAe?i(h,d,f):g===vAe||g===wAe||g===NAe?s(h,d,f):!1}}function AAe(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?If:dAe,areDatesEqual:hAe,areMapsEqual:n?PM(MM,If):MM,areObjectsEqual:n?If:fAe,arePrimitiveWrappersEqual:mAe,areRegExpsEqual:pAe,areSetsEqual:n?PM(DM,If):DM,areTypedArraysEqual:n?If:gAe};if(r&&(i=LM({},i,r(i))),e){var s=z0(i.areArraysEqual),a=z0(i.areMapsEqual),l=z0(i.areObjectsEqual),c=z0(i.areSetsEqual);i=LM({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:l,areSetsEqual:c})}return i}function TAe(t){return function(e,r,n,i,s,a,l){return t(e,r,l)}}function PAe(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,s=t.strict;if(n)return function(c,u){var h=n(),d=h.cache,f=d===void 0?e?new WeakMap:void 0:d,m=h.meta;return r(c,u,{cache:f,equals:i,meta:m,strict:s})};if(e)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return r(c,u,a)}}var IAe=Cl();Cl({strict:!0});Cl({circular:!0});Cl({circular:!0,strict:!0});Cl({createInternalComparator:function(){return Wh}});Cl({strict:!0,createInternalComparator:function(){return Wh}});Cl({circular:!0,createInternalComparator:function(){return Wh}});Cl({circular:!0,createInternalComparator:function(){return Wh},strict:!0});function Cl(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,l=AAe(t),c=CAe(l),u=n?n(c):TAe(c);return PAe({circular:r,comparator:c,createState:i,equals:u,strict:a})}function OAe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function FM(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>e?(t(s),r=-1):OAe(i)};requestAnimationFrame(n)}function FN(t){"@babel/helpers - typeof";return FN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FN(t)}function RAe(t){return LAe(t)||$Ae(t)||DAe(t)||MAe()}function MAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DAe(t,e){if(t){if(typeof t=="string")return VM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VM(t,e)}}function VM(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $Ae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LAe(t){if(Array.isArray(t))return t}function FAe(){var t={},e=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var a=s,l=RAe(a),c=l[0],u=l.slice(1);if(typeof c=="number"){FM(i.bind(null,u),c);return}i(c),FM(i.bind(null,u));return}FN(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function BM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function UM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BM(Object(r),!0).forEach(function(n){rW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rW(t,e,r){return e=VAe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VAe(t){var e=BAe(t,"string");return Pp(e)==="symbol"?e:String(e)}function BAe(t,e){if(Pp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Pp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UAe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},zAe=function(e){return e},WAe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},bm=function(e,r){return Object.keys(r).reduce(function(n,i){return UM(UM({},n),{},rW({},i,e(i,r[i])))},{})},zM=function(e,r,n){return e.map(function(i){return"".concat(WAe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function HAe(t,e){return KAe(t)||qAe(t,e)||nW(t,e)||GAe()}function GAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qAe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function KAe(t){if(Array.isArray(t))return t}function YAe(t){return JAe(t)||XAe(t)||nW(t)||QAe()}function QAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nW(t,e){if(t){if(typeof t=="string")return VN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VN(t,e)}}function XAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JAe(t){if(Array.isArray(t))return VN(t)}function VN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var gx=1e-4,iW=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},sW=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},WM=function(e,r){return function(n){var i=iW(e,r);return sW(i,n)}},ZAe=function(e,r){return function(n){var i=iW(e,r),s=[].concat(YAe(i.map(function(a,l){return a*l}).slice(1)),[0]);return sW(s,n)}},HM=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],s=r[1],a=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,a=1,l=1;break;case"ease":i=.25,s=.1,a=.25,l=1;break;case"ease-in":i=.42,s=0,a=1,l=1;break;case"ease-out":i=.42,s=0,a=.58,l=1;break;case"ease-in-out":i=0,s=0,a=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),h=HAe(u,4);i=h[0],s=h[1],a=h[2],l=h[3]}}}var d=WM(i,a),f=WM(s,l),m=ZAe(i,a),g=function(x){return x>1?1:x<0?0:x},v=function(x){for(var b=x>1?1:x,w=b,k=0;k<8;++k){var S=d(w)-b,P=m(w);if(Math.abs(S-b)<gx||P<gx)return f(w);w=g(w-S/P)}return f(w)};return v.isStepper=!1,v},eTe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,s=i===void 0?8:i,a=e.dt,l=a===void 0?17:a,c=function(h,d,f){var m=-(h-d)*n,g=f*s,v=f+(m-g)*l/1e3,y=f*l/1e3+h;return Math.abs(y-d)<gx&&Math.abs(v)<gx?[d,0]:[y,v]};return c.isStepper=!0,c.dt=l,c},tTe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return HM(i);case"spring":return eTe();default:if(i.split("(")[0]==="cubic-bezier")return HM(i)}return typeof i=="function"?i:null};function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function GM(t){return iTe(t)||nTe(t)||aW(t)||rTe()}function rTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iTe(t){if(Array.isArray(t))return UN(t)}function qM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qM(Object(r),!0).forEach(function(n){BN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BN(t,e,r){return e=sTe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sTe(t){var e=aTe(t,"string");return Ip(e)==="symbol"?e:String(e)}function aTe(t,e){if(Ip(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ip(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oTe(t,e){return uTe(t)||cTe(t,e)||aW(t,e)||lTe()}function lTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aW(t,e){if(t){if(typeof t=="string")return UN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UN(t,e)}}function UN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cTe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function uTe(t){if(Array.isArray(t))return t}var yx=function(e,r,n){return e+(r-e)*n},zN=function(e){var r=e.from,n=e.to;return r!==n},dTe=function t(e,r,n){var i=bm(function(s,a){if(zN(a)){var l=e(a.from,a.to,a.velocity),c=oTe(l,2),u=c[0],h=c[1];return Ur(Ur({},a),{},{from:u,velocity:h})}return a},r);return n<1?bm(function(s,a){return zN(a)?Ur(Ur({},a),{},{velocity:yx(a.velocity,i[s].velocity,n),from:yx(a.from,i[s].from,n)}):a},r):t(e,i,n-1)};const hTe=function(t,e,r,n,i){var s=UAe(t,e),a=s.reduce(function(y,x){return Ur(Ur({},y),{},BN({},x,[t[x],e[x]]))},{}),l=s.reduce(function(y,x){return Ur(Ur({},y),{},BN({},x,{from:t[x],velocity:0,to:e[x]}))},{}),c=-1,u,h,d=function(){return null},f=function(){return bm(function(x,b){return b.from},l)},m=function(){return!Object.values(l).filter(zN).length},g=function(x){u||(u=x);var b=x-u,w=b/r.dt;l=dTe(r,l,w),i(Ur(Ur(Ur({},t),e),f())),u=x,m()||(c=requestAnimationFrame(d))},v=function(x){h||(h=x);var b=(x-h)/n,w=bm(function(S,P){return yx.apply(void 0,GM(P).concat([r(b)]))},a);if(i(Ur(Ur(Ur({},t),e),w)),b<1)c=requestAnimationFrame(d);else{var k=bm(function(S,P){return yx.apply(void 0,GM(P).concat([r(1)]))},a);i(Ur(Ur(Ur({},t),e),k))}};return d=r.isStepper?g:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}var fTe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function mTe(t,e){if(t==null)return{};var r=pTe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pTe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function B_(t){return xTe(t)||vTe(t)||yTe(t)||gTe()}function gTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yTe(t,e){if(t){if(typeof t=="string")return WN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WN(t,e)}}function vTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xTe(t){if(Array.isArray(t))return WN(t)}function WN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KM(Object(r),!0).forEach(function(n){Gf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gf(t,e,r){return e=oW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wTe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oW(n.key),n)}}function _Te(t,e,r){return e&&wTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oW(t){var e=STe(t,"string");return qd(e)==="symbol"?e:String(e)}function STe(t,e){if(qd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HN(t,e)}function HN(t,e){return HN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},HN(t,e)}function NTe(t){var e=jTe();return function(){var n=vx(t),i;if(e){var s=vx(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return GN(this,i)}}function GN(t,e){if(e&&(qd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qN(t)}function qN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vx(t){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vx(t)}var Li=function(t){kTe(r,t);var e=NTe(r);function r(n,i){var s;bTe(this,r),s=e.call(this,n,i);var a=s.props,l=a.isActive,c=a.attributeName,u=a.from,h=a.to,d=a.steps,f=a.children,m=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(qN(s)),s.changeStyle=s.changeStyle.bind(qN(s)),!l||m<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:h}),GN(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof f=="function")return s.state={style:u},GN(s);s.state={style:c?Gf({},c,u):u}}else s.state={style:{}};return s}return _Te(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,h=s.to,d=s.from,f=this.state.style;if(l){if(!a){var m={style:c?Gf({},c,h):h};this.state&&f&&(c&&f[c]!==h||!c&&f!==h)&&this.setState(m);return}if(!(IAe(i.to,h)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?d:i.to;if(this.state&&f){var y={style:c?Gf({},c,v):v};(c&&f[c]!==v||!c&&f!==v)&&this.setState(y)}this.runAnimation(Wi(Wi({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,l=i.to,c=i.duration,u=i.easing,h=i.begin,d=i.onAnimationEnd,f=i.onAnimationStart,m=hTe(a,l,tTe(u),c,this.changeStyle),g=function(){s.stopJSAnimation=m()};this.manager.start([f,h,g,c,d])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,l=i.begin,c=i.onAnimationStart,u=a[0],h=u.style,d=u.duration,f=d===void 0?0:d,m=function(v,y,x){if(x===0)return v;var b=y.duration,w=y.easing,k=w===void 0?"ease":w,S=y.style,P=y.properties,N=y.onAnimationEnd,_=x>0?a[x-1]:y,T=P||Object.keys(S);if(typeof k=="function"||k==="spring")return[].concat(B_(v),[s.runJSAnimation.bind(s,{from:_.style,to:S,duration:b,easing:k}),b]);var j=zM(T,b,k),C=Wi(Wi(Wi({},_.style),S),{},{transition:j});return[].concat(B_(v),[C,b,N]).filter(zAe)};return this.manager.start([c].concat(B_(a.reduce(m,[h,Math.max(f,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=FAe());var s=i.begin,a=i.duration,l=i.attributeName,c=i.to,u=i.easing,h=i.onAnimationStart,d=i.onAnimationEnd,f=i.steps,m=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var v=l?Gf({},l,c):c,y=zM(Object.keys(v),a,u);g.start([h,s,Wi(Wi({},v),{},{transition:y}),a,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=mTe(i,fTe),u=E.Children.count(s),h=this.state.style;if(typeof s=="function")return s(h);if(!l||u===0||a<=0)return s;var d=function(m){var g=m.props,v=g.style,y=v===void 0?{}:v,x=g.className,b=E.cloneElement(m,Wi(Wi({},c),{},{style:Wi(Wi({},y),h),className:x}));return b};return u===1?d(E.Children.only(s)):D.createElement("div",null,E.Children.map(s,function(f){return d(f)}))}}]),r}(E.PureComponent);Li.displayName="Animate";Li.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Li.propTypes={from:Ze.oneOfType([Ze.object,Ze.string]),to:Ze.oneOfType([Ze.object,Ze.string]),attributeName:Ze.string,duration:Ze.number,begin:Ze.number,easing:Ze.oneOfType([Ze.string,Ze.func]),steps:Ze.arrayOf(Ze.shape({duration:Ze.number.isRequired,style:Ze.object.isRequired,easing:Ze.oneOfType([Ze.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ze.func]),properties:Ze.arrayOf("string"),onAnimationEnd:Ze.func})),children:Ze.oneOfType([Ze.node,Ze.func]),isActive:Ze.bool,canBegin:Ze.bool,onAnimationEnd:Ze.func,shouldReAnimate:Ze.bool,onAnimationStart:Ze.func,onAnimationReStart:Ze.func};Ze.object,Ze.object,Ze.object,Ze.element;Ze.object,Ze.object,Ze.object,Ze.oneOfType([Ze.array,Ze.element]),Ze.any;function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function xx(){return xx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xx.apply(this,arguments)}function ETe(t,e){return PTe(t)||TTe(t,e)||ATe(t,e)||CTe()}function CTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ATe(t,e){if(t){if(typeof t=="string")return YM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YM(t,e)}}function YM(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function TTe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function PTe(t){if(Array.isArray(t))return t}function QM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function XM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QM(Object(r),!0).forEach(function(n){ITe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ITe(t,e,r){return e=OTe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OTe(t){var e=RTe(t,"string");return Op(e)=="symbol"?e:e+""}function RTe(t,e){if(Op(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JM=function(e,r,n,i,s){var a=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,h;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=s[f]>a?a:s[f];h="M".concat(e,",").concat(r+l*d[0]),d[0]>0&&(h+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+c*d[0],",").concat(r)),h+="L ".concat(e+n-c*d[1],",").concat(r),d[1]>0&&(h+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*d[1])),h+="L ".concat(e+n,",").concat(r+i-l*d[2]),d[2]>0&&(h+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+n-c*d[2],",").concat(r+i)),h+="L ".concat(e+c*d[3],",").concat(r+i),d[3]>0&&(h+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+i-l*d[3])),h+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);h="M ".concat(e,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+c*g,",").concat(r,`
            L `).concat(e+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*g,`
            L `).concat(e+n,",").concat(r+i-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+n-c*g,",").concat(r+i,`
            L `).concat(e+c*g,",").concat(r+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e,",").concat(r+i-l*g," Z")}else h="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return h},MTe=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,s=r.x,a=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),h=Math.max(s,s+l),d=Math.min(a,a+c),f=Math.max(a,a+c);return n>=u&&n<=h&&i>=d&&i<=f}return!1},DTe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kA=function(e){var r=XM(XM({},DTe),e),n=E.useRef(),i=E.useState(-1),s=ETe(i,2),a=s[0],l=s[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var k=n.current.getTotalLength();k&&l(k)}catch{}},[]);var c=r.x,u=r.y,h=r.width,d=r.height,f=r.radius,m=r.className,g=r.animationEasing,v=r.animationDuration,y=r.animationBegin,x=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||d!==+d||h===0||d===0)return null;var w=He("recharts-rectangle",m);return b?D.createElement(Li,{canBegin:a>0,from:{width:h,height:d,x:c,y:u},to:{width:h,height:d,x:c,y:u},duration:v,animationEasing:g,isActive:b},function(k){var S=k.width,P=k.height,N=k.x,_=k.y;return D.createElement(Li,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:x,easing:g},D.createElement("path",xx({},Me(r,!0),{className:w,d:JM(N,_,S,P,f),ref:n})))}):D.createElement("path",xx({},Me(r,!0),{className:w,d:JM(c,u,h,d,f)}))},$Te=["points","className","baseLinePoints","connectNulls"];function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tu.apply(this,arguments)}function LTe(t,e){if(t==null)return{};var r=FTe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FTe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ZM(t){return zTe(t)||UTe(t)||BTe(t)||VTe()}function VTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BTe(t,e){if(t){if(typeof t=="string")return KN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KN(t,e)}}function UTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zTe(t){if(Array.isArray(t))return KN(t)}function KN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var e3=function(e){return e&&e.x===+e.x&&e.y===+e.y},WTe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){e3(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),e3(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},wm=function(e,r){var n=WTe(e);r&&(n=[n.reduce(function(s,a){return[].concat(ZM(s),ZM(a))},[])]);var i=n.map(function(s){return s.reduce(function(a,l,c){return"".concat(a).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},HTe=function(e,r,n){var i=wm(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(wm(r.reverse(),n).slice(1))},lW=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,s=e.connectNulls,a=LTe(e,$Te);if(!r||!r.length)return null;var l=He("recharts-polygon",n);if(i&&i.length){var c=a.stroke&&a.stroke!=="none",u=HTe(r,i,s);return D.createElement("g",{className:l},D.createElement("path",Tu({},Me(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?D.createElement("path",Tu({},Me(a,!0),{fill:"none",d:wm(r,s)})):null,c?D.createElement("path",Tu({},Me(a,!0),{fill:"none",d:wm(i,s)})):null)}var h=wm(r,s);return D.createElement("path",Tu({},Me(a,!0),{fill:h.slice(-1)==="Z"?a.fill:"none",className:l,d:h}))};function YN(){return YN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YN.apply(this,arguments)}var Hh=function(e){var r=e.cx,n=e.cy,i=e.r,s=e.className,a=He("recharts-dot",s);return r===+r&&n===+n&&i===+i?D.createElement("circle",YN({},Me(e,!1),Fv(e),{className:a,cx:r,cy:n,r:i})):null};function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}var GTe=["x","y","top","left","width","height","className"];function QN(){return QN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QN.apply(this,arguments)}function t3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qTe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t3(Object(r),!0).forEach(function(n){KTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KTe(t,e,r){return e=YTe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YTe(t){var e=QTe(t,"string");return Rp(e)=="symbol"?e:e+""}function QTe(t,e){if(Rp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XTe(t,e){if(t==null)return{};var r=JTe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function JTe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var ZTe=function(e,r,n,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(r,"h").concat(n)},ePe=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,s=i===void 0?0:i,a=e.top,l=a===void 0?0:a,c=e.left,u=c===void 0?0:c,h=e.width,d=h===void 0?0:h,f=e.height,m=f===void 0?0:f,g=e.className,v=XTe(e,GTe),y=qTe({x:n,y:s,top:l,left:u,width:d,height:m},v);return!ye(n)||!ye(s)||!ye(d)||!ye(m)||!ye(l)||!ye(u)?null:D.createElement("path",QN({},Me(y,!0),{className:He("recharts-cross",g),d:ZTe(n,s,d,m,l,u)}))},tPe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}function rPe(t,e){if(t==null)return{};var r=nPe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nPe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ua(){return Ua=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ua.apply(this,arguments)}function r3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r3(Object(r),!0).forEach(function(n){iPe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iPe(t,e,r){return e=sPe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sPe(t){var e=aPe(t,"string");return Mp(e)=="symbol"?e:e+""}function aPe(t,e){if(Mp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oPe=function(e,r,n,i){var s="";return i.forEach(function(a,l){var c=xt(r,n,e,a);l?s+="L ".concat(c.x,",").concat(c.y):s+="M ".concat(c.x,",").concat(c.y)}),s+="Z",s},lPe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.polarAngles,l=e.radialLines;if(!a||!a.length||!l)return null;var c=Dp({stroke:"#ccc"},Me(e,!1));return D.createElement("g",{className:"recharts-polar-grid-angle"},a.map(function(u){var h=xt(r,n,i,u),d=xt(r,n,s,u);return D.createElement("line",Ua({},c,{key:"line-".concat(u),x1:h.x,y1:h.y,x2:d.x,y2:d.y}))}))},cPe=function(e){var r=e.cx,n=e.cy,i=e.radius,s=e.index,a=Dp(Dp({stroke:"#ccc"},Me(e,!1)),{},{fill:"none"});return D.createElement("circle",Ua({},a,{className:He("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(s),cx:r,cy:n,r:i}))},uPe=function(e){var r=e.radius,n=e.index,i=Dp(Dp({stroke:"#ccc"},Me(e,!1)),{},{fill:"none"});return D.createElement("path",Ua({},i,{className:He("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:oPe(r,e.cx,e.cy,e.polarAngles)}))},dPe=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:D.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(i,s){var a=s;return n==="circle"?D.createElement(cPe,Ua({key:a},e,{radius:i,index:s})):D.createElement(uPe,Ua({key:a},e,{radius:i,index:s}))}))},cW=function(e){var r=e.cx,n=r===void 0?0:r,i=e.cy,s=i===void 0?0:i,a=e.innerRadius,l=a===void 0?0:a,c=e.outerRadius,u=c===void 0?0:c,h=e.gridType,d=h===void 0?"polygon":h,f=e.radialLines,m=f===void 0?!0:f,g=rPe(e,tPe);return u<=0?null:D.createElement("g",{className:"recharts-polar-grid"},D.createElement(lPe,Ua({cx:n,cy:s,innerRadius:l,outerRadius:u,gridType:d,radialLines:m},g)),D.createElement(dPe,Ua({cx:n,cy:s,innerRadius:l,outerRadius:u,gridType:d,radialLines:m},g)))};cW.displayName="PolarGrid";var hPe=Mw,fPe=gz,mPe=Xs;function pPe(t,e){return t&&t.length?hPe(t,mPe(e),fPe):void 0}var gPe=pPe;const yPe=bt(gPe);var vPe=Mw,xPe=Xs,bPe=yz;function wPe(t,e){return t&&t.length?vPe(t,xPe(e),bPe):void 0}var _Pe=wPe;const SPe=bt(_Pe);var kPe=["cx","cy","angle","ticks","axisLine"],NPe=["ticks","tick","angle","tickFormatter","stroke"];function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function _m(){return _m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_m.apply(this,arguments)}function n3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Rl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n3(Object(r),!0).forEach(function(n){Fw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i3(t,e){if(t==null)return{};var r=jPe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jPe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function EPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dW(n.key),n)}}function CPe(t,e,r){return e&&s3(t.prototype,e),r&&s3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function APe(t,e,r){return e=bx(e),TPe(t,uW()?Reflect.construct(e,r||[],bx(t).constructor):e.apply(t,r))}function TPe(t,e){if(e&&(Kd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PPe(t)}function PPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uW=function(){return!!t})()}function bx(t){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bx(t)}function IPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XN(t,e)}function XN(t,e){return XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},XN(t,e)}function Fw(t,e,r){return e=dW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dW(t){var e=OPe(t,"string");return Kd(e)=="symbol"?e:e+""}function OPe(t,e){if(Kd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gh=function(t){function e(){return EPe(this,e),APe(this,e,arguments)}return IPe(e,t),CPe(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,s=this.props,a=s.angle,l=s.cx,c=s.cy;return xt(l,c,i,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.angle,l=n.ticks,c=yPe(l,function(h){return h.coordinate||0}),u=SPe(l,function(h){return h.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.angle,l=n.ticks,c=n.axisLine,u=i3(n,kPe),h=l.reduce(function(g,v){return[Math.min(g[0],v.coordinate),Math.max(g[1],v.coordinate)]},[1/0,-1/0]),d=xt(i,s,h[0],a),f=xt(i,s,h[1],a),m=Rl(Rl(Rl({},Me(u,!1)),{},{fill:"none"},Me(c,!1)),{},{x1:d.x,y1:d.y,x2:f.x,y2:f.y});return D.createElement("line",_m({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,a=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,h=i3(i,NPe),d=this.getTickTextAnchor(),f=Me(h,!1),m=Me(a,!1),g=s.map(function(v,y){var x=n.getTickValueCoord(v),b=Rl(Rl(Rl(Rl({textAnchor:d,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:y},x),{},{payload:v});return D.createElement(tt,_m({className:He("recharts-polar-radius-axis-tick",Gz(a)),key:"tick-".concat(v.coordinate)},Tc(n.props,v,y)),e.renderTickItem(a,b,c?c(v.value,y):v.value))});return D.createElement(tt,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.axisLine,a=n.tick;return!i||!i.length?null:D.createElement(tt,{className:He("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),Lr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,s){var a;return D.isValidElement(n)?a=D.cloneElement(n,i):Ve(n)?a=n(i):a=D.createElement(Ic,_m({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])}(E.PureComponent);Fw(Gh,"displayName","PolarRadiusAxis");Fw(Gh,"axisType","radiusAxis");Fw(Gh,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wl.apply(this,arguments)}function a3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ml(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a3(Object(r),!0).forEach(function(n){Vw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fW(n.key),n)}}function MPe(t,e,r){return e&&o3(t.prototype,e),r&&o3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function DPe(t,e,r){return e=wx(e),$Pe(t,hW()?Reflect.construct(e,r||[],wx(t).constructor):e.apply(t,r))}function $Pe(t,e){if(e&&(Yd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LPe(t)}function LPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hW=function(){return!!t})()}function wx(t){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wx(t)}function FPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JN(t,e)}function JN(t,e){return JN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},JN(t,e)}function Vw(t,e,r){return e=fW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fW(t){var e=VPe(t,"string");return Yd(e)=="symbol"?e:e+""}function VPe(t,e){if(Yd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BPe=Math.PI/180,l3=1e-5,qh=function(t){function e(){return RPe(this,e),DPe(this,e,arguments)}return FPe(e,t),MPe(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.cx,a=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,h=u||8,d=xt(s,a,l,n.coordinate),f=xt(s,a,l+(c==="inner"?-1:1)*h,n.coordinate);return{x1:d.x,y1:d.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,s=Math.cos(-n.coordinate*BPe),a;return s>l3?a=i==="outer"?"start":"end":s<-l3?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,a=n.radius,l=n.axisLine,c=n.axisLineType,u=Ml(Ml({},Me(this.props,!1)),{},{fill:"none"},Me(l,!1));if(c==="circle")return D.createElement(Hh,Wl({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:a}));var h=this.props.ticks,d=h.map(function(f){return xt(i,s,a,f.coordinate)});return D.createElement(lW,Wl({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,a=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,h=Me(this.props,!1),d=Me(a,!1),f=Ml(Ml({},h),{},{fill:"none"},Me(l,!1)),m=s.map(function(g,v){var y=n.getTickLineCoord(g),x=n.getTickTextAnchor(g),b=Ml(Ml(Ml({textAnchor:x},h),{},{stroke:"none",fill:u},d),{},{index:v,payload:g,x:y.x2,y:y.y2});return D.createElement(tt,Wl({className:He("recharts-polar-angle-axis-tick",Gz(a)),key:"tick-".concat(g.coordinate)},Tc(n.props,g,v)),l&&D.createElement("line",Wl({className:"recharts-polar-angle-axis-tick-line"},f,y)),a&&e.renderTickItem(a,b,c?c(g.value,v):g.value))});return D.createElement(tt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.radius,a=n.axisLine;return s<=0||!i||!i.length?null:D.createElement(tt,{className:He("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,s){var a;return D.isValidElement(n)?a=D.cloneElement(n,i):Ve(n)?a=n(i):a=D.createElement(Ic,Wl({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])}(E.PureComponent);Vw(qh,"displayName","PolarAngleAxis");Vw(qh,"axisType","angleAxis");Vw(qh,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var UPe=hU,zPe=UPe(Object.getPrototypeOf,Object),WPe=zPe,HPe=Qa,GPe=WPe,qPe=Xa,KPe="[object Object]",YPe=Function.prototype,QPe=Object.prototype,mW=YPe.toString,XPe=QPe.hasOwnProperty,JPe=mW.call(Object);function ZPe(t){if(!qPe(t)||HPe(t)!=KPe)return!1;var e=GPe(t);if(e===null)return!0;var r=XPe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&mW.call(r)==JPe}var eIe=ZPe;const tIe=bt(eIe);var rIe=Qa,nIe=Xa,iIe="[object Boolean]";function sIe(t){return t===!0||t===!1||nIe(t)&&rIe(t)==iIe}var aIe=sIe;const oIe=bt(aIe);function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}function _x(){return _x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_x.apply(this,arguments)}function lIe(t,e){return hIe(t)||dIe(t,e)||uIe(t,e)||cIe()}function cIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uIe(t,e){if(t){if(typeof t=="string")return c3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c3(t,e)}}function c3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dIe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function hIe(t){if(Array.isArray(t))return t}function u3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function d3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u3(Object(r),!0).forEach(function(n){fIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fIe(t,e,r){return e=mIe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mIe(t){var e=pIe(t,"string");return $p(e)=="symbol"?e:e+""}function pIe(t,e){if($p(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h3=function(e,r,n,i,s){var a=n-i,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-a/2,",").concat(r+s),l+="L ".concat(e+n-a/2-i,",").concat(r+s),l+="L ".concat(e,",").concat(r," Z"),l},gIe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yIe=function(e){var r=d3(d3({},gIe),e),n=E.useRef(),i=E.useState(-1),s=lIe(i,2),a=s[0],l=s[1];E.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,h=r.upperWidth,d=r.lowerWidth,f=r.height,m=r.className,g=r.animationEasing,v=r.animationDuration,y=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||d!==+d||f!==+f||h===0&&d===0||f===0)return null;var b=He("recharts-trapezoid",m);return x?D.createElement(Li,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:h,lowerWidth:d,height:f,x:c,y:u},duration:v,animationEasing:g,isActive:x},function(w){var k=w.upperWidth,S=w.lowerWidth,P=w.height,N=w.x,_=w.y;return D.createElement(Li,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:g},D.createElement("path",_x({},Me(r,!0),{className:b,d:h3(N,_,k,S,P),ref:n})))}):D.createElement("g",null,D.createElement("path",_x({},Me(r,!0),{className:b,d:h3(c,u,h,d,f)})))},vIe=["option","shapeType","propTransformer","activeClassName","isActive"];function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}function xIe(t,e){if(t==null)return{};var r=bIe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bIe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function f3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f3(Object(r),!0).forEach(function(n){wIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wIe(t,e,r){return e=_Ie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Ie(t){var e=SIe(t,"string");return Lp(e)=="symbol"?e:e+""}function SIe(t,e){if(Lp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kIe(t,e){return Sx(Sx({},e),t)}function NIe(t,e){return t==="symbols"}function m3(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return D.createElement(kA,r);case"trapezoid":return D.createElement(yIe,r);case"sector":return D.createElement(Qz,r);case"symbols":if(NIe(e))return D.createElement(zC,r);break;default:return null}}function jIe(t){return E.isValidElement(t)?t.props:t}function pW(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?kIe:n,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,l=t.isActive,c=xIe(t,vIe),u;if(E.isValidElement(e))u=E.cloneElement(e,Sx(Sx({},c),jIe(e)));else if(Ve(e))u=e(c);else if(tIe(e)&&!oIe(e)){var h=i(e,c);u=D.createElement(m3,{shapeType:r,elementProps:h})}else{var d=c;u=D.createElement(m3,{shapeType:r,elementProps:d})}return l?D.createElement(tt,{className:a},u):u}function Bw(t,e){return e!=null&&"trapezoids"in t.props}function Uw(t,e){return e!=null&&"sectors"in t.props}function Fp(t,e){return e!=null&&"points"in t.props}function EIe(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,s=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&s}function CIe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function AIe(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function TIe(t,e){var r;return Bw(t,e)?r=EIe:Uw(t,e)?r=CIe:Fp(t,e)&&(r=AIe),r}function PIe(t,e){var r;return Bw(t,e)?r="trapezoids":Uw(t,e)?r="sectors":Fp(t,e)&&(r="points"),r}function IIe(t,e){if(Bw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Uw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Fp(t,e)?e.payload:{}}function OIe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=PIe(r,e),s=IIe(r,e),a=n.filter(function(c,u){var h=gl(s,c),d=r.props[i].filter(function(g){var v=TIe(r,e);return v(g,e)}),f=r.props[i].indexOf(d[d.length-1]),m=u===f;return h&&m}),l=n.indexOf(a[a.length-1]);return l}var Sy;function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pu.apply(this,arguments)}function p3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Rt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p3(Object(r),!0).forEach(function(n){ji(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yW(n.key),n)}}function MIe(t,e,r){return e&&g3(t.prototype,e),r&&g3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function DIe(t,e,r){return e=kx(e),$Ie(t,gW()?Reflect.construct(e,r||[],kx(t).constructor):e.apply(t,r))}function $Ie(t,e){if(e&&(Qd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LIe(t)}function LIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gW=function(){return!!t})()}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kx(t)}function FIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZN(t,e)}function ZN(t,e){return ZN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ZN(t,e)}function ji(t,e,r){return e=yW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yW(t){var e=VIe(t,"string");return Qd(e)=="symbol"?e:e+""}function VIe(t,e){if(Qd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Za=function(t){function e(r){var n;return RIe(this,e),n=DIe(this,e,[r]),ji(n,"pieRef",null),ji(n,"sectorRefs",[]),ji(n,"id",qc("recharts-pie-")),ji(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ve(i)&&i()}),ji(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ve(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return FIe(e,t),MIe(e,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,h=Me(this.props,!1),d=Me(a,!1),f=Me(l,!1),m=a&&a.offsetRadius||20,g=n.map(function(v,y){var x=(v.startAngle+v.endAngle)/2,b=xt(v.cx,v.cy,v.outerRadius+m,x),w=Rt(Rt(Rt(Rt({},h),v),{},{stroke:"none"},d),{},{index:y,textAnchor:e.getTextAnchor(b.x,v.cx)},b),k=Rt(Rt(Rt(Rt({},h),v),{},{fill:"none",stroke:v.fill},f),{},{index:y,points:[xt(v.cx,v.cy,v.outerRadius,x),b]}),S=c;return Ge(c)&&Ge(u)?S="value":Ge(c)&&(S=u),D.createElement(tt,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(y)},l&&e.renderLabelLineItem(l,k,"line"),e.renderLabelItem(a,w,tr(v,S)))});return D.createElement(tt,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var i=this,s=this.props,a=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return n.map(function(u,h){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var d=i.isActiveIndex(h),f=c&&i.hasActiveIndex()?c:null,m=d?a:f,g=Rt(Rt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return D.createElement(tt,Pu({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Tc(i.props,u,h),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(h)}),D.createElement(pW,Pu({option:m,isActive:d,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,s=i.sectors,a=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,h=i.animationId,d=this.state,f=d.prevSectors,m=d.prevIsAnimationActive;return D.createElement(Li,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var v=g.t,y=[],x=s&&s[0],b=x.startAngle;return s.forEach(function(w,k){var S=f&&f[k],P=k>0?pi(w,"paddingAngle",0):0;if(S){var N=er(S.endAngle-S.startAngle,w.endAngle-w.startAngle),_=Rt(Rt({},w),{},{startAngle:b+P,endAngle:b+N(v)+P});y.push(_),b=_.endAngle}else{var T=w.endAngle,j=w.startAngle,C=er(0,T-j),I=C(v),R=Rt(Rt({},w),{},{startAngle:b+P,endAngle:b+I+P});y.push(R),b=R.endAngle}}),D.createElement(tt,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,s=n.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!gl(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,s=i.hide,a=i.sectors,l=i.className,c=i.label,u=i.cx,h=i.cy,d=i.innerRadius,f=i.outerRadius,m=i.isAnimationActive,g=this.state.isAnimationFinished;if(s||!a||!a.length||!ye(u)||!ye(h)||!ye(d)||!ye(f))return null;var v=He("recharts-pie",l);return D.createElement(tt,{tabIndex:this.props.rootTabIndex,className:v,ref:function(x){n.pieRef=x}},this.renderSectors(),c&&this.renderLabels(a),Lr.renderCallByParent(this.props,null,!1),(!m||g)&&hs.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,s){if(D.isValidElement(n))return D.cloneElement(n,i);if(Ve(n))return n(i);var a=He("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return D.createElement(fc,Pu({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(n,i,s){if(D.isValidElement(n))return D.cloneElement(n,i);var a=s;if(Ve(n)&&(a=n(i),D.isValidElement(a)))return a;var l=He("recharts-pie-label-text",typeof n!="boolean"&&!Ve(n)?n.className:"");return D.createElement(Ic,Pu({},i,{alignmentBaseline:"middle",className:l}),a)}}])}(E.PureComponent);Sy=Za;ji(Za,"displayName","Pie");ji(Za,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ii.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ji(Za,"parseDeltaAngle",function(t,e){var r=En(e-t),n=Math.min(Math.abs(e-t),360);return r*n});ji(Za,"getRealPieData",function(t){var e=t.data,r=t.children,n=Me(t,!1),i=gi(r,Cw);return e&&e.length?e.map(function(s,a){return Rt(Rt(Rt({payload:s},n),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return Rt(Rt({},n),s.props)}):[]});ji(Za,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,i=e.width,s=e.height,a=Wz(i,s),l=n+Cn(t.cx,i,i/2),c=r+Cn(t.cy,s,s/2),u=Cn(t.innerRadius,a,0),h=Cn(t.outerRadius,a,a*.8),d=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:d}});ji(Za,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?Rt(Rt({},e.type.defaultProps),e.props):e.props,i=Sy.getRealPieData(n);if(!i||!i.length)return null;var s=n.cornerRadius,a=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,h=n.nameKey,d=n.valueKey,f=n.tooltipType,m=Math.abs(n.minAngle),g=Sy.parseCoordinateOfPie(n,r),v=Sy.parseDeltaAngle(a,l),y=Math.abs(v),x=u;Ge(u)&&Ge(d)?(ds(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):Ge(u)&&(ds(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=d);var b=i.filter(function(_){return tr(_,x,0)!==0}).length,w=(y>=360?b:b-1)*c,k=y-b*m-w,S=i.reduce(function(_,T){var j=tr(T,x,0);return _+(ye(j)?j:0)},0),P;if(S>0){var N;P=i.map(function(_,T){var j=tr(_,x,0),C=tr(_,h,T),I=(ye(j)?j:0)/S,R;T?R=N.endAngle+En(v)*c*(j!==0?1:0):R=a;var $=R+En(v)*((j!==0?m:0)+I*k),z=(R+$)/2,W=(g.innerRadius+g.outerRadius)/2,M=[{name:C,value:j,payload:_,dataKey:x,type:f}],F=xt(g.cx,g.cy,W,z);return N=Rt(Rt(Rt({percent:I,cornerRadius:s,name:C,tooltipPayload:M,midAngle:z,middleRadius:W,tooltipPosition:F},_),g),{},{value:tr(_,x),startAngle:R,endAngle:$,payload:_,paddingAngle:En(v)*c}),N})}return Rt(Rt({},g),{},{sectors:P,data:i})});function BIe(t){return t&&t.length?t[0]:void 0}var UIe=BIe,zIe=UIe;const WIe=bt(zIe);var HIe=["key"];function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function GIe(t,e){if(t==null)return{};var r=qIe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qIe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Nx(){return Nx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nx.apply(this,arguments)}function y3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(r),!0).forEach(function(n){ca(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xW(n.key),n)}}function YIe(t,e,r){return e&&v3(t.prototype,e),r&&v3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function QIe(t,e,r){return e=jx(e),XIe(t,vW()?Reflect.construct(e,r||[],jx(t).constructor):e.apply(t,r))}function XIe(t,e){if(e&&(Xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JIe(t)}function JIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vW=function(){return!!t})()}function jx(t){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jx(t)}function ZIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ej(t,e)}function ej(t,e){return ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ej(t,e)}function ca(t,e,r){return e=xW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xW(t){var e=eOe(t,"string");return Xd(e)=="symbol"?e:e+""}function eOe(t,e){if(Xd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pg=function(t){function e(){var r;KIe(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=QIe(this,e,[].concat(i)),ca(r,"state",{isAnimationFinished:!1}),ca(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ve(a)&&a()}),ca(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ve(a)&&a()}),ca(r,"handleMouseEnter",function(a){var l=r.props.onMouseEnter;l&&l(r.props,a)}),ca(r,"handleMouseLeave",function(a){var l=r.props.onMouseLeave;l&&l(r.props,a)}),r}return ZIe(e,t),YIe(e,[{key:"renderDots",value:function(n){var i=this.props,s=i.dot,a=i.dataKey,l=Me(this.props,!1),c=Me(s,!0),u=n.map(function(h,d){var f=Sn(Sn(Sn({key:"dot-".concat(d),r:3},l),c),{},{dataKey:a,cx:h.x,cy:h.y,index:d,payload:h});return e.renderDotItem(s,f)});return D.createElement(tt,{className:"recharts-radar-dots"},u)}},{key:"renderPolygonStatically",value:function(n){var i=this.props,s=i.shape,a=i.dot,l=i.isRange,c=i.baseLinePoints,u=i.connectNulls,h;return D.isValidElement(s)?h=D.cloneElement(s,Sn(Sn({},this.props),{},{points:n})):Ve(s)?h=s(Sn(Sn({},this.props),{},{points:n})):h=D.createElement(lW,Nx({},Me(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:l?c:null,connectNulls:u})),D.createElement(tt,{className:"recharts-radar-polygon"},h,a?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,i=this.props,s=i.points,a=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,h=i.animationId,d=this.state.prevPoints;return D.createElement(Li,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"radar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var m=f.t,g=d&&d.length/s.length,v=s.map(function(y,x){var b=d&&d[Math.floor(x*g)];if(b){var w=er(b.x,y.x),k=er(b.y,y.y);return Sn(Sn({},y),{},{x:w(m),y:k(m)})}var S=er(y.cx,y.x),P=er(y.cy,y.y);return Sn(Sn({},y),{},{x:S(m),y:P(m)})});return n.renderPolygonStatically(v)})}},{key:"renderPolygon",value:function(){var n=this.props,i=n.points,s=n.isAnimationActive,a=n.isRange,l=this.state.prevPoints;return s&&i&&i.length&&!a&&(!l||!gl(l,i))?this.renderPolygonWithAnimation():this.renderPolygonStatically(i)}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.className,a=n.points,l=n.isAnimationActive;if(i||!a||!a.length)return null;var c=this.state.isAnimationFinished,u=He("recharts-radar",s);return D.createElement(tt,{className:u},this.renderPolygon(),(!l||c)&&hs.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,i){var s;if(D.isValidElement(n))s=D.cloneElement(n,i);else if(Ve(n))s=n(i);else{var a=i.key,l=GIe(i,HIe);s=D.createElement(Hh,Nx({},l,{key:a,className:He("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return s}}])}(E.PureComponent);ca(Pg,"displayName","Radar");ca(Pg,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ii.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ca(Pg,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,i=t.dataKey,s=t.bandSize,a=r.cx,l=r.cy,c=!1,u=[],h=r.type!=="number"?s??0:0;n.forEach(function(f,m){var g=tr(f,r.dataKey,m),v=tr(f,i),y=r.scale(g)+h,x=Array.isArray(v)?Kz(v):v,b=Ge(x)?void 0:e.scale(x);Array.isArray(v)&&v.length>=2&&(c=!0),u.push(Sn(Sn({},xt(a,l,b,y)),{},{name:g,value:v,cx:a,cy:l,radius:b,angle:y,payload:f}))});var d=[];return c&&u.forEach(function(f){if(Array.isArray(f.value)){var m=WIe(f.value),g=Ge(m)?void 0:e.scale(m);d.push(Sn(Sn({},f),{},{radius:g},xt(a,l,g,f.angle)))}else d.push(f)}),{points:u,isRange:c,baseLinePoints:d}});var tOe=Math.ceil,rOe=Math.max;function nOe(t,e,r,n){for(var i=-1,s=rOe(tOe((e-t)/(r||1)),0),a=Array(s);s--;)a[n?s:++i]=t,t+=r;return a}var iOe=nOe,sOe=PU,x3=1/0,aOe=17976931348623157e292;function oOe(t){if(!t)return t===0?t:0;if(t=sOe(t),t===x3||t===-x3){var e=t<0?-1:1;return e*aOe}return t===t?t:0}var bW=oOe,lOe=iOe,cOe=Ew,U_=bW;function uOe(t){return function(e,r,n){return n&&typeof n!="number"&&cOe(e,r,n)&&(r=n=void 0),e=U_(e),r===void 0?(r=e,e=0):r=U_(r),n=n===void 0?e<r?1:-1:U_(n),lOe(e,r,n,t)}}var dOe=uOe,hOe=dOe,fOe=hOe(),mOe=fOe;const Ex=bt(mOe);function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}function b3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function w3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b3(Object(r),!0).forEach(function(n){wW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wW(t,e,r){return e=pOe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pOe(t){var e=gOe(t,"string");return Vp(e)=="symbol"?e:e+""}function gOe(t,e){if(Vp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yOe=["Webkit","Moz","O","ms"],vOe=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=yOe.reduce(function(s,a){return w3(w3({},s),{},wW({},a+n,r))},{});return i[e]=r,i};function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function Cx(){return Cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cx.apply(this,arguments)}function _3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function z_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_3(Object(r),!0).forEach(function(n){ni(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SW(n.key),n)}}function bOe(t,e,r){return e&&S3(t.prototype,e),r&&S3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wOe(t,e,r){return e=Ax(e),_Oe(t,_W()?Reflect.construct(e,r||[],Ax(t).constructor):e.apply(t,r))}function _Oe(t,e){if(e&&(Jd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SOe(t)}function SOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_W=function(){return!!t})()}function Ax(t){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ax(t)}function kOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tj(t,e)}function tj(t,e){return tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tj(t,e)}function ni(t,e,r){return e=SW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SW(t){var e=NOe(t,"string");return Jd(e)=="symbol"?e:e+""}function NOe(t,e){if(Jd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Jd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jOe=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,s=e.x,a=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=vm().domain(Ex(0,c)).range([s,s+a-l]),h=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:h}},k3=function(e){return e.changedTouches&&!!e.changedTouches.length},Zd=function(t){function e(r){var n;return xOe(this,e),n=wOe(this,e,[r]),ni(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),ni(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),ni(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,a=i.onDragEnd,l=i.startIndex;a==null||a({endIndex:s,startIndex:l})}),n.detachDragEndListener()}),ni(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ni(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ni(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ni(n,"handleSlideDragStart",function(i){var s=k3(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return kOe(e,t),bOe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,a=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,h=u.length-1,d=Math.min(i,s),f=Math.max(i,s),m=e.getIndexInRange(a,d),g=e.getIndexInRange(a,f);return{startIndex:m-m%c,endIndex:g===h?h:g-g%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,a=i.tickFormatter,l=i.dataKey,c=tr(s[n],l,n);return Ve(a)?a(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,a=i.startX,l=i.endX,c=this.props,u=c.x,h=c.width,d=c.travellerWidth,f=c.startIndex,m=c.endIndex,g=c.onChange,v=n.pageX-s;v>0?v=Math.min(v,u+h-d-l,u+h-d-a):v<0&&(v=Math.max(v,u-a,u-l));var y=this.getIndex({startX:a+v,endX:l+v});(y.startIndex!==f||y.endIndex!==m)&&g&&g(y),this.setState({startX:a+v,endX:l+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=k3(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[a],h=this.props,d=h.x,f=h.width,m=h.travellerWidth,g=h.onChange,v=h.gap,y=h.data,x={startX:this.state.startX,endX:this.state.endX},b=n.pageX-s;b>0?b=Math.min(b,d+f-m-u):b<0&&(b=Math.max(b,d-u)),x[a]=u+b;var w=this.getIndex(x),k=w.startIndex,S=w.endIndex,P=function(){var _=y.length-1;return a==="startX"&&(l>c?k%v===0:S%v===0)||l<c&&S===_||a==="endX"&&(l>c?S%v===0:k%v===0)||l>c&&S===_};this.setState(ni(ni({},a,u+b),"brushMoveStartX",n.pageX),function(){g&&P()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,a=this.state,l=a.scaleValues,c=a.startX,u=a.endX,h=this.state[i],d=l.indexOf(h);if(d!==-1){var f=d+n;if(!(f===-1||f>=l.length)){var m=l[f];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(ni({},i,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,l=n.height,c=n.fill,u=n.stroke;return D.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:a,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,l=n.height,c=n.data,u=n.children,h=n.padding,d=E.Children.only(u);return d?D.cloneElement(d,{x:i,y:s,width:a,height:l,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,a,l=this,c=this.props,u=c.y,h=c.travellerWidth,d=c.height,f=c.traveller,m=c.ariaLabel,g=c.data,v=c.startIndex,y=c.endIndex,x=Math.max(n,this.props.x),b=z_(z_({},Me(this.props,!1)),{},{x,y:u,width:h,height:d}),w=m||"Min value: ".concat((s=g[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=g[y])===null||a===void 0?void 0:a.name);return D.createElement(tt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,b))}},{key:"renderSlide",value:function(n,i){var s=this.props,a=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,h=Math.min(n,i)+u,d=Math.max(Math.abs(i-n)-u,0);return D.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:a,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,a=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,h=this.state,d=h.startX,f=h.endX,m=5,g={pointerEvents:"none",fill:u};return D.createElement(tt,{className:"recharts-brush-texts"},D.createElement(Ic,Cx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-m,y:a+l/2},g),this.getTextOfTick(i)),D.createElement(Ic,Cx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+c+m,y:a+l/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,a=n.children,l=n.x,c=n.y,u=n.width,h=n.height,d=n.alwaysShowText,f=this.state,m=f.startX,g=f.endX,v=f.isTextActive,y=f.isSlideMoving,x=f.isTravellerMoving,b=f.isTravellerFocused;if(!i||!i.length||!ye(l)||!ye(c)||!ye(u)||!ye(h)||u<=0||h<=0)return null;var w=He("recharts-brush",s),k=D.Children.count(a)===1,S=vOe("userSelect","none");return D.createElement(tt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),k&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||y||x||b||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,a=n.width,l=n.height,c=n.stroke,u=Math.floor(s+l/2)-1;return D.createElement(D.Fragment,null,D.createElement("rect",{x:i,y:s,width:a,height:l,fill:c,stroke:"none"}),D.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),D.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return D.isValidElement(n)?s=D.cloneElement(n,i):Ve(n)?s=n(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,a=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,h=n.startIndex,d=n.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return z_({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a},s&&s.length?jOe({data:s,width:a,x:l,travellerWidth:c,startIndex:h,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+a-c]);var f=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,a=0,l=s-1;l-a>1;){var c=Math.floor((a+l)/2);n[c]>i?l=c:a=c}return i>=n[l]?l:a}}])}(E.PureComponent);ni(Zd,"displayName","Brush");ni(Zd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var EOe=QC;function COe(t,e){var r;return EOe(t,function(n,i,s){return r=e(n,i,s),!r}),!!r}var AOe=COe,TOe=iU,POe=Xs,IOe=AOe,OOe=ei,ROe=Ew;function MOe(t,e,r){var n=OOe(t)?TOe:IOe;return r&&ROe(t,e,r)&&(e=void 0),n(t,POe(e))}var DOe=MOe;const $Oe=bt(DOe);var Vs=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},N3=jU;function LOe(t,e,r){e=="__proto__"&&N3?N3(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var FOe=LOe,VOe=FOe,BOe=kU,UOe=Xs;function zOe(t,e){var r={};return e=UOe(e),BOe(t,function(n,i,s){VOe(r,i,e(n,i,s))}),r}var WOe=zOe;const HOe=bt(WOe);function GOe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var qOe=GOe,KOe=QC;function YOe(t,e){var r=!0;return KOe(t,function(n,i,s){return r=!!e(n,i,s),r}),r}var QOe=YOe,XOe=qOe,JOe=QOe,ZOe=Xs,eRe=ei,tRe=Ew;function rRe(t,e,r){var n=eRe(t)?XOe:JOe;return r&&tRe(t,e,r)&&(e=void 0),n(t,ZOe(e))}var nRe=rRe;const kW=bt(nRe);var iRe=["x","y"];function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function rj(){return rj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rj.apply(this,arguments)}function j3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Of(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j3(Object(r),!0).forEach(function(n){sRe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sRe(t,e,r){return e=aRe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aRe(t){var e=oRe(t,"string");return Bp(e)=="symbol"?e:e+""}function oRe(t,e){if(Bp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lRe(t,e){if(t==null)return{};var r=cRe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cRe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function uRe(t,e){var r=t.x,n=t.y,i=lRe(t,iRe),s="".concat(r),a=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||i.height),h=parseInt(u,10),d="".concat(e.width||i.width),f=parseInt(d,10);return Of(Of(Of(Of(Of({},e),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:h,width:f,name:e.name,radius:e.radius})}function E3(t){return D.createElement(pW,rj({shapeType:"rectangle",propTransformer:uRe,activeClassName:"recharts-active-bar"},t))}var dRe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var s=typeof n=="number";return s?e(n,i):(s||Rc(),r)}},hRe=["value","background"],NW;function eh(t){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eh(t)}function fRe(t,e){if(t==null)return{};var r=mRe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mRe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Tx(){return Tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tx.apply(this,arguments)}function C3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C3(Object(r),!0).forEach(function(n){Mo(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EW(n.key),n)}}function gRe(t,e,r){return e&&A3(t.prototype,e),r&&A3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yRe(t,e,r){return e=Px(e),vRe(t,jW()?Reflect.construct(e,r||[],Px(t).constructor):e.apply(t,r))}function vRe(t,e){if(e&&(eh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xRe(t)}function xRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jW=function(){return!!t})()}function Px(t){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Px(t)}function bRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nj(t,e)}function nj(t,e){return nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nj(t,e)}function Mo(t,e,r){return e=EW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EW(t){var e=wRe(t,"string");return eh(e)=="symbol"?e:e+""}function wRe(t,e){if(eh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qc=function(t){function e(){var r;pRe(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=yRe(this,e,[].concat(i)),Mo(r,"state",{isAnimationFinished:!1}),Mo(r,"id",qc("recharts-bar-")),Mo(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),Mo(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return bRe(e,t),gRe(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,s=this.props,a=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,h=Me(this.props,!1);return n&&n.map(function(d,f){var m=f===c,g=m?u:a,v=mr(mr(mr({},h),d),{},{isActive:m,option:g,index:f,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return D.createElement(tt,Tx({className:"recharts-bar-rectangle"},Tc(i.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value)}),D.createElement(E3,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,s=i.data,a=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,h=i.animationEasing,d=i.animationId,f=this.state.prevData;return D.createElement(Li,{begin:c,duration:u,isActive:l,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,v=s.map(function(y,x){var b=f&&f[x];if(b){var w=er(b.x,y.x),k=er(b.y,y.y),S=er(b.width,y.width),P=er(b.height,y.height);return mr(mr({},y),{},{x:w(g),y:k(g),width:S(g),height:P(g)})}if(a==="horizontal"){var N=er(0,y.height),_=N(g);return mr(mr({},y),{},{y:y.y+y.height-_,height:_})}var T=er(0,y.width),j=T(g);return mr(mr({},y),{},{width:j})});return D.createElement(tt,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,s=n.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!gl(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,s=i.data,a=i.dataKey,l=i.activeIndex,c=Me(this.props.background,!1);return s.map(function(u,h){u.value;var d=u.background,f=fRe(u,hRe);if(!d)return null;var m=mr(mr(mr(mr(mr({},f),{},{fill:"#eee"},d),c),Tc(n.props,u,h)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:h,className:"recharts-bar-background-rectangle"});return D.createElement(E3,Tx({key:"background-bar-".concat(h),option:n.props.background,isActive:h===l},m))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,h=s.children,d=gi(h,Tg);if(!d)return null;var f=u==="vertical"?a[0].height/2:a[0].width/2,m=function(y,x){var b=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:b,errorVal:tr(y,x)}},g={clipPath:n?"url(#clipPath-".concat(i,")"):null};return D.createElement(tt,g,d.map(function(v){return D.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.data,a=n.className,l=n.xAxis,c=n.yAxis,u=n.left,h=n.top,d=n.width,f=n.height,m=n.isAnimationActive,g=n.background,v=n.id;if(i||!s||!s.length)return null;var y=this.state.isAnimationFinished,x=He("recharts-bar",a),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,k=b||w,S=Ge(v)?this.id:v;return D.createElement(tt,{className:x},b||w?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(S)},D.createElement("rect",{x:b?u:u-d/2,y:w?h:h-f/2,width:b?d:d*2,height:w?f:f*2}))):null,D.createElement(tt,{className:"recharts-bar-rectangles",clipPath:k?"url(#clipPath-".concat(S,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(k,S),(!m||y)&&hs.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(E.PureComponent);NW=Qc;Mo(Qc,"displayName","Bar");Mo(Qc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ii.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Mo(Qc,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,h=t.dataStartIndex,d=t.displayedData,f=t.offset,m=z2e(n,r);if(!m)return null;var g=e.layout,v=r.type.defaultProps,y=v!==void 0?mr(mr({},v),r.props):r.props,x=y.dataKey,b=y.children,w=y.minPointSize,k=g==="horizontal"?a:s,S=u?k.scale.domain():null,P=Q2e({numericAxis:k}),N=gi(b,Cw),_=d.map(function(T,j){var C,I,R,$,z,W;u?C=W2e(u[h+j],S):(C=tr(T,x),Array.isArray(C)||(C=[P,C]));var M=dRe(w,NW.defaultProps.minPointSize)(C[1],j);if(g==="horizontal"){var F,B=[a.scale(C[0]),a.scale(C[1])],J=B[0],U=B[1];I=pM({axis:s,ticks:l,bandSize:i,offset:m.offset,entry:T,index:j}),R=(F=U??J)!==null&&F!==void 0?F:void 0,$=m.size;var H=J-U;if(z=Number.isNaN(H)?0:H,W={x:I,y:a.y,width:$,height:a.height},Math.abs(M)>0&&Math.abs(z)<Math.abs(M)){var q=En(z||M)*(Math.abs(M)-Math.abs(z));R-=q,z+=q}}else{var oe=[s.scale(C[0]),s.scale(C[1])],ve=oe[0],se=oe[1];if(I=ve,R=pM({axis:a,ticks:c,bandSize:i,offset:m.offset,entry:T,index:j}),$=se-ve,z=m.size,W={x:s.x,y:R,width:s.width,height:z},Math.abs(M)>0&&Math.abs($)<Math.abs(M)){var V=En($||M)*(Math.abs(M)-Math.abs($));$+=V}}return mr(mr(mr({},T),{},{x:I,y:R,width:$,height:z,value:u?C:C[1],payload:T,background:W},N&&N[j]&&N[j].props),{},{tooltipPayload:[Uz(r,T)],tooltipPosition:{x:I+$/2,y:R+z/2}})});return mr({data:_,layout:g},f)});function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function _Re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CW(n.key),n)}}function SRe(t,e,r){return e&&T3(t.prototype,e),r&&T3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function P3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P3(Object(r),!0).forEach(function(n){zw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zw(t,e,r){return e=CW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CW(t){var e=kRe(t,"string");return Up(e)=="symbol"?e:e+""}function kRe(t,e){if(Up(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NA=function(e,r,n,i,s){var a=e.width,l=e.height,c=e.layout,u=e.children,h=Object.keys(r),d={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},f=!!oi(u,Qc);return h.reduce(function(m,g){var v=r[g],y=v.orientation,x=v.domain,b=v.padding,w=b===void 0?{}:b,k=v.mirror,S=v.reversed,P="".concat(y).concat(k?"Mirror":""),N,_,T,j,C;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var I=x[1]-x[0],R=1/0,$=v.categoricalDomain.sort();if($.forEach(function(oe,ve){ve>0&&(R=Math.min((oe||0)-($[ve-1]||0),R))}),Number.isFinite(R)){var z=R/I,W=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(N=z*W/2),v.padding==="no-gap"){var M=Cn(e.barCategoryGap,z*W),F=z*W/2;N=F-M-(F-M)/W*M}}}i==="xAxis"?_=[n.left+(w.left||0)+(N||0),n.left+n.width-(w.right||0)-(N||0)]:i==="yAxis"?_=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(N||0),n.top+n.height-(w.bottom||0)-(N||0)]:_=v.range,S&&(_=[_[1],_[0]]);var B=Lz(v,s,f),J=B.scale,U=B.realScaleType;J.domain(x).range(_),Fz(J);var H=Vz(J,Qi(Qi({},v),{},{realScaleType:U}));i==="xAxis"?(C=y==="top"&&!k||y==="bottom"&&k,T=n.left,j=d[P]-C*v.height):i==="yAxis"&&(C=y==="left"&&!k||y==="right"&&k,T=d[P]-C*v.width,j=n.top);var q=Qi(Qi(Qi({},v),H),{},{realScaleType:U,x:T,y:j,scale:J,width:i==="xAxis"?n.width:v.width,height:i==="yAxis"?n.height:v.height});return q.bandSize=fx(q,H),!v.hide&&i==="xAxis"?d[P]+=(C?-1:1)*q.height:v.hide||(d[P]+=(C?-1:1)*q.width),Qi(Qi({},m),{},zw({},g,q))},{})},AW=function(e,r){var n=e.x,i=e.y,s=r.x,a=r.y;return{x:Math.min(n,s),y:Math.min(i,a),width:Math.abs(s-n),height:Math.abs(a-i)}},NRe=function(e){var r=e.x1,n=e.y1,i=e.x2,s=e.y2;return AW({x:r,y:n},{x:i,y:s})},TW=function(){function t(e){_Re(this,t),this.scale=e}return SRe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();zw(TW,"EPS",1e-4);var jA=function(e){var r=Object.keys(e).reduce(function(n,i){return Qi(Qi({},n),{},zw({},i,TW.create(e[i])))},{});return Qi(Qi({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,l=s.position;return HOe(i,function(c,u){return r[u].apply(c,{bandAware:a,position:l})})},isInRange:function(i){return kW(i,function(s,a){return r[a].isInRange(s)})}})};function jRe(t){return(t%180+180)%180}var ERe=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=jRe(i),a=s*Math.PI/180,l=Math.atan(n/r),c=a>l&&a<Math.PI-l?n/Math.sin(a):r/Math.cos(a);return Math.abs(c)},CRe=Xs,ARe=Ng,TRe=Nw;function PRe(t){return function(e,r,n){var i=Object(e);if(!ARe(e)){var s=CRe(r);e=TRe(e),r=function(l){return s(i[l],l,i)}}var a=t(e,r,n);return a>-1?i[s?e[a]:a]:void 0}}var IRe=PRe,ORe=bW;function RRe(t){var e=ORe(t),r=e%1;return e===e?r?e-r:e:0}var MRe=RRe,DRe=vU,$Re=Xs,LRe=MRe,FRe=Math.max;function VRe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:LRe(r);return i<0&&(i=FRe(n+i,0)),DRe(t,$Re(e),i)}var BRe=VRe,URe=IRe,zRe=BRe,WRe=URe(zRe),HRe=WRe;const GRe=bt(HRe);var qRe=Ime(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),EA=E.createContext(void 0),CA=E.createContext(void 0),PW=E.createContext(void 0),IW=E.createContext({}),OW=E.createContext(void 0),RW=E.createContext(0),MW=E.createContext(0),I3=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,a=e.clipPathId,l=e.children,c=e.width,u=e.height,h=qRe(s);return D.createElement(EA.Provider,{value:n},D.createElement(CA.Provider,{value:i},D.createElement(IW.Provider,{value:s},D.createElement(PW.Provider,{value:h},D.createElement(OW.Provider,{value:a},D.createElement(RW.Provider,{value:u},D.createElement(MW.Provider,{value:c},l)))))))},KRe=function(){return E.useContext(OW)},DW=function(e){var r=E.useContext(EA);r==null&&Rc();var n=r[e];return n==null&&Rc(),n},YRe=function(){var e=E.useContext(EA);return ko(e)},QRe=function(){var e=E.useContext(CA),r=GRe(e,function(n){return kW(n.domain,Number.isFinite)});return r||ko(e)},$W=function(e){var r=E.useContext(CA);r==null&&Rc();var n=r[e];return n==null&&Rc(),n},XRe=function(){var e=E.useContext(PW);return e},JRe=function(){return E.useContext(IW)},AA=function(){return E.useContext(MW)},TA=function(){return E.useContext(RW)};function th(t){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(t)}function ZRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FW(n.key),n)}}function t4e(t,e,r){return e&&e4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function r4e(t,e,r){return e=Ix(e),n4e(t,LW()?Reflect.construct(e,r||[],Ix(t).constructor):e.apply(t,r))}function n4e(t,e){if(e&&(th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i4e(t)}function i4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LW=function(){return!!t})()}function Ix(t){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ix(t)}function s4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ij(t,e)}function ij(t,e){return ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ij(t,e)}function O3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function R3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O3(Object(r),!0).forEach(function(n){PA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PA(t,e,r){return e=FW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FW(t){var e=a4e(t,"string");return th(e)=="symbol"?e:e+""}function a4e(t,e){if(th(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o4e(t,e){return d4e(t)||u4e(t,e)||c4e(t,e)||l4e()}function l4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c4e(t,e){if(t){if(typeof t=="string")return M3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M3(t,e)}}function M3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function d4e(t){if(Array.isArray(t))return t}function sj(){return sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sj.apply(this,arguments)}var h4e=function(e,r){var n;return D.isValidElement(e)?n=D.cloneElement(e,r):Ve(e)?n=e(r):n=D.createElement("line",sj({},r,{className:"recharts-reference-line-line"})),n},f4e=function(e,r,n,i,s,a,l,c,u){var h=s.x,d=s.y,f=s.width,m=s.height;if(n){var g=u.y,v=e.y.apply(g,{position:a});if(Vs(u,"discard")&&!e.y.isInRange(v))return null;var y=[{x:h+f,y:v},{x:h,y:v}];return c==="left"?y.reverse():y}if(r){var x=u.x,b=e.x.apply(x,{position:a});if(Vs(u,"discard")&&!e.x.isInRange(b))return null;var w=[{x:b,y:d+m},{x:b,y:d}];return l==="top"?w.reverse():w}if(i){var k=u.segment,S=k.map(function(P){return e.apply(P,{position:a})});return Vs(u,"discard")&&$Oe(S,function(P){return!e.isInRange(P)})?null:S}return null};function m4e(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,l=t.className,c=t.alwaysShow,u=KRe(),h=DW(i),d=$W(s),f=XRe();if(!u||!f)return null;ds(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=jA({x:h.scale,y:d.scale}),g=Er(e),v=Er(r),y=n&&n.length===2,x=f4e(m,g,v,y,f,t.position,h.orientation,d.orientation,t);if(!x)return null;var b=o4e(x,2),w=b[0],k=w.x,S=w.y,P=b[1],N=P.x,_=P.y,T=Vs(t,"hidden")?"url(#".concat(u,")"):void 0,j=R3(R3({clipPath:T},Me(t,!0)),{},{x1:k,y1:S,x2:N,y2:_});return D.createElement(tt,{className:He("recharts-reference-line",l)},h4e(a,j),Lr.renderCallByParent(t,NRe({x1:k,y1:S,x2:N,y2:_})))}var IA=function(t){function e(){return ZRe(this,e),r4e(this,e,arguments)}return s4e(e,t),t4e(e,[{key:"render",value:function(){return D.createElement(m4e,this.props)}}])}(D.Component);PA(IA,"displayName","ReferenceLine");PA(IA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function aj(){return aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aj.apply(this,arguments)}function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function D3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D3(Object(r),!0).forEach(function(n){Ww(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BW(n.key),n)}}function y4e(t,e,r){return e&&g4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function v4e(t,e,r){return e=Ox(e),x4e(t,VW()?Reflect.construct(e,r||[],Ox(t).constructor):e.apply(t,r))}function x4e(t,e){if(e&&(rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b4e(t)}function b4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VW=function(){return!!t})()}function Ox(t){return Ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ox(t)}function w4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oj(t,e)}function oj(t,e){return oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oj(t,e)}function Ww(t,e,r){return e=BW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BW(t){var e=_4e(t,"string");return rh(e)=="symbol"?e:e+""}function _4e(t,e){if(rh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var S4e=function(e){var r=e.x,n=e.y,i=e.xAxis,s=e.yAxis,a=jA({x:i.scale,y:s.scale}),l=a.apply({x:r,y:n},{bandAware:!0});return Vs(e,"discard")&&!a.isInRange(l)?null:l},Hw=function(t){function e(){return p4e(this,e),v4e(this,e,arguments)}return w4e(e,t),y4e(e,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,a=n.r,l=n.alwaysShow,c=n.clipPathId,u=Er(i),h=Er(s);if(ds(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!h)return null;var d=S4e(this.props);if(!d)return null;var f=d.x,m=d.y,g=this.props,v=g.shape,y=g.className,x=Vs(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=$3($3({clipPath:x},Me(this.props,!0)),{},{cx:f,cy:m});return D.createElement(tt,{className:He("recharts-reference-dot",y)},e.renderDot(v,b),Lr.renderCallByParent(this.props,{x:f-a,y:m-a,width:2*a,height:2*a}))}}])}(D.Component);Ww(Hw,"displayName","ReferenceDot");Ww(Hw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ww(Hw,"renderDot",function(t,e){var r;return D.isValidElement(t)?r=D.cloneElement(t,e):Ve(t)?r=t(e):r=D.createElement(Hh,aj({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function lj(){return lj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lj.apply(this,arguments)}function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}function L3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function F3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L3(Object(r),!0).forEach(function(n){Gw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zW(n.key),n)}}function j4e(t,e,r){return e&&N4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function E4e(t,e,r){return e=Rx(e),C4e(t,UW()?Reflect.construct(e,r||[],Rx(t).constructor):e.apply(t,r))}function C4e(t,e){if(e&&(nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A4e(t)}function A4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UW=function(){return!!t})()}function Rx(t){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rx(t)}function T4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cj(t,e)}function cj(t,e){return cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cj(t,e)}function Gw(t,e,r){return e=zW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zW(t){var e=P4e(t,"string");return nh(e)=="symbol"?e:e+""}function P4e(t,e){if(nh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I4e=function(e,r,n,i,s){var a=s.x1,l=s.x2,c=s.y1,u=s.y2,h=s.xAxis,d=s.yAxis;if(!h||!d)return null;var f=jA({x:h.scale,y:d.scale}),m={x:e?f.x.apply(a,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(c,{position:"start"}):f.y.rangeMin},g={x:r?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Vs(s,"discard")&&(!f.isInRange(m)||!f.isInRange(g))?null:AW(m,g)},qw=function(t){function e(){return k4e(this,e),E4e(this,e,arguments)}return T4e(e,t),j4e(e,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,a=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,h=n.clipPathId;ds(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Er(i),f=Er(s),m=Er(a),g=Er(l),v=this.props.shape;if(!d&&!f&&!m&&!g&&!v)return null;var y=I4e(d,f,m,g,this.props);if(!y&&!v)return null;var x=Vs(this.props,"hidden")?"url(#".concat(h,")"):void 0;return D.createElement(tt,{className:He("recharts-reference-area",c)},e.renderRect(v,F3(F3({clipPath:x},Me(this.props,!0)),y)),Lr.renderCallByParent(this.props,y))}}])}(D.Component);Gw(qw,"displayName","ReferenceArea");Gw(qw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Gw(qw,"renderRect",function(t,e){var r;return D.isValidElement(t)?r=D.cloneElement(t,e):Ve(t)?r=t(e):r=D.createElement(kA,lj({},e,{className:"recharts-reference-area-rect"})),r});function WW(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function O4e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return ERe(n,r)}function R4e(t,e,r){var n=r==="width",i=t.x,s=t.y,a=t.width,l=t.height;return e===1?{start:n?i:s,end:n?i+a:s+l}:{start:n?i+a:s+l,end:n?i:s}}function Mx(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-i)<=0}function M4e(t,e){return WW(t,e+1)}function D4e(t,e,r,n,i){for(var s=(n||[]).slice(),a=e.start,l=e.end,c=0,u=1,h=a,d=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:WW(n,u)};var v=c,y,x=function(){return y===void 0&&(y=r(g,v)),y},b=g.coordinate,w=c===0||Mx(t,b,x,h,l);w||(c=0,h=a,u+=1),w&&(h=b+t*(x()/2+i),c+=u)},f;u<=s.length;)if(f=d(),f)return f.v;return[]}function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(t)}function V3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function on(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V3(Object(r),!0).forEach(function(n){$4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $4e(t,e,r){return e=L4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L4e(t){var e=F4e(t,"string");return zp(e)=="symbol"?e:e+""}function F4e(t,e){if(zp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V4e(t,e,r,n,i){for(var s=(n||[]).slice(),a=s.length,l=e.start,c=e.end,u=function(f){var m=s[f],g,v=function(){return g===void 0&&(g=r(m,f)),g};if(f===a-1){var y=t*(m.coordinate+t*v()/2-c);s[f]=m=on(on({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate})}else s[f]=m=on(on({},m),{},{tickCoord:m.coordinate});var x=Mx(t,m.tickCoord,v,l,c);x&&(c=m.tickCoord-t*(v()/2+i),s[f]=on(on({},m),{},{isShow:!0}))},h=a-1;h>=0;h--)u(h);return s}function B4e(t,e,r,n,i,s){var a=(n||[]).slice(),l=a.length,c=e.start,u=e.end;if(s){var h=n[l-1],d=r(h,l-1),f=t*(h.coordinate+t*d/2-u);a[l-1]=h=on(on({},h),{},{tickCoord:f>0?h.coordinate-f*t:h.coordinate});var m=Mx(t,h.tickCoord,function(){return d},c,u);m&&(u=h.tickCoord-t*(d/2+i),a[l-1]=on(on({},h),{},{isShow:!0}))}for(var g=s?l-1:l,v=function(b){var w=a[b],k,S=function(){return k===void 0&&(k=r(w,b)),k};if(b===0){var P=t*(w.coordinate-t*S()/2-c);a[b]=w=on(on({},w),{},{tickCoord:P<0?w.coordinate-P*t:w.coordinate})}else a[b]=w=on(on({},w),{},{tickCoord:w.coordinate});var N=Mx(t,w.tickCoord,S,c,u);N&&(c=w.tickCoord+t*(S()/2+i),a[b]=on(on({},w),{},{isShow:!0}))},y=0;y<g;y++)v(y);return a}function OA(t,e,r){var n=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,h=t.unit,d=t.angle;if(!i||!i.length||!n)return[];if(ye(c)||Ii.isSsr)return M4e(i,typeof c=="number"&&ye(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",g=h&&m==="width"?ym(h,{fontSize:e,letterSpacing:r}):{width:0,height:0},v=function(w,k){var S=Ve(u)?u(w.value,k):w.value;return m==="width"?O4e(ym(S,{fontSize:e,letterSpacing:r}),g,d):ym(S,{fontSize:e,letterSpacing:r})[m]},y=i.length>=2?En(i[1].coordinate-i[0].coordinate):1,x=R4e(s,y,m);return c==="equidistantPreserveStart"?D4e(y,x,v,i,a):(c==="preserveStart"||c==="preserveStartEnd"?f=B4e(y,x,v,i,a,c==="preserveStartEnd"):f=V4e(y,x,v,i,a),f.filter(function(b){return b.isShow}))}var U4e=["viewBox"],z4e=["viewBox"],W4e=["ticks"];function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function Iu(){return Iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Iu.apply(this,arguments)}function B3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B3(Object(r),!0).forEach(function(n){RA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function W_(t,e){if(t==null)return{};var r=H4e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function H4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function G4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GW(n.key),n)}}function q4e(t,e,r){return e&&U3(t.prototype,e),r&&U3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function K4e(t,e,r){return e=Dx(e),Y4e(t,HW()?Reflect.construct(e,r||[],Dx(t).constructor):e.apply(t,r))}function Y4e(t,e){if(e&&(ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q4e(t)}function Q4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HW=function(){return!!t})()}function Dx(t){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dx(t)}function X4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uj(t,e)}function uj(t,e){return uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},uj(t,e)}function RA(t,e,r){return e=GW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GW(t){var e=J4e(t,"string");return ih(e)=="symbol"?e:e+""}function J4e(t,e){if(ih(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kh=function(t){function e(r){var n;return G4e(this,e),n=K4e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return X4e(e,t),q4e(e,[{key:"shouldComponentUpdate",value:function(n,i){var s=n.viewBox,a=W_(n,U4e),l=this.props,c=l.viewBox,u=W_(l,z4e);return!Ku(s,c)||!Ku(a,u)||!Ku(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.x,a=i.y,l=i.width,c=i.height,u=i.orientation,h=i.tickSize,d=i.mirror,f=i.tickMargin,m,g,v,y,x,b,w=d?-1:1,k=n.tickSize||h,S=ye(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=g=n.coordinate,y=a+ +!d*c,v=y-w*k,b=v-w*f,x=S;break;case"left":v=y=n.coordinate,g=s+ +!d*l,m=g-w*k,x=m-w*f,b=S;break;case"right":v=y=n.coordinate,g=s+ +d*l,m=g+w*k,x=m+w*f,b=S;break;default:m=g=n.coordinate,y=a+ +d*c,v=y+w*k,b=v+w*f,x=S;break}return{line:{x1:m,y1:v,x2:g,y2:y},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,s=n.y,a=n.width,l=n.height,c=n.orientation,u=n.mirror,h=n.axisLine,d=wn(wn(wn({},Me(this.props,!1)),Me(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);d=wn(wn({},d),{},{x1:i,y1:s+f*l,x2:i+a,y2:s+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);d=wn(wn({},d),{},{x1:i+m*a,y1:s,x2:i+m*a,y2:s+l})}return D.createElement("line",Iu({},d,{className:He("recharts-cartesian-axis-line",pi(h,"className"))}))}},{key:"renderTicks",value:function(n,i,s){var a=this,l=this.props,c=l.tickLine,u=l.stroke,h=l.tick,d=l.tickFormatter,f=l.unit,m=OA(wn(wn({},this.props),{},{ticks:n}),i,s),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=Me(this.props,!1),x=Me(h,!1),b=wn(wn({},y),{},{fill:"none"},Me(c,!1)),w=m.map(function(k,S){var P=a.getTickLineCoord(k),N=P.line,_=P.tick,T=wn(wn(wn(wn({textAnchor:g,verticalAnchor:v},y),{},{stroke:"none",fill:u},x),_),{},{index:S,payload:k,visibleTicksCount:m.length,tickFormatter:d});return D.createElement(tt,Iu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},Tc(a.props,k,S)),c&&D.createElement("line",Iu({},b,N,{className:He("recharts-cartesian-axis-tick-line",pi(c,"className"))})),h&&e.renderTickItem(h,T,"".concat(Ve(d)?d(k.value,S):k.value).concat(f||"")))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,i=this.props,s=i.axisLine,a=i.width,l=i.height,c=i.ticksGenerator,u=i.className,h=i.hide;if(h)return null;var d=this.props,f=d.ticks,m=W_(d,W4e),g=f;return Ve(c)&&(g=f&&f.length>0?c(this.props):c(m)),a<=0||l<=0||!g||!g.length?null:D.createElement(tt,{className:He("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Lr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,s){var a;return D.isValidElement(n)?a=D.cloneElement(n,i):Ve(n)?a=n(i):a=D.createElement(Ic,Iu({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(E.Component);RA(Kh,"displayName","CartesianAxis");RA(Kh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Z4e=["x1","y1","x2","y2","key"],e5e=["offset"];function Mc(t){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(t)}function z3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z3(Object(r),!0).forEach(function(n){t5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t5e(t,e,r){return e=r5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r5e(t){var e=n5e(t,"string");return Mc(e)=="symbol"?e:e+""}function n5e(t,e){if(Mc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rc.apply(this,arguments)}function W3(t,e){if(t==null)return{};var r=i5e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function i5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var s5e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,s=e.y,a=e.width,l=e.height,c=e.ry;return D.createElement("rect",{x:i,y:s,ry:c,width:a,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function qW(t,e){var r;if(D.isValidElement(t))r=D.cloneElement(t,e);else if(Ve(t))r=t(e);else{var n=e.x1,i=e.y1,s=e.x2,a=e.y2,l=e.key,c=W3(e,Z4e),u=Me(c,!1);u.offset;var h=W3(u,e5e);r=D.createElement("line",rc({},h,{x1:n,y1:i,x2:s,y2:a,fill:"none",key:l}))}return r}function a5e(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(l,c){var u=hn(hn({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return qW(i,u)});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function o5e(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(l,c){var u=hn(hn({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return qW(i,u)});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function l5e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,s=t.width,a=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var h=l.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==h[0]&&h.unshift(0);var d=h.map(function(f,m){var g=!h[m+1],v=g?i+a-f:h[m+1]-f;if(v<=0)return null;var y=m%e.length;return D.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:v,width:s,stroke:"none",fill:e[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function c5e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var h=u.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==h[0]&&h.unshift(0);var d=h.map(function(f,m){var g=!h[m+1],v=g?s+l-f:h[m+1]-f;if(v<=0)return null;var y=m%n.length;return D.createElement("rect",{key:"react-".concat(m),x:f,y:a,width:v,height:c,stroke:"none",fill:n[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var u5e=function(e,r){var n=e.xAxis,i=e.width,s=e.height,a=e.offset;return $z(OA(hn(hn(hn({},Kh.defaultProps),n),{},{ticks:xa(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,r)},d5e=function(e,r){var n=e.yAxis,i=e.width,s=e.height,a=e.offset;return $z(OA(hn(hn(hn({},Kh.defaultProps),n),{},{ticks:xa(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,r)},lu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ig(t){var e,r,n,i,s,a,l=AA(),c=TA(),u=JRe(),h=hn(hn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:lu.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:lu.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:lu.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:lu.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:lu.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:lu.verticalFill,x:ye(t.x)?t.x:u.left,y:ye(t.y)?t.y:u.top,width:ye(t.width)?t.width:u.width,height:ye(t.height)?t.height:u.height}),d=h.x,f=h.y,m=h.width,g=h.height,v=h.syncWithTicks,y=h.horizontalValues,x=h.verticalValues,b=YRe(),w=QRe();if(!ye(m)||m<=0||!ye(g)||g<=0||!ye(d)||d!==+d||!ye(f)||f!==+f)return null;var k=h.verticalCoordinatesGenerator||u5e,S=h.horizontalCoordinatesGenerator||d5e,P=h.horizontalPoints,N=h.verticalPoints;if((!P||!P.length)&&Ve(S)){var _=y&&y.length,T=S({yAxis:w?hn(hn({},w),{},{ticks:_?y:w.ticks}):void 0,width:l,height:c,offset:u},_?!0:v);ds(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Mc(T),"]")),Array.isArray(T)&&(P=T)}if((!N||!N.length)&&Ve(k)){var j=x&&x.length,C=k({xAxis:b?hn(hn({},b),{},{ticks:j?x:b.ticks}):void 0,width:l,height:c,offset:u},j?!0:v);ds(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Mc(C),"]")),Array.isArray(C)&&(N=C)}return D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(s5e,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),D.createElement(a5e,rc({},h,{offset:u,horizontalPoints:P,xAxis:b,yAxis:w})),D.createElement(o5e,rc({},h,{offset:u,verticalPoints:N,xAxis:b,yAxis:w})),D.createElement(l5e,rc({},h,{horizontalPoints:P})),D.createElement(c5e,rc({},h,{verticalPoints:N})))}Ig.displayName="CartesianGrid";var h5e=["type","layout","connectNulls","ref"],f5e=["key"];function sh(t){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(t)}function H3(t,e){if(t==null)return{};var r=m5e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function m5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Sm(){return Sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sm.apply(this,arguments)}function G3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ri(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G3(Object(r),!0).forEach(function(n){Xi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cu(t){return v5e(t)||y5e(t)||g5e(t)||p5e()}function p5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g5e(t,e){if(t){if(typeof t=="string")return dj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dj(t,e)}}function y5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v5e(t){if(Array.isArray(t))return dj(t)}function dj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YW(n.key),n)}}function b5e(t,e,r){return e&&q3(t.prototype,e),r&&q3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function w5e(t,e,r){return e=$x(e),_5e(t,KW()?Reflect.construct(e,r||[],$x(t).constructor):e.apply(t,r))}function _5e(t,e){if(e&&(sh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S5e(t)}function S5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KW=function(){return!!t})()}function $x(t){return $x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$x(t)}function k5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hj(t,e)}function hj(t,e){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hj(t,e)}function Xi(t,e,r){return e=YW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YW(t){var e=N5e(t,"string");return sh(e)=="symbol"?e:e+""}function N5e(t,e){if(sh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ei=function(t){function e(){var r;x5e(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=w5e(this,e,[].concat(i)),Xi(r,"state",{isAnimationFinished:!0,totalLength:0}),Xi(r,"generateSimpleStrokeDasharray",function(a,l){return"".concat(l,"px ").concat(a-l,"px")}),Xi(r,"getStrokeDasharray",function(a,l,c){var u=c.reduce(function(x,b){return x+b});if(!u)return r.generateSimpleStrokeDasharray(l,a);for(var h=Math.floor(a/u),d=a%u,f=l-a,m=[],g=0,v=0;g<c.length;v+=c[g],++g)if(v+c[g]>d){m=[].concat(cu(c.slice(0,g)),[d-v]);break}var y=m.length%2===0?[0,f]:[f];return[].concat(cu(e.repeat(c,h)),cu(m),y).map(function(x){return"".concat(x,"px")}).join(", ")}),Xi(r,"id",qc("recharts-line-")),Xi(r,"pathRef",function(a){r.mainCurve=a}),Xi(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Xi(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return k5e(e,t),b5e(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,h=s.children,d=gi(h,Tg);if(!d)return null;var f=function(v,y){return{x:v.x,y:v.y,value:v.value,errorVal:tr(v.payload,y)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return D.createElement(tt,m,d.map(function(g){return D.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(n,i,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,h=l.dataKey,d=Me(this.props,!1),f=Me(c,!0),m=u.map(function(v,y){var x=ri(ri(ri({key:"dot-".concat(y),r:3},d),f),{},{value:v.value,dataKey:h,cx:v.x,cy:v.y,index:y,payload:v.payload});return e.renderDotItem(c,x)}),g={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return D.createElement(tt,Sm({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(n,i,s,a){var l=this.props,c=l.type,u=l.layout,h=l.connectNulls;l.ref;var d=H3(l,h5e),f=ri(ri(ri({},Me(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:n},a),{},{type:c,layout:u,connectNulls:h});return D.createElement(fc,Sm({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var s=this,a=this.props,l=a.points,c=a.strokeDasharray,u=a.isAnimationActive,h=a.animationBegin,d=a.animationDuration,f=a.animationEasing,m=a.animationId,g=a.animateNewValues,v=a.width,y=a.height,x=this.state,b=x.prevPoints,w=x.totalLength;return D.createElement(Li,{begin:h,duration:d,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var S=k.t;if(b){var P=b.length/l.length,N=l.map(function(I,R){var $=Math.floor(R*P);if(b[$]){var z=b[$],W=er(z.x,I.x),M=er(z.y,I.y);return ri(ri({},I),{},{x:W(S),y:M(S)})}if(g){var F=er(v*2,I.x),B=er(y/2,I.y);return ri(ri({},I),{},{x:F(S),y:B(S)})}return ri(ri({},I),{},{x:I.x,y:I.y})});return s.renderCurveStatically(N,n,i)}var _=er(0,w),T=_(S),j;if(c){var C="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});j=s.getStrokeDasharray(T,w,C)}else j=s.generateSimpleStrokeDasharray(w,T);return s.renderCurveStatically(l,n,i,{strokeDasharray:j})})}},{key:"renderCurve",value:function(n,i){var s=this.props,a=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,h=c.totalLength;return l&&a&&a.length&&(!u&&h>0||!gl(u,a))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(a,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,a=i.dot,l=i.points,c=i.className,u=i.xAxis,h=i.yAxis,d=i.top,f=i.left,m=i.width,g=i.height,v=i.isAnimationActive,y=i.id;if(s||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,w=He("recharts-line",c),k=u&&u.allowDataOverflow,S=h&&h.allowDataOverflow,P=k||S,N=Ge(y)?this.id:y,_=(n=Me(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},T=_.r,j=T===void 0?3:T,C=_.strokeWidth,I=C===void 0?2:C,R=AB(a)?a:{},$=R.clipDot,z=$===void 0?!0:$,W=j*2+I;return D.createElement(tt,{className:w},k||S?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(N)},D.createElement("rect",{x:k?f:f-m/2,y:S?d:d-g/2,width:k?m:m*2,height:S?g:g*2})),!z&&D.createElement("clipPath",{id:"clipPath-dots-".concat(N)},D.createElement("rect",{x:f-W/2,y:d-W/2,width:m+W,height:g+W}))):null,!b&&this.renderCurve(P,N),this.renderErrorBar(P,N),(b||a)&&this.renderDots(P,z,N),(!v||x)&&hs.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var s=n.length%2!==0?[].concat(cu(n),[0]):n,a=[],l=0;l<i;++l)a=[].concat(cu(a),cu(s));return a}},{key:"renderDotItem",value:function(n,i){var s;if(D.isValidElement(n))s=D.cloneElement(n,i);else if(Ve(n))s=n(i);else{var a=i.key,l=H3(i,f5e),c=He("recharts-line-dot",typeof n!="boolean"?n.className:"");s=D.createElement(Hh,Sm({key:a},l,{className:c}))}return s}}])}(E.PureComponent);Xi(Ei,"displayName","Line");Xi(Ei,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ii.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Xi(Ei,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,a=t.dataKey,l=t.bandSize,c=t.displayedData,u=t.offset,h=e.layout,d=c.map(function(f,m){var g=tr(f,a);return h==="horizontal"?{x:hx({axis:r,ticks:i,bandSize:l,entry:f,index:m}),y:Ge(g)?null:n.scale(g),value:g,payload:f}:{x:Ge(g)?null:r.scale(g),y:hx({axis:n,ticks:s,bandSize:l,entry:f,index:m}),value:g,payload:f}});return ri({points:d,layout:h},u)});var j5e=["layout","type","stroke","connectNulls","isRange","ref"],E5e=["key"],QW;function ah(t){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ah(t)}function XW(t,e){if(t==null)return{};var r=C5e(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nc.apply(this,arguments)}function K3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function po(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K3(Object(r),!0).forEach(function(n){Is(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZW(n.key),n)}}function T5e(t,e,r){return e&&Y3(t.prototype,e),r&&Y3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function P5e(t,e,r){return e=Lx(e),I5e(t,JW()?Reflect.construct(e,r||[],Lx(t).constructor):e.apply(t,r))}function I5e(t,e){if(e&&(ah(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O5e(t)}function O5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JW=function(){return!!t})()}function Lx(t){return Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lx(t)}function R5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fj(t,e)}function fj(t,e){return fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fj(t,e)}function Is(t,e,r){return e=ZW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZW(t){var e=M5e(t,"string");return ah(e)=="symbol"?e:e+""}function M5e(t,e){if(ah(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var za=function(t){function e(){var r;A5e(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=P5e(this,e,[].concat(i)),Is(r,"state",{isAnimationFinished:!0}),Is(r,"id",qc("recharts-area-")),Is(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ve(a)&&a()}),Is(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ve(a)&&a()}),r}return R5e(e,t),T5e(e,[{key:"renderDots",value:function(n,i,s){var a=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(a&&!l)return null;var c=this.props,u=c.dot,h=c.points,d=c.dataKey,f=Me(this.props,!1),m=Me(u,!0),g=h.map(function(y,x){var b=po(po(po({key:"dot-".concat(x),r:3},f),m),{},{index:x,cx:y.x,cy:y.y,dataKey:d,value:y.value,payload:y.payload,points:h});return e.renderDotItem(u,b)}),v={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return D.createElement(tt,nc({className:"recharts-area-dots"},v),g)}},{key:"renderHorizontalRect",value:function(n){var i=this.props,s=i.baseLine,a=i.points,l=i.strokeWidth,c=a[0].x,u=a[a.length-1].x,h=n*Math.abs(c-u),d=Ro(a.map(function(f){return f.y||0}));return ye(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Ro(s.map(function(f){return f.y||0})),d)),ye(d)?D.createElement("rect",{x:c<u?c:c-h,y:0,width:h,height:Math.floor(d+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var i=this.props,s=i.baseLine,a=i.points,l=i.strokeWidth,c=a[0].y,u=a[a.length-1].y,h=n*Math.abs(c-u),d=Ro(a.map(function(f){return f.x||0}));return ye(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Ro(s.map(function(f){return f.x||0})),d)),ye(d)?D.createElement("rect",{x:0,y:c<u?c:c-h,width:d+(l?parseInt("".concat(l),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(n){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,i,s,a){var l=this.props,c=l.layout,u=l.type,h=l.stroke,d=l.connectNulls,f=l.isRange;l.ref;var m=XW(l,j5e);return D.createElement(tt,{clipPath:s?"url(#clipPath-".concat(a,")"):null},D.createElement(fc,nc({},Me(m,!0),{points:n,connectNulls:d,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),h!=="none"&&D.createElement(fc,nc({},Me(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:n})),h!=="none"&&f&&D.createElement(fc,nc({},Me(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(n,i){var s=this,a=this.props,l=a.points,c=a.baseLine,u=a.isAnimationActive,h=a.animationBegin,d=a.animationDuration,f=a.animationEasing,m=a.animationId,g=this.state,v=g.prevPoints,y=g.prevBaseLine;return D.createElement(Li,{begin:h,duration:d,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t;if(v){var w=v.length/l.length,k=l.map(function(_,T){var j=Math.floor(T*w);if(v[j]){var C=v[j],I=er(C.x,_.x),R=er(C.y,_.y);return po(po({},_),{},{x:I(b),y:R(b)})}return _}),S;if(ye(c)&&typeof c=="number"){var P=er(y,c);S=P(b)}else if(Ge(c)||$h(c)){var N=er(y,0);S=N(b)}else S=c.map(function(_,T){var j=Math.floor(T*w);if(y[j]){var C=y[j],I=er(C.x,_.x),R=er(C.y,_.y);return po(po({},_),{},{x:I(b),y:R(b)})}return _});return s.renderAreaStatically(k,S,n,i)}return D.createElement(tt,null,D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(b))),D.createElement(tt,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,n,i)))})}},{key:"renderArea",value:function(n,i){var s=this.props,a=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,h=u.prevPoints,d=u.prevBaseLine,f=u.totalLength;return c&&a&&a.length&&(!h&&f>0||!gl(h,a)||!gl(d,l))?this.renderAreaWithAnimation(n,i):this.renderAreaStatically(a,l,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,a=i.dot,l=i.points,c=i.className,u=i.top,h=i.left,d=i.xAxis,f=i.yAxis,m=i.width,g=i.height,v=i.isAnimationActive,y=i.id;if(s||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,w=He("recharts-area",c),k=d&&d.allowDataOverflow,S=f&&f.allowDataOverflow,P=k||S,N=Ge(y)?this.id:y,_=(n=Me(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},T=_.r,j=T===void 0?3:T,C=_.strokeWidth,I=C===void 0?2:C,R=AB(a)?a:{},$=R.clipDot,z=$===void 0?!0:$,W=j*2+I;return D.createElement(tt,{className:w},k||S?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(N)},D.createElement("rect",{x:k?h:h-m/2,y:S?u:u-g/2,width:k?m:m*2,height:S?g:g*2})),!z&&D.createElement("clipPath",{id:"clipPath-dots-".concat(N)},D.createElement("rect",{x:h-W/2,y:u-W/2,width:m+W,height:g+W}))):null,b?null:this.renderArea(P,N),(a||b)&&this.renderDots(P,z,N),(!v||x)&&hs.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:n.points!==i.curPoints||n.baseLine!==i.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(E.PureComponent);QW=za;Is(za,"displayName","Area");Is(za,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ii.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Is(za,"getBaseValue",function(t,e,r,n){var i=t.layout,s=t.baseValue,a=e.props.baseValue,l=a??s;if(ye(l)&&typeof l=="number")return l;var c=i==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var h=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return l==="dataMin"?d:l==="dataMax"||h<0?h:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Is(za,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,h=t.dataStartIndex,d=t.displayedData,f=t.offset,m=e.layout,g=u&&u.length,v=QW.getBaseValue(e,r,n,i),y=m==="horizontal",x=!1,b=d.map(function(k,S){var P;g?P=u[h+S]:(P=tr(k,c),Array.isArray(P)?x=!0:P=[v,P]);var N=P[1]==null||g&&tr(k,c)==null;return y?{x:hx({axis:n,ticks:s,bandSize:l,entry:k,index:S}),y:N?null:i.scale(P[1]),value:P,payload:k}:{x:N?null:n.scale(P[1]),y:hx({axis:i,ticks:a,bandSize:l,entry:k,index:S}),value:P,payload:k}}),w;return g||x?w=b.map(function(k){var S=Array.isArray(k.value)?k.value[0]:null;return y?{x:k.x,y:S!=null&&k.y!=null?i.scale(S):null}:{x:S!=null?n.scale(S):null,y:k.y}}):w=y?i.scale(v):n.scale(v),po({points:b,baseLine:w,layout:m,isRange:x},f)});Is(za,"renderDotItem",function(t,e){var r;if(D.isValidElement(t))r=D.cloneElement(t,e);else if(Ve(t))r=t(e);else{var n=He("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=XW(e,E5e);r=D.createElement(Hh,nc({},s,{key:i,className:n}))}return r});function oh(t){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(t)}function D5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rH(n.key),n)}}function L5e(t,e,r){return e&&$5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function F5e(t,e,r){return e=Fx(e),V5e(t,eH()?Reflect.construct(e,r||[],Fx(t).constructor):e.apply(t,r))}function V5e(t,e){if(e&&(oh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B5e(t)}function B5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eH=function(){return!!t})()}function Fx(t){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fx(t)}function U5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mj(t,e)}function mj(t,e){return mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mj(t,e)}function tH(t,e,r){return e=rH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rH(t){var e=z5e(t,"string");return oh(e)=="symbol"?e:e+""}function z5e(t,e){if(oh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pj(){return pj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pj.apply(this,arguments)}function W5e(t){var e=t.xAxisId,r=AA(),n=TA(),i=DW(e);return i==null?null:D.createElement(Kh,pj({},i,{className:He("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(a){return xa(a,!0)}}))}var eo=function(t){function e(){return D5e(this,e),F5e(this,e,arguments)}return U5e(e,t),L5e(e,[{key:"render",value:function(){return D.createElement(W5e,this.props)}}])}(D.Component);tH(eo,"displayName","XAxis");tH(eo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function lh(t){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(t)}function H5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sH(n.key),n)}}function q5e(t,e,r){return e&&G5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function K5e(t,e,r){return e=Vx(e),Y5e(t,nH()?Reflect.construct(e,r||[],Vx(t).constructor):e.apply(t,r))}function Y5e(t,e){if(e&&(lh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q5e(t)}function Q5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nH=function(){return!!t})()}function Vx(t){return Vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vx(t)}function X5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gj(t,e)}function gj(t,e){return gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gj(t,e)}function iH(t,e,r){return e=sH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sH(t){var e=J5e(t,"string");return lh(e)=="symbol"?e:e+""}function J5e(t,e){if(lh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yj(){return yj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yj.apply(this,arguments)}var Z5e=function(e){var r=e.yAxisId,n=AA(),i=TA(),s=$W(r);return s==null?null:D.createElement(Kh,yj({},s,{className:He("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(l){return xa(l,!0)}}))},to=function(t){function e(){return H5e(this,e),K5e(this,e,arguments)}return X5e(e,t),q5e(e,[{key:"render",value:function(){return D.createElement(Z5e,this.props)}}])}(D.Component);iH(to,"displayName","YAxis");iH(to,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Q3(t){return nMe(t)||rMe(t)||tMe(t)||eMe()}function eMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tMe(t,e){if(t){if(typeof t=="string")return vj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vj(t,e)}}function rMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nMe(t){if(Array.isArray(t))return vj(t)}function vj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var xj=function(e,r,n,i,s){var a=gi(e,IA),l=gi(e,Hw),c=[].concat(Q3(a),Q3(l)),u=gi(e,qw),h="".concat(i,"Id"),d=i[0],f=r;if(c.length&&(f=c.reduce(function(v,y){if(y.props[h]===n&&Vs(y.props,"extendDomain")&&ye(y.props[d])){var x=y.props[d];return[Math.min(v[0],x),Math.max(v[1],x)]}return v},f)),u.length){var m="".concat(d,"1"),g="".concat(d,"2");f=u.reduce(function(v,y){if(y.props[h]===n&&Vs(y.props,"extendDomain")&&ye(y.props[m])&&ye(y.props[g])){var x=y.props[m],b=y.props[g];return[Math.min(v[0],x,b),Math.max(v[1],x,b)]}return v},f)}return s&&s.length&&(f=s.reduce(function(v,y){return ye(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},f)),f},aH={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function s(c,u,h,d,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new i(h,d||c,f),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],h,d;if(this._eventsCount===0)return u;for(d in h=this._events)e.call(h,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},l.prototype.listeners=function(u){var h=r?r+u:u,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,m=d.length,g=new Array(m);f<m;f++)g[f]=d[f].fn;return g},l.prototype.listenerCount=function(u){var h=r?r+u:u,d=this._events[h];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,h,d,f,m,g){var v=r?r+u:u;if(!this._events[v])return!1;var y=this._events[v],x=arguments.length,b,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,d),!0;case 4:return y.fn.call(y.context,h,d,f),!0;case 5:return y.fn.call(y.context,h,d,f,m),!0;case 6:return y.fn.call(y.context,h,d,f,m,g),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];y.fn.apply(y.context,b)}else{var k=y.length,S;for(w=0;w<k;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),x){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,h);break;case 3:y[w].fn.call(y[w].context,h,d);break;case 4:y[w].fn.call(y[w].context,h,d,f);break;default:if(!b)for(S=1,b=new Array(x-1);S<x;S++)b[S-1]=arguments[S];y[w].fn.apply(y[w].context,b)}}return!0},l.prototype.on=function(u,h,d){return s(this,u,h,d,!1)},l.prototype.once=function(u,h,d){return s(this,u,h,d,!0)},l.prototype.removeListener=function(u,h,d,f){var m=r?r+u:u;if(!this._events[m])return this;if(!h)return a(this,m),this;var g=this._events[m];if(g.fn)g.fn===h&&(!f||g.once)&&(!d||g.context===d)&&a(this,m);else{for(var v=0,y=[],x=g.length;v<x;v++)(g[v].fn!==h||f&&!g[v].once||d&&g[v].context!==d)&&y.push(g[v]);y.length?this._events[m]=y.length===1?y[0]:y:a(this,m)}return this},l.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&a(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(aH);var iMe=aH.exports;const sMe=bt(iMe);var H_=new sMe,G_="recharts.syncMouseEvents";function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}function aMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oMe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oH(n.key),n)}}function lMe(t,e,r){return e&&oMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q_(t,e,r){return e=oH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oH(t){var e=cMe(t,"string");return Wp(e)=="symbol"?e:e+""}function cMe(t,e){if(Wp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uMe=function(){function t(){aMe(this,t),q_(this,"activeIndex",0),q_(this,"coordinateList",[]),q_(this,"layout","horizontal")}return lMe(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,a=r.container,l=a===void 0?null:a,c=r.layout,u=c===void 0?null:c,h=r.offset,d=h===void 0?null:h,f=r.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,h=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=s+c+u,f=a+this.offset.top+l/2+h;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function dMe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&ye(n)&&ye(i))return!0}return!1}function hMe(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function lH(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,s=t.endAngle,a=xt(e,r,n,i),l=xt(e,r,n,s);return{points:[a,l],cx:e,cy:r,radius:n,startAngle:i,endAngle:s}}function fMe(t,e,r){var n,i,s,a;if(t==="horizontal")n=e.x,s=n,i=r.top,a=r.top+r.height;else if(t==="vertical")i=e.y,a=i,n=r.left,s=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,h=e.outerRadius,d=e.angle,f=xt(l,c,u,d),m=xt(l,c,h,d);n=f.x,i=f.y,s=m.x,a=m.y}else return lH(e);return[{x:n,y:i},{x:s,y:a}]}function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(t)}function X3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function W0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X3(Object(r),!0).forEach(function(n){mMe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mMe(t,e,r){return e=pMe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pMe(t){var e=gMe(t,"string");return Hp(e)=="symbol"?e:e+""}function gMe(t,e){if(Hp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yMe(t){var e,r,n=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,h=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,m=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!s||!a||f!=="ScatterChart"&&i!=="axis")return null;var g,v=fc;if(f==="ScatterChart")g=a,v=ePe;else if(f==="BarChart")g=hMe(d,a,c,h),v=kA;else if(d==="radial"){var y=lH(a),x=y.cx,b=y.cy,w=y.radius,k=y.startAngle,S=y.endAngle;g={cx:x,cy:b,startAngle:k,endAngle:S,innerRadius:w,outerRadius:w},v=Qz}else g={points:fMe(d,a,c)},v=fc;var P=W0(W0(W0(W0({stroke:"#ccc",pointerEvents:"none"},c),g),Me(m,!1)),{},{payload:l,payloadIndex:u,className:He("recharts-tooltip-cursor",m.className)});return E.isValidElement(m)?E.cloneElement(m,P):E.createElement(v,P)}var vMe=["item"],xMe=["children","className","width","height","style","compact","title","desc"];function ch(t){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(t)}function km(){return km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},km.apply(this,arguments)}function J3(t,e){return _Me(t)||wMe(t,e)||uH(t,e)||bMe()}function bMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wMe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function _Me(t){if(Array.isArray(t))return t}function Z3(t,e){if(t==null)return{};var r=SMe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function SMe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function kMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NMe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dH(n.key),n)}}function jMe(t,e,r){return e&&NMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EMe(t,e,r){return e=Bx(e),CMe(t,cH()?Reflect.construct(e,r||[],Bx(t).constructor):e.apply(t,r))}function CMe(t,e){if(e&&(ch(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AMe(t)}function AMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cH=function(){return!!t})()}function Bx(t){return Bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bx(t)}function TMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bj(t,e)}function bj(t,e){return bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bj(t,e)}function uh(t){return OMe(t)||IMe(t)||uH(t)||PMe()}function PMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uH(t,e){if(t){if(typeof t=="string")return wj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wj(t,e)}}function IMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OMe(t){if(Array.isArray(t))return wj(t)}function wj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function te(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eD(Object(r),!0).forEach(function(n){We(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function We(t,e,r){return e=dH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dH(t){var e=RMe(t,"string");return ch(e)=="symbol"?e:e+""}function RMe(t,e){if(ch(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MMe={xAxis:["bottom","top"],yAxis:["left","right"]},DMe={width:"100%",height:"100%"},hH={x:0,y:0};function H0(t){return t}var $Me=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},LMe=function(e,r,n,i){var s=r.find(function(h){return h&&h.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,l=i.radius;return te(te(te({},i),xt(i.cx,i.cy,l,a)),{},{angle:a,radius:l})}var c=s.coordinate,u=i.angle;return te(te(te({},i),xt(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return hH},Kw=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,a=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(uh(l),uh(u)):l},[]);return a.length>0?a:e&&e.length&&ye(i)&&ye(s)?e.slice(i,s+1):[]};function fH(t){return t==="number"?[0,"auto"]:void 0}var _j=function(e,r,n,i){var s=e.graphicalItems,a=e.tooltipAxis,l=Kw(r,e);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(c,u){var h,d=(h=u.props.data)!==null&&h!==void 0?h:r;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(a.dataKey&&!a.allowDuplicatedCategory){var m=d===void 0?l:d;f=Lv(m,a.dataKey,i)}else f=d&&d[n]||l[n];return f?[].concat(uh(c),[Uz(u,f)]):c},[])},tD=function(e,r,n,i){var s=i||{x:e.chartX,y:e.chartY},a=$Me(s,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,h=$2e(a,l,u,c);if(h>=0&&u){var d=u[h]&&u[h].value,f=_j(e,r,h,d),m=LMe(n,l,h,s);return{activeTooltipIndex:h,activeLabel:d,activePayload:f,activeCoordinate:m}}return null},FMe=function(e,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,a=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,h=e.layout,d=e.children,f=e.stackOffset,m=Dz(h,s);return n.reduce(function(g,v){var y,x=v.type.defaultProps!==void 0?te(te({},v.type.defaultProps),v.props):v.props,b=x.type,w=x.dataKey,k=x.allowDataOverflow,S=x.allowDuplicatedCategory,P=x.scale,N=x.ticks,_=x.includeHidden,T=x[a];if(g[T])return g;var j=Kw(e.data,{graphicalItems:i.filter(function(H){var q,oe=a in H.props?H.props[a]:(q=H.type.defaultProps)===null||q===void 0?void 0:q[a];return oe===T}),dataStartIndex:c,dataEndIndex:u}),C=j.length,I,R,$;dMe(x.domain,k,b)&&(I=RN(x.domain,null,k),m&&(b==="number"||P!=="auto")&&($=xm(j,w,"category")));var z=fH(b);if(!I||I.length===0){var W,M=(W=x.domain)!==null&&W!==void 0?W:z;if(w){if(I=xm(j,w,b),b==="category"&&m){var F=Cpe(I);S&&F?(R=I,I=Ex(0,C)):S||(I=vM(M,I,v).reduce(function(H,q){return H.indexOf(q)>=0?H:[].concat(uh(H),[q])},[]))}else if(b==="category")S?I=I.filter(function(H){return H!==""&&!Ge(H)}):I=vM(M,I,v).reduce(function(H,q){return H.indexOf(q)>=0||q===""||Ge(q)?H:[].concat(uh(H),[q])},[]);else if(b==="number"){var B=U2e(j,i.filter(function(H){var q,oe,ve=a in H.props?H.props[a]:(q=H.type.defaultProps)===null||q===void 0?void 0:q[a],se="hide"in H.props?H.props.hide:(oe=H.type.defaultProps)===null||oe===void 0?void 0:oe.hide;return ve===T&&(_||!se)}),w,s,h);B&&(I=B)}m&&(b==="number"||P!=="auto")&&($=xm(j,w,"category"))}else m?I=Ex(0,C):l&&l[T]&&l[T].hasStack&&b==="number"?I=f==="expand"?[0,1]:Bz(l[T].stackGroups,c,u):I=Mz(j,i.filter(function(H){var q=a in H.props?H.props[a]:H.type.defaultProps[a],oe="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return q===T&&(_||!oe)}),b,h,!0);if(b==="number")I=xj(d,I,T,s,N),M&&(I=RN(M,I,k));else if(b==="category"&&M){var J=M,U=I.every(function(H){return J.indexOf(H)>=0});U&&(I=J)}}return te(te({},g),{},We({},T,te(te({},x),{},{axisType:s,domain:I,categoricalDomain:$,duplicateDomain:R,originalDomain:(y=x.domain)!==null&&y!==void 0?y:z,isCategorical:m,layout:h})))},{})},VMe=function(e,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,a=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,h=e.layout,d=e.children,f=Kw(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=f.length,g=Dz(h,s),v=-1;return n.reduce(function(y,x){var b=x.type.defaultProps!==void 0?te(te({},x.type.defaultProps),x.props):x.props,w=b[a],k=fH("number");if(!y[w]){v++;var S;return g?S=Ex(0,m):l&&l[w]&&l[w].hasStack?(S=Bz(l[w].stackGroups,c,u),S=xj(d,S,w,s)):(S=RN(k,Mz(f,n.filter(function(P){var N,_,T=a in P.props?P.props[a]:(N=P.type.defaultProps)===null||N===void 0?void 0:N[a],j="hide"in P.props?P.props.hide:(_=P.type.defaultProps)===null||_===void 0?void 0:_.hide;return T===w&&!j}),"number",h),i.defaultProps.allowDataOverflow),S=xj(d,S,w,s)),te(te({},y),{},We({},w,te(te({axisType:s},i.defaultProps),{},{hide:!0,orientation:pi(MMe,"".concat(s,".").concat(v%2),null),domain:S,originalDomain:k,isCategorical:g,layout:h})))}return y},{})},BMe=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,a=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,h=e.children,d="".concat(i,"Id"),f=gi(h,s),m={};return f&&f.length?m=FMe(e,{axes:f,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):a&&a.length&&(m=VMe(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},UMe=function(e){var r=ko(e),n=xa(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:XC(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:fx(r,n)}},rD=function(e){var r=e.children,n=e.defaultShowTooltip,i=oi(r,Zd),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},zMe=function(e){return!e||!e.length?!1:e.some(function(r){var n=ka(r&&r.type);return n&&n.indexOf("Bar")>=0})},nD=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},WMe=function(e,r){var n=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=n.width,h=n.height,d=n.children,f=n.margin||{},m=oi(d,Zd),g=oi(d,Yu),v=Object.keys(c).reduce(function(S,P){var N=c[P],_=N.orientation;return!N.mirror&&!N.hide?te(te({},S),{},We({},_,S[_]+N.width)):S},{left:f.left||0,right:f.right||0}),y=Object.keys(a).reduce(function(S,P){var N=a[P],_=N.orientation;return!N.mirror&&!N.hide?te(te({},S),{},We({},_,pi(S,"".concat(_))+N.height)):S},{top:f.top||0,bottom:f.bottom||0}),x=te(te({},y),v),b=x.bottom;m&&(x.bottom+=m.props.height||Zd.defaultProps.height),g&&r&&(x=V2e(x,i,n,r));var w=u-x.left-x.right,k=h-x.top-x.bottom;return te(te({brushBottom:b},x),{},{width:Math.max(w,0),height:Math.max(k,0)})},HMe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},Og=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,h=e.formatAxisMap,d=e.defaultProps,f=function(y,x){var b=x.graphicalItems,w=x.stackGroups,k=x.offset,S=x.updateId,P=x.dataStartIndex,N=x.dataEndIndex,_=y.barSize,T=y.layout,j=y.barGap,C=y.barCategoryGap,I=y.maxBarSize,R=nD(T),$=R.numericAxisName,z=R.cateAxisName,W=zMe(b),M=[];return b.forEach(function(F,B){var J=Kw(y.data,{graphicalItems:[F],dataStartIndex:P,dataEndIndex:N}),U=F.type.defaultProps!==void 0?te(te({},F.type.defaultProps),F.props):F.props,H=U.dataKey,q=U.maxBarSize,oe=U["".concat($,"Id")],ve=U["".concat(z,"Id")],se={},V=c.reduce(function(de,xe){var De=x["".concat(xe.axisType,"Map")],Le=U["".concat(xe.axisType,"Id")];De&&De[Le]||xe.axisType==="zAxis"||Rc();var $e=De[Le];return te(te({},de),{},We(We({},xe.axisType,$e),"".concat(xe.axisType,"Ticks"),xa($e)))},se),X=V[z],ee=V["".concat(z,"Ticks")],ue=w&&w[oe]&&w[oe].hasStack&&X2e(F,w[oe].stackGroups),ge=ka(F.type).indexOf("Bar")>=0,K=fx(X,ee),G=[],he=W&&L2e({barSize:_,stackGroups:w,totalSize:HMe(V,z)});if(ge){var _e,qe,Kt=Ge(q)?I:q,me=(_e=(qe=fx(X,ee,!0))!==null&&qe!==void 0?qe:Kt)!==null&&_e!==void 0?_e:0;G=F2e({barGap:j,barCategoryGap:C,bandSize:me!==K?me:K,sizeList:he[ve],maxBarSize:Kt}),me!==K&&(G=G.map(function(de){return te(te({},de),{},{position:te(te({},de.position),{},{offset:de.position.offset-me/2})})}))}var we=F&&F.type&&F.type.getComposedData;we&&M.push({props:te(te({},we(te(te({},V),{},{displayedData:J,props:y,dataKey:H,item:F,bandSize:K,barPosition:G,offset:k,stackedData:ue,layout:T,dataStartIndex:P,dataEndIndex:N}))),{},We(We(We({key:F.key||"item-".concat(B)},$,V[$]),z,V[z]),"animationId",S)),childIndex:Fpe(F,y.children),item:F})}),M},m=function(y,x){var b=y.props,w=y.dataStartIndex,k=y.dataEndIndex,S=y.updateId;if(!h4({props:b}))return null;var P=b.children,N=b.layout,_=b.stackOffset,T=b.data,j=b.reverseStackOrder,C=nD(N),I=C.numericAxisName,R=C.cateAxisName,$=gi(P,n),z=Y2e(T,$,"".concat(I,"Id"),"".concat(R,"Id"),_,j),W=c.reduce(function(U,H){var q="".concat(H.axisType,"Map");return te(te({},U),{},We({},q,BMe(b,te(te({},H),{},{graphicalItems:$,stackGroups:H.axisType===I&&z,dataStartIndex:w,dataEndIndex:k}))))},{}),M=WMe(te(te({},W),{},{props:b,graphicalItems:$}),x==null?void 0:x.legendBBox);Object.keys(W).forEach(function(U){W[U]=h(b,W[U],M,U.replace("Map",""),r)});var F=W["".concat(R,"Map")],B=UMe(F),J=f(b,te(te({},W),{},{dataStartIndex:w,dataEndIndex:k,updateId:S,graphicalItems:$,stackGroups:z,offset:M}));return te(te({formattedGraphicalItems:J,graphicalItems:$,offset:M,stackGroups:z},B),W)},g=function(v){function y(x){var b,w,k;return kMe(this,y),k=EMe(this,y,[x]),We(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),We(k,"accessibilityManager",new uMe),We(k,"handleLegendBBoxUpdate",function(S){if(S){var P=k.state,N=P.dataStartIndex,_=P.dataEndIndex,T=P.updateId;k.setState(te({legendBBox:S},m({props:k.props,dataStartIndex:N,dataEndIndex:_,updateId:T},te(te({},k.state),{},{legendBBox:S}))))}}),We(k,"handleReceiveSyncEvent",function(S,P,N){if(k.props.syncId===S){if(N===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(P)}}),We(k,"handleBrushChange",function(S){var P=S.startIndex,N=S.endIndex;if(P!==k.state.dataStartIndex||N!==k.state.dataEndIndex){var _=k.state.updateId;k.setState(function(){return te({dataStartIndex:P,dataEndIndex:N},m({props:k.props,dataStartIndex:P,dataEndIndex:N,updateId:_},k.state))}),k.triggerSyncEvent({dataStartIndex:P,dataEndIndex:N})}}),We(k,"handleMouseEnter",function(S){var P=k.getMouseInfo(S);if(P){var N=te(te({},P),{},{isTooltipActive:!0});k.setState(N),k.triggerSyncEvent(N);var _=k.props.onMouseEnter;Ve(_)&&_(N,S)}}),We(k,"triggeredAfterMouseMove",function(S){var P=k.getMouseInfo(S),N=P?te(te({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(N),k.triggerSyncEvent(N);var _=k.props.onMouseMove;Ve(_)&&_(N,S)}),We(k,"handleItemMouseEnter",function(S){k.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),We(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),We(k,"handleMouseMove",function(S){S.persist(),k.throttleTriggeredAfterMouseMove(S)}),We(k,"handleMouseLeave",function(S){k.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};k.setState(P),k.triggerSyncEvent(P);var N=k.props.onMouseLeave;Ve(N)&&N(P,S)}),We(k,"handleOuterEvent",function(S){var P=Lpe(S),N=pi(k.props,"".concat(P));if(P&&Ve(N)){var _,T;/.*touch.*/i.test(P)?T=k.getMouseInfo(S.changedTouches[0]):T=k.getMouseInfo(S),N((_=T)!==null&&_!==void 0?_:{},S)}}),We(k,"handleClick",function(S){var P=k.getMouseInfo(S);if(P){var N=te(te({},P),{},{isTooltipActive:!0});k.setState(N),k.triggerSyncEvent(N);var _=k.props.onClick;Ve(_)&&_(N,S)}}),We(k,"handleMouseDown",function(S){var P=k.props.onMouseDown;if(Ve(P)){var N=k.getMouseInfo(S);P(N,S)}}),We(k,"handleMouseUp",function(S){var P=k.props.onMouseUp;if(Ve(P)){var N=k.getMouseInfo(S);P(N,S)}}),We(k,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),We(k,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&k.handleMouseDown(S.changedTouches[0])}),We(k,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&k.handleMouseUp(S.changedTouches[0])}),We(k,"triggerSyncEvent",function(S){k.props.syncId!==void 0&&H_.emit(G_,k.props.syncId,S,k.eventEmitterSymbol)}),We(k,"applySyncEvent",function(S){var P=k.props,N=P.layout,_=P.syncMethod,T=k.state.updateId,j=S.dataStartIndex,C=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)k.setState(te({dataStartIndex:j,dataEndIndex:C},m({props:k.props,dataStartIndex:j,dataEndIndex:C,updateId:T},k.state)));else if(S.activeTooltipIndex!==void 0){var I=S.chartX,R=S.chartY,$=S.activeTooltipIndex,z=k.state,W=z.offset,M=z.tooltipTicks;if(!W)return;if(typeof _=="function")$=_(M,S);else if(_==="value"){$=-1;for(var F=0;F<M.length;F++)if(M[F].value===S.activeLabel){$=F;break}}var B=te(te({},W),{},{x:W.left,y:W.top}),J=Math.min(I,B.x+B.width),U=Math.min(R,B.y+B.height),H=M[$]&&M[$].value,q=_j(k.state,k.props.data,$),oe=M[$]?{x:N==="horizontal"?M[$].coordinate:J,y:N==="horizontal"?U:M[$].coordinate}:hH;k.setState(te(te({},S),{},{activeLabel:H,activeCoordinate:oe,activePayload:q,activeTooltipIndex:$}))}else k.setState(S)}),We(k,"renderCursor",function(S){var P,N=k.state,_=N.isTooltipActive,T=N.activeCoordinate,j=N.activePayload,C=N.offset,I=N.activeTooltipIndex,R=N.tooltipAxisBandSize,$=k.getTooltipEventType(),z=(P=S.props.active)!==null&&P!==void 0?P:_,W=k.props.layout,M=S.key||"_recharts-cursor";return D.createElement(yMe,{key:M,activeCoordinate:T,activePayload:j,activeTooltipIndex:I,chartName:r,element:S,isActive:z,layout:W,offset:C,tooltipAxisBandSize:R,tooltipEventType:$})}),We(k,"renderPolarAxis",function(S,P,N){var _=pi(S,"type.axisType"),T=pi(k.state,"".concat(_,"Map")),j=S.type.defaultProps,C=j!==void 0?te(te({},j),S.props):S.props,I=T&&T[C["".concat(_,"Id")]];return E.cloneElement(S,te(te({},I),{},{className:He(_,I.className),key:S.key||"".concat(P,"-").concat(N),ticks:xa(I,!0)}))}),We(k,"renderPolarGrid",function(S){var P=S.props,N=P.radialLines,_=P.polarAngles,T=P.polarRadius,j=k.state,C=j.radiusAxisMap,I=j.angleAxisMap,R=ko(C),$=ko(I),z=$.cx,W=$.cy,M=$.innerRadius,F=$.outerRadius;return E.cloneElement(S,{polarAngles:Array.isArray(_)?_:xa($,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(T)?T:xa(R,!0).map(function(B){return B.coordinate}),cx:z,cy:W,innerRadius:M,outerRadius:F,key:S.key||"polar-grid",radialLines:N})}),We(k,"renderLegend",function(){var S=k.state.formattedGraphicalItems,P=k.props,N=P.children,_=P.width,T=P.height,j=k.props.margin||{},C=_-(j.left||0)-(j.right||0),I=Oz({children:N,formattedGraphicalItems:S,legendWidth:C,legendContent:u});if(!I)return null;var R=I.item,$=Z3(I,vMe);return E.cloneElement(R,te(te({},$),{},{chartWidth:_,chartHeight:T,margin:j,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),We(k,"renderTooltip",function(){var S,P=k.props,N=P.children,_=P.accessibilityLayer,T=oi(N,Nn);if(!T)return null;var j=k.state,C=j.isTooltipActive,I=j.activeCoordinate,R=j.activePayload,$=j.activeLabel,z=j.offset,W=(S=T.props.active)!==null&&S!==void 0?S:C;return E.cloneElement(T,{viewBox:te(te({},z),{},{x:z.left,y:z.top}),active:W,label:$,payload:W?R:[],coordinate:I,accessibilityLayer:_})}),We(k,"renderBrush",function(S){var P=k.props,N=P.margin,_=P.data,T=k.state,j=T.offset,C=T.dataStartIndex,I=T.dataEndIndex,R=T.updateId;return E.cloneElement(S,{key:S.key||"_recharts-brush",onChange:V0(k.handleBrushChange,S.props.onChange),data:_,x:ye(S.props.x)?S.props.x:j.left,y:ye(S.props.y)?S.props.y:j.top+j.height+j.brushBottom-(N.bottom||0),width:ye(S.props.width)?S.props.width:j.width,startIndex:C,endIndex:I,updateId:"brush-".concat(R)})}),We(k,"renderReferenceElement",function(S,P,N){if(!S)return null;var _=k,T=_.clipPathId,j=k.state,C=j.xAxisMap,I=j.yAxisMap,R=j.offset,$=S.type.defaultProps||{},z=S.props,W=z.xAxisId,M=W===void 0?$.xAxisId:W,F=z.yAxisId,B=F===void 0?$.yAxisId:F;return E.cloneElement(S,{key:S.key||"".concat(P,"-").concat(N),xAxis:C[M],yAxis:I[B],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:T})}),We(k,"renderActivePoints",function(S){var P=S.item,N=S.activePoint,_=S.basePoint,T=S.childIndex,j=S.isRange,C=[],I=P.props.key,R=P.item.type.defaultProps!==void 0?te(te({},P.item.type.defaultProps),P.item.props):P.item.props,$=R.activeDot,z=R.dataKey,W=te(te({index:T,dataKey:z,cx:N.x,cy:N.y,r:4,fill:SA(P.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},Me($,!1)),Fv($));return C.push(y.renderActiveDot($,W,"".concat(I,"-activePoint-").concat(T))),_?C.push(y.renderActiveDot($,te(te({},W),{},{cx:_.x,cy:_.y}),"".concat(I,"-basePoint-").concat(T))):j&&C.push(null),C}),We(k,"renderGraphicChild",function(S,P,N){var _=k.filterFormatItem(S,P,N);if(!_)return null;var T=k.getTooltipEventType(),j=k.state,C=j.isTooltipActive,I=j.tooltipAxis,R=j.activeTooltipIndex,$=j.activeLabel,z=k.props.children,W=oi(z,Nn),M=_.props,F=M.points,B=M.isRange,J=M.baseLine,U=_.item.type.defaultProps!==void 0?te(te({},_.item.type.defaultProps),_.item.props):_.item.props,H=U.activeDot,q=U.hide,oe=U.activeBar,ve=U.activeShape,se=!!(!q&&C&&W&&(H||oe||ve)),V={};T!=="axis"&&W&&W.props.trigger==="click"?V={onClick:V0(k.handleItemMouseEnter,S.props.onClick)}:T!=="axis"&&(V={onMouseLeave:V0(k.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:V0(k.handleItemMouseEnter,S.props.onMouseEnter)});var X=E.cloneElement(S,te(te({},_.props),V));function ee(xe){return typeof I.dataKey=="function"?I.dataKey(xe.payload):null}if(se)if(R>=0){var ue,ge;if(I.dataKey&&!I.allowDuplicatedCategory){var K=typeof I.dataKey=="function"?ee:"payload.".concat(I.dataKey.toString());ue=Lv(F,K,$),ge=B&&J&&Lv(J,K,$)}else ue=F==null?void 0:F[R],ge=B&&J&&J[R];if(ve||oe){var G=S.props.activeIndex!==void 0?S.props.activeIndex:R;return[E.cloneElement(S,te(te(te({},_.props),V),{},{activeIndex:G})),null,null]}if(!Ge(ue))return[X].concat(uh(k.renderActivePoints({item:_,activePoint:ue,basePoint:ge,childIndex:R,isRange:B})))}else{var he,_e=(he=k.getItemByXY(k.state.activeCoordinate))!==null&&he!==void 0?he:{graphicalItem:X},qe=_e.graphicalItem,Kt=qe.item,me=Kt===void 0?S:Kt,we=qe.childIndex,de=te(te(te({},_.props),V),{},{activeIndex:we});return[E.cloneElement(me,de),null,null]}return B?[X,null,null]:[X,null]}),We(k,"renderCustomized",function(S,P,N){return E.cloneElement(S,te(te({key:"recharts-customized-".concat(N)},k.props),k.state))}),We(k,"renderMap",{CartesianGrid:{handler:H0,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:H0},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:H0},YAxis:{handler:H0},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((b=x.id)!==null&&b!==void 0?b:qc("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=IU(k.triggeredAfterMouseMove,(w=x.throttleDelay)!==null&&w!==void 0?w:1e3/60),k.state={},k}return TMe(y,v),jMe(y,[{key:"componentDidMount",value:function(){var b,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,w=b.children,k=b.data,S=b.height,P=b.layout,N=oi(w,Nn);if(N){var _=N.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,j=_j(this.state,k,_,T),C=this.state.tooltipTicks[_].coordinate,I=(this.state.offset.top+S)/2,R=P==="horizontal",$=R?{x:C,y:I}:{y:C,x:I},z=this.state.formattedGraphicalItems.find(function(M){var F=M.item;return F.type.name==="Scatter"});z&&($=te(te({},$),z.props.points[_].tooltipPosition),j=z.props.points[_].tooltipPayload);var W={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:T,activePayload:j,activeCoordinate:$};this.setState(W),this.renderCursor(N),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var k,S;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){Yk([oi(b.children,Nn)],[oi(this.props.children,Nn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=oi(this.props.children,Nn);if(b&&typeof b.props.shared=="boolean"){var w=b.props.shared?"axis":"item";return l.indexOf(w)>=0?w:s}return s}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var w=this.container,k=w.getBoundingClientRect(),S=dke(k),P={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},N=k.width/w.offsetWidth||1,_=this.inRange(P.chartX,P.chartY,N);if(!_)return null;var T=this.state,j=T.xAxisMap,C=T.yAxisMap,I=this.getTooltipEventType();if(I!=="axis"&&j&&C){var R=ko(j).scale,$=ko(C).scale,z=R&&R.invert?R.invert(P.chartX):null,W=$&&$.invert?$.invert(P.chartY):null;return te(te({},P),{},{xValue:z,yValue:W})}var M=tD(this.state,this.props.data,this.props.layout,_);return M?te(te({},P),M):null}},{key:"inRange",value:function(b,w){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,P=b/k,N=w/k;if(S==="horizontal"||S==="vertical"){var _=this.state.offset,T=P>=_.left&&P<=_.left+_.width&&N>=_.top&&N<=_.top+_.height;return T?{x:P,y:N}:null}var j=this.state,C=j.angleAxisMap,I=j.radiusAxisMap;if(C&&I){var R=ko(C);return wM({x:P,y:N},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,w=this.getTooltipEventType(),k=oi(b,Nn),S={};k&&w==="axis"&&(k.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var P=Fv(this.props,this.handleOuterEvent);return te(te({},P),S)}},{key:"addListener",value:function(){H_.on(G_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){H_.removeListener(G_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,w,k){for(var S=this.state.formattedGraphicalItems,P=0,N=S.length;P<N;P++){var _=S[P];if(_.item===b||_.props.key===b.key||w===ka(_.item.type)&&k===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,w=this.state.offset,k=w.left,S=w.top,P=w.height,N=w.width;return D.createElement("defs",null,D.createElement("clipPath",{id:b},D.createElement("rect",{x:k,y:S,height:P,width:N})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(w,k){var S=J3(k,2),P=S[0],N=S[1];return te(te({},w),{},We({},P,N.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(w,k){var S=J3(k,2),P=S[0],N=S[1];return te(te({},w),{},We({},P,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(b){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(b){var w=this.state,k=w.formattedGraphicalItems,S=w.activeItem;if(k&&k.length)for(var P=0,N=k.length;P<N;P++){var _=k[P],T=_.props,j=_.item,C=j.type.defaultProps!==void 0?te(te({},j.type.defaultProps),j.props):j.props,I=ka(j.type);if(I==="Bar"){var R=(T.data||[]).find(function(M){return MTe(b,M)});if(R)return{graphicalItem:_,payload:R}}else if(I==="RadialBar"){var $=(T.data||[]).find(function(M){return wM(b,M)});if($)return{graphicalItem:_,payload:$}}else if(Bw(_,S)||Uw(_,S)||Fp(_,S)){var z=OIe({graphicalItem:_,activeTooltipItem:S,itemData:C.data}),W=C.activeIndex===void 0?z:C.activeIndex;return{graphicalItem:te(te({},_),{},{childIndex:W}),payload:Fp(_,S)?C.data[z]:_.props.data[z]}}}return null}},{key:"render",value:function(){var b=this;if(!h4(this))return null;var w=this.props,k=w.children,S=w.className,P=w.width,N=w.height,_=w.style,T=w.compact,j=w.title,C=w.desc,I=Z3(w,xMe),R=Me(I,!1);if(T)return D.createElement(I3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement(Xk,km({},R,{width:P,height:N,title:j,desc:C}),this.renderClipPath(),m4(k,this.renderMap)));if(this.props.accessibilityLayer){var $,z;R.tabIndex=($=this.props.tabIndex)!==null&&$!==void 0?$:0,R.role=(z=this.props.role)!==null&&z!==void 0?z:"application",R.onKeyDown=function(M){b.accessibilityManager.keyboardEvent(M)},R.onFocus=function(){b.accessibilityManager.focus()}}var W=this.parseEventsOfWrapper();return D.createElement(I3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement("div",km({className:He("recharts-wrapper",S),style:te({position:"relative",cursor:"default",width:P,height:N},_)},W,{ref:function(F){b.container=F}}),D.createElement(Xk,km({},R,{width:P,height:N,title:j,desc:C,style:DMe}),this.renderClipPath(),m4(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(E.Component);return We(g,"displayName",r),We(g,"defaultProps",te({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),We(g,"getDerivedStateFromProps",function(v,y){var x=v.dataKey,b=v.data,w=v.children,k=v.width,S=v.height,P=v.layout,N=v.stackOffset,_=v.margin,T=y.dataStartIndex,j=y.dataEndIndex;if(y.updateId===void 0){var C=rD(v);return te(te(te({},C),{},{updateId:0},m(te(te({props:v},C),{},{updateId:0}),y)),{},{prevDataKey:x,prevData:b,prevWidth:k,prevHeight:S,prevLayout:P,prevStackOffset:N,prevMargin:_,prevChildren:w})}if(x!==y.prevDataKey||b!==y.prevData||k!==y.prevWidth||S!==y.prevHeight||P!==y.prevLayout||N!==y.prevStackOffset||!Ku(_,y.prevMargin)){var I=rD(v),R={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},$=te(te({},tD(y,b,P)),{},{updateId:y.updateId+1}),z=te(te(te({},I),R),$);return te(te(te({},z),m(te({props:v},z),y)),{},{prevDataKey:x,prevData:b,prevWidth:k,prevHeight:S,prevLayout:P,prevStackOffset:N,prevMargin:_,prevChildren:w})}if(!Yk(w,y.prevChildren)){var W,M,F,B,J=oi(w,Zd),U=J&&(W=(M=J.props)===null||M===void 0?void 0:M.startIndex)!==null&&W!==void 0?W:T,H=J&&(F=(B=J.props)===null||B===void 0?void 0:B.endIndex)!==null&&F!==void 0?F:j,q=U!==T||H!==j,oe=!Ge(b),ve=oe&&!q?y.updateId:y.updateId+1;return te(te({updateId:ve},m(te(te({props:v},y),{},{updateId:ve,dataStartIndex:U,dataEndIndex:H}),y)),{},{prevChildren:w,dataStartIndex:U,dataEndIndex:H})}return null}),We(g,"renderActiveDot",function(v,y,x){var b;return E.isValidElement(v)?b=E.cloneElement(v,y):Ve(v)?b=v(y):b=D.createElement(Hh,y),D.createElement(tt,{className:"recharts-active-dot",key:x},b)}),function(y){return D.createElement(g,y)}},MA=Og({chartName:"LineChart",GraphicalChild:Ei,axisComponents:[{axisType:"xAxis",AxisComp:eo},{axisType:"yAxis",AxisComp:to}],formatAxisMap:NA}),GMe=Og({chartName:"BarChart",GraphicalChild:Qc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:eo},{axisType:"yAxis",AxisComp:to}],formatAxisMap:NA}),qMe=Og({chartName:"PieChart",GraphicalChild:Za,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:qh},{axisType:"radiusAxis",AxisComp:Gh}],formatAxisMap:Hz,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),KMe=Og({chartName:"RadarChart",GraphicalChild:Pg,axisComponents:[{axisType:"angleAxis",AxisComp:qh},{axisType:"radiusAxis",AxisComp:Gh}],formatAxisMap:Hz,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),YMe=Og({chartName:"AreaChart",GraphicalChild:za,axisComponents:[{axisType:"xAxis",AxisComp:eo},{axisType:"yAxis",AxisComp:to}],formatAxisMap:NA});const QMe=()=>{const[t,e]=E.useState("patagonia"),[r,n]=E.useState(""),i={patagonia:{name:"Patagonia",logo:"",industry:"Outdoor Apparel",founded:1973,headquarters:"Ventura, CA",employees:"3,000+",sustainability:{overall:94,carbon:96,water:92,waste:95,energy:93,ethics:97},trend:"+2",initiatives:["1% for the Planet founding member","100% renewable energy in facilities","Fair Trade Certified products","Regenerative agriculture support","Circular economy practices"],certifications:["B Corp","Fair Trade","Bluesign","1% for the Planet"],products:145,avgProductScore:89,description:"Leading outdoor clothing company with strong environmental and social mission.",recentNews:["Commits to carbon neutrality by 2025","Launches regenerative cotton initiative","Donates $1M to climate action groups"]},unilever:{name:"Unilever",logo:"",industry:"Consumer Goods",founded:1929,headquarters:"London, UK",employees:"190,000+",sustainability:{overall:76,carbon:74,water:78,waste:75,energy:77,ethics:79},trend:"-1",initiatives:["Sustainable Living Plan","Zero waste to landfill factories","Sustainable sourcing program","Clean water access projects","Gender equality initiatives"],certifications:["Rainforest Alliance","Fair Trade","RSPO"],products:2847,avgProductScore:71,description:"Global consumer goods company transforming business for sustainability.",recentNews:["Reduces plastic packaging by 15%","Expands sustainable sourcing","Invests in clean energy projects"]}},s=i[t],[a,l]=E.useState([]),{currentUser:c}=wr(),u=async()=>{if(!c)return;const m=Re(Ne,"users",c.uid);try{a.includes(t)?await cr(m,{following:jv(t)}):await cr(m,{following:dm(t)})}catch(g){console.error("Error toggling follow:",g)}};E.useEffect(()=>{if(!c)return;const m=Re(Ne,"users",c.uid),g=On(m,v=>{if(v.exists()){const y=v.data();l(y.following||[])}else l([])});return()=>g()},[c]);const h=c&&a.includes(t),d=[{month:"Jan",score:91},{month:"Feb",score:92},{month:"Mar",score:93},{month:"Apr",score:94},{month:"May",score:93},{month:"Jun",score:94}],f=[{category:"Carbon",score:s.sustainability.carbon,color:"#22c55e"},{category:"Water",score:s.sustainability.water,color:"#3b82f6"},{category:"Waste",score:s.sustainability.waste,color:"#f59e0b"},{category:"Energy",score:s.sustainability.energy,color:"#8b5cf6"},{category:"Ethics",score:s.sustainability.ethics,color:"#ef4444"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(_Y,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{children:"Company Sustainability Profiles"})]})}),o.jsxs(ce,{children:[o.jsxs("div",{className:"flex space-x-2 mb-4",children:[o.jsx(st,{placeholder:"Search companies...",value:r,onChange:m=>n(m.target.value),className:"flex-1"}),o.jsx(Q,{children:o.jsx(Kn,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(i).map(([m,g])=>o.jsx(re,{className:`cursor-pointer transition-all hover:shadow-lg ${t===m?"ring-2 ring-blue-500":""}`,onClick:()=>e(m),children:o.jsxs(ce,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-2xl",children:g.logo}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:g.name}),o.jsx("p",{className:"text-sm text-gray-600",children:g.industry})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-lg font-bold text-green-600",children:g.sustainability.overall}),o.jsxs("div",{className:"flex items-center space-x-1",children:[g.trend.startsWith("+")?o.jsx(vn,{className:"w-3 h-3 text-green-500"}):o.jsx(Xy,{className:"w-3 h-3 text-red-500"}),o.jsx("span",{className:"text-xs",children:g.trend})]})]})]}),o.jsx(Ht,{value:g.sustainability.overall,className:"h-2"})]})},m))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs(re,{className:"lg:col-span-2 bg-white/60 backdrop-blur-sm border-green-100",children:[o.jsx(je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-3xl",children:s.logo}),o.jsxs("div",{children:[o.jsx(Ce,{className:"text-2xl",children:s.name}),o.jsx("p",{className:"text-gray-600",children:s.industry})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-3xl font-bold text-green-600",children:s.sustainability.overall}),o.jsx(ne,{className:"bg-green-500 text-white",children:"Industry Leader"})]})]})}),o.jsxs(ce,{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-end",children:o.jsx(Q,{onClick:u,disabled:!c,variant:h?"outline":"default",children:h?"Following":"Follow Company"})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Founded"}),o.jsx("p",{className:"font-medium",children:s.founded})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Headquarters"}),o.jsx("p",{className:"font-medium",children:s.headquarters})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Employees"}),o.jsx("p",{className:"font-medium",children:s.employees})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Products Analyzed"}),o.jsx("p",{className:"font-medium",children:s.products})]})]}),o.jsx("p",{className:"text-gray-700",children:s.description}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Sustainability Breakdown"}),o.jsx(Pc,{width:"100%",height:200,children:o.jsxs(GMe,{data:f,children:[o.jsx(Ig,{strokeDasharray:"3 3"}),o.jsx(eo,{dataKey:"category"}),o.jsx(to,{domain:[0,100]}),o.jsx(Nn,{formatter:m=>[`${m}%`,"Score"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid #e5e7eb",borderRadius:"8px"}}),o.jsx(Qc,{dataKey:"score",fill:"#22c55e",radius:[4,4,0,0]})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Certifications"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:s.certifications.map(m=>o.jsxs(ne,{variant:"outline",className:"border-green-200 text-green-700",children:[o.jsx(Kr,{className:"w-3 h-3 mr-1"}),m]},m))})]})]})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100",children:[o.jsx(ce,{className:"p-4 flex justify-center"})," "]})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg",children:"Performance Trend"})}),o.jsx(ce,{children:o.jsx(Pc,{width:"100%",height:150,children:o.jsxs(MA,{data:d,children:[o.jsx(Ei,{type:"monotone",dataKey:"score",stroke:"#22c55e",strokeWidth:3,dot:{fill:"#22c55e",strokeWidth:2,r:4}}),o.jsx(Nn,{formatter:m=>[`${m}%`,"Score"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid #e5e7eb",borderRadius:"8px"}})]})})})]}),o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg",children:"Key Initiatives"})}),o.jsx(ce,{children:o.jsx("ul",{className:"space-y-2",children:s.initiatives.map((m,g)=>o.jsxs("li",{className:"text-sm flex items-start space-x-2",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-1.5 flex-shrink-0"}),o.jsx("span",{children:m})]},g))})})]}),o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg",children:"Recent News"})}),o.jsx(ce,{children:o.jsx("ul",{className:"space-y-3",children:s.recentNews.map((m,g)=>o.jsx("li",{className:"text-sm p-2 bg-blue-50 rounded border-l-4 border-blue-400",children:m},g))})})]})]})]})]})},XMe=({product:t})=>{console.log("ProductAnalysis component rendered, product:",t);const[e,r]=E.useState("6months"),[n,i]=E.useState("overview"),{currentUser:s}=E.useContext(pC);if(E.useEffect(()=>{if(s&&t){const g=s.uid,v=Dce(Qce,`users/${g}/productAnalysis/${t.id}`);Lce(v,t).then(()=>{console.log(`Product analysis for ${t.name} saved successfully for user ${g}`)}).catch(y=>{console.error("Error saving product analysis:",y)})}},[s,t]),!t)return console.log("No product provided, showing empty state"),o.jsx(re,{className:"bg-white/95 backdrop-blur-sm border-slate-200/50 shadow-xl rounded-3xl overflow-hidden",children:o.jsxs(ce,{className:"p-12 text-center",children:[o.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-slate-100 to-gray-100 rounded-full flex items-center justify-center",children:o.jsx(Ta,{className:"w-12 h-12 text-slate-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-600 mb-3",children:"No Product Selected"}),o.jsx("p",{className:"text-slate-500 mb-6 max-w-md mx-auto",children:"Scan a product or search our database to see detailed sustainability analysis and insights."}),o.jsx(Q,{className:"bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 px-6 py-3 rounded-2xl",children:"Scan Product"})]})});console.log("Product data available, rendering full analysis");const l={"3months":[{month:"Mar",overall:t.sustainability.overall,carbon:t.sustainability.carbon,water:t.sustainability.water,waste:t.sustainability.waste,energy:t.sustainability.energy,ethics:t.sustainability.ethics},{month:"Apr",overall:t.sustainability.overall+1,carbon:t.sustainability.carbon+1,water:t.sustainability.water+1,waste:t.sustainability.waste+1,energy:t.sustainability.energy+1,ethics:t.sustainability.ethics+1},{month:"May",overall:t.sustainability.overall+2,carbon:t.sustainability.carbon+1,water:t.sustainability.water+2,waste:t.sustainability.waste+2,energy:t.sustainability.energy+2,ethics:t.sustainability.ethics+2}],"6months":[{month:"Jan",overall:t.sustainability.overall-5,carbon:t.sustainability.carbon-3,water:t.sustainability.water-3,waste:t.sustainability.waste-4,energy:t.sustainability.energy-3,ethics:t.sustainability.ethics-3},{month:"Feb",overall:t.sustainability.overall-4,carbon:t.sustainability.carbon-2,water:t.sustainability.water-2,waste:t.sustainability.waste-3,energy:t.sustainability.energy-2,ethics:t.sustainability.ethics-2},{month:"Mar",overall:t.sustainability.overall-2,carbon:t.sustainability.carbon-1,water:t.sustainability.water,waste:t.sustainability.waste-2,energy:t.sustainability.energy,ethics:t.sustainability.ethics},{month:"Apr",overall:t.sustainability.overall-1,carbon:t.sustainability.carbon,water:t.sustainability.water+1,waste:t.sustainability.waste-1,energy:t.sustainability.energy+1,ethics:t.sustainability.ethics+1},{month:"May",overall:t.sustainability.overall,carbon:t.sustainability.carbon+1,water:t.sustainability.water+2,waste:t.sustainability.waste,energy:t.sustainability.energy+2,ethics:t.sustainability.ethics+2},{month:"Jun",overall:t.sustainability.overall+1,carbon:t.sustainability.carbon+1,water:t.sustainability.water+2,waste:t.sustainability.waste+1,energy:t.sustainability.energy+2,ethics:t.sustainability.ethics+2}],"1year":[{month:"Jul 23",overall:t.sustainability.overall-9,carbon:t.sustainability.carbon-6,water:t.sustainability.water-7,waste:t.sustainability.waste-8,energy:t.sustainability.energy-6,ethics:t.sustainability.ethics-7},{month:"Aug 23",overall:t.sustainability.overall-8,carbon:t.sustainability.carbon-5,water:t.sustainability.water-6,waste:t.sustainability.waste-7,energy:t.sustainability.energy-5,ethics:t.sustainability.ethics-6},{month:"Sep 23",overall:t.sustainability.overall-7,carbon:t.sustainability.carbon-4,water:t.sustainability.water-5,waste:t.sustainability.waste-6,energy:t.sustainability.energy-4,ethics:t.sustainability.ethics-5},{month:"Oct 23",overall:t.sustainability.overall-6,carbon:t.sustainability.carbon-3,water:t.sustainability.water-4,waste:t.sustainability.waste-5,energy:t.sustainability.energy-3,ethics:t.sustainability.ethics-4},{month:"Nov 23",overall:t.sustainability.overall-5,carbon:t.sustainability.carbon-2,water:t.sustainability.water-3,waste:t.sustainability.waste-4,energy:t.sustainability.energy-2,ethics:t.sustainability.ethics-3},{month:"Dec 23",overall:t.sustainability.overall-4,carbon:t.sustainability.carbon-1,water:t.sustainability.water-2,waste:t.sustainability.waste-3,energy:t.sustainability.energy-1,ethics:t.sustainability.ethics-2},{month:"Jan 24",overall:t.sustainability.overall-3,carbon:t.sustainability.carbon,water:t.sustainability.water-1,waste:t.sustainability.waste-2,energy:t.sustainability.energy,ethics:t.sustainability.ethics-1},{month:"Feb 24",overall:t.sustainability.overall-2,carbon:t.sustainability.carbon+1,water:t.sustainability.water,waste:t.sustainability.waste-1,energy:t.sustainability.energy+1,ethics:t.sustainability.ethics},{month:"Mar 24",overall:t.sustainability.overall-1,carbon:t.sustainability.carbon+2,water:t.sustainability.water+1,waste:t.sustainability.waste,energy:t.sustainability.energy+2,ethics:t.sustainability.ethics+1},{month:"Apr 24",overall:t.sustainability.overall,carbon:t.sustainability.carbon+3,water:t.sustainability.water+2,waste:t.sustainability.waste+1,energy:t.sustainability.energy+3,ethics:t.sustainability.ethics+2},{month:"May 24",overall:t.sustainability.overall+1,carbon:t.sustainability.carbon+4,water:t.sustainability.water+3,waste:t.sustainability.waste+2,energy:t.sustainability.energy+4,ethics:t.sustainability.ethics+3},{month:"Jun 24",overall:t.sustainability.overall+2,carbon:t.sustainability.carbon+5,water:t.sustainability.water+4,waste:t.sustainability.waste+3,energy:t.sustainability.energy+5,ethics:t.sustainability.ethics+4}]}[e],c=[{subject:"Carbon",A:t.sustainability.carbon,fullMark:100},{subject:"Water",A:t.sustainability.water,fullMark:100},{subject:"Waste",A:t.sustainability.waste,fullMark:100},{subject:"Energy",A:t.sustainability.energy,fullMark:100},{subject:"Ethics",A:t.sustainability.ethics,fullMark:100}],h=$d.slice(0,4).map(g=>({name:g.brand,score:g.sustainabilityScore,trend:Math.random()>.5?`+${Math.floor(Math.random()*3)+1}`:`-${Math.floor(Math.random()*2)+1}`})),d=[{category:"Packaging",impact:"High",suggestion:t.packaging.recyclable?"Explore compostable packaging options":"Switch to recyclable packaging materials",potential:"+8 points",status:"recommended"},{category:"Supply Chain",impact:"Medium",suggestion:"Implement local sourcing for 40% of materials",potential:"+5 points",status:"in-progress"},{category:"Manufacturing",impact:"High",suggestion:t.energySource.includes("Renewable")?"Achieve 100% renewable energy":"Increase renewable energy usage to 80%",potential:"+12 points",status:"planned"},{category:"Transportation",impact:"Low",suggestion:"Optimize logistics routes and packaging density",potential:"+2 points",status:"completed"}],f=g=>{switch(g){case"completed":return o.jsx(Yt,{className:"w-4 h-4 text-green-500"});case"in-progress":return o.jsx(Zi,{className:"w-4 h-4 text-yellow-500"});case"planned":return o.jsx(Zi,{className:"w-4 h-4 text-blue-500"});default:return o.jsx(NY,{className:"w-4 h-4 text-gray-500"})}},m=g=>{switch(g){case"High":return"bg-red-100 text-red-700";case"Medium":return"bg-yellow-100 text-yellow-700";case"Low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-white/95 backdrop-blur-sm border-slate-200/50 shadow-xl rounded-3xl overflow-hidden",children:[o.jsx(je,{className:"pb-6 bg-gradient-to-r from-slate-50 to-gray-50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-slate-600 to-slate-700 rounded-2xl shadow-lg",children:o.jsx(vn,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsxs(Ce,{className:"text-2xl font-bold text-slate-800",children:["Deep Analysis: ",t.name]}),o.jsx("p",{className:"text-slate-600 mt-1",children:"Advanced sustainability insights powered by AI"})]})]}),o.jsx("div",{className:"flex space-x-2",children:["3months","6months","1year"].map(g=>o.jsx(Q,{variant:e===g?"default":"outline",size:"sm",onClick:()=>r(g),className:`rounded-xl ${e===g?"bg-slate-700 hover:bg-slate-800":"border-slate-300 hover:bg-slate-50"}`,children:g==="3months"?"3M":g==="6months"?"6M":"1Y"},g))})]})}),o.jsx(ce,{className:"p-6",children:o.jsxs(Jn,{value:n,onValueChange:i,className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-4 bg-slate-100 rounded-2xl p-1",children:[o.jsx(Xe,{value:"overview",className:"rounded-xl",children:"Overview"}),o.jsx(Xe,{value:"trends",className:"rounded-xl",children:"Trends"}),o.jsx(Xe,{value:"comparison",className:"rounded-xl",children:"Compare"}),o.jsx(Xe,{value:"insights",className:"rounded-xl",children:"AI Insights"})]}),o.jsxs(Oe,{value:"overview",className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"border-slate-200/50 shadow-md rounded-2xl",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg",children:"Multi-Factor Assessment"})}),o.jsx(ce,{children:o.jsx(Pc,{width:"100%",height:300,children:o.jsxs(KMe,{data:c,children:[o.jsx(cW,{stroke:"#e2e8f0"}),o.jsx(qh,{dataKey:"subject",className:"text-sm"}),o.jsx(Gh,{angle:30,domain:[0,100],tick:!1}),o.jsx(Pg,{name:"Score",dataKey:"A",stroke:"#0f172a",fill:"#0f172a",fillOpacity:.1,strokeWidth:3,dot:{fill:"#0f172a",strokeWidth:2,r:4}})]})})})]}),o.jsxs(re,{className:"border-slate-200/50 shadow-md rounded-2xl",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg",children:"Key Performance Indicators"})}),o.jsx(ce,{className:"space-y-4",children:Object.entries(t.sustainability).map(([g,v])=>{if(g==="overall")return null;let y=Zi;switch(g){case"carbon":y=dt;break;case"water":y=fi;break;case"waste":y=Zi;break;case"energy":y=Cr;break;case"ethics":y=ls;break}return o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200/50",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-xl flex items-center justify-center",children:o.jsx(y,{className:"w-5 h-5 text-white"})}),o.jsx("span",{className:"font-medium capitalize text-slate-800",children:g})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-slate-800",children:v}),o.jsx("div",{className:"text-xs text-slate-500",children:"Score"})]})]},g)})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"border-slate-200/50 shadow-md rounded-2xl",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg",children:"Product Information"})}),o.jsxs(ce,{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Brand:"}),o.jsx("span",{className:"font-medium",children:t.brand})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Category:"}),o.jsx("span",{className:"font-medium capitalize",children:t.category})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Origin:"}),o.jsx("span",{className:"font-medium",children:t.origin})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Price:"}),o.jsxs("span",{className:"font-medium",children:["$",t.price]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Rating:"}),o.jsxs("span",{className:"font-medium",children:[t.rating,"/5 (",t.reviews," reviews)"]})]})]})]}),o.jsxs(re,{className:"border-slate-200/50 shadow-md rounded-2xl",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg",children:"Environmental Impact"})}),o.jsxs(ce,{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Carbon Footprint:"}),o.jsx("span",{className:"font-medium",children:t.carbon})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Water Usage:"}),o.jsx("span",{className:"font-medium",children:t.water})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Packaging:"}),o.jsx("span",{className:"font-medium",children:t.packaging})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-slate-600",children:"Energy Source:"}),o.jsx("span",{className:"font-medium",children:t.energySource||"Mixed Grid"})]})]})]})]})]}),o.jsx(Oe,{value:"trends",className:"mt-6",children:o.jsxs(re,{className:"border-slate-200/50 shadow-md rounded-2xl",children:[o.jsx(je,{children:o.jsx(Ce,{children:"Sustainability Trends Over Time"})}),o.jsx(ce,{children:o.jsx(Pc,{width:"100%",height:400,children:o.jsxs(MA,{data:l,children:[o.jsx(Ig,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),o.jsx(eo,{dataKey:"month",className:"text-sm"}),o.jsx(to,{domain:[60,100],className:"text-sm"}),o.jsx(Nn,{formatter:(g,v)=>[`${g}%`,v],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e2e8f0",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)"}}),o.jsx(Ei,{type:"monotone",dataKey:"overall",stroke:"#0f172a",strokeWidth:4,name:"Overall",dot:{fill:"#0f172a",strokeWidth:2,r:6}}),o.jsx(Ei,{type:"monotone",dataKey:"carbon",stroke:"#22c55e",strokeWidth:3,name:"Carbon",dot:{fill:"#22c55e",strokeWidth:2,r:4}}),o.jsx(Ei,{type:"monotone",dataKey:"water",stroke:"#3b82f6",strokeWidth:3,name:"Water",dot:{fill:"#3b82f6",strokeWidth:2,r:4}}),o.jsx(Ei,{type:"monotone",dataKey:"energy",stroke:"#8b5cf6",strokeWidth:3,name:"Energy",dot:{fill:"#8b5cf6",strokeWidth:2,r:4}}),o.jsx(Ei,{type:"monotone",dataKey:"ethics",stroke:"#ef4444",strokeWidth:3,name:"Ethics",dot:{fill:"#ef4444",strokeWidth:2,r:4}})]})})})]})}),o.jsx(Oe,{value:"comparison",className:"mt-6",children:o.jsxs(re,{className:"border-slate-200/50 shadow-md rounded-2xl",children:[o.jsx(je,{children:o.jsx(Ce,{children:"Competitive Landscape"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsx("div",{className:"bg-slate-800 text-white border border-slate-700 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-lg",children:t.name}),o.jsx("span",{className:"text-slate-300 ml-2",children:"(Current Product)"})]}),o.jsx("div",{className:"text-2xl font-bold",children:t.sustainability.overall})]})}),h.map((g,v)=>o.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-xl hover:bg-slate-50 transition-colors",children:[o.jsx("span",{className:"font-medium text-slate-800",children:g.name}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:"text-xl font-bold text-slate-800",children:g.score}),o.jsx("span",{className:`text-sm px-2 py-1 rounded-lg ${g.trend.startsWith("+")?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:g.trend})]})]},v)),o.jsx("div",{className:"text-center pt-4",children:o.jsxs(ne,{className:`px-4 py-2 ${t.sustainability.overall>75?"bg-green-600 text-white":"bg-slate-800 text-white"}`,children:[o.jsx(vn,{className:"w-4 h-4 mr-2"}),t.sustainability.overall>75?"Above Industry Average":"Room for Improvement"]})})]})]})}),o.jsx(Oe,{value:"insights",className:"mt-6",children:o.jsxs(re,{className:"border-slate-200/50 shadow-md rounded-2xl",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(gd,{className:"w-5 h-5 text-amber-500"}),o.jsx("span",{children:"AI-Powered Improvement Recommendations"})]})}),o.jsx(ce,{className:"space-y-4",children:d.map((g,v)=>o.jsxs("div",{className:"border border-slate-200 rounded-xl p-5 space-y-3 hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[f(g.status),o.jsx("span",{className:"font-bold text-slate-800",children:g.category})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs(ne,{className:`text-xs ${m(g.impact)}`,children:[g.impact," Impact"]}),o.jsx("span",{className:"text-lg font-bold text-slate-700",children:g.potential})]})]}),o.jsx("p",{className:"text-slate-600 leading-relaxed",children:g.suggestion}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-100",children:[o.jsx("span",{className:"text-sm text-slate-500",children:"Expected timeframe: 2-4 weeks"}),o.jsx(Q,{size:"sm",className:"bg-slate-700 hover:bg-slate-800 rounded-xl",children:"Learn More"})]})]},v))})]})})]})})]}),o.jsxs(re,{className:"bg-white/95 backdrop-blur-sm border-slate-200/50 shadow-lg rounded-2xl",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(Ta,{className:"w-5 h-5 text-slate-600"}),o.jsx("span",{children:"Data Sources & Methodology"})]})}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"font-bold text-slate-800 flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 bg-slate-700 rounded-full"}),o.jsx("span",{children:"Data Sources"})]}),o.jsxs("ul",{className:"space-y-2 text-sm text-slate-600 ml-5",children:[o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{children:"Ecoinvent Database (LCA)"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{children:"GHG Protocol Standards"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{children:"EPA Environmental Data"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{children:"Company Sustainability Reports"})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"font-bold text-slate-800 flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full"}),o.jsx("span",{children:"AI Analysis Methods"})]}),o.jsxs("ul",{className:"space-y-2 text-sm text-slate-600 ml-5",children:[o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"w-4 h-4 text-blue-500"}),o.jsx("span",{children:"Lifecycle Assessment Modeling"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"w-4 h-4 text-blue-500"}),o.jsx("span",{children:"Supply Chain Impact Analysis"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"w-4 h-4 text-blue-500"}),o.jsx("span",{children:"Predictive Sustainability Scoring"})]}),o.jsxs("li",{className:"flex items-center space-x-2",children:[o.jsx(Yt,{className:"w-4 h-4 text-blue-500"}),o.jsx("span",{children:"Cross-Industry Benchmarking"})]})]})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-slate-50 border border-blue-200/50 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Zi,{className:"w-5 h-5 text-blue-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-slate-800",children:"Methodology Confidence: 94%"}),o.jsx("p",{className:"text-sm text-slate-600 mt-1 leading-relaxed",children:"Our AI models are trained on verified sustainability data from over 50,000 products. Scores are updated monthly and normalized across industries for accurate comparison."})]})]})})]})]})]})},Yw=()=>{const{addNotification:t}=Ya();return{addScanNotification:(d,f)=>{t({type:"achievement",title:"Product Scanned Successfully!",message:'You scanned "'+d+'" with a sustainability score of '+f+". Keep making eco-friendly choices!",read:!1,source:"scanner",actionable:!0,action:"View Analysis",icon:Kr})},addPurchaseNotification:d=>{t({type:"shopping",title:"Added to Cart!",message:'"'+d+'" has been added to your cart. Continue shopping for more eco-friendly products!',read:!1,source:"marketplace",actionable:!0,action:"View Cart",icon:fn})},addCourseCompletionNotification:d=>{t({type:"achievement",title:"Course Completed!",message:`Congratulations! You've completed "`+d+'". Your knowledge about sustainability is growing!',read:!1,source:"education",actionable:!0,action:"View Certificate",icon:Ho})},addCommunityNotification:d=>{t({type:"community",title:"Community Activity",message:d,read:!1,source:"community",actionable:!0,action:"View Community",icon:yr})},addCarbonSavingNotification:d=>{t({type:"environmental",title:"Carbon Footprint Reduced!",message:"Great job! You've saved approximately "+d+"kg of CO through your sustainable choices this week.",read:!1,source:"carbon",actionable:!0,action:"View Carbon Tracker",icon:dt})},addRecipeViewNotification:d=>{t({type:"suggestion",title:"Recipe Viewed!",message:'You viewed "'+d+'". Try cooking this sustainable recipe to reduce your environmental impact!',read:!1,source:"recipes",actionable:!0,action:"Start Cooking",icon:vr})},addAchievementNotification:d=>{t({type:"achievement",title:"New Achievement Unlocked!",message:`Congratulations! You've earned the "`+d+'" achievement. Keep up the great work!',read:!1,source:"achievements",actionable:!0,action:"View Achievements",icon:Kr})},addChallengeNotification:d=>{t({type:"challenge",title:"New Challenge Available!",message:'Join the "'+d+'" challenge and make a positive impact on the environment with the community!',read:!1,source:"challenges",actionable:!0,action:"Join Challenge",icon:Cr})},addRewardNotification:d=>{t({type:"reward",title:"Reward Redeemed!",message:'You have successfully redeemed the "'+d+'" reward. Enjoy your benefits!',read:!1,source:"rewards",actionable:!0,action:"View Rewards",icon:nm})},addGeneralNotification:(d,f,m="info")=>{t({type:m,title:d,message:f,read:!1,source:"general",actionable:!1,icon:Wo})}}},JMe=()=>{const[t,e]=E.useState(""),[r,n]=E.useState("all"),[i,s]=E.useState("score"),[a,l]=E.useState([]),[c,u]=E.useState(null),{addPoints:h}=Xn(),{toast:d}=Ks(),{currentUser:f}=wr(),{addToCart:m}=Ph(),{addPurchaseNotification:g}=Yw();E.useEffect(()=>{(async()=>{if(f){const T=gt(Ne,"users",f.uid,"favorites"),C=(await Sr(T)).docs.map(I=>(console.log("Favorite doc id:",I.id,"productId:",I.data().productId),I.data().productId));l(C)}})()},[f]);const v=(_,T="400x300")=>{const j={toothbrush:"photo-1607613009820-a29f7bb81c04",shampoo:"photo-1571019613454-1cb2f99b2d8b","body wash":"photo-1596462502278-27bfdc403348",deodorant:"photo-1522335789203-aabd1fc54bc9",comb:"photo-1559056199-641a0ac8b55e",almonds:"photo-1445282768818-cdb21eab8176",milk:"photo-1563636619-e9143da7973b",coffee:"photo-1497935586351-b67a49e012bf",granola:"photo-1571091718767-18b5b1457add","energy bar":"photo-1542838132-92c53300491e",charger:"photo-1593642632823-8f785ba67e45","phone case":"photo-1511707171634-5f897ff02aa9",speaker:"photo-1558618666-fcd25c85cd64",monitor:"photo-1527443224154-c4a3942d3acf","laptop stand":"photo-1587829138453-6d7ac2bec001","t-shirt":"photo-1521572163474-6864f9cf17ab",jeans:"photo-1542272604-787c3835535d",jacket:"photo-1551028719-00167b16eac5",hoodie:"photo-1556821840-3a9c6fcc9e5d",sneakers:"photo-1549298916-b41d501d3772",furniture:"photo-1586023492125-27b2c045efd7","garden light":"photo-1493663284031-b7e3aefcae8e",seeds:"photo-1416879595882-3373a0480b5b","compost bin":"photo-1560448204-e02f11c3d0e2","plant pot":"photo-1485955900006-10f4d324d411",lipstick:"photo-1596462502278-27bfdc403348",foundation:"photo-1522335789203-aabd1fc54bc9",mascara:"photo-1571019613454-1cb2f99b2d8b","brush set":"photo-1559056199-641a0ac8b55e",cleanser:"photo-1556228720-195a672e8a03","yoga mat":"photo-1544367567-0f2fcb009e0b","water bottle":"photo-1523362628745-0c100150b504",activewear:"photo-1506629905877-c8cd2259f81c",backpack:"photo-1553062407-98eeb64c6a62",ball:"photo-1571019613454-1cb2f99b2d8b","baby food":"photo-1560472354-b33ff0c44a43",toys:"photo-1558618666-fcd25c85cd64",diapers:"photo-1522335789203-aabd1fc54bc9","baby wash":"photo-1596462502278-27bfdc403348",blocks:"photo-1572021335469-31706a17aaef","car wash":"photo-1558618666-fcd25c85cd64","car charger":"photo-1593642632823-8f785ba67e45","floor mats":"photo-1511707171634-5f897ff02aa9","air freshener":"photo-1559056199-641a0ac8b55e","car cover":"photo-1522335789203-aabd1fc54bc9",notebook:"photo-1544716278-ca5e3f4abd8c","pen set":"photo-1455390582262-044cdead277a",calendar:"photo-1506905925346-21bda4d32df4",bookmark:"photo-1507003211169-0a1dd7228f2d",journal:"photo-1544716278-ca5e3f4abd8c",vitamins:"photo-1559757148-5c350d0d3c56","protein powder":"photo-1571019613454-1cb2f99b2d8b","yoga block":"photo-1544367567-0f2fcb009e0b","pill case":"photo-1559056199-641a0ac8b55e",tea:"photo-1558618666-fcd25c85cd64","cutting board":"photo-1556909114-f6e7ad7d3136","food storage":"photo-1558618666-fcd25c85cd64","dish soap":"photo-1596462502278-27bfdc403348",utensils:"photo-1556909114-f6e7ad7d3136",containers:"photo-1558618666-fcd25c85cd64",paper:"photo-1544716278-ca5e3f4abd8c",pen:"photo-1455390582262-044cdead277a",organizer:"photo-1506905925346-21bda4d32df4",eraser:"photo-1507003211169-0a1dd7228f2d",folders:"photo-1544716278-ca5e3f4abd8c","pet food":"photo-1548199973-03cce0bbc87b","pet toys":"photo-1601758228041-f3b2795255f1","pet shampoo":"photo-1596462502278-27bfdc403348","pet bed":"photo-1548199973-03cce0bbc87b",leash:"photo-1601758228041-f3b2795255f1",puzzle:"photo-1572021335469-31706a17aaef","building blocks":"photo-1572021335469-31706a17aaef",playdough:"photo-1558618666-fcd25c85cd64","board game":"photo-1606092195730-5d7b9af1efc5","stuffed animal":"photo-1558618666-fcd25c85cd64"},C=_.name.toLowerCase();let I=null;for(const[R,$]of Object.entries(j))if(C.includes(R)){I=$;break}return I||(I={"personal-care":"photo-1596462502278-27bfdc403348","food-beverage":"photo-1571091718767-18b5b1457add",electronics:"photo-1593642632823-8f785ba67e45",clothing:"photo-1521572163474-6864f9cf17ab","home-garden":"photo-1586023492125-27b2c045efd7","beauty-cosmetics":"photo-1556228720-195a672e8a03","sports-outdoor":"photo-1544367567-0f2fcb009e0b","baby-kids":"photo-1560472354-b33ff0c44a43",automotive:"photo-1558618666-fcd25c85cd64","books-media":"photo-1544716278-ca5e3f4abd8c","health-wellness":"photo-1559757148-5c350d0d3c56","kitchen-dining":"photo-1556909114-f6e7ad7d3136","office-supplies":"photo-1544716278-ca5e3f4abd8c","pet-supplies":"photo-1548199973-03cce0bbc87b","toys-games":"photo-1572021335469-31706a17aaef"}[_.category]||"photo-1560472354-b33ff0c44a43"),`https://images.unsplash.com/${I}?w=${T}&fit=crop`},x=(()=>{let _=$d.slice(0,100);return t&&(_=NC(t).slice(0,100)),r==="favorites"?_=_.filter(T=>a.includes(T.id.toString())):r!=="all"&&(_=_.filter(T=>T.category===r)),_.sort((T,j)=>{switch(i){case"price-low":return T.price-j.price;case"price-high":return j.price-T.price;case"rating":return j.rating-T.rating;case"score":return j.sustainabilityScore-T.sustainabilityScore;default:return 0}})})(),b=[{id:"all",label:"All Products",icon:fn,count:$d.length},{id:"favorites",label:"Favorites",icon:ls,count:a.length},{id:"personal-care",label:"Personal Care",icon:hr,count:Sf("personal-care").length},{id:"food-beverage",label:"Food & Beverage",icon:Kr,count:Sf("food-beverage").length},{id:"electronics",label:"Electronics",icon:dt,count:Sf("electronics").length},{id:"clothing",label:"Clothing",icon:Kn,count:Sf("clothing").length},{id:"home-garden",label:"Home & Garden",icon:ls,count:Sf("home-garden").length}],w=async _=>{if(!f){d({title:"Login Required",description:"Please log in to favorite products.",variant:"destructive"});return}gt(Ne,"users",f.uid,"favorites");const T=Re(Ne,"users",f.uid,"favorites",_.toString()),j=_.toString();a.includes(j)?(await L7(T),l(C=>C.filter(I=>I!==j))):(await Zt(T,{productId:j}),l(C=>[...C,j]),h(5),d({title:"Product Favorited!",description:"You earned 5 points for favoriting a product!"}),g("Product Favorited"))},k=_=>{const T=`Check out this sustainable product: ${_.name} by ${_.brand} - Sustainability Score: ${_.sustainabilityScore}`;navigator.share?navigator.share({title:_.name,text:T,url:window.location.href}).then(()=>{h(5),d({title:"Product Shared!",description:"You earned 5 points for sharing!"})}).catch(()=>{S(T)}):S(T)},S=_=>{navigator.clipboard&&navigator.clipboard.writeText(_).then(()=>{h(5),d({title:"Product Shared!",description:"Product link copied to clipboard! You earned 5 points!"})})},P=_=>{var R,$,z,W,M,F;const T=`
SUSTAINABILITY REPORT
Product: ${_.name}
Brand: ${_.brand}
Sustainability Score: ${_.sustainabilityScore}/100

ENVIRONMENTAL IMPACT:
${((R=_.detailedAnalysis)==null?void 0:R.environmentalImpact)||"No detailed analysis available"}

SOCIAL IMPACT:
${(($=_.detailedAnalysis)==null?void 0:$.socialImpact)||"No detailed analysis available"}

ECONOMIC IMPACT:
${((z=_.detailedAnalysis)==null?void 0:z.economicImpact)||"No detailed analysis available"}

Carbon Footprint: ${((W=_.carbonFootprint)==null?void 0:W.total)||"N/A"}
Water Usage: ${_.waterUsage||"N/A"}
Energy Source: ${_.energySource||"N/A"}
Materials: ${((M=_.materials)==null?void 0:M.join(", "))||"N/A"}
Certifications: ${((F=_.certifications)==null?void 0:F.join(", "))||"N/A"}
    `,j=new Blob([T],{type:"text/plain"}),C=URL.createObjectURL(j),I=document.createElement("a");I.href=C,I.download=`${_.name.replace(/[^a-zA-Z0-9]/g,"_")}_sustainability_report.txt`,I.click(),URL.revokeObjectURL(C),h(15),d({title:"Report Downloaded!",description:"You earned 15 points for downloading a sustainability report!"})},N=_=>_>=90?"bg-emerald-500 text-white":_>=80?"bg-green-500 text-white":_>=70?"bg-yellow-500 text-white":"bg-orange-500 text-white";return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 dark:from-background dark:to-background dark:border-border",children:[o.jsxs(je,{children:[o.jsxs(Ce,{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(fn,{className:"w-6 h-6 text-green-600 dark:text-foreground"}),o.jsx("span",{className:"dark:text-foreground",children:"Sustainability Marketplace"})]}),o.jsx("div",{className:"flex items-center space-x-2",children:o.jsxs(ne,{className:"bg-green-600 text-white dark:bg-primary dark:text-primary-foreground",children:[x.length," Products"]})})]}),o.jsx("p",{className:"text-gray-600 dark:text-muted-foreground",children:"Discover and purchase eco-friendly alternatives that make a difference"})]}),o.jsxs(ce,{children:[o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-muted-foreground w-4 h-4"}),o.jsx(st,{placeholder:"Search sustainable products...",value:t,onChange:_=>e(_.target.value),className:"pl-10 dark:bg-background dark:text-foreground"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{value:i,onChange:_=>s(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white text-sm dark:bg-background dark:border-border dark:text-foreground",children:[o.jsx("option",{value:"score",children:"Best Score"}),o.jsx("option",{value:"rating",children:"Highest Rated"}),o.jsx("option",{value:"price-low",children:"Price: Low to High"}),o.jsx("option",{value:"price-high",children:"Price: High to Low"})]}),o.jsxs(Q,{variant:"outline",className:"flex items-center space-x-2",children:[o.jsx(mh,{className:"w-4 h-4 dark:text-foreground"}),o.jsx("span",{className:"dark:text-foreground",children:"More Filters"})]})]})]}),o.jsx(Jn,{value:r,onValueChange:n,className:"mb-6",children:o.jsx(Zn,{className:"inline-flex h-10 items-center justify-start gap-x-4 rounded-md bg-muted p-1 text-muted-foreground dark:bg-muted dark:text-muted-foreground w-full",children:b.map(_=>o.jsxs(Xe,{value:_.id,className:"flex items-center space-x-1 text-xs px-3 py-1.5 dark:text-foreground",children:[o.jsx(_.icon,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:_.label}),o.jsx(ne,{variant:"outline",className:"text-xs px-1 dark:text-foreground",children:_.count})]},_.id))})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(_=>{var T,j;return o.jsxs(re,{className:"group hover:shadow-xl transition-all duration-300 hover:-translate-y-1 relative overflow-hidden dark:bg-card dark:border-border",children:[o.jsxs("div",{className:"relative overflow-hidden h-48 bg-gray-100 dark:bg-muted",children:[o.jsx("img",{src:v(_),alt:_.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:C=>{C.target.src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop"}}),o.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[o.jsx(ne,{className:N(_.sustainabilityScore),children:_.sustainabilityScore}),!_.inStock&&o.jsx(ne,{variant:"destructive",className:"text-xs",children:"Out of Stock"}),_.fastShipping&&_.inStock&&o.jsx(ne,{className:"bg-blue-500 text-white text-xs",children:"Fast Ship"})]}),o.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[o.jsx(Q,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 bg-white/90 hover:bg-white dark:bg-background dark:hover:bg-muted",onClick:async C=>{C.stopPropagation(),w(_.id)},children:o.jsx(ls,{className:`w-4 h-4 ${a.includes(_.id.toString())?"fill-red-500 text-red-500":"text-gray-500 dark:text-muted-foreground"}`})}),o.jsx(Q,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 bg-white/90 hover:bg-white dark:bg-background dark:hover:bg-muted",onClick:C=>{C.stopPropagation(),k(_)},children:o.jsx(ub,{className:"w-4 h-4 text-gray-500 dark:text-muted-foreground"})})]})]}),o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg group-hover:text-green-600 dark:group-hover:text-primary transition-colors line-clamp-2 dark:text-foreground",children:_.name}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-muted-foreground",children:_.brand}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1 dark:text-muted-foreground",children:["Made in ",_.origin]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((C,I)=>o.jsx(hr,{className:`w-4 h-4 ${I<Math.floor(_.rating)?"text-yellow-400 fill-current":"text-gray-300 dark:text-muted-foreground"}`},I))}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-muted-foreground",children:["(",_.reviews,")"]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[(T=_.features)==null?void 0:T.slice(0,3).map((C,I)=>o.jsx(ne,{variant:"outline",className:"text-xs dark:text-foreground",children:C},I)),((j=_.features)==null?void 0:j.length)>3&&o.jsxs(ne,{variant:"outline",className:"text-xs dark:text-foreground",children:["+",_.features.length-3," more"]})]}),o.jsx("div",{className:"bg-green-50 p-2 rounded-lg dark:bg-muted",children:o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-green-700 font-medium dark:text-foreground",children:"Environmental Impact:"}),o.jsxs("span",{className:"text-green-600 dark:text-foreground",children:[_.co2Saved," CO saved"]})]})}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("span",{className:"text-lg font-bold text-green-600 dark:text-primary",children:["$",_.price]}),_.originalPrice>_.price&&o.jsxs("span",{className:"text-sm text-gray-500 dark:text-muted-foreground line-through ml-2",children:["$",_.originalPrice]})]}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-muted-foreground",children:[Math.round((_.originalPrice-_.price)/_.originalPrice*100),"% off"]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx(Q,{className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 dark:from-primary dark:to-primary/90 dark:hover:from-primary/90 dark:hover:to-primary",onClick:()=>{m({id:_.id.toString(),name:_.name,price:_.price,image:v(_),brand:_.brand}),g(_.name)},disabled:!_.inStock,children:_.inStock?o.jsxs(o.Fragment,{children:[o.jsx(fn,{className:"w-4 h-4 mr-2"}),"Add to Cart"]}):"Out of Stock"}),o.jsxs(_C,{children:[o.jsx(rB,{asChild:!0,children:o.jsx(Q,{variant:"outline",size:"sm",className:"px-3",onClick:()=>u(_),children:o.jsx(sL,{className:"w-4 h-4 dark:text-foreground"})})}),o.jsxs(nw,{className:"max-w-4xl max-h-[80vh] overflow-y-auto dark:bg-background dark:text-foreground",children:[o.jsxs(iw,{children:[o.jsx(sw,{className:"dark:text-foreground",children:_.name}),o.jsx(SC,{className:"dark:text-muted-foreground",children:"Detailed sustainability analysis and product information"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("img",{src:v(_,"600x400"),alt:_.name,className:"w-full h-64 object-cover rounded-lg",onError:C=>{C.target.src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=600&h=400&fit=crop"}}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold dark:text-foreground",children:_.name}),o.jsx("p",{className:"text-gray-600 dark:text-muted-foreground",children:_.brand}),o.jsxs(ne,{className:N(_.sustainabilityScore),children:["Score: ",_.sustainabilityScore]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:"text-2xl font-bold text-green-600 dark:text-primary",children:["$",_.price]}),_.originalPrice>_.price&&o.jsxs("span",{className:"text-lg text-gray-500 dark:text-muted-foreground line-through",children:["$",_.originalPrice]})]}),o.jsx("p",{className:"text-gray-700 dark:text-foreground",children:_.description})]})]}),_.detailedAnalysis&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2 dark:text-foreground",children:"Environmental Impact"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-muted-foreground",children:_.detailedAnalysis.environmentalImpact})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2 dark:text-foreground",children:"Social Impact"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-muted-foreground",children:_.detailedAnalysis.socialImpact})]})]}),_.carbonFootprint&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2 dark:text-foreground",children:"Carbon Footprint"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm dark:text-muted-foreground",children:[o.jsxs("div",{children:["Production: ",_.carbonFootprint.production]}),o.jsxs("div",{children:["Transport: ",_.carbonFootprint.transport]}),o.jsxs("div",{children:["Total: ",_.carbonFootprint.total]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{className:"flex-1",onClick:()=>m({id:_.id.toString(),name:_.name,price:_.price,image:v(_),brand:_.brand}),disabled:!_.inStock,children:[o.jsx(fn,{className:"w-4 h-4 mr-2"}),"Add to Cart"]}),o.jsxs(Q,{variant:"outline",onClick:()=>P(_),children:[o.jsx(iL,{className:"w-4 h-4 mr-2"}),"Report"]})]})]})]})]})]})]})})]},_.id)})}),x.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center dark:bg-muted",children:o.jsx(Kn,{className:"w-12 h-12 text-gray-400 dark:text-muted-foreground"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-muted-foreground mb-2",children:"No products found"}),o.jsx("p",{className:"text-gray-500 dark:text-muted-foreground",children:"Try adjusting your search or filters"})]})]})]})})},Nm=E.forwardRef(({className:t,...e},r)=>o.jsx("textarea",{className:vt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Nm.displayName="Textarea";var DA="Avatar",[ZMe,W3e]=eg(DA),[e3e,mH]=ZMe(DA),pH=E.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[i,s]=E.useState("idle");return o.jsx(e3e,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:o.jsx(mt.span,{...n,ref:e})})});pH.displayName=DA;var gH="AvatarImage",yH=E.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...s}=t,a=mH(gH,r),l=t3e(n,s.referrerPolicy),c=Qn(u=>{i(u),a.onImageLoadingStatusChange(u)});return Bs(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(mt.img,{...s,ref:e,src:n}):null});yH.displayName=gH;var vH="AvatarFallback",xH=E.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...i}=t,s=mH(vH,r),[a,l]=E.useState(n===void 0);return E.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),a&&s.imageLoadingStatus!=="loaded"?o.jsx(mt.span,{...i,ref:e}):null});xH.displayName=vH;function t3e(t,e){const[r,n]=E.useState("idle");return Bs(()=>{if(!t){n("error");return}let i=!0;const s=new window.Image,a=l=>()=>{i&&n(l)};return n("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=t,e&&(s.referrerPolicy=e),()=>{i=!1}},[t,e]),r}var bH=pH,wH=yH,_H=xH;const Sj=E.forwardRef(({className:t,...e},r)=>o.jsx(bH,{ref:r,className:vt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Sj.displayName=bH.displayName;const kj=E.forwardRef(({className:t,...e},r)=>o.jsx(wH,{ref:r,className:vt("aspect-square h-full w-full",t),...e}));kj.displayName=wH.displayName;const Nj=E.forwardRef(({className:t,...e},r)=>o.jsx(_H,{ref:r,className:vt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Nj.displayName=_H.displayName;const SH=()=>{const{addCommunityNotification:t}=Yw(),[e,r]=E.useState("feed"),[n,i]=E.useState(""),[s,a]=E.useState("");E.useState(null);const[l,c]=E.useState(!1),[u,h]=E.useState([]),[d,f]=E.useState([]),[m,g]=E.useState([]),[v,y]=E.useState([]),[x,b]=E.useState({}),w={name:"You",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",points:1845,level:"Intermediate",totalScans:127,co2Saved:23.5,challengesCompleted:8,postsLiked:89,groupsJoined:5,eventsAttended:12};E.useEffect(()=>{b(u.reduce((M,F)=>({...M,[F.id]:""}),{}))},[u]),E.useEffect(()=>{h([{id:"post1",author:{name:"Sarah Green",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=40&h=40&fit=crop&crop=face",badge:"Eco Champion",level:"Expert"},content:"Just switched to a bamboo toothbrush and love it! Small changes make a big difference. What sustainable swaps have you made recently?",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop",timestamp:new Date(Date.now()-2*60*60*1e3).toISOString(),likes:24,comments:8,commentList:[{author:{name:"GreenGuru",avatar:"https://randomuser.me/api/portraits/men/32.jpg"},content:"Totally agree! Bamboo is a game-changer."},{author:{name:"EcoWarrior77",avatar:"https://randomuser.me/api/portraits/women/44.jpg"},content:"I switched to a reusable water bottle. Best decision!"}],shares:3,tags:["Zero Waste","Personal Care","Sustainability"],liked:!1,bookmarked:!1},{id:"post2",author:{name:"Mike Rodriguez",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",badge:"Solar Advocate",level:"Pro"},content:"Amazing to see so many active eco warriors! Keep up the great work everyone! ",image:"https://images.unsplash.com/photo-1509391366360-2e959784a276?w=400&h=300&fit=crop",timestamp:new Date(Date.now()-4*60*60*1e3).toISOString(),likes:67,comments:15,commentList:[{author:{name:"SustainableSam",avatar:"https://randomuser.me/api/portraits/men/55.jpg"},content:"Inspired by this community!"},{author:{name:"NatureLover",avatar:"https://randomuser.me/api/portraits/women/66.jpg"},content:"Keep up the good vibes!"}],shares:12,tags:["Community","Motivation"],liked:!0,bookmarked:!0},{id:"post3",author:{name:"Emma Thompson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face",badge:"Climate Activist",level:"Master"},content:"Celebrating 6 months of being car-free! Public transport + biking has saved me $2000 and reduced my carbon footprint significantly.",image:"https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=400&h=300&fit=crop",timestamp:new Date(Date.now()-6*60*60*1e3).toISOString(),likes:156,comments:34,commentList:[{author:{name:"UrbanCyclist",avatar:"https://randomuser.me/api/portraits/men/77.jpg"},content:"That's amazing! I'm trying to bike more too."},{author:{name:"TransitQueen",avatar:"https://randomuser.me/api/portraits/women/88.jpg"},content:"Public transport FTW!"}],shares:28,tags:["Transportation","Carbon Reduction","Money Saving"],liked:!1,bookmarked:!1},{id:"post4",author:{name:"Alex Chen",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",badge:"Green Builder",level:"Pro"},content:"Installed solar panels last month and they're already generating 40% of our home's energy! The installation process was smoother than expected.",image:"https://images.unsplash.com/photo-1509391366360-2e959784a276?w=400&h=300&fit=crop",timestamp:new Date(Date.now()-8*60*60*1e3).toISOString(),likes:89,comments:22,commentList:[{author:{name:"SolarUser",avatar:"https://randomuser.me/api/portraits/men/99.jpg"},content:"Considering solar for my home. Any tips?"},{author:{name:"GreenHome",avatar:"https://randomuser.me/api/portraits/women/11.jpg"},content:"Great to hear about your success!"}],shares:18,tags:["Solar Energy","Home Improvement","Renewable Energy"],liked:!0,bookmarked:!0},{id:"post5",author:{name:"Lisa Johnson",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=40&h=40&fit=crop&crop=face",badge:"Urban Farmer",level:"Expert"},content:"My rooftop garden is thriving! Growing 70% of my vegetables at home. Nothing beats the taste of homegrown tomatoes! ",image:"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=400&h=300&fit=crop",timestamp:new Date(Date.now()-12*60*60*1e3).toISOString(),likes:78,comments:19,commentList:[{author:{name:"GardenLife",avatar:"https://randomuser.me/api/portraits/men/22.jpg"},content:"My tomatoes are struggling. Any advice?"},{author:{name:"HomeGrown",avatar:"https://randomuser.me/api/portraits/women/33.jpg"},content:"Nothing better than fresh produce from your own garden!"}],shares:14,tags:["Urban Gardening","Food Security","Healthy Living"],liked:!1,bookmarked:!1},{id:"post6",author:{name:"David Park",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=40&h=40&fit=crop&crop=face",badge:"Waste Warrior",level:"Intermediate"},content:"Completed my first month of zero waste living! It's challenging but incredibly rewarding. My trash can was literally empty this week.",image:"https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?w=400&h=300&fit=crop",timestamp:new Date(Date.now()-16*60*60*1e3).toISOString(),likes:134,comments:41,commentList:[{author:{name:"ZeroWasteBeginner",avatar:"https://randomuser.me/api/portraits/men/44.jpg"},content:"This is my goal! So inspiring."},{author:{name:"ReduceReuseRecycle",avatar:"https://randomuser.me/api/portraits/women/55.jpg"},content:"Tell us your secrets!"}],shares:25,tags:["Zero Waste","Lifestyle Change","Minimalism"],liked:!0,bookmarked:!1},{id:"post7",author:{name:"Maria Garcia",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=40&h=40&fit=crop&crop=face",badge:"Eco Educator",level:"Master"},content:"Taught 50 kids about renewable energy today at the local school! Their enthusiasm for protecting the planet gives me so much hope. ",image:"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=400&h=300&fit=crop",timestamp:new Date(Date.now()-24*60*60*1e3).toISOString(),likes:201,comments:56,commentList:[{author:{name:"TeacherTina",avatar:"https://randomuser.me/api/portraits/women/66.jpg"},content:"Education is key! Thank you for doing this."},{author:{name:"FutureGen",avatar:"https://randomuser.me/api/portraits/men/77.jpg"},content:"The kids are our future!"}],shares:38,tags:["Education","Youth Engagement","Community Outreach"],liked:!1,bookmarked:!0},{id:"post8",author:{name:"James Wilson",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",badge:"Tech Innovator",level:"Pro"},content:"Just launched a new app that tracks your carbon footprint in real-time! Beta testing shows 23% reduction in emissions. Link in bio!",image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=300&fit=crop",timestamp:new Date(Date.now()-36*60*60*1e3).toISOString(),likes:167,comments:43,commentList:[{author:{name:"AppTester",avatar:"https://randomuser.me/api/portraits/men/88.jpg"},content:"Downloaded the app! Looks promising."},{author:{name:"DataGeek",avatar:"https://randomuser.me/api/portraits/women/99.jpg"},content:"Real-time tracking is a great feature."}],shares:52,tags:["Technology","Innovation","Carbon Tracking"],liked:!0,bookmarked:!0}]),f([{id:"group1",name:"Zero Waste Living",description:"Tips and tricks for reducing waste in daily life",members:12543,category:"Lifestyle",image:"https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?w=400&h=200&fit=crop",joined:!0,posts:1234,activity:"Very Active"},{id:"group2",name:"Renewable Energy Enthusiasts",description:"Discussing solar, wind, and other clean energy solutions",members:8967,category:"Energy",image:"https://images.unsplash.com/photo-1466611653911-95081537e5b7?w=400&h=200&fit=crop",joined:!1,posts:2345,activity:"Active"},{id:"group3",name:"Sustainable Fashion",description:"Ethical clothing choices and eco-friendly fashion",members:15678,category:"Fashion",image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=400&h=200&fit=crop",joined:!0,posts:3456,activity:"Very Active"},{id:"group4",name:"Urban Gardening",description:"Growing your own food in small spaces",members:9876,category:"Gardening",image:"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=400&h=200&fit=crop",joined:!1,posts:1876,activity:"Moderate"},{id:"group5",name:"Green Transportation",description:"Electric vehicles, public transport, and cycling advocacy",members:7432,category:"Transportation",image:"https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=400&h=200&fit=crop",joined:!0,posts:987,activity:"Active"},{id:"group6",name:"Climate Action Network",description:"Organizing for climate policy and environmental justice",members:11234,category:"Activism",image:"https://images.unsplash.com/photo-1569163139394-de4e4f43e4e3?w=400&h=200&fit=crop",joined:!1,posts:2876,activity:"Very Active"},{id:"group7",name:"Eco-Friendly Business",description:"Sustainable business practices and green entrepreneurship",members:5678,category:"Business",image:"https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?w=400&h=200&fit=crop",joined:!0,posts:1567,activity:"Active"},{id:"group8",name:"Plastic-Free Community",description:"Eliminating single-use plastics from our daily lives",members:13456,category:"Zero Waste",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=200&fit=crop",joined:!1,posts:2234,activity:"Very Active"}]),g([{id:"event1",title:"Community Solar Workshop",description:"Learn about community solar programs and how to join",date:"2024-07-15",time:"2:00 PM",location:"Community Center",attendees:45,maxAttendees:100,image:"https://images.unsplash.com/photo-1509391366360-2e959784a276?w=400&h=200&fit=crop",organizer:"Green Energy Group",registered:!1},{id:"event2",title:"Zero Waste Cooking Class",description:"Learn to cook delicious meals with minimal waste",date:"2024-07-20",time:"6:00 PM",location:"Eco Kitchen Studio",attendees:28,maxAttendees:30,image:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=200&fit=crop",organizer:"Zero Waste Community",registered:!0},{id:"event3",title:"Urban Farming Meetup",description:"Connect with local urban farmers and learn techniques",date:"2024-07-25",time:"10:00 AM",location:"City Park",attendees:67,maxAttendees:80,image:"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=400&h=200&fit=crop",organizer:"Urban Gardening Network",registered:!1},{id:"event4",title:"Climate Action Rally",description:"Join us for a peaceful rally demanding climate action",date:"2024-07-30",time:"12:00 PM",location:"City Hall",attendees:234,maxAttendees:500,image:"https://images.unsplash.com/photo-1569163139394-de4e4f43e4e3?w=400&h=200&fit=crop",organizer:"Climate Action Network",registered:!0},{id:"event5",title:"Sustainable Fashion Show",description:"Showcase of eco-friendly and ethically made clothing",date:"2024-08-05",time:"7:00 PM",location:"Fashion District",attendees:156,maxAttendees:200,image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=400&h=200&fit=crop",organizer:"Sustainable Fashion Collective",registered:!1},{id:"event6",title:"Electric Vehicle Expo",description:"Test drive the latest electric vehicles and learn about incentives",date:"2024-08-10",time:"9:00 AM",location:"Convention Center",attendees:89,maxAttendees:150,image:"https://images.unsplash.com/photo-1593941707882-a5bac6861d75?w=400&h=200&fit=crop",organizer:"Green Transportation Alliance",registered:!0},{id:"event7",title:"Plastic-Free Challenge Kickoff",description:"Start your journey to eliminate single-use plastics",date:"2024-08-15",time:"3:00 PM",location:"Environmental Center",attendees:78,maxAttendees:120,image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=200&fit=crop",organizer:"Plastic-Free Community",registered:!1},{id:"event8",title:"Green Building Workshop",description:"Learn about sustainable construction and renovation",date:"2024-08-20",time:"1:00 PM",location:"Eco Building Center",attendees:43,maxAttendees:60,image:"https://images.unsplash.com/photo-1503387762-592deb58ef4e?w=400&h=200&fit=crop",organizer:"Green Building Council",registered:!0}]),y([{id:"challenge1",title:"30-Day Plastic Free Challenge",description:"Eliminate single-use plastics for 30 days",participants:1234,duration:"30 days",difficulty:"Medium",reward:"500 Green Points",progress:65,joined:!0,category:"Zero Waste"},{id:"challenge2",title:"Energy Saver Week",description:"Reduce energy consumption by 20% for one week",participants:876,duration:"7 days",difficulty:"Easy",reward:"200 Green Points",progress:0,joined:!1,category:"Energy"},{id:"challenge3",title:"Bike to Work Month",description:"Use bicycle for daily commuting for a month",participants:543,duration:"30 days",difficulty:"Hard",reward:"800 Green Points",progress:23,joined:!0,category:"Transportation"},{id:"challenge4",title:"Meatless Monday Movement",description:"Go vegetarian every Monday for 3 months",participants:2156,duration:"12 weeks",difficulty:"Easy",reward:"300 Green Points",progress:45,joined:!0,category:"Food"},{id:"challenge5",title:"Solar Panel Installation",description:"Install solar panels on your home or business",participants:234,duration:"6 months",difficulty:"Hard",reward:"2000 Green Points",progress:0,joined:!1,category:"Energy"},{id:"challenge6",title:"Community Garden Volunteer",description:"Volunteer at local community gardens for 3 months",participants:789,duration:"12 weeks",difficulty:"Medium",reward:"600 Green Points",progress:78,joined:!0,category:"Gardening"},{id:"challenge7",title:"Water Conservation Hero",description:"Reduce water usage by 30% for 60 days",participants:1567,duration:"60 days",difficulty:"Medium",reward:"400 Green Points",progress:0,joined:!1,category:"Water"},{id:"challenge8",title:"Thrift Shopping Only",description:"Buy only secondhand items for 90 days",participants:934,duration:"90 days",difficulty:"Medium",reward:"700 Green Points",progress:12,joined:!0,category:"Fashion"}])},[]);const S=[...[{name:"Sarah Green",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=40&h=40&fit=crop&crop=face",basePoints:2500},{name:"Mike Rodriguez",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",basePoints:2300},{name:"Emma Thompson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face",basePoints:2100},{name:"Alex Chen",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",basePoints:1900},{name:"Lisa Johnson",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=40&h=40&fit=crop&crop=face",basePoints:1800}],{name:w.name,avatar:w.avatar,basePoints:w.points}].sort((B,J)=>J.basePoints-B.basePoints).map((B,J)=>({...B,rank:J+1,points:B.basePoints})),P=M=>{h(u.map(F=>F.id===M?{...F,liked:!F.liked,likes:F.liked?F.likes-1:F.likes+1}:F))},N=M=>{const F=x[M];F.trim()&&(h(u.map(B=>B.id===M?{...B,comments:B.comments+1,commentList:[...B.commentList||[],{author:w,content:F}]}:B)),b({...x,[M]:""}))},_=M=>{navigator.share?navigator.share({title:"Community Post",text:"Check out this post from our sustainability community!",url:window.location.href}):navigator.clipboard.writeText(window.location.href)},T=M=>{h(u.map(F=>F.id===M?{...F,bookmarked:!F.bookmarked}:F))},j=M=>{const F=d.find(B=>B.id===M);if(F){const B=!F.joined;t(`You have ${B?"joined":"left"} the group "${F.name}".`)}f(d.map(B=>B.id===M?{...B,joined:!B.joined,members:B.joined?B.members-1:B.members+1}:B))},C=M=>{const F=m.find(B=>B.id===M);if(F){const B=!F.registered;t(`You have ${B?"registered for":"unregistered from"} the event "${F.title}".`)}g(m.map(B=>B.id===M?{...B,registered:!B.registered,attendees:B.registered?B.attendees-1:B.attendees+1}:B))},I=M=>{const F=v.find(B=>B.id===M);if(F){const B=!F.joined;t(`You have ${B?"joined":"left"} the challenge "${F.title}".`)}y(v.map(B=>B.id===M?{...B,joined:!B.joined,participants:B.joined?B.participants-1:B.participants+1}:B))},R=()=>{if(!s.trim())return;const M={id:Date.now().toString(),author:{name:w.name,avatar:w.avatar,badge:"Community Member",level:w.level},content:s,image:null,timestamp:new Date().toISOString(),likes:0,comments:0,shares:0,tags:["Community"],liked:!1,bookmarked:!1};h([M,...u]),a(""),c(!1),t("A new post has been created in the Community Hub. Check it out!")},$=M=>{switch(M){case"Easy":return"bg-green-100 text-green-700";case"Medium":return"bg-yellow-100 text-yellow-700";case"Hard":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},z=M=>{switch(M){case"Very Active":return"bg-green-100 text-green-700";case"Active":return"bg-blue-100 text-blue-700";case"Moderate":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}},W=M=>{const F=new Date(M),J=new Date().getTime()-F.getTime(),U=Math.floor(J/(1e3*60*60));return U<1?"Just now":U<24?`${U} hour${U===1?"":"s"} ago`:`${Math.floor(U/24)} days ago`};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200 dark:from-background dark:to-background dark:border-border",children:[o.jsxs(je,{children:[o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(yr,{className:"w-6 h-6 text-green-600 dark:text-foreground"}),o.jsx("span",{className:"dark:text-foreground",children:"Community Hub"})]}),o.jsx("p",{className:"text-gray-600 dark:text-muted-foreground",children:"Connect, share, and grow with fellow sustainability champions"})]}),o.jsx(ce,{children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-muted-foreground w-4 h-4"}),o.jsx(st,{placeholder:"Search posts, groups, events...",value:n,onChange:M=>i(M.target.value),className:"pl-10 dark:bg-background dark:text-foreground"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{onClick:()=>c(!0),className:"bg-green-600 hover:bg-green-700 dark:bg-primary dark:hover:bg-primary/90",children:[o.jsx(es,{className:"w-4 h-4 mr-2"}),"Create Post"]}),o.jsx(Q,{variant:"outline",className:"dark:border-border dark:text-foreground dark:hover:bg-muted",children:o.jsx(mh,{className:"w-4 h-4 dark:text-foreground"})})]})]})})]}),l&&o.jsxs(re,{className:"bg-white border-blue-200 dark:bg-background dark:border-border",children:[o.jsx(je,{children:o.jsx(Ce,{className:"dark:text-foreground",children:"Create New Post"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsx(Nm,{placeholder:"Share your sustainability journey, tips, or questions...",value:s,onChange:M=>a(M.target.value),className:"min-h-[100px] dark:bg-background dark:text-foreground"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Q,{onClick:R,className:"bg-green-600 hover:bg-green-700 dark:bg-primary dark:hover:bg-primary/90",children:"Post"}),o.jsx(Q,{variant:"outline",onClick:()=>c(!1),className:"dark:border-border dark:text-foreground dark:hover:bg-muted",children:"Cancel"})]})]})]}),o.jsxs(Jn,{value:e,onValueChange:r,className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-5",children:[o.jsx(Xe,{value:"feed",className:"dark:text-foreground",children:"Feed"}),o.jsx(Xe,{value:"groups",className:"dark:text-foreground",children:"Groups"}),o.jsx(Xe,{value:"events",className:"dark:text-foreground",children:"Events"}),o.jsx(Xe,{value:"challenges",className:"dark:text-foreground",children:"Challenges"}),o.jsx(Xe,{value:"leaderboard",className:"dark:text-foreground",children:"Leaderboard"})]}),o.jsx(Oe,{value:"feed",children:o.jsx("div",{className:"space-y-4",children:u.filter(M=>M.content.toLowerCase().includes(n.toLowerCase())||M.author.name.toLowerCase().includes(n.toLowerCase())).map(M=>o.jsxs(re,{className:"hover:shadow-lg transition-shadow dark:bg-card dark:border-border",children:[o.jsx(je,{children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Sj,{children:[o.jsx(kj,{src:M.author.avatar,alt:M.author.name}),o.jsx(Nj,{children:M.author.name.charAt(0)})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold dark:text-foreground",children:M.author.name}),o.jsx(ne,{variant:"secondary",className:"text-xs dark:text-foreground",children:M.author.badge}),o.jsx(ne,{variant:"outline",className:"text-xs dark:text-foreground",children:M.author.level})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-muted-foreground",children:[o.jsx(qn,{className:"w-3 h-3"}),W(M.timestamp)]})]})]})}),o.jsxs(ce,{className:"space-y-3",children:[o.jsx("p",{className:"text-gray-700 dark:text-foreground",children:M.content}),M.image&&o.jsx("div",{className:"rounded-lg overflow-hidden",children:o.jsx("img",{src:M.image,alt:"Post content",className:"w-full h-64 object-cover"})}),o.jsx("div",{className:"flex flex-wrap gap-2",children:M.tags.map((F,B)=>o.jsx(ne,{variant:"outline",className:"text-xs dark:text-foreground",children:F},B))}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>P(M.id),className:M.liked?"text-red-500":"text-gray-600 dark:text-muted-foreground",children:[o.jsx(ls,{className:`w-4 h-4 mr-1 ${M.liked?"fill-current":""}`}),M.likes]}),o.jsxs(Q,{variant:"ghost",size:"sm",className:"text-gray-600 dark:text-muted-foreground",children:[o.jsx(Wm,{className:"w-4 h-4 mr-1"}),M.comments]}),o.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>_(M.id),className:"text-gray-600 dark:text-muted-foreground",children:[o.jsx(ub,{className:"w-4 h-4 mr-1"}),M.shares]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>T(M.id),className:M.bookmarked?"text-blue-500":"text-gray-600 dark:text-muted-foreground",children:o.jsx(wY,{className:"w-4 h-4"})})})]}),o.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[o.jsx(st,{placeholder:"Add a comment...",value:x[M.id]||"",onChange:F=>b({...x,[M.id]:F.target.value}),className:"flex-1 dark:bg-background dark:text-foreground"}),o.jsx(Q,{size:"sm",onClick:()=>N(M.id),children:"Comment"})]})]})]},M.id))})}),o.jsx(Oe,{value:"groups",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.filter(M=>M.name.toLowerCase().includes(n.toLowerCase())||M.description.toLowerCase().includes(n.toLowerCase())).map(M=>o.jsxs(re,{className:"hover:shadow-lg transition-shadow",children:[o.jsx("div",{className:"aspect-video overflow-hidden rounded-t-lg",children:o.jsx("img",{src:M.image,alt:M.name,className:"w-full h-full object-cover"})}),o.jsxs(je,{children:[o.jsx(Ce,{className:"text-lg",children:M.name}),o.jsx("p",{className:"text-sm text-gray-600",children:M.description})]}),o.jsxs(ce,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(yr,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{children:[M.members.toLocaleString()," members"]})]}),o.jsx(ne,{variant:"outline",className:"text-xs",children:M.category})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Wm,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{children:[M.posts.toLocaleString()," posts"]})]}),o.jsx(ne,{className:`text-xs ${z(M.activity)}`,children:M.activity})]}),o.jsx(Q,{onClick:()=>j(M.id),className:`w-full ${M.joined?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-green-600 text-white hover:bg-green-700"}`,children:M.joined?"Joined":"Join Group"})]})]},M.id))})}),o.jsx(Oe,{value:"events",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.filter(M=>M.title.toLowerCase().includes(n.toLowerCase())||M.description.toLowerCase().includes(n.toLowerCase())).map(M=>o.jsxs(re,{className:"hover:shadow-lg transition-shadow",children:[o.jsx("div",{className:"aspect-video overflow-hidden rounded-t-lg",children:o.jsx("img",{src:M.image,alt:M.title,className:"w-full h-full object-cover"})}),o.jsxs(je,{children:[o.jsx(Ce,{className:"text-lg",children:M.title}),o.jsx("p",{className:"text-sm text-gray-600",children:M.description})]}),o.jsxs(ce,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(os,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{children:M.date}),o.jsx(qn,{className:"w-4 h-4 text-gray-500 ml-2"}),o.jsx("span",{children:M.time})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(yd,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{children:M.location})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(yr,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{children:[M.attendees,"/",M.maxAttendees," attending"]})]}),o.jsx(ne,{variant:"outline",className:"text-xs",children:M.organizer})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${M.attendees/M.maxAttendees*100}%`}})}),o.jsx(Q,{onClick:()=>C(M.id),className:`w-full ${M.registered?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-600 text-white hover:bg-blue-700"}`,children:M.registered?"Registered":"Register"})]})]},M.id))})}),o.jsx(Oe,{value:"challenges",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.filter(M=>M.title.toLowerCase().includes(n.toLowerCase())||M.description.toLowerCase().includes(n.toLowerCase())).map(M=>o.jsxs(re,{className:"hover:shadow-lg transition-shadow",children:[o.jsxs(je,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ce,{className:"text-lg",children:M.title}),o.jsx(ne,{className:`text-xs ${$(M.difficulty)}`,children:M.difficulty})]}),o.jsx("p",{className:"text-sm text-gray-600",children:M.description})]}),o.jsxs(ce,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(yr,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{children:[M.participants.toLocaleString()," participants"]})]}),o.jsx(ne,{variant:"outline",className:"text-xs",children:M.category})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(qn,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{children:M.duration})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Kr,{className:"w-4 h-4 text-yellow-500"}),o.jsx("span",{children:M.reward})]})]}),M.joined&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:"Progress"}),o.jsxs("span",{children:[M.progress,"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${M.progress}%`}})})]}),o.jsx(Q,{onClick:()=>I(M.id),className:`w-full ${M.joined?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-purple-600 text-white hover:bg-purple-700"}`,children:M.joined?"Joined":"Join Challenge"})]})]},M.id))})}),o.jsx(Oe,{value:"leaderboard",children:o.jsx("div",{className:"space-y-4",children:o.jsxs(re,{children:[o.jsxs(je,{children:[o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(Us,{className:"w-5 h-5 text-yellow-500"}),"Community Leaderboard"]}),o.jsx("p",{className:"text-sm text-gray-600",children:"Top contributors this month"})]}),o.jsx(ce,{children:o.jsx("div",{className:"space-y-3",children:S.map((M,F)=>o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${M.name===w.name?"bg-green-50 border border-green-200":"bg-gray-50"}`,children:[o.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-white border",children:o.jsx("span",{className:`text-sm font-bold ${M.rank===1?"text-yellow-600":M.rank===2?"text-gray-600":M.rank===3?"text-amber-600":"text-gray-800"}`,children:M.rank})}),o.jsxs(Sj,{className:"w-10 h-10",children:[o.jsx(kj,{src:M.avatar,alt:M.name}),o.jsx(Nj,{children:M.name.charAt(0)})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold",children:M.name}),M.name===w.name&&o.jsx(ne,{variant:"default",className:"text-xs",children:"You"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx(hr,{className:"w-3 h-3 fill-current text-yellow-500"}),o.jsxs("span",{children:[M.points.toLocaleString()," points"]})]})]}),M.rank<=3&&o.jsxs("div",{className:"flex items-center",children:[M.rank===1&&o.jsx(Us,{className:"w-5 h-5 text-yellow-500"}),M.rank===2&&o.jsx(Kr,{className:"w-5 h-5 text-gray-500"}),M.rank===3&&o.jsx(Kr,{className:"w-5 h-5 text-amber-600"})]})]},F))})})]})})})]})]})},r3e=()=>{const{currentUser:t}=wr();Xn();const{addNotification:e}=Ya(),[r,n]=E.useState({category:"transport",amount:"",description:""}),i=[{id:"transport",label:"Transport",icon:zm,color:"blue"},{id:"energy",label:"Energy",icon:OY,color:"green"},{id:"food",label:"Food",icon:HY,color:"yellow"},{id:"shopping",label:"Shopping",icon:Qy,color:"red"},{id:"travel",label:"Travel",icon:$Y,color:"purple"}],[s,a]=E.useState([]);E.useEffect(()=>{if(!t){a([]);return}const m=gt(Ne,`users/${t.uid}/carbonEntries`),g=Nc(m,Od("timestamp","desc")),v=On(g,y=>{const x=y.docs.map(b=>{var w;return{id:b.id,category:b.data().category,amount:b.data().amount,description:b.data().description,date:((w=b.data().timestamp)==null?void 0:w.toDate().toISOString().split("T")[0])||""}});a(x)});return()=>v()},[t]);const l=async()=>{if(!t){console.log("User not authenticated. Cannot add entry.");return}if(r.amount&&r.description&&parseFloat(r.amount)>0){const m=gt(Ne,`users/${t.uid}/carbonEntries`);await Rd(m,{category:r.category,amount:parseFloat(r.amount),description:r.description,timestamp:Nv()}),n({category:"transport",amount:"",description:""}),e({type:"environmental",title:"New Carbon Entry Added",message:`Added ${r.amount} kg CO for ${r.category}.`,read:!1,source:"carbon",actionable:!1})}},c=()=>{if(s.length===0)return[{month:"This Month",emissions:0,target:2}];const m=s.reduce((g,v)=>{const y=new Date(v.date).toLocaleDateString("en",{month:"short"});return g[y]=(g[y]||0)+v.amount,g},{});return Object.entries(m).map(([g,v])=>({month:g,emissions:parseFloat(v.toFixed(2)),target:2}))},u=()=>{if(s.length===0)return[];const m=s.reduce((y,x)=>(y[x.category]=(y[x.category]||0)+x.amount,y),{}),g=Object.values(m).reduce((y,x)=>y+x,0),v=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"];return Object.entries(m).map(([y,x],b)=>{var w;return{name:((w=i.find(k=>k.id===y))==null?void 0:w.label)||y,value:Math.round(x/g*100),color:v[b%v.length]}})},h=c(),d=u(),f=()=>s.reduce((m,g)=>m+g.amount,0);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-slate-800 dark:to-slate-900 border-green-200 dark:border-slate-700",children:[o.jsxs(je,{children:[o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(dt,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),o.jsx("span",{className:"dark:text-slate-200",children:"Carbon Footprint Tracker"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor and reduce your environmental impact"})]}),o.jsx(ce,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-gray-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total CO Tracked"}),o.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[f().toFixed(1)," kg"]})]}),o.jsx(Xy,{className:"w-8 h-8 text-green-500 dark:text-green-400"})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-gray-200 dark:border-slate-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Entries"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.length})]}),o.jsx(vr,{className:"w-8 h-8 text-blue-500 dark:text-blue-400"})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-gray-200 dark:border-slate-700",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Carbon Entries"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:s.length})]})}),o.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-gray-200 dark:border-slate-700",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Points Earned"}),o.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:Math.floor(f()*10)})]})})]})})]}),o.jsxs(Jn,{defaultValue:"tracker",className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-3",children:[o.jsx(Xe,{value:"tracker",children:"Add Entry"}),o.jsx(Xe,{value:"overview",children:"Recent Activity"}),o.jsx(Xe,{value:"breakdown",children:"Breakdown"})]}),o.jsx(Oe,{value:"tracker",className:"space-y-4",children:o.jsxs(re,{className:"dark:bg-slate-800",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(SY,{className:"w-5 h-5"}),o.jsx("span",{children:"Add Carbon Emission Entry"})]})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"category",className:"dark:text-slate-200",children:"Category"}),o.jsx("div",{className:"grid grid-cols-5 gap-2 mt-2",children:i.map(m=>o.jsxs(Q,{variant:r.category===m.id?"default":"outline",className:"flex flex-col items-center p-3 h-auto",onClick:()=>n({...r,category:m.id}),children:[o.jsx(m.icon,{className:"w-5 h-5 mb-1"}),o.jsx("span",{className:"text-xs dark:text-slate-300",children:m.label})]},m.id))})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"amount",className:"dark:text-slate-200",children:"CO Amount (kg)"}),o.jsx(st,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:r.amount,onChange:m=>n({...r,amount:m.target.value}),className:"dark:bg-slate-800 dark:text-slate-300"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"description",className:"dark:text-slate-200",children:"Description"}),o.jsx(st,{id:"description",placeholder:"Describe the activity...",value:r.description,onChange:m=>n({...r,description:m.target.value}),className:"dark:bg-slate-800 dark:text-slate-300"})]}),o.jsx(Q,{onClick:l,className:"w-full dark:bg-blue-700 dark:hover:bg-blue-600 dark:text-white",children:"Add Entry"})]})]})}),o.jsx(Oe,{value:"overview",className:"space-y-4",children:s.length===0?o.jsx(re,{className:"dark:bg-slate-800",children:o.jsxs(ce,{className:"p-8 text-center",children:[o.jsx(dt,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No entries yet"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Start tracking your carbon footprint by adding your first entry!"})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"dark:bg-slate-800",children:[o.jsx(je,{children:o.jsx(Ce,{children:"Monthly Emissions"})}),o.jsx(ce,{children:o.jsx("div",{className:"h-64",children:o.jsx(Pc,{width:"100%",height:"100%",children:o.jsxs(MA,{data:h,children:[o.jsx(Ig,{strokeDasharray:"3 3"}),o.jsx(eo,{dataKey:"month"}),o.jsx(to,{}),o.jsx(Nn,{}),o.jsx(Ei,{type:"monotone",dataKey:"emissions",stroke:"#10b981",strokeWidth:3}),o.jsx(Ei,{type:"monotone",dataKey:"target",stroke:"#6b7280",strokeDasharray:"5 5"})]})})})})]}),d.length>0&&o.jsxs(re,{className:"hidden md:block dark:bg-slate-800",children:[" ",o.jsx(je,{children:o.jsx(Ce,{children:"Emissions by Category"})}),o.jsx(ce,{children:o.jsx("div",{className:"h-64",children:o.jsx(Pc,{width:"100%",height:"100%",children:o.jsxs(qMe,{children:[o.jsx(Za,{data:d,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:m,value:g})=>`${m}: ${g}%`,children:d.map((m,g)=>o.jsx(Cw,{fill:m.color},`cell-${g}`))}),o.jsx(Nn,{})]})})})})]})]}),o.jsxs(re,{className:"dark:bg-slate-800",children:[o.jsx(je,{children:o.jsx(Ce,{children:"Recent Activities"})}),o.jsx(ce,{children:o.jsx("div",{className:"space-y-3",children:s.slice(0,5).map(m=>{const g=i.find(v=>v.id===m.category);return o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-slate-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`p-2 rounded-full bg-${g==null?void 0:g.color}-100`,children:o.jsx(g.icon,{className:`w-4 h-4 text-${g==null?void 0:g.color}-600`})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium dark:text-slate-200",children:m.description}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m.date})]})]}),o.jsxs(ne,{variant:"outline",className:"dark:border-slate-600 dark:text-slate-300",children:[m.amount," kg CO"]})]},m.id)})})})]})]})}),o.jsx(Oe,{value:"breakdown",className:"space-y-4",children:s.length===0?o.jsx(re,{className:"dark:bg-slate-800",children:o.jsxs(ce,{className:"p-8 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No data to show"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Add some carbon entries to see your breakdown!"})]})}):o.jsxs(re,{className:"dark:bg-slate-800",children:[o.jsx(je,{children:o.jsx(Ce,{children:"Category Breakdown"})}),o.jsx(ce,{children:o.jsx("div",{className:"space-y-4",children:d.map((m,g)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-slate-700 rounded-lg",children:[o.jsx("span",{className:"font-medium dark:text-slate-200",children:m.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:m.color}}),o.jsxs("span",{children:[m.value,"%"]})]})]},g))})})]})})]})]})},kH=()=>{const{addScannedProduct:t,addPoints:e}=Xn(),{comparisonProducts:r,addProductToComparison:n,clearComparison:i}=uB(),{addPurchaseNotification:s}=Yw(),a=r,[l,c]=E.useState(""),[u,h]=E.useState(()=>gm(8)),[d,f]=E.useState(!1),[m,g]=E.useState("score"),v=j=>{const C=r.filter(I=>I.id!==j);i(),C.forEach(I=>n(I)),Ll({title:"Product Removed",description:"Product has been removed from comparison."})},y=j=>{if(r.length>=10){Ll({title:"Maximum Reached",description:"You can compare up to 10 products at a time.",variant:"destructive"});return}if(r.find(R=>R.id===String(j.id))){Ll({title:"Already Added",description:"This product is already in your comparison.",variant:"destructive"});return}const C=typeof j.sustainabilityScore=="number"?j.sustainabilityScore:0,I={id:j.id,name:j.name,brand:j.brand,price:j.price,sustainabilityScore:C,metrics:{carbon:Math.floor(C*.9+Math.random()*10-5),water:Math.floor(C*.95+Math.random()*10-5),waste:Math.floor(C*.85+Math.random()*10-5),energy:Math.floor(C*.92+Math.random()*10-5),ethics:Math.floor(C*1.05+Math.random()*10-5)},image:j.image,certifications:j.certifications.slice(0,3),pros:[j.vegan?"Vegan friendly":"Quality materials",j.packaging.recyclable?"Recyclable packaging":"Durable design","Good sustainability score"],cons:[j.price>50?"Higher price point":"Limited color options","Consider shipping impact"],rating:j.rating,reviews:j.reviews,inStock:j.inStock,features:j.features,category:j.category};n(I),t({id:j.id,date:new Date().toISOString(),name:j.name,brand:j.brand,sustainabilityScore:C,category:j.category,price:j.price,metrics:I.metrics,image:j.image,certifications:j.certifications.slice(0,3),pros:I.pros,cons:I.cons,rating:j.rating,reviews:j.reviews,inStock:j.inStock,features:j.features,source:"ProductComparison"}),e(5),Ll({title:"Product Added",description:`${j.name} has been added to comparison (+5 points!)`}),s(j.name)},x=async()=>{if(!l.trim()){h(gm(8));return}f(!0);try{await new Promise(C=>setTimeout(C,500));const j=NC(l);h(j.slice(0,12)),Ll({title:"Search Complete",description:`Found ${j.length} products matching "${l}"`})}catch{Ll({title:"Search Failed",description:"Unable to search products. Please try again.",variant:"destructive"})}finally{f(!1)}},b=j=>{switch(m){case"price":return[...j].sort((C,I)=>(C.price??0)-(I.price??0));case"rating":return[...j].sort((C,I)=>(I.rating??0)-(C.rating??0));case"score":default:return[...j].sort((C,I)=>(I.sustainabilityScore??0)-(C.sustainabilityScore??0))}},w=j=>j>=80?"text-green-600 dark:text-green-400":j>=60?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",k=j=>j>=80?"bg-green-100 dark:bg-green-900 border-green-200 dark:border-green-700":j>=60?"bg-yellow-100 dark:bg-yellow-900 border-yellow-200 dark:border-yellow-700":"bg-red-100 dark:bg-red-900 border-red-200 dark:border-red-700",S={carbon:dt,water:fi,waste:tg,energy:Cr,ethics:ls},P={carbon:"Carbon",water:"Water",waste:"Waste",energy:"Energy",ethics:"Ethics"},N=a.reduce((j,C)=>(C.sustainabilityScore??0)>((j==null?void 0:j.sustainabilityScore)??0)?C:j,null),_=a.length>0?Math.round(a.reduce((j,C)=>j+(C.sustainabilityScore??0),0)/a.length):0,T=a.length>0?{min:Math.min(...a.map(j=>Number(j.price??0))),max:Math.max(...a.map(j=>Number(j.price??0)))}:{min:0,max:0};return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-white/95 dark:bg-gray-900 backdrop-blur-sm border-purple-200/50 dark:border-purple-700 shadow-xl rounded-3xl overflow-hidden",children:[o.jsx(je,{className:"pb-6 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-gray-800 dark:to-gray-900",children:o.jsxs(Ce,{className:"flex items-center space-x-4 text-gray-800 dark:text-gray-200",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-blue-600 rounded-2xl shadow-lg",children:o.jsx(UP,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-2xl font-bold",children:"Smart Product Comparison"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 font-normal",children:"Compare sustainability scores and make informed choices"})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(ne,{variant:"secondary",className:"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 px-3 py-1 rounded-xl",children:[o.jsx(fa,{className:"w-4 h-4 mr-1"}),"AI Enhanced"]}),r.length>0&&o.jsx(Q,{variant:"outline",size:"sm",onClick:i,className:"rounded-xl border-red-300 dark:border-red-700 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900",children:"Clear All"})]})]})}),o.jsx(ce,{className:"p-6",children:o.jsxs(Jn,{defaultValue:"compare",className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-3 bg-gray-100 dark:bg-gray-800 rounded-2xl p-1",children:[o.jsx(Xe,{value:"compare",className:"rounded-xl",children:"Compare"}),o.jsx(Xe,{value:"search",className:"rounded-xl",children:"Add Products"}),o.jsx(Xe,{value:"insights",className:"rounded-xl",children:"AI Insights"})]}),o.jsx(Oe,{value:"compare",className:"mt-6",children:r.length>0?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-green-800 rounded-2xl border border-green-200/50 dark:border-green-700/50",children:[o.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:(N==null?void 0:N.sustainabilityScore)||0}),o.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Highest Score"}),N&&o.jsx("div",{className:"text-xs text-green-500 dark:text-green-400 mt-1",children:N.name})]}),o.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-blue-800 rounded-2xl border border-blue-200/50 dark:border-blue-700/50",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:r.length}),o.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Products"}),o.jsx("div",{className:"text-xs text-blue-500 dark:text-blue-400 mt-1",children:"Compared"})]}),o.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900 dark:to-pink-900 rounded-2xl border border-purple-200/50 dark:border-purple-700/50",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:_}),o.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Average Score"}),o.jsx("div",{className:"text-xs text-purple-500 dark:text-purple-400 mt-1",children:"Sustainability"})]}),o.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900 dark:to-red-900 rounded-2xl border border-orange-200/50 dark:border-orange-700/50",children:[o.jsxs("div",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:["$",T.min,"-$",T.max]}),o.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Price Range"}),o.jsx("div",{className:"text-xs text-orange-500 dark:text-orange-400 mt-1",children:"USD"})]})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Product Comparison"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),o.jsxs("select",{value:m,onChange:j=>g(j.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:[o.jsx("option",{value:"score",children:"Sustainability Score"}),o.jsx("option",{value:"price",children:"Price"}),o.jsx("option",{value:"rating",children:"Rating"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b(r).map(j=>{var C,I;return o.jsxs(re,{className:`relative border-2 hover:border-purple-300 transition-all duration-200 rounded-2xl overflow-hidden shadow-lg ${(N==null?void 0:N.id)===j.id?"border-green-400 ring-2 ring-green-200":"border-gray-200 dark:border-gray-700"}`,children:[o.jsx(Q,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-8 w-8 p-0 rounded-full bg-white/80 dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900 z-10",onClick:()=>v(j.id),children:o.jsx(rg,{className:"w-4 h-4 text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400"})}),(N==null?void 0:N.id)===j.id&&o.jsx("div",{className:"absolute top-2 left-2 z-10",children:o.jsxs(ne,{className:"bg-green-600 text-white",children:[o.jsx(Kr,{className:"w-3 h-3 mr-1"}),"Best Choice"]})}),o.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[o.jsx("img",{src:j.image,alt:j.name,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),j.inStock&&o.jsx(ne,{className:"absolute bottom-2 left-2 bg-green-600 text-white",children:"In Stock"}),o.jsx("div",{className:"absolute bottom-2 right-2",children:o.jsx(ne,{className:`${k(j.sustainabilityScore)} text-gray-800 dark:text-gray-200 border-0 font-bold`,children:j.sustainabilityScore})})]}),o.jsxs(ce,{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:j.name}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.brand}),o.jsxs("p",{className:"text-xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:["$",j.price]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-1",children:[o.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((R,$)=>o.jsx(hr,{className:`w-4 h-4 ${$<Math.floor(j.rating)?"fill-current":"fill-gray-200"}`},$))}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",j.reviews,")"]})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`text-4xl font-bold mb-2 ${w(j.sustainabilityScore)}`,children:j.sustainabilityScore}),o.jsx(ne,{className:`${k(j.sustainabilityScore)} text-gray-800 dark:text-gray-200 border-0`,children:j.sustainabilityScore>=80?"Excellent":j.sustainabilityScore>=60?"Good":"Poor"})]}),o.jsx("div",{className:"space-y-3",children:Object.entries(j.metrics||{}).map(([R,$])=>{const z=S[R],M=Math.max(0,Math.min(100,typeof $=="number"?$:0));return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:o.jsx(z,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),o.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:P[R]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full ${M>=80?"bg-green-500":M>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${M}%`}})}),o.jsx("span",{className:"text-sm font-bold w-8 text-right text-gray-800 dark:text-gray-200",children:M})]})]},R)})}),j.certifications&&j.certifications.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium mb-2 text-gray-800 dark:text-gray-200",children:"Certifications"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:j.certifications.map((R,$)=>o.jsx(ne,{variant:"outline",className:"text-xs border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200",children:R},$))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2 flex items-center",children:[o.jsx(Yt,{className:"w-4 h-4 mr-1 min-w-[1rem]"}),"Pros"]}),(C=j.pros)==null?void 0:C.slice(0,2).map((R,$)=>o.jsxs("div",{className:"flex items-start space-x-2 mb-1 text-gray-700 dark:text-gray-300",children:[o.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2"}),o.jsx("span",{className:"text-xs",children:R})]},$))]}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2 flex items-center",children:[o.jsx(Zi,{className:"w-4 h-4 mr-1 min-w-[1rem]"}),"Cons"]}),(I=j.cons)==null?void 0:I.slice(0,2).map((R,$)=>o.jsxs("div",{className:"flex items-start space-x-2 mb-1 text-gray-700 dark:text-gray-300",children:[o.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-2"}),o.jsx("span",{className:"text-xs",children:R})]},$))]})]})]})]},j.id)})})]}):o.jsx(re,{className:"border-dashed border-2 border-gray-300 dark:border-gray-700 rounded-2xl",children:o.jsxs(ce,{className:"text-center py-12",children:[o.jsx(UP,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-gray-600 dark:text-gray-400 mb-2",children:"No Products to Compare"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Add products to start comparing their sustainability scores"}),o.jsx(Q,{onClick:()=>{gm(2).forEach(C=>y(C))},className:"bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 rounded-xl",children:"Add Sample Products"})]})})}),o.jsx(Oe,{value:"search",className:"mt-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-4 h-4"}),o.jsx(st,{placeholder:"Search for products to compare...",value:l,onChange:j=>c(j.target.value),onKeyDown:j=>j.key==="Enter"&&x(),className:"pl-10 border-gray-300 dark:border-gray-600 focus:border-purple-400 h-12 rounded-2xl bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",disabled:d})]}),o.jsx(Q,{onClick:x,disabled:d,className:"bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 rounded-xl px-6",children:d?"Searching...":"Search"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[u.length," products available  ",r.length,"/4 selected"]}),r.length>=4&&o.jsx(ne,{variant:"outline",className:"text-amber-600 border-amber-300 dark:text-amber-400 dark:border-amber-600",children:"Maximum reached"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.filter(j=>!r.find(C=>C.id===String(j.id))).slice(0,9).map(j=>o.jsx(re,{className:"hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("img",{src:j.image,alt:j.name,className:"w-16 h-16 object-cover rounded-xl"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200 truncate",children:j.name}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:[j.brand,"  $",j.price]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[o.jsx(ne,{className:`${k(j.sustainabilityScore)} text-gray-800 dark:text-gray-200 border-0 text-xs`,children:j.sustainabilityScore}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Score"}),o.jsx("div",{className:"flex text-yellow-400",children:[...Array(Math.floor(j.rating))].map((C,I)=>o.jsx(hr,{className:"w-3 h-3 fill-current"},I))})]})]}),o.jsx(Q,{size:"sm",onClick:()=>y(j),disabled:r.length>=10,className:"bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 rounded-xl disabled:opacity-50",children:o.jsx(es,{className:"w-4 h-4"})})]})})},j.id))}),u.filter(j=>!r.find(C=>C.id===String(j.id))).length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Kn,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No new products to add. All available products are already in your comparison."})]})]})}),o.jsx(Oe,{value:"insights",className:"mt-6",children:o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"border-purple-200 dark:border-purple-700 rounded-2xl",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2 text-gray-800 dark:text-gray-200",children:[o.jsx(gd,{className:"w-5 h-5 text-amber-500 dark:text-amber-400"}),o.jsx("span",{children:"AI Comparison Insights"})]})}),o.jsx(ce,{className:"space-y-4",children:r.length>1?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900 border border-green-200 dark:border-green-700 rounded-xl",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Yt,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-green-800 dark:text-green-300",children:"Best Overall Choice"}),o.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:[N==null?void 0:N.name," scores highest with ",N==null?void 0:N.sustainabilityScore,"/100, offering the best balance of sustainability and value.",N&&Number(N.price??0)<=Number(_)&&" Plus, it's competitively priced!"]})]})]})}),o.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-xl",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(vn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Market Analysis"}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:["Price range: $",T.min," - $",T.max,". Average sustainability score: ",_,"/100.",_>=75?"You're comparing high-quality sustainable products!":"Consider looking for higher-rated alternatives."]})]})]})}),o.jsx("div",{className:"p-4 bg-purple-50 dark:bg-purple-900 border border-purple-200 dark:border-purple-700 rounded-xl",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(hr,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-purple-800 dark:text-purple-300",children:"Personalized Recommendation"}),o.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-400 mt-1",children:["Based on your comparison pattern, you value sustainability over price.",N&&`${N.name} aligns perfectly with your preferences.`,"Consider checking for local availability to reduce shipping impact."]})]})]})}),r.length>2&&o.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900 border border-amber-200 dark:border-amber-700 rounded-xl",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Zi,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-300",children:"Key Differences"}),o.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-400 mt-1 space-y-1",children:[o.jsxs("p",{children:[" Highest carbon efficiency: ",a.reduce((j,C)=>{var I,R;return(((I=C.metrics)==null?void 0:I.carbon)??0)>(((R=j.metrics)==null?void 0:R.carbon)??0)?C:j},a[0]).name]}),o.jsxs("p",{children:[" Best water conservation: ",a.reduce((j,C)=>{var I,R;return(((I=C.metrics)==null?void 0:I.water)??0)>(((R=j.metrics)==null?void 0:R.water)??0)?C:j},a[0]).name]}),o.jsxs("p",{children:[" Most affordable: ",a.length>0?a.reduce((j,C)=>Number(C.price??0)<Number(j.price??0)?C:j,a[0]).name:"N/A"," ($",a.length>0?a.reduce((j,C)=>Number(C.price??0)<Number(j.price??0)?C:j,a[0]).price:"N/A",")"]})]})]})]})})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(gd,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Add more products to see AI-powered comparison insights."})]})})]})})})]})})]})})},NH=()=>{const{addNotification:t}=Ya();return{addScanNotification:(h,d)=>{t({type:"achievement",title:"Product Scanned Successfully!",message:'You scanned "'+h+'" with a sustainability score of '+d+". Keep making eco-friendly choices!",read:!1,source:"scanner",actionable:!0,action:"View Analysis",icon:Kr})},addPurchaseNotification:h=>{t({type:"shopping",title:"Added to Cart!",message:'"'+h+'" has been added to your cart. Continue shopping for more eco-friendly products!',read:!1,source:"marketplace",actionable:!0,action:"View Cart",icon:fn})},addCourseCompletionNotification:h=>{t({type:"achievement",title:"Course Completed!",message:`Congratulations! You've completed "`+h+'". Your knowledge about sustainability is growing!',read:!1,source:"education",actionable:!0,action:"View Certificate",icon:Ho})},addCommunityNotification:h=>{t({type:"community",title:"Community Activity",message:h,read:!1,source:"community",actionable:!0,action:"View Community",icon:yr})},addCarbonSavingNotification:h=>{t({type:"environmental",title:"Carbon Footprint Reduced!",message:"Great job! You've saved approximately "+h+"kg of CO through your sustainable choices this week.",read:!1,source:"carbon",actionable:!0,action:"View Carbon Tracker",icon:dt})},addRecipeViewNotification:h=>{t({type:"suggestion",title:"Recipe Viewed!",message:'You viewed "'+h+'". Try cooking this sustainable recipe to reduce your environmental impact!',read:!1,source:"recipes",actionable:!0,action:"Start Cooking",icon:vr})},addAchievementNotification:h=>{t({type:"achievement",title:"New Achievement Unlocked!",message:`Congratulations! You've earned the "`+h+'" achievement. Keep up the great work!',read:!1,source:"achievements",actionable:!0,action:"View Achievements",icon:Kr})},addChallengeNotification:h=>{t({type:"challenge",title:"New Challenge Available!",message:'Join the "'+h+'" challenge and make a positive impact on the environment with the community!',read:!1,source:"challenges",actionable:!0,action:"Join Challenge",icon:Cr})},addGeneralNotification:(h,d,f="info")=>{t({type:f,title:h,message:d,read:!1,source:"general",actionable:!1,icon:Wo})}}},n3e=()=>{var ue,ge,K;const[t,e]=E.useState(""),[r,n]=E.useState("all"),[i,s]=E.useState(null),[a,l]=E.useState(null),[c,u]=E.useState(null),{enrolledCourses:h,courseProgress:d,enrollInCourse:f,updateCourseProgress:m,userStats:g,incrementCourseCompleted:v,incrementRecipeViewed:y}=Xn(),{addCourseCompletionNotification:x,addRecipeViewNotification:b,addGeneralNotification:w}=NH(),{likedArticles:k,bookmarkedArticles:S,registeredWebinars:P,likeArticle:N,bookmarkArticle:_,registerWebinar:T}=Xn(),{toast:j}=Ks(),[C,I]=E.useState(!1),R=[{id:1,title:"Sustainable Living Basics",description:"Learn the fundamentals of eco-friendly lifestyle choices",duration:"2 hours",level:"Beginner",rating:4.8,students:1234,category:"lifestyle",thumbnail:"https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?w=400",lessons:8,instructor:"Dr. Sarah Green",price:"Free",content:[{title:"Introduction to Sustainable Living",duration:"15 min",completed:!1},{title:"Energy Conservation at Home",duration:"20 min",completed:!1},{title:"Waste Reduction Strategies",duration:"18 min",completed:!1},{title:"Sustainable Transportation",duration:"22 min",completed:!1},{title:"Green Shopping Guide",duration:"16 min",completed:!1},{title:"Water Conservation Tips",duration:"14 min",completed:!1},{title:"Eco-Friendly Diet Choices",duration:"19 min",completed:!1},{title:"Building Sustainable Habits",duration:"21 min",completed:!1}],skills:["Waste Reduction","Energy Efficiency","Sustainable Shopping","Green Living"]},{id:2,title:"Carbon Footprint Reduction",description:"Advanced strategies to minimize your environmental impact",duration:"3 hours",level:"Intermediate",rating:4.9,students:892,category:"carbon",thumbnail:"https://images.unsplash.com/photo-1569163139394-de4e4f43e4e3?w=400",lessons:12,instructor:"Prof. Mike Johnson",price:"$29",content:[{title:"Understanding Carbon Footprints",duration:"25 min",completed:!1},{title:"Home Energy Audits",duration:"30 min",completed:!1},{title:"Transportation Choices",duration:"28 min",completed:!1},{title:"Renewable Energy Options",duration:"35 min",completed:!1},{title:"Carbon Offset Programs",duration:"22 min",completed:!1},{title:"Business Carbon Strategies",duration:"40 min",completed:!1}],skills:["Carbon Calculation","Energy Auditing","Renewable Energy","Carbon Offsetting"]},{id:3,title:"Sustainable Business Practices",description:"How to implement green practices in your organization",duration:"4 hours",level:"Advanced",rating:4.7,students:567,category:"business",thumbnail:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400",lessons:15,instructor:"Dr. Emma Wilson",price:"$49",content:[{title:"Sustainability in Business Strategy",duration:"45 min",completed:!1},{title:"Green Supply Chain Management",duration:"50 min",completed:!1},{title:"Sustainable Marketing",duration:"40 min",completed:!1}],skills:["Green Strategy","Supply Chain","Sustainable Marketing","ESG Reporting"]}],$=[{id:1,title:"10 Simple Ways to Reduce Plastic Waste",excerpt:"Practical tips for eliminating single-use plastics from your daily routine",readTime:"5 min read",author:"Dr. Sarah Green",category:"waste-reduction",image:"https://images.unsplash.com/photo-1583183416581-c9b803aa1149?w=400",tags:["Plastic","Zero Waste","DIY"],likes:234,comments:45,publishDate:"2024-06-15",content:`Plastic waste is one of the biggest environmental challenges we face today. Here are 10 practical ways to reduce your plastic consumption:
        
1. **Use reusable bags for shopping** - Keep cloth or canvas bags handy for grocery trips
2. **Carry a refillable water bottle** - Invest in a quality stainless steel or glass bottle
3. **Choose products with minimal packaging** - Opt for bulk items or products with recyclable packaging
4. **Use glass containers for food storage** - Replace plastic containers with glass alternatives
5. **Avoid single-use utensils and straws** - Carry your own reusable utensils

Making these small changes can significantly impact the environment while saving you money.`},{id:2,title:"The Hidden Environmental Cost of Fast Fashion",excerpt:"Understanding the true impact of clothing consumption on our planet",readTime:"8 min read",author:"Emma Thompson",category:"fashion",image:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=400",tags:["Fashion","Sustainability","Ethics"],likes:567,comments:89,publishDate:"2024-06-10",content:`Fast fashion has revolutionized how we consume clothing, but at what cost to our environment?
        
**The Scale of the Problem**
The fashion industry is the second-largest polluter globally, responsible for 10% of global carbon emissions.

**What You Can Do:**
- Buy fewer, higher-quality items
- Choose sustainable brands
- Thrift and swap clothes
- Care for clothes properly to extend their life`}],z=[{id:1,title:"Climate Action: What Individuals Can Do",speaker:"Dr. Climate Expert",date:"2024-07-20",time:"2:00 PM EST",duration:"1 hour",attendees:342,maxAttendees:500,status:"upcoming",thumbnail:"https://images.unsplash.com/photo-1611273426858-450d8e3c9fce?w=400",description:"Learn practical strategies for individual climate action and how small changes can make a big difference.",topics:["Personal Carbon Footprint","Sustainable Living","Climate Advocacy","Green Technology"],price:"Free"},{id:2,title:"Green Investing: ESG Funds Explained",speaker:"Finance Pro Sarah Johnson",date:"2024-06-18",time:"3:00 PM EST",duration:"45 minutes",attendees:156,maxAttendees:200,status:"recorded",thumbnail:"https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=400",description:"Understand how to invest in environmentally responsible funds and make your money work for the planet.",topics:["ESG Investing","Green Bonds","Sustainable Funds","Impact Investing"],price:"Free"}],W=[{id:1,name:"Course Completion Badge",earned:g.coursesCompleted>=1,description:"Complete your first course"},{id:2,name:"Sustainability Advocate",earned:g.coursesCompleted>=2,description:"Complete 2 courses"},{id:3,name:"Carbon Warrior",earned:g.coursesCompleted>=3,description:"Complete the Carbon Footprint course"},{id:4,name:"Eco Expert",earned:g.coursesCompleted>=5,description:"Complete 5 courses"},{id:5,name:"Knowledge Seeker",earned:g.recipesViewed>=10,description:"Read 10 articles"},{id:6,name:"Community Learner",earned:P.size>0,description:"Attend your first webinar"}],M=[{id:"all",label:"All Topics"},{id:"lifestyle",label:"Lifestyle"},{id:"carbon",label:"Carbon"},{id:"business",label:"Business"},{id:"energy",label:"Energy"},{id:"waste-reduction",label:"Waste"},{id:"fashion",label:"Fashion"}],F=G=>{f(G);const he=R.find(_e=>_e.id===G);he&&(w("Course Enrollment",`You've successfully enrolled in "${he.title}". Start learning now!`,"achievement"),j({title:"Enrollment Successful!",description:`You've been enrolled in ${he.title}. Start learning now!`}))},B=G=>{s(G),h.has(G.id)||F(G.id)},J=(G,he)=>{I(!0),setTimeout(()=>{I(!1);const _e=d.get(he)||0,qe=R.find(me=>me.id===he),Kt=Math.min(_e+100/((qe==null?void 0:qe.lessons)||8),100);m(he,Kt),Kt===100?(v(),console.log("incrementCourseCompleted called"),x((qe==null?void 0:qe.title)||"Course"),j({title:"Course Completed! ",description:"Congratulations! You've completed the course and earned a new badge."})):j({title:"Lesson Complete",description:`Great job completing "${G.title}"! Continue to the next lesson.`})},2e3)},U=G=>{const he=$.find(_e=>_e.id===G);k.has(G)?(N(G),j({title:"Like Removed",description:"Article removed from your liked articles."})):(N(G),he&&(b(he.title),y(),console.log("incrementRecipeViewed called"),j({title:"Article Liked!",description:"Article added to your liked articles."})))},H=G=>{const he=$.find(_e=>_e.id===G);S.has(G)?(_(G),j({title:"Bookmark Removed",description:"Article removed from your bookmarks."})):(_(G),he&&(w("Article Bookmarked",`"${he.title}" has been saved to your bookmarks.`,"info"),j({title:"Article Bookmarked!",description:"Article saved to your bookmarks."})))},q=G=>{const he=z.find(_e=>_e.id===G);P.has(G)?j({title:"Already Registered",description:"You're already registered for this webinar."}):(T(G),he&&(w("Webinar Registration",`You're now registered for "${he.title}" on ${he.date}.`,"info"),j({title:"Registration Successful!",description:"You're now registered for the webinar. Check your email for details."})))},oe=G=>{navigator.share?navigator.share({title:G.title,text:G.excerpt,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),j({title:"Link Copied!",description:"Article link copied to clipboard."}))},ve=G=>{const he=R.find(_e=>_e.id===G);he&&d.get(G)===100?j({title:"Certificate Downloaded!",description:`Your completion certificate for "${he.title}" has been downloaded.`}):j({title:"Complete Course First",description:"You need to complete the course to download the certificate."})},se=G=>{switch(G){case"Beginner":return"bg-green-100 text-green-700";case"Intermediate":return"bg-yellow-100 text-yellow-700";case"Advanced":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},V=R.filter(G=>{const he=G.title.toLowerCase().includes(t.toLowerCase()),_e=r==="all"||G.category===r;return he&&_e}),X=$.filter(G=>{const he=G.title.toLowerCase().includes(t.toLowerCase()),_e=r==="all"||G.category===r;return he&&_e}),ee=z.filter(G=>G.title.toLowerCase().includes(t.toLowerCase()));return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200 dark:from-background dark:to-background dark:border-border",children:[o.jsxs(je,{children:[o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(Ho,{className:"w-6 h-6 text-blue-600 dark:text-foreground"}),o.jsx("span",{className:"dark:text-foreground",children:"Education Center"})]}),o.jsx("p",{className:"text-gray-600 dark:text-muted-foreground",children:"Learn, grow, and become a sustainability champion"})]}),o.jsx(ce,{children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-muted-foreground w-4 h-4"}),o.jsx(st,{placeholder:"Search courses, articles, webinars...",value:t,onChange:G=>e(G.target.value),className:"pl-10 dark:bg-background dark:text-foreground"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("select",{value:r,onChange:G=>n(G.target.value),className:"px-3 py-2 border rounded-md dark:bg-background dark:border-border dark:text-foreground",children:M.map(G=>o.jsx("option",{value:G.id,className:"dark:bg-background dark:text-foreground",children:G.label},G.id))}),o.jsx(Q,{variant:"outline",onClick:()=>j({title:"Filter Options",description:"Advanced filtering options coming soon!"}),className:"dark:border-border dark:text-foreground dark:hover:bg-muted",children:o.jsx(mh,{className:"w-4 h-4 dark:text-foreground"})})]})]})})]}),o.jsxs(Jn,{defaultValue:"courses",className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-4",children:[o.jsx(Xe,{value:"courses",className:"dark:text-foreground",children:"Courses"}),o.jsx(Xe,{value:"articles",className:"dark:text-foreground",children:"Articles"}),o.jsx(Xe,{value:"webinars",className:"dark:text-foreground",children:"Webinars"}),o.jsx(Xe,{value:"achievements",className:"dark:text-foreground",children:"Achievements"})]}),o.jsxs(Oe,{value:"courses",className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(G=>o.jsxs(re,{className:"group hover:shadow-xl transition-all duration-300 dark:bg-card dark:border-border",children:[o.jsxs("div",{className:"relative overflow-hidden",children:[o.jsx("img",{src:G.thumbnail,alt:G.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx(ne,{className:se(G.level),children:G.level})}),o.jsx("div",{className:"absolute top-2 left-2",children:o.jsx(ne,{variant:"outline",className:"bg-white/90 dark:bg-background dark:text-foreground",children:G.price})})]}),o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg group-hover:text-blue-600 dark:group-hover:text-primary transition-colors dark:text-foreground",children:G.title}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-muted-foreground",children:G.description}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1 dark:text-muted-foreground",children:["By ",G.instructor]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(qn,{className:"w-4 h-4"}),o.jsx("span",{children:G.duration})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(yr,{className:"w-4 h-4"}),o.jsx("span",{children:G.students})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(hr,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{children:G.rating})]})]}),h.has(G.id)&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{children:"Progress"}),o.jsxs("span",{children:[Math.round(d.get(G.id)||0),"%"]})]}),o.jsx(Ht,{value:d.get(G.id)||0,className:"h-2"})]}),o.jsx(Q,{className:"w-full",variant:h.has(G.id)?"secondary":"default",onClick:()=>B(G),children:h.has(G.id)?"Continue Learning":"Start Course"})]})})]},G.id))}),i&&o.jsx(re,{className:"bg-white/95 rounded-xl border border-blue-100 mt-6 dark:bg-background dark:border-border",children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-foreground mb-2",children:i.title}),o.jsx("p",{className:"text-gray-600 mb-3 dark:text-muted-foreground",children:i.description}),o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx(ne,{className:se(i.level),children:i.level}),o.jsx(ne,{variant:"outline",className:"dark:border-border dark:text-foreground",children:i.duration}),o.jsx(ne,{variant:"outline",className:"dark:border-border dark:text-foreground",children:i.price})]}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-muted-foreground",children:[o.jsxs("span",{children:["By ",i.instructor]}),o.jsx("span",{children:""}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(hr,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{children:i.rating})]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[i.students," students"]})]})]}),o.jsx(Q,{variant:"ghost",onClick:()=>s(null),className:"dark:text-foreground",children:""})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Course Progress"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex justify-between text-sm",children:o.jsxs("span",{children:["Progress: ",Math.round(d.get(i.id)||0),"%"]})}),o.jsx(Ht,{value:d.get(i.id)||0,className:"h-3"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Skills You'll Learn"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(ue=i.skills)==null?void 0:ue.map((G,he)=>o.jsx(ne,{variant:"outline",className:"text-xs",children:G},he))})]})]}),i.content&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Course Content"}),o.jsx("div",{className:"space-y-2",children:(ge=i.content)==null?void 0:ge.map((G,he)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors dark:bg-gray-800 dark:hover:bg-gray-700",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Yt,{className:`w-4 h-4 ${G.completed?"text-green-500":"text-gray-300 dark:text-gray-500"}`}),o.jsxs("div",{children:[o.jsx("span",{className:G.completed?"text-gray-800 dark:text-gray-200":"text-gray-500 dark:text-gray-400",children:G.title}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:G.duration})]})]}),o.jsxs(Q,{size:"sm",variant:"ghost",onClick:()=>J(G,i.id),disabled:C,className:"dark:text-foreground",children:[o.jsx(kY,{className:"w-4 h-4 mr-1"}),C?"Playing...":"Play"]})]},he))})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Q,{className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800",onClick:()=>h.has(i.id)?null:F(i.id),children:h.has(i.id)?"Continue Learning":"Enroll Now"}),o.jsxs(Q,{variant:"outline",onClick:()=>H(i.id),className:"dark:border-border dark:text-foreground",children:[o.jsx(HS,{className:"w-4 h-4 mr-2"}),"Bookmark"]}),o.jsxs(Q,{variant:"outline",onClick:()=>ve(i.id),className:"dark:border-border dark:text-foreground",children:[o.jsx(iL,{className:"w-4 h-4 mr-2"}),"Certificate"]})]})]})})]}),o.jsxs(Oe,{value:"articles",className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(G=>{var he;return o.jsxs(re,{className:"group hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"relative overflow-hidden",children:[o.jsx("img",{src:G.image,alt:G.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx(ne,{variant:"outline",className:"bg-white/90",children:G.readTime})})]}),o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg group-hover:text-blue-600 transition-colors",children:G.title}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-muted-foreground",children:G.excerpt})]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:(he=G.tags)==null?void 0:he.map((_e,qe)=>o.jsx(ne,{variant:"outline",className:"text-xs",children:_e},qe))}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-muted-foreground",children:[o.jsxs("span",{children:["By ",G.author]}),o.jsx("span",{children:G.publishDate})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-muted-foreground",children:[o.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>U(G.id),className:k.has(G.id)?"text-red-500":"",children:[o.jsx(YP,{className:`w-4 h-4 mr-1 ${k.has(G.id)?"fill-current":""}`}),G.likes+(k.has(G.id)?1:0)]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Wm,{className:"w-4 h-4"}),o.jsx("span",{children:G.comments})]})]}),o.jsx(Q,{size:"sm",onClick:()=>{l(G),y()},children:"Read Article"})]})]})})]},G.id)})}),a&&o.jsx(re,{className:"bg-white/95 rounded-xl border border-blue-100 mt-6 dark:bg-background dark:border-border",children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-foreground mb-2",children:a.title}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-muted-foreground mb-4",children:[o.jsxs("span",{children:["By ",a.author]}),o.jsx("span",{children:""}),o.jsx("span",{children:a.readTime}),o.jsx("span",{children:""}),o.jsx("span",{children:a.publishDate})]})]}),o.jsx(Q,{variant:"ghost",onClick:()=>l(null),className:"dark:text-foreground",children:""})]}),o.jsx("img",{src:a.image,alt:a.title,className:"w-full h-64 object-cover rounded-lg mb-6"}),o.jsx("div",{className:"prose max-w-none mb-6",children:o.jsx("div",{className:"whitespace-pre-line text-gray-700 dark:text-muted-foreground leading-relaxed",children:a.content||a.excerpt})}),o.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>U(a.id),className:k.has(a.id)?"text-red-500":"",children:[o.jsx(YP,{className:"w-4 h-4 mr-1"}),a.likes+(k.has(a.id)?1:0)]}),o.jsxs(Q,{variant:"ghost",size:"sm",children:[o.jsx(Wm,{className:"w-4 h-4 mr-1"}),a.comments]}),o.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>H(a.id),className:S.has(a.id)?"text-blue-500":"",children:[o.jsx(HS,{className:"w-4 h-4 mr-1"}),S.has(a.id)?"Bookmarked":"Bookmark"]})]}),o.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>oe(a),children:[o.jsx(ub,{className:"w-4 h-4 mr-1"}),"Share"]})]})]})})]}),o.jsxs(Oe,{value:"webinars",className:"space-y-4",children:[o.jsx("div",{className:"space-y-4",children:ee.map(G=>o.jsx(re,{className:"hover:shadow-md transition-shadow",children:o.jsx(ce,{className:"p-6",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("img",{src:G.thumbnail,alt:G.title,className:"w-32 h-20 object-cover rounded"}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg dark:text-foreground",children:G.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-2 dark:text-muted-foreground",children:G.description}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-muted-foreground",children:[o.jsxs("span",{children:["Speaker: ",G.speaker]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[G.date," at ",G.time]}),o.jsx("span",{children:""}),o.jsx("span",{children:G.duration})]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[o.jsx(ne,{variant:G.status==="upcoming"?"default":"secondary",children:G.status==="upcoming"?"Upcoming":"Recorded"}),o.jsx(ne,{variant:"outline",children:G.price}),P.has(G.id)&&o.jsx(ne,{className:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",children:"Registered"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm text-gray-600 mb-2 dark:text-muted-foreground",children:[G.attendees,"/",G.maxAttendees]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Q,{size:"sm",onClick:()=>u(G),variant:"outline",children:"View Details"}),o.jsx(Q,{size:"sm",onClick:()=>q(G.id),className:"bg-green-600 hover:bg-green-700",children:P.has(G.id)?"Registered ":G.status==="upcoming"?"Register":"Watch"})]})]})]})})]})})},G.id))}),c&&o.jsx(re,{className:"bg-white/95 rounded-xl border border-blue-100 mt-6",children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:c.title}),o.jsx("p",{className:"text-gray-600 mb-3 dark:text-muted-foreground",children:c.description}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-muted-foreground",children:[o.jsxs("span",{children:["By ",c.speaker]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[c.date," at ",c.time]}),o.jsx("span",{children:""}),o.jsx("span",{children:c.duration}),o.jsx("span",{children:""}),o.jsx("span",{children:c.price})]})]}),o.jsx(Q,{variant:"ghost",onClick:()=>u(null),children:""})]}),o.jsx("img",{src:c.thumbnail,alt:c.title,className:"w-full h-64 object-cover rounded-lg mb-6"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold mb-3",children:"Topics Covered"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(K=c.topics)==null?void 0:K.map((G,he)=>o.jsx(ne,{variant:"outline",className:"text-xs",children:G},he))})]}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"text-sm text-gray-600 dark:text-muted-foreground",children:[c.attendees,"/",c.maxAttendees," registered"]}),o.jsx(ne,{variant:c.status==="upcoming"?"default":"secondary",children:c.status==="upcoming"?"Upcoming":"Recorded"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Q,{className:"bg-green-600 hover:bg-green-700",onClick:()=>q(c.id),children:P.has(c.id)?"Registered ":c.status==="upcoming"?"Register Now":"Watch Recording"}),o.jsxs(Q,{variant:"outline",onClick:()=>j({title:"Calendar Event",description:"Event added to your calendar!"}),children:[o.jsx(os,{className:"w-4 h-4 mr-2"}),"Add to Calendar"]})]})]})})]}),o.jsxs(Oe,{value:"achievements",className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(G=>o.jsxs(re,{className:`text-center p-6 ${G.earned?"bg-green-50 border-green-200 dark:bg-green-900 dark:border-green-700":"bg-gray-50 border-gray-200 dark:bg-gray-900 dark:border-gray-700"}`,children:[o.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center ${G.earned?"bg-green-500":"bg-gray-300 dark:bg-gray-700"}`,children:G.earned?o.jsx(Yt,{className:"w-8 h-8 text-white"}):o.jsx(Kr,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"})}),o.jsx("h3",{className:`font-medium mb-2 ${G.earned?"text-green-700 dark:text-green-300":"text-gray-500 dark:text-muted-foreground"}`,children:G.name}),o.jsx("p",{className:"text-sm text-gray-600 mb-2 dark:text-muted-foreground",children:G.description}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-muted-foreground",children:G.earned?"Earned!":"Not earned yet"})]},G.id))}),o.jsxs(re,{children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(vn,{className:"w-5 h-5"}),o.jsx("span",{children:"Your Learning Progress"})]})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium dark:text-foreground",children:"Courses Completed"}),o.jsxs("span",{className:"font-semibold text-blue-600",children:[g.coursesCompleted,"/10"]})]}),o.jsx(Ht,{value:g.coursesCompleted/10*100,className:"h-3"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium dark:text-foreground",children:"Articles Read"}),o.jsxs("span",{className:"font-semibold text-green-600",children:[g.recipesViewed,"/50"]})]}),o.jsx(Ht,{value:g.recipesViewed/50*100,className:"h-3"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-medium",children:"Webinars Registered"}),o.jsxs("span",{className:"font-semibold text-purple-600",children:[P.size,"/10"]})]}),o.jsx(Ht,{value:P.size/10*100,className:"h-3"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2 dark:text-foreground",children:[o.jsx("span",{className:"font-medium",children:"Learning Streak"}),o.jsx("span",{className:"font-semibold text-orange-600",children:"7 days"})]}),o.jsx("div",{className:"flex items-center space-x-1",children:[...Array(7)].map((G,he)=>o.jsx("div",{className:"w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center",children:o.jsx(Cr,{className:"w-3 h-3 text-white"})},he))})]})]})})]})]})]})]})},i3e=()=>{const{userStats:t}=Xn(),{notifications:e,unreadCount:r,markAsRead:n,markAllAsRead:i,clearAllNotifications:s}=Ya(),{toast:a}=Ks(),l=f=>{switch(n(f.id),f.source){case"education":a({title:"Redirecting to Education Center",description:"Continue your learning journey!"});break;case"marketplace":a({title:"Opening Marketplace",description:"Discover new sustainable products!"});break;case"scanner":a({title:"Opening Product Scanner",description:"Scan more products to track your impact!"});break;case"community":a({title:"Opening Community Hub",description:"Connect with fellow eco-enthusiasts!"});break;case"carbon":a({title:"Opening Carbon Tracker",description:"View your environmental impact!"});break;case"recipes":a({title:"Opening Recipe Finder",description:"Discover sustainable recipes!"});break;case"challenges":a({title:"Opening Challenges",description:"Join the sustainability challenge!"});break;case"investment":a({title:"Opening Investment Tracker",description:"Check your ESG portfolio performance!"});break;case"smartInsights":a({title:"New Smart Insight",description:"Check out your latest sustainability insights!"});break;default:a({title:"Action completed",description:"Thank you for staying engaged!"})}},c=f=>{switch(f){case"achievement":return"bg-amber-50 border-amber-200 text-amber-800";case"shopping":return"bg-blue-50 border-blue-200 text-blue-800";case"environmental":return"bg-green-50 border-green-200 text-green-800";case"community":return"bg-purple-50 border-purple-200 text-purple-800";case"suggestion":return"bg-indigo-50 border-indigo-200 text-indigo-800";case"challenge":return"bg-orange-50 border-orange-200 text-orange-800";case"tip":return"bg-teal-50 border-teal-200 text-teal-800"}},u=f=>{switch(f){case"scanning":return"bg-blue-100 text-blue-700";case"environmental":return"bg-green-100 text-green-700";case"education":return"bg-purple-100 text-purple-700";case"recipes":return"bg-orange-100 text-orange-700";case"community":return"bg-pink-100 text-pink-700";case"engagement":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}},h=[{id:1,name:"First Scan",description:"Completed your first product scan",earned:t.totalScans>=1,date:"2024-06-01",icon:hr,category:"scanning"},{id:2,name:"Eco Explorer",description:"Scanned 10 sustainable products",earned:t.totalScans>=10,date:t.totalScans>=10?"2024-06-15":null,progress:Math.min(t.totalScans,10),total:10,icon:Kr,category:"scanning"},{id:3,name:"Carbon Saver",description:"Saved 10kg of CO through choices",earned:t.totalScans*.5>=10,date:t.totalScans*.5>=10?"2024-06-10":null,progress:Math.min(t.totalScans*.5,10),total:10,icon:dt,category:"environmental"},{id:4,name:"Learning Champion",description:"Completed your first course",earned:t.coursesCompleted>=1,date:t.coursesCompleted>=1?"2024-06-20":null,icon:Ho,category:"education"},{id:5,name:"Sustainability Scholar",description:"Completed 3 courses",earned:t.coursesCompleted>=3,date:t.coursesCompleted>=3?"2024-06-25":null,progress:Math.min(t.coursesCompleted,3),total:3,icon:Ho,category:"education"},{id:6,name:"Recipe Explorer",description:"Viewed 5 eco-friendly recipes",earned:t.recipesViewed>=5,date:t.recipesViewed>=5?"2024-06-18":null,progress:Math.min(t.recipesViewed,5),total:5,icon:vr,category:"recipes"},{id:7,name:"Community Helper",description:"Helped 5 community members",earned:!1,progress:0,total:5,icon:yr,category:"community"},{id:8,name:"Streak Master",description:"Maintain a 7-day activity streak",earned:!1,progress:5,total:7,icon:Cr,category:"engagement"}],d=h.filter(f=>f.earned).length;return o.jsxs("div",{className:"space-y-6",children:[o.jsx(re,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 dark:from-background dark:to-background dark:border-border",children:o.jsxs(je,{children:[o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(Wo,{className:"w-6 h-6 text-blue-600 dark:text-foreground"}),o.jsx("span",{className:"dark:text-foreground",children:"Notification Center"}),r>0&&o.jsx(ne,{className:"bg-red-500 hover:bg-red-600 ml-2",children:r})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-gray-600 dark:text-muted-foreground",children:"Stay updated with your eco journey"}),o.jsxs("div",{className:"flex space-x-2",children:[r>0&&o.jsx(Q,{variant:"outline",size:"sm",onClick:i,className:"dark:border-border dark:text-foreground",children:"Mark All Read"}),e.length>0&&o.jsx(Q,{variant:"outline",size:"sm",onClick:s,className:"dark:border-border dark:text-foreground",children:"Clear All"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs(re,{className:"text-center p-4",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx(fn,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{className:"font-semibold text-2xl text-blue-600",children:t.totalScans})]}),o.jsx("p",{className:"text-sm text-gray-600",children:"Products Scanned"})]}),o.jsxs(re,{className:"text-center p-4",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx(Ho,{className:"w-5 h-5 text-purple-600"}),o.jsx("span",{className:"font-semibold text-2xl text-purple-600",children:t.coursesCompleted})]}),o.jsx("p",{className:"text-sm text-gray-600",children:"Courses Completed"})]}),o.jsxs(re,{className:"text-center p-4",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx(vr,{className:"w-5 h-5 text-orange-600"}),o.jsx("span",{className:"font-semibold text-2xl text-orange-600",children:t.recipesViewed})]}),o.jsx("p",{className:"text-sm text-gray-600",children:"Recipes Viewed"})]}),o.jsxs(re,{className:"text-center p-4",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx(Kr,{className:"w-5 h-5 text-amber-600"}),o.jsx("span",{className:"font-semibold text-2xl text-amber-600",children:d})]}),o.jsx("p",{className:"text-sm text-gray-600",children:"Achievements Earned"})]})]}),o.jsxs(Jn,{defaultValue:"notifications",className:"space-y-6",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-2",children:[o.jsxs(Xe,{value:"notifications",children:["Notifications",r>0&&o.jsx(ne,{className:"ml-2 bg-red-500 text-white text-xs",children:r})]}),o.jsxs(Xe,{value:"achievements",children:["Achievements",o.jsx(ne,{className:"ml-2 bg-amber-500 text-white text-xs",children:d})]})]}),o.jsx(Oe,{value:"notifications",children:o.jsx("div",{className:"space-y-4",children:e.length===0?o.jsx(re,{className:"text-center py-12",children:o.jsxs(ce,{children:[o.jsx(Wo,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-200 mb-2",children:"No notifications yet"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Start using the app to receive notifications about your eco journey!"})]})}):e.map(f=>o.jsx(re,{className:`transition-all duration-300 hover:shadow-lg cursor-pointer ${f.read?"bg-gray-50 dark:bg-gray-700":"bg-white dark:bg-gray-800 border-l-4 border-l-blue-500 dark:border-l-blue-400 shadow-sm"}`,onClick:()=>n(f.id),children:o.jsx(ce,{className:"p-6",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:`p-2 rounded-full ${c(f.type)}`,children:f.icon?o.jsx(f.icon,{className:"w-5 h-5"}):o.jsx(Wo,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h3",{className:`font-semibold ${f.read?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:f.title}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:f.timestamp?typeof f.timestamp.toDate=="function"?f.timestamp.toDate().toLocaleString():f.timestamp.seconds?new Date(f.timestamp.seconds*1e3).toLocaleString():String(f.timestamp):""}),!f.read&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),o.jsx("p",{className:`text-sm ${f.read?"text-gray-500 dark:text-gray-400":"text-gray-700 dark:text-gray-300"} mb-3`,children:f.message}),f.actionable&&o.jsx(Q,{size:"sm",variant:"outline",onClick:m=>{m.stopPropagation(),l(f)},children:f.action})]})]})})},f.id))})}),o.jsx(Oe,{value:"achievements",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["scanning","environmental","education","community"].map(f=>{const m=h.filter(v=>v.category===f),g=m.filter(v=>v.earned).length;return o.jsxs(re,{className:"text-center p-4",children:[o.jsx(ne,{className:`mb-2 ${u(f)}`,children:f.charAt(0).toUpperCase()+f.slice(1)}),o.jsxs("p",{className:"text-sm text-gray-600",children:[g,"/",m.length," Earned"]})]},f)})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(f=>o.jsx(re,{className:`transition-all duration-300 hover:shadow-lg ${f.earned?"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200":"bg-gray-50 border-gray-200"}`,children:o.jsx(ce,{className:"p-6",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:`p-3 rounded-full ${f.earned?"bg-amber-100 text-amber-600":"bg-gray-200 text-gray-400"}`,children:o.jsx(f.icon,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:`font-semibold ${f.earned?"text-amber-800":"text-gray-600"}`,children:f.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[f.earned&&o.jsx(ne,{className:"bg-amber-500 hover:bg-amber-600",children:"Earned!"}),o.jsx(ne,{className:u(f.category),children:f.category})]})]}),o.jsx("p",{className:`text-sm ${f.earned?"text-amber-700":"text-gray-500"} mb-3`,children:f.description}),f.earned?o.jsxs("p",{className:"text-xs text-amber-600",children:["Earned on ",f.date]}):f.progress!==void 0?o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Progress"}),o.jsxs("span",{className:"text-xs text-gray-600",children:[Math.round(f.progress),"/",f.total]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(f.progress/f.total*100,100)}%`}})})]}):o.jsx("p",{className:"text-xs text-gray-500",children:"Complete the required actions to unlock"})]})]})})},f.id))})]})})]})]})},s3e=()=>{const{user:t,logout:e}=wr(),{userStats:r,carbonEntries:n,scannedProducts:i}=Xn(),[s,a]=E.useState(!1),[l,c]=E.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"alex.green@example.com",location:"San Francisco, CA",bio:"Passionate about sustainability and making eco-friendly choices every day.",goals:{weeklyScans:10,monthlyGoal:"Reduce carbon footprint by 20%",yearlyTarget:"Achieve zero waste lifestyle"}});D.useEffect(()=>{(async()=>{if(t){const w=Re(Ne,"users",t.id),k=await Zo(w);if(k.exists()){const N=k.data();c({name:N.name||t.name||"",email:N.email||t.email||"",location:N.location||"",bio:N.bio||"",goals:N.goals||{weeklyScans:10,monthlyGoal:"Reduce carbon footprint by 20%",yearlyTarget:"Achieve zero waste lifestyle"}})}else await Zt(w,{uid:t.id,name:t.name||"",email:t.email||""},{merge:!0});const S=Re(Ne,"users",t.id);(await Zo(S)).exists()||await Zt(S,{totalScans:0,co2Saved:0,totalPoints:150,rank:999,currentWeekScans:0,coursesCompleted:0,recipesViewed:0,investmentsMade:0,transportTrips:0,esgReports:0,badges:0,avgScore:0,level:1,weeklyGoal:75,streakDays:0})}})()},[t]);const u=[{name:"Eco Warrior",description:"100+ sustainable scans",earned:r.totalScans>=100,progress:r.totalScans,target:100,icon:dt},{name:"Carbon Saver",description:"Saved 50kg CO",earned:r.co2Saved>=50,progress:r.co2Saved,target:50,icon:Xy},{name:"Knowledge Seeker",description:"10+ courses completed",earned:r.coursesCompleted>=10,progress:r.coursesCompleted,target:10,icon:Ho},{name:"Recipe Explorer",description:"25+ recipes viewed",earned:r.recipesViewed>=25,progress:r.recipesViewed,target:25,icon:Yy},{name:"Green Investor",description:"5+ investments made",earned:r.investmentsMade>=5,progress:r.investmentsMade,target:5,icon:vn},{name:"Transport Pioneer",description:"20+ eco-trips planned",earned:r.transportTrips>=20,progress:r.transportTrips,target:20,icon:zm}],h=[{month:"Jan",scans:Math.max(0,r.totalScans-50),co2Saved:Math.max(0,r.co2Saved-25)},{month:"Feb",scans:Math.max(0,r.totalScans-40),co2Saved:Math.max(0,r.co2Saved-20)},{month:"Mar",scans:Math.max(0,r.totalScans-30),co2Saved:Math.max(0,r.co2Saved-15)},{month:"Apr",scans:Math.max(0,r.totalScans-20),co2Saved:Math.max(0,r.co2Saved-10)},{month:"May",scans:Math.max(0,r.totalScans-10),co2Saved:Math.max(0,r.co2Saved-5)},{month:"Jun",scans:r.totalScans,co2Saved:r.co2Saved}],d=Math.floor(r.totalScans/25)+1,f=r.totalScans%25/25*100,m=25-r.totalScans%25,g=[{rank:1,name:"EcoMaster_2024",scans:2156,co2Saved:124.3},{rank:2,name:"GreenGuardian",scans:1892,co2Saved:108.7},{rank:3,name:"SustainableLife",scans:1654,co2Saved:95.2},{rank:r.rank,name:"You",scans:r.totalScans,co2Saved:r.co2Saved,highlight:!0}],v={notifications:{email:!0,push:!0,weekly:!0,achievements:!0},privacy:{profilePublic:!0,statsVisible:!0,allowMessages:!0}},y=async()=>{if(a(!1),t)try{const b=Re(Ne,"users",t.id);await Zt(b,{name:l.name,email:l.email,location:l.location,bio:l.bio,goals:l.goals},{merge:!0}),console.log("Profile updated successfully!")}catch(b){console.error("Error updating profile:",b)}else console.warn("No user logged in to save profile.")},x=()=>{e()};return t?o.jsxs("div",{className:"space-y-6",children:[o.jsx(re,{className:"bg-gradient-to-r from-emerald-50 to-green-50 border-emerald-200 dark:from-emerald-900/20 dark:to-green-900/20 dark:border-emerald-700",children:o.jsx(je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(Cs,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"}),o.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"User Profile & Dashboard"})]}),o.jsxs(Q,{variant:"outline",size:"sm",onClick:x,className:"border-red-300 text-red-600 hover:bg-red-50 dark:border-red-600 dark:text-red-400 dark:hover:bg-red-900/20",children:[o.jsx(GS,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),o.jsxs(Jn,{defaultValue:"profile",className:"space-y-6",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-5 bg-white/60 dark:bg-gray-800/60",children:[o.jsx(Xe,{value:"profile",className:"dark:text-gray-300 dark:data-[state=active]:bg-emerald-600 dark:data-[state=active]:text-white",children:"Profile"}),o.jsx(Xe,{value:"dashboard",className:"dark:text-gray-300 dark:data-[state=active]:bg-emerald-600 dark:data-[state=active]:text-white",children:"Dashboard"}),o.jsx(Xe,{value:"achievements",className:"dark:text-gray-300 dark:data-[state=active]:bg-emerald-600 dark:data-[state=active]:text-white",children:"Achievements"}),o.jsx(Xe,{value:"goals",className:"dark:text-gray-300 dark:data-[state=active]:bg-emerald-600 dark:data-[state=active]:text-white",children:"Goals"}),o.jsx(Xe,{value:"settings",className:"dark:text-gray-300 dark:data-[state=active]:bg-emerald-600 dark:data-[state=active]:text-white",children:"Settings"})]}),o.jsx(Oe,{value:"profile",children:o.jsxs(re,{className:"bg-white/70 backdrop-blur-sm border-sage-200 dark:bg-gray-800/70 dark:border-gray-600",children:[o.jsx(je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ce,{className:"text-gray-800 dark:text-gray-200",children:"Profile Information"}),o.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>s?y():a(!0),className:"dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:[s?o.jsx(FY,{className:"w-4 h-4 mr-2"}):o.jsx(zY,{className:"w-4 h-4 mr-2"}),s?"Save":"Edit"]})]})}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-400 to-green-500 rounded-full flex items-center justify-center",children:o.jsx(Cs,{className:"w-10 h-10 text-white"})}),s&&o.jsx(Q,{size:"sm",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0",children:o.jsx(Ky,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:l.name}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.location}),o.jsxs(ne,{className:"mt-1 bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/50 dark:text-emerald-300 dark:border-emerald-600",children:["Level ",d]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),s?o.jsx(st,{value:l.name,onChange:b=>c({...l,name:b.target.value}),className:"dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"}):o.jsx("p",{className:"text-gray-900 dark:text-gray-200",children:l.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),s?o.jsx(st,{type:"email",value:l.email,onChange:b=>c({...l,email:b.target.value}),className:"dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"}):o.jsx("p",{className:"text-gray-900 dark:text-gray-200",children:l.email})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),s?o.jsx(st,{value:l.location,onChange:b=>c({...l,location:b.target.value}),className:"dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"}):o.jsx("p",{className:"text-gray-900 dark:text-gray-200",children:l.location})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bio"}),s?o.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-md resize-none dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200",rows:3,value:l.bio,onChange:b=>c({...l,bio:b.target.value})}):o.jsx("p",{className:"text-gray-900 dark:text-gray-200",children:l.bio})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-6 border-t border-gray-200 dark:border-gray-600",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:r.totalScans}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Scans"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[r.co2Saved,"kg"]}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"CO Saved"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:u.filter(b=>b.earned).length}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Badges"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["#",r.rank]}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Global Rank"})]})]})]})]})}),o.jsx(Oe,{value:"dashboard",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(re,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-green-100 text-sm",children:"Total Scans"}),o.jsx("p",{className:"text-2xl font-bold",children:r.totalScans})]}),o.jsx(vr,{className:"w-8 h-8 text-green-200"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-blue-100 text-sm",children:"CO Saved"}),o.jsxs("p",{className:"text-2xl font-bold",children:[r.co2Saved,"kg"]})]}),o.jsx(Xy,{className:"w-8 h-8 text-blue-200"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-purple-100 text-sm",children:"Total Points"}),o.jsx("p",{className:"text-2xl font-bold",children:r.totalPoints})]}),o.jsx(hr,{className:"w-8 h-8 text-purple-200"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-orange-100 text-sm",children:"Global Rank"}),o.jsxs("p",{className:"text-2xl font-bold",children:["#",r.rank]})]}),o.jsx(Us,{className:"w-8 h-8 text-orange-200"})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100 dark:bg-gray-800/60 dark:border-gray-600",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(hr,{className:"w-5 h-5 text-yellow-500"}),o.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"Level Progress"})]})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:["Level ",d]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Sustainability Explorer"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Progress to Level ",d+1]}),o.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[m," scans to go"]})]}),o.jsx(Ht,{value:f,className:"h-3"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[o.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[o.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:r.coursesCompleted}),o.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Courses"})]}),o.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[o.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:r.recipesViewed}),o.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Recipes"})]}),o.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[o.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:r.investmentsMade}),o.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Investments"})]})]})]})]}),o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100 dark:bg-gray-800/60 dark:border-gray-600",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-gray-800 dark:text-gray-200",children:"Monthly Activity"})}),o.jsx(ce,{children:o.jsx(Pc,{width:"100%",height:200,children:o.jsxs(YMe,{data:h,children:[o.jsx(Ig,{strokeDasharray:"3 3"}),o.jsx(eo,{dataKey:"month"}),o.jsx(to,{}),o.jsx(Nn,{formatter:(b,w)=>[w==="scans"?`${b} scans`:`${b} kg CO`,w==="scans"?"Scans":"CO Saved"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",color:"#374151"}}),o.jsx(za,{type:"monotone",dataKey:"scans",stackId:"1",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.3}),o.jsx(za,{type:"monotone",dataKey:"co2Saved",stackId:"2",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3})]})})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100 dark:bg-gray-800/60 dark:border-gray-600",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-gray-800 dark:text-gray-200",children:"Activity Summary"})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(xd,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"font-medium",children:"Carbon Entries"})]}),o.jsx("span",{className:"font-bold text-green-600",children:n.length})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(fn,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{className:"font-medium",children:"Products Scanned"})]}),o.jsx("span",{className:"font-bold text-blue-600",children:i.length})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(zm,{className:"w-5 h-5 text-purple-600"}),o.jsx("span",{className:"font-medium",children:"Transport Trips"})]}),o.jsx("span",{className:"font-bold text-purple-600",children:r.transportTrips})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ta,{className:"w-5 h-5 text-orange-600"}),o.jsx("span",{className:"font-medium",children:"ESG Reports"})]}),o.jsx("span",{className:"font-bold text-orange-600",children:r.esgReports})]})]})})]}),o.jsxs(re,{className:"bg-white/60 backdrop-blur-sm border-green-100 dark:bg-gray-800/60 dark:border-gray-600",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(yr,{className:"w-5 h-5 text-purple-500"}),o.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"Global Leaderboard"})]})}),o.jsx(ce,{children:o.jsx("div",{className:"space-y-3",children:g.map(b=>o.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${b.highlight?"bg-blue-50 border-2 border-blue-200 dark:bg-blue-900/20 dark:border-blue-600":"bg-gray-50 dark:bg-gray-700/50"}`,children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${b.rank===1?"bg-yellow-500 text-white":b.rank===2?"bg-gray-400 text-white":b.rank===3?"bg-orange-500 text-white":b.highlight?"bg-blue-500 text-white":"bg-gray-300"}`,children:b.rank}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:b.name}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[b.scans," scans"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"font-bold text-green-600 dark:text-green-400",children:[b.co2Saved," kg"]}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"CO saved"})]})]},b.rank))})})]})]})]})}),o.jsx(Oe,{value:"achievements",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map((b,w)=>o.jsx(re,{className:`${b.earned?"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200 dark:from-amber-900/20 dark:to-yellow-900/20 dark:border-amber-600":"bg-gray-50 border-gray-200 dark:bg-gray-700/50 dark:border-gray-600"}`,children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[o.jsx("div",{className:`p-2 rounded-full ${b.earned?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-gray-200 text-gray-400 dark:bg-gray-600 dark:text-gray-500"}`,children:o.jsx(b.icon,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-semibold ${b.earned?"text-amber-800 dark:text-amber-200":"text-gray-600 dark:text-gray-400"}`,children:b.name}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.description})]})]}),b.earned?o.jsx(ne,{className:"bg-amber-500 hover:bg-amber-600 dark:bg-amber-600 dark:hover:bg-amber-700",children:"Earned"}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx("span",{children:"Progress"}),o.jsxs("span",{children:[b.progress,"/",b.target]})]}),o.jsx(Ht,{value:b.progress/b.target*100,className:"h-2"})]})]})},w))})}),o.jsx(Oe,{value:"goals",children:o.jsxs(re,{className:"bg-white/70 backdrop-blur-sm border-sage-200 dark:bg-gray-800/70 dark:border-gray-600",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2",children:[o.jsx(vr,{className:"w-5 h-5"}),o.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"Personal Goals"})]})}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Weekly Scanning Goal"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ht,{value:r.currentWeekScans/l.goals.weeklyScans*100})}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.currentWeekScans,"/",l.goals.weeklyScans]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Monthly Goal"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.goals.monthlyGoal})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Yearly Target"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.goals.yearlyTarget})]})]})]})}),o.jsx(Oe,{value:"settings",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-white/70 backdrop-blur-sm border-sage-200 dark:bg-gray-800/70 dark:border-gray-600",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-gray-800 dark:text-gray-200",children:"Notification Preferences"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Email Notifications"}),o.jsx("input",{type:"checkbox",defaultChecked:v.notifications.email,className:"dark:bg-gray-700"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Push Notifications"}),o.jsx("input",{type:"checkbox",defaultChecked:v.notifications.push,className:"dark:bg-gray-700"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Weekly Reports"}),o.jsx("input",{type:"checkbox",defaultChecked:v.notifications.weekly,className:"dark:bg-gray-700"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Achievement Alerts"}),o.jsx("input",{type:"checkbox",defaultChecked:v.notifications.achievements,className:"dark:bg-gray-700"})]})]})]}),o.jsxs(re,{className:"bg-white/70 backdrop-blur-sm border-sage-200 dark:bg-gray-800/70 dark:border-gray-600",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-gray-800 dark:text-gray-200",children:"Privacy Settings"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Public Profile"}),o.jsx("input",{type:"checkbox",defaultChecked:v.privacy.profilePublic,className:"dark:bg-gray-700"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Show Statistics"}),o.jsx("input",{type:"checkbox",defaultChecked:v.privacy.statsVisible,className:"dark:bg-gray-700"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Allow Messages"}),o.jsx("input",{type:"checkbox",defaultChecked:v.privacy.allowMessages,className:"dark:bg-gray-700"})]})]})]})]})})]})]}):o.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:o.jsx(re,{className:"bg-white/80 backdrop-blur-sm border-emerald-200 dark:bg-gray-800/80 dark:border-emerald-700",children:o.jsxs(ce,{className:"p-8 text-center",children:[o.jsx(Cs,{className:"w-16 h-16 mx-auto mb-4 text-gray-400 dark:text-gray-500"}),o.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-800 dark:text-gray-200",children:"Please Login"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You need to be logged in to view your profile and statistics."})]})})})},a3e=()=>{const{userStats:t,scannedProducts:e,carbonEntries:r,addPoints:n,selectedCategory:i,setSelectedCategory:s,selectedPriority:a,setSelectedPriority:l,completedActions:c,setCompletedActions:u,actionProgress:h,setActionProgress:d}=Xn(),{addNotification:f}=Ya(),[m,g]=E.useState([]),{selectedTab:v,setSelectedTab:y}=Xn();D.useEffect(()=>{typeof window<"u"&&localStorage.setItem("aiRecommendationsSelectedTab",v)},[v]);const x=()=>{const C=[];if(e.length>0){const I=t.avgScore,R=e[0];I<70&&C.push({id:1,type:"product",title:"Improve Product Choices",description:`Your average sustainability score is ${I}. Focus on products with bamboo or recycled packaging to boost your score by 25-30 points.`,impact:`+${Math.floor((80-I)*.8)} points potential`,confidence:92,category:"Product Selection",icon:dt,priority:"high",timeToImplement:"2 minutes per product",difficulty:"Easy",carbonSaving:`${((80-I)*.05).toFixed(1)}kg CO/month`,actionType:"product_search",actionData:{query:"sustainable packaging",category:R.category}});const $=e.reduce((W,M)=>(W[M.category]=(W[M.category]||0)+1,W),{}),z=Object.entries($).sort(([,W],[,M])=>M-W)[0];z&&C.push({id:2,type:"behavior",title:`Optimize ${z[0]} Choices`,description:`You've scanned ${z[1]} ${z[0]} products. Consider exploring eco-certified brands in this category.`,impact:`+${z[1]*5} points`,confidence:88,category:z[0],icon:vr,priority:"medium",timeToImplement:"5 minutes research",difficulty:"Easy",carbonSaving:`${(z[1]*.3).toFixed(1)}kg CO/month`,actionType:"habit_tracker",actionData:{habit:`eco_${z[0]}`,target:"weekly"}})}if(r.length===0)C.push({id:3,type:"lifestyle",title:"Start Carbon Tracking",description:"Begin tracking your daily carbon footprint to identify reduction opportunities. Studies show tracking reduces emissions by 15% on average.",impact:"Up to 15% reduction",confidence:95,category:"Carbon Tracking",icon:Ta,priority:"high",timeToImplement:"3 minutes daily",difficulty:"Easy",carbonSaving:"4.2kg CO/month",actionType:"habit_tracker",actionData:{habit:"daily_carbon_tracking",target:"daily"}});else{const I=r.reduce((R,$)=>R+$.amount,0)/r.length;I>10&&C.push({id:4,type:"optimization",title:"Reduce Daily Carbon Footprint",description:`Your average daily carbon footprint is ${I.toFixed(1)}kg. Consider public transport or walking for trips under 2 miles.`,impact:`-${(I*.2).toFixed(1)}kg CO/day`,confidence:89,category:"Transportation",icon:vn,priority:"medium",timeToImplement:"Planning required",difficulty:"Medium",carbonSaving:`${(I*.2*30).toFixed(1)}kg CO/month`,actionType:"action_plan",actionData:{steps:["Map nearby public transport","Plan walking routes","Set weekly targets"]}})}return t.streakDays<7&&C.push({id:5,type:"engagement",title:"Build Your Green Streak",description:`You're at ${t.streakDays} day streak. Reach 7 days to unlock bonus rewards and improve your sustainability habits.`,impact:"+100 bonus points",confidence:94,category:"Engagement",icon:hr,priority:"medium",timeToImplement:"Daily commitment",difficulty:"Medium",carbonSaving:"2.1kg CO/week",actionType:"habit_tracker",actionData:{habit:"daily_eco_action",target:"daily"}}),C};E.useEffect(()=>{g(x())},[t,e,r]);const b=()=>{const C=[];C.push({title:"Daily Streak",value:`${t.streakDays} days`,trend:t.streakDays>7?"Excellent streak!":t.streakDays>3?"Building momentum":"Start your streak",icon:Cr,change:t.streakDays>7?"positive":t.streakDays>3?"neutral":"negative",description:"Consecutive days with eco actions"});const I=t.currentWeekScans>5?"up":t.currentWeekScans>2?"stable":"down";C.push({title:"Weekly Scanning Activity",value:`${t.currentWeekScans} scans`,trend:I==="up"?"+40% from last week":I==="stable"?"Consistent activity":"Room for improvement",icon:ha,change:I,description:"Products scanned this week"}),C.push({title:"Carbon Impact",value:`${t.co2Saved.toFixed(1)}kg`,trend:t.co2Saved>10?"Great impact!":t.co2Saved>5?"Good start":"Just beginning",icon:dt,change:t.co2Saved>10?"positive":t.co2Saved>5?"neutral":"negative",description:"Total CO saved through better choices"}),C.push({title:"Avg Sustainability Score",value:`${t.avgScore}/100`,trend:t.avgScore>80?"Excellent!":t.avgScore>60?"Good progress":"Room for growth",icon:hr,change:t.avgScore>80?"positive":t.avgScore>60?"neutral":"negative",description:"Average score of scanned products"}),C.push({title:"Monthly Trend",value:`${t.monthlyTrend>0?"+":""}${t.monthlyTrend}%`,trend:t.monthlyTrend>0?"Improving":t.monthlyTrend<0?"Declining":"Stable",icon:vn,change:t.monthlyTrend>0?"positive":t.monthlyTrend<0?"negative":"neutral",description:"Change in sustainability score over the last month"}),C.push({title:"Top Category",value:t.topCategory||"None",trend:"Most scanned product category",icon:vr,change:"neutral",description:"Category with highest scan frequency"}),C.push({title:"Total Carbon Footprint",value:`${t.totalCarbonFootprint.toFixed(1)}kg`,trend:t.totalCarbonFootprint>100?"High footprint":"Manageable footprint",icon:dt,change:t.totalCarbonFootprint>100?"negative":"positive",description:"Your overall carbon footprint"}),C.push({title:"Achievements",value:`${t.achievements.length}`,trend:"Achievements unlocked",icon:hr,change:"positive",description:"Number of achievements earned"});const R=t.goals.filter($=>$.progress<100).length;return C.push({title:"Active Goals",value:`${R}`,trend:"Goals in progress",icon:Yt,change:R>0?"neutral":"positive",description:"Number of sustainability goals you are working on"}),C},w=C=>{const I=`action_${C.id}`;switch(C.actionType){case"product_search":const R=NC(C.actionData.query).slice(0,5);d($=>({...$,[I]:{type:"product_search",status:"in_progress",data:R,recommendation:C}})),n(10),f({type:"suggestion",title:"New Product Search Recommendation",message:`You started a product search for "${C.actionData.query}".`,read:!1,source:"AIRecommendations",actionable:!0,action:"View"});break;case"habit_tracker":d($=>({...$,[I]:{type:"habit_tracker",status:"started",data:{habit:C.actionData.habit,target:C.actionData.target,startDate:new Date().toISOString(),progress:0},recommendation:C}})),n(25),f({type:"suggestion",title:"Habit Tracker Started",message:`You started tracking the habit "${C.actionData.habit}".`,read:!1,source:"AIRecommendations",actionable:!0,action:"View"});break;case"action_plan":d($=>({...$,[I]:{type:"action_plan",status:"created",data:{steps:C.actionData.steps,completedSteps:[],createdDate:new Date().toISOString()},recommendation:C}})),n(15),f({type:"suggestion",title:"Action Plan Created",message:"You created a new action plan.",read:!1,source:"AIRecommendations",actionable:!0,action:"View"});break;default:u($=>[...$,C.id]),n(20),f({type:"suggestion",title:"Action Completed",message:`You completed the recommendation "${C.title}".`,read:!1,source:"AIRecommendations",actionable:!0,action:"View"})}},k=C=>{u(R=>[...R,C]);const I=`action_${C}`;d(R=>({...R,[I]:{...R[I],status:"completed"}})),n(50)},S=C=>{switch(C){case"high":return"border-l-red-400 bg-red-50/30 dark:bg-red-900/10";case"medium":return"border-l-amber-400 bg-amber-50/30 dark:bg-amber-900/10";default:return"border-l-slate-400 bg-slate-50/30 dark:bg-slate-900/10"}},P=C=>{switch(C){case"Easy":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"Medium":return"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300";case"Hard":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},N=m.filter(C=>!(i!=="all"&&C.category!==i||a!=="all"&&C.priority!==a)),_=[...new Set(m.map(C=>C.category))],T=[...new Set(m.map(C=>C.priority))],j=b();return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-white/95 backdrop-blur-sm border-slate-200/50 shadow-lg rounded-2xl dark:bg-gray-800/95 dark:border-gray-700/50",children:[o.jsx(je,{className:"pb-4",children:o.jsxs(Ce,{className:"flex items-center justify-between text-slate-800 dark:text-slate-200",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-800 dark:bg-slate-700 rounded-xl flex items-center justify-center",children:o.jsx(ha,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xl font-bold",children:"AI-Powered Recommendations"}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-normal",children:"Personalized insights based on your activity"})]})]}),o.jsxs(ne,{variant:"outline",className:"border-slate-300 text-slate-700 bg-slate-50 dark:border-slate-600 dark:text-slate-300 dark:bg-slate-800",children:[o.jsx(fa,{className:"w-3 h-3 mr-1"}),"Live Data"]})]})}),o.jsx(ce,{className:"space-y-6",children:o.jsxs(Jn,{value:v,onValueChange:y,className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-4",children:[o.jsx(Xe,{value:"insights",children:"Your Insights"}),o.jsx(Xe,{value:"recommendations",children:"Smart Recommendations"}),o.jsx(Xe,{value:"actions",children:"Active Actions"}),o.jsx(Xe,{value:"progress",children:"Progress Tracking"})]}),o.jsxs(Oe,{value:"insights",className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.slice(0,4).map((C,I)=>{const R={positive:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",neutral:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",negative:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"},$={positive:o.jsx(Kl,{className:"w-4 h-4 rotate-45 text-green-600"}),neutral:o.jsx(Kl,{className:"w-4 h-4 text-amber-600"}),negative:o.jsx(Kl,{className:"w-4 h-4 -rotate-45 text-red-600"})};return o.jsxs("div",{className:"bg-slate-50/90 dark:bg-slate-800/90 rounded-2xl p-5 border border-slate-300 dark:border-slate-700 hover:shadow-xl transition-shadow duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-700 dark:bg-slate-600 rounded-lg flex items-center justify-center",children:o.jsx(C.icon,{className:"w-5 h-5 text-white"})}),o.jsx("span",{className:"text-3xl font-extrabold text-slate-900 dark:text-slate-200",children:C.value})]}),o.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-200 text-base mb-1",children:C.title}),o.jsx("div",{className:"flex items-center space-x-2 mb-2",children:o.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold ${R[C.change]||R.neutral}`,children:[$[C.change]||$.neutral,o.jsx("span",{className:"ml-1",children:C.trend})]})}),o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:C.description})]},I)})}),o.jsxs(re,{className:"bg-white dark:bg-gray-800 border border-slate-200/50 dark:border-slate-700/50 rounded-2xl shadow-md",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"text-lg flex items-center space-x-2",children:[o.jsx(os,{className:"w-5 h-5"}),o.jsx("span",{children:"Recent Activity Impact"})]})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Products Scanned This Week"}),o.jsx("span",{className:"font-semibold",children:t.currentWeekScans})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Average Sustainability Score"}),o.jsxs("span",{className:"font-semibold",children:[t.avgScore,"/100"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"CO Saved This Month"}),o.jsxs("span",{className:"font-semibold text-green-600",children:[t.co2Saved.toFixed(1),"kg"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Current Streak"}),o.jsxs("span",{className:"font-semibold text-blue-600",children:[t.streakDays," days"]})]})]})})]})]}),o.jsxs(Oe,{value:"recommendations",className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 p-4 bg-slate-50/80 dark:bg-slate-800/80 rounded-xl border border-slate-200/50 dark:border-slate-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(mh,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"}),o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Filters:"})]}),o.jsxs("select",{value:i,onChange:C=>s(C.target.value),className:"px-3 py-1 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm",children:[o.jsx("option",{value:"all",children:"All Categories"}),_.map(C=>o.jsx("option",{value:C,children:C},C))]}),o.jsxs("select",{value:a,onChange:C=>l(C.target.value),className:"px-3 py-1 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm",children:[o.jsx("option",{value:"all",children:"All Priorities"}),T.map(C=>o.jsx("option",{value:C,children:C},C))]})]}),o.jsx("div",{className:"space-y-4",children:N.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(ha,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Great job! You're on track"}),o.jsx("p",{className:"text-gray-500",children:"Keep scanning products and tracking your carbon footprint to get personalized recommendations."})]}):N.map(C=>o.jsxs("div",{className:`border-l-4 ${S(C.priority)} rounded-xl p-6 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-800 border border-slate-200/50 dark:border-slate-700/50`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-700 dark:bg-slate-600 rounded-xl flex items-center justify-center",children:o.jsx(C.icon,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:C.title}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(ne,{variant:"outline",className:"text-xs",children:C.category}),o.jsx(ne,{className:P(C.difficulty),children:C.difficulty}),c.includes(C.id)&&o.jsxs(ne,{className:"bg-green-100 text-green-800",children:[o.jsx(Yt,{className:"w-3 h-3 mr-1"}),"Completed"]})]})]})]}),o.jsxs(ne,{variant:"outline",className:"border-slate-300 text-slate-700 bg-white/70 dark:border-slate-600 dark:text-slate-300 dark:bg-gray-800/70",children:[C.confidence,"% confident"]})]}),o.jsx("p",{className:"text-slate-700 dark:text-slate-300 mb-4 leading-relaxed",children:C.description}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qn,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:C.timeToImplement})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(dt,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:C.carbonSaving})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(vr,{className:"w-4 h-4 text-blue-500"}),o.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:C.impact})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Q,{variant:"outline",size:"sm",className:"border-slate-300 hover:bg-slate-50 text-slate-700 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-700",children:"Learn More"}),o.jsxs(Q,{size:"sm",className:"bg-slate-800 hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600",onClick:()=>w(C),disabled:c.includes(C.id),children:[c.includes(C.id)?"Completed":"Take Action",!c.includes(C.id)&&o.jsx(Kl,{className:"w-4 h-4 ml-1"})]})]})]},C.id))})]}),o.jsx(Oe,{value:"actions",className:"space-y-6",children:o.jsxs("div",{className:"space-y-4",children:[Object.entries(h).map(([C,I])=>o.jsxs(re,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-semibold",children:I.recommendation.title}),o.jsx(ne,{variant:I.status==="completed"?"default":"secondary",children:I.status})]}),I.type==="product_search"&&I.data&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recommended products:"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:I.data.slice(0,3).map(R=>o.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 dark:bg-gray-800",children:[o.jsx("h4",{className:"font-medium text-sm",children:R.name}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[R.brand," - Score: ",R.sustainabilityScore]}),o.jsxs("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:["$",R.price]})]},R.id))})]}),I.type==="habit_tracker"&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Tracking: ",I.data.habit]}),o.jsx(Ht,{value:I.data.progress,className:"h-2"}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Target: ",I.data.target]})]}),I.type==="action_plan"&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Action steps:"}),o.jsx("div",{className:"space-y-1",children:I.data.steps.map((R,$)=>o.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[o.jsx(Yt,{className:"w-4 h-4 text-gray-400 dark:text-gray-600"}),o.jsx("span",{children:R})]},$))})]}),I.status!=="completed"&&o.jsx(Q,{size:"sm",onClick:()=>k(I.recommendation.id),className:"mt-3",children:"Mark Complete"})]},C)),Object.keys(h).length===0&&o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No active actions yet. Take action on recommendations to see them here!"})})]})}),o.jsx(Oe,{value:"progress",className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-slate-200/50 dark:border-slate-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center space-x-2",children:[o.jsx(Ta,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),o.jsx("span",{children:"Your Progress"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Recommendations Followed"}),o.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[c.length,"/",m.length]})]}),o.jsx(Ht,{value:m.length>0?c.length/m.length*100:0,className:"h-2"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Weekly Scan Goal"}),o.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[t.currentWeekScans,"/",t.weeklyGoal]})]}),o.jsx(Ht,{value:t.currentWeekScans/t.weeklyGoal*100,className:"h-2"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Sustainability Score"}),o.jsxs("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:[t.avgScore,"/100"]})]}),o.jsx(Ht,{value:t.avgScore,className:"h-2"})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-slate-200/50 dark:border-slate-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center space-x-2",children:[o.jsx(Kr,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),o.jsx("span",{children:"Achievements"})]}),o.jsxs("div",{className:"space-y-3",children:[t.streakDays>=7&&o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200/50 dark:border-yellow-700/30",children:[o.jsx(hr,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Week Streak Master"}),o.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:[t.streakDays," consecutive days"]})]})]}),t.co2Saved>=10&&o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200/50 dark:border-green-700/30",children:[o.jsx(dt,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-green-800 dark:text-green-300",children:"Carbon Reducer"}),o.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["Saved ",t.co2Saved.toFixed(1),"kg CO"]})]})]}),t.avgScore>=80&&o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200/50 dark:border-blue-700/30",children:[o.jsx(ha,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Sustainability Expert"}),o.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["Average score: ",t.avgScore,"/100"]})]})]})]})]})]})})]})})]})})},o3e=()=>{const{userStats:t,redeemReward:e,addPoints:r}=Xn(),{toast:n}=Ks(),{addRewardNotification:i}=Yw(),s=[{id:1,name:"First Steps",description:"Complete your first product scan",points:50,unlocked:t.totalScans>=1,icon:vr,color:"bg-emerald-500",category:"Getting Started"},{id:2,name:"Eco Explorer",description:`Scan ${t.totalScans>=10?"25":"10"} products`,points:t.totalScans>=10?200:100,unlocked:t.totalScans>=(t.totalScans>=10?25:10),progress:t.totalScans>=10?Math.min(t.totalScans/25*100,100):Math.min(t.totalScans/10*100,100),icon:yr,color:"bg-blue-500",category:"Scanning"},{id:3,name:"Carbon Tracker",description:`Track ${t.co2Saved>=5?"15kg":"5kg"} of CO savings`,points:t.co2Saved>=5?300:200,unlocked:t.co2Saved>=(t.co2Saved>=5?15:5),progress:t.co2Saved>=5?Math.min(t.co2Saved/15*100,100):Math.min(t.co2Saved/5*100,100),icon:dt,color:"bg-green-500",category:"Environmental Impact"},{id:4,name:"Learning Champion",description:`Complete ${t.coursesCompleted>=5?"10":"5"} courses`,points:t.coursesCompleted>=5?400:250,unlocked:t.coursesCompleted>=(t.coursesCompleted>=5?10:5),progress:t.coursesCompleted>=5?Math.min(t.coursesCompleted/10*100,100):Math.min(t.coursesCompleted/5*100,100),icon:HP,color:"bg-purple-500",category:"Education"},{id:5,name:"Community Helper",description:`Help ${t.communityHelpCount>=5?"15":"5"} community members`,points:t.communityHelpCount>=5?350:200,unlocked:t.communityHelpCount>=(t.communityHelpCount>=5?15:5),progress:t.communityHelpCount>=5?Math.min(t.communityHelpCount/15*100,100):Math.min(t.communityHelpCount/5*100,100),icon:yr,color:"bg-indigo-500",category:"Community"},{id:6,name:"Recipe Explorer",description:`Try ${t.recipesViewed>=10?"25":"10"} sustainable recipes`,points:t.recipesViewed>=10?300:150,unlocked:t.recipesViewed>=(t.recipesViewed>=10?25:10),progress:t.recipesViewed>=10?Math.min(t.recipesViewed/25*100,100):Math.min(t.recipesViewed/10*100,100),icon:fa,color:"bg-pink-500",category:"Lifestyle"},{id:7,name:"Transport Pioneer",description:`Use sustainable transport ${t.transportTrips>=5?"20":"5"} times`,points:t.transportTrips>=5?400:200,unlocked:t.transportTrips>=(t.transportTrips>=5?20:5),progress:t.transportTrips>=5?Math.min(t.transportTrips/20*100,100):Math.min(t.transportTrips/5*100,100),icon:Cr,color:"bg-cyan-500",category:"Transport"},{id:8,name:"Sustainable Investor",description:`Make ${t.investmentsMade>=1?"5":"1"} sustainable investments`,points:t.investmentsMade>=1?600:300,unlocked:t.investmentsMade>=(t.investmentsMade>=1?5:1),progress:t.investmentsMade>=1?Math.min(t.investmentsMade/5*100,100):Math.min(t.investmentsMade/1*100,100),icon:HP,color:"bg-amber-500",category:"Investment"}],a=[{id:1,name:"10% Off Eco Products",cost:150,description:"Discount on sustainable marketplace purchases",type:"discount",icon:nm,available:t.totalPoints>=150,category:"Shopping",savings:"Up to $50 value"},{id:2,name:"Plant a Tree",cost:300,description:"We plant a tree in your name through our partners",type:"impact",icon:dt,available:t.totalPoints>=300,category:"Environmental Impact",savings:"1 tree planted"},{id:3,name:"Premium Analytics",cost:500,description:"1 month of advanced insights and tracking",type:"feature",icon:hr,available:t.totalPoints>=500,category:"Features",savings:"$9.99 value"},{id:4,name:"Sustainability Consultation",cost:750,description:"30-minute call with sustainability expert",type:"service",icon:yr,available:t.totalPoints>=750,category:"Expert Advice",savings:"$75 value"},{id:5,name:"Carbon Offset Package",cost:1e3,description:"Offset 1 ton of your carbon footprint",type:"impact",icon:Cr,available:t.totalPoints>=1e3,category:"Carbon Offset",savings:"1 ton CO offset"},{id:6,name:"Eco Product Bundle",cost:1250,description:"Curated bundle of top-rated sustainable products",type:"product",icon:Qy,available:t.totalPoints>=1250,category:"Product Bundle",savings:"$150 value"}],c=(()=>{const x=[],b=Math.max(1,Math.ceil(t.totalScans/30)),w=Math.max(1,b);x.push({task:`Scan ${w} sustainable product${w>1?"s":""}`,progress:Math.min(t.currentWeekScans,w),total:w,points:w*15,completed:t.currentWeekScans>=w,category:"Scanning"});const k=Math.max(1,Math.ceil(t.co2Saved/10));return x.push({task:`Save ${k}kg CO today`,progress:t.co2Saved>=k?k:t.co2Saved%k||0,total:k,points:k*20,completed:t.co2Saved%10>=k,category:"Carbon Tracking"}),t.coursesCompleted<10&&x.push({task:"Complete 1 sustainability course",progress:t.coursesCompleted>0?1:0,total:1,points:50,completed:t.coursesCompleted>0,category:"Learning"}),x.push({task:"Help 1 community member",progress:t.communityHelpCount>0?1:0,total:1,points:30,completed:t.communityHelpCount>0,category:"Community"}),x})(),u=x=>{e(x.cost)?(n({title:"Reward Redeemed! ",description:`You've successfully redeemed: ${x.name}. Check your email for details.`,duration:5e3}),i(x.name)):n({title:"Insufficient Points",description:`You need ${x.cost-t.totalPoints} more points to redeem this reward.`,variant:"destructive",duration:3e3})},h=()=>s.filter(x=>x.unlocked).length,d=()=>c.filter(x=>x.completed).length,f=[0,100,300,600,1e3,1500,2500,4e3,6e3,1e4],m=f.findIndex((x,b)=>t.totalPoints>=x&&(f[b+1]===void 0||t.totalPoints<f[b+1]))+1,g=f[m-1]||0,v=f[m]||f[f.length-1],y=v?(t.totalPoints-g)/(v-g)*100:100;return o.jsxs("div",{className:"space-y-6",children:[o.jsx(re,{className:"bg-gradient-to-r from-emerald-500 to-green-600 text-white border-0 shadow-xl dark:from-emerald-700 dark:to-green-800",children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[t.totalPoints.toLocaleString()," Points"]}),o.jsxs("div",{className:"flex items-center space-x-4 text-emerald-100 dark:text-emerald-300",children:[o.jsxs("span",{children:["Level ",m]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[h(),"/",s.length," achievements"]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[d(),"/",c.length," challenges today"]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(WP,{className:"w-8 h-8 mx-auto mb-1"}),o.jsx("div",{className:"text-xs",children:"Points"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Us,{className:"w-8 h-8 mx-auto mb-1"}),o.jsxs("div",{className:"text-xs",children:["Level ",m]})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{children:["Progress to Level ",m+1]}),o.jsx("span",{children:v?`${v-t.totalPoints} points to go`:"Max Level!"})]}),o.jsx(Ht,{value:y,className:"h-3 bg-emerald-400 dark:bg-emerald-600"})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"bg-white/80 backdrop-blur-sm border-green-200 shadow-lg dark:bg-gray-900/80 dark:border-green-700",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center justify-between text-green-700 dark:text-green-400",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(os,{className:"w-5 h-5"}),o.jsx("span",{children:"Today's Challenges"})]}),o.jsxs(ne,{variant:"outline",className:"bg-green-50 text-green-600 border-green-200 dark:bg-green-900/50 dark:text-green-400 dark:border-green-700",children:[d(),"/",c.length," Complete"]})]})}),o.jsx(ce,{className:"space-y-4",children:c.map((x,b)=>o.jsxs("div",{className:`rounded-lg p-4 transition-all duration-200 ${x.completed?"bg-green-50 border border-green-200 dark:bg-green-800 dark:border-green-700":"bg-gray-50 border border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[x.completed&&o.jsx(Yt,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),o.jsx("span",{className:`font-medium ${x.completed?"text-green-800 dark:text-green-400":"text-gray-700 dark:text-gray-300"}`,children:x.task})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{variant:"outline",className:`text-xs ${x.completed?"bg-green-100 text-green-700 border-green-300 dark:bg-green-700 dark:text-green-400 dark:border-green-600":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:x.category}),o.jsxs(ne,{variant:x.completed?"default":"secondary",className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-700 dark:text-emerald-300",children:["+",x.points]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ht,{value:x.progress/x.total*100,className:"flex-1 h-2"}),o.jsxs("span",{className:"text-sm text-green-600 font-medium dark:text-green-400",children:[x.progress,"/",x.total]})]})]},b))})]}),o.jsxs(re,{className:"bg-white/80 backdrop-blur-sm border-green-200 shadow-lg dark:bg-gray-900/80 dark:border-green-700",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2 text-green-700 dark:text-green-400",children:[o.jsx(Us,{className:"w-5 h-5"}),o.jsx("span",{children:"Achievements"})]})}),o.jsx(ce,{className:"space-y-4 max-h-96 overflow-y-auto",children:s.map(x=>o.jsx("div",{className:`p-4 rounded-lg border transition-all duration-200 ${x.unlocked?"bg-emerald-50 border-emerald-200 shadow-sm dark:bg-emerald-900 dark:border-emerald-700":"bg-gray-50 border-gray-200 dark:bg-gray-900 dark:border-gray-700"}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-12 h-12 ${x.color} rounded-xl flex items-center justify-center ${!x.unlocked&&"opacity-50"} shadow-md`,children:o.jsx(x.icon,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h3",{className:`font-semibold ${x.unlocked?"text-green-800 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:x.name}),o.jsx(ne,{variant:"outline",className:"text-xs dark:text-gray-400",children:x.category})]}),o.jsx("p",{className:`text-sm ${x.unlocked?"text-green-600 dark:text-green-300":"text-gray-400 dark:text-gray-500"}`,children:x.description}),!x.unlocked&&x.progress!==void 0&&o.jsx("div",{className:"mt-2",children:o.jsx(Ht,{value:x.progress,className:"h-1.5"})})]}),o.jsxs(ne,{variant:x.unlocked?"default":"secondary",className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-700 dark:text-emerald-300",children:["+",x.points]})]})},x.id))})]})]}),o.jsxs(re,{className:"bg-white/80 backdrop-blur-sm border-green-200 shadow-lg dark:bg-gray-900/80 dark:border-green-700",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center justify-between text-green-700 dark:text-green-400",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(nm,{className:"w-5 h-5"}),o.jsx("span",{children:"Rewards Store"})]}),o.jsxs(ne,{variant:"outline",className:"bg-green-50 text-green-600 border-green-200 dark:bg-green-900/50 dark:text-green-400 dark:border-green-700",children:[a.filter(x=>x.available).length," Available"]})]})}),o.jsx(ce,{children:t.totalPoints<150?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(nm,{className:"w-20 h-20 text-gray-300 dark:text-gray-600 mx-auto mb-6"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-300 mb-3",children:"Start earning rewards!"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Complete challenges and track your sustainability journey to unlock amazing rewards."}),o.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200 dark:bg-green-900/50 dark:border-green-700",children:[o.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:[o.jsx("strong",{children:"Next reward unlocks at 150 points!"})," You need ",150-t.totalPoints," more points."]}),o.jsx("div",{className:"mt-3",children:o.jsx(Ht,{value:t.totalPoints/150*100,className:"h-2"})})]})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(x=>o.jsxs("div",{className:`p-6 rounded-xl border transition-all duration-200 hover:shadow-lg ${x.available?"bg-white border-green-200 hover:border-green-300 dark:bg-gray-800 dark:border-green-700 hover:dark:border-green-600":"bg-gray-50 border-gray-200 opacity-75 dark:bg-gray-900 dark:border-gray-700"}`,children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-md",children:o.jsx(x.icon,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-400",children:x.name}),o.jsx(ne,{variant:"outline",className:"text-xs mt-1 dark:text-gray-400",children:x.category})]})]}),o.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mb-3",children:x.description}),o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsx("div",{className:"text-xs text-green-500 font-medium dark:text-green-400",children:x.savings})}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(WP,{className:"w-4 h-4 text-amber-500"}),o.jsx("span",{className:"font-semibold text-green-800 dark:text-green-400",children:x.cost})]}),o.jsx(Q,{size:"sm",disabled:!x.available||t.totalPoints<x.cost,className:`${x.available&&t.totalPoints>=x.cost?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700":"bg-gray-300"}`,onClick:()=>u(x),children:t.totalPoints>=x.cost?"Redeem":`Need ${x.cost-t.totalPoints}`})]})]},x.id))})})]})]})},jH=({product:t})=>{var b;const{user:e}=wr(),{addNotification:r}=Ya(),[n,i]=E.useState({}),[s,a]=D.useState(null),l=ig(),c={Package:vd,Truck:KS,Factory:Lf,Recycle:xd,Leaf:dt,AlertCircle:Zi,CheckCircle:Yt,Clock:qn,MapPin:yd,Zap:Cr,Droplets:fi,Globe:pd},u=localStorage.getItem("persistedProductLifecycle");let h=t||((b=l.state)==null?void 0:b.product);if(!h&&u)try{h=JSON.parse(u),h.stages&&Array.isArray(h.stages)&&(h.stages=h.stages.map(w=>({...w,icon:c[w.iconName]||null})))}catch(w){console.error("Error parsing persisted product lifecycle from localStorage",w),h=null}const d=s||h;E.useEffect(()=>{(async()=>{if(e)try{const k=gt(Ne,`users/${e.uid}/productLifecycleViewedProducts`),S=await Sr(k),P={};S.forEach(N=>{P[N.id]=N.data()}),i(P)}catch(k){console.error("Error fetching viewed products:",k),i({})}else i({})})()},[e]),E.useEffect(()=>{(async()=>{if(e)try{let k=(d==null?void 0:d.id)||(s==null?void 0:s.id),S=null;if(k){const P=Re(Ne,`users/${e.uid}/savedProductLifecycles`,k.toString()),N=await Zo(P);N.exists()&&(S=N.data())}else{const P=gt(Ne,`users/${e.uid}/savedProductLifecycles`),N=await Sr(P);let _=null;N.forEach(T=>{const j=T.data();(!_||j.savedAt&&j.savedAt.toMillis()>_.savedAt.toMillis())&&(_=j)}),S=_}S?(S.stages&&Array.isArray(S.stages)&&(S.stages=S.stages.map(P=>({...P,icon:c[P.iconName]||null}))),a(S),localStorage.setItem("persistedProductLifecycle",JSON.stringify(S))):(a(null),localStorage.removeItem("persistedProductLifecycle"))}catch(k){console.error("Error fetching saved product lifecycle data:",k),a(null),localStorage.removeItem("persistedProductLifecycle")}else a(null),localStorage.removeItem("persistedProductLifecycle")})()},[e,d==null?void 0:d.id]);const f=s||d,m=w=>{switch(w){case"completed":return o.jsx(Yt,{className:"w-5 h-5 text-green-500"});case"active":return o.jsx(qn,{className:"w-5 h-5 text-blue-500"});case"pending":return o.jsx(Zi,{className:"w-5 h-5 text-gray-400"});default:return null}},g=w=>{switch(w){case"completed":return"border-green-200 bg-green-50";case"active":return"border-blue-200 bg-blue-50";case"pending":return"border-gray-200 bg-gray-50";default:return"border-gray-200"}},v=async w=>{if(e){const k=Re(Ne,`users/${e.uid}/productLifecycleViewedProducts`,w.toString());await Zt(k,{viewedAt:new Date},{merge:!0})}};if(!d)return o.jsx("div",{children:"No product data available."});const y=(f.stages??[]).reduce((w,k)=>{var S,P,N;return{co2:w.co2+(((S=k.impact)==null?void 0:S.co2)||0),water:w.water+(((P=k.impact)==null?void 0:P.water)||0),energy:w.energy+(((N=k.impact)==null?void 0:N.energy)||0)}},{co2:0,water:0,energy:0}),x=async()=>{if(!e){alert("You must be logged in to save lifecycle data.");return}try{const w=(d.stages??[]).map(P=>{const{icon:N,..._}=P;return{..._,iconName:(N==null?void 0:N.displayName)||null,details:P.details||"",progress:P.progress||null}}),k={id:d.id,name:d.name,brand:d.brand,price:d.price,image:d.image,sustainabilityScore:d.sustainabilityScore,carbon:d.carbon,water:d.water,packaging:d.packaging,certifications:d.certifications,materials:d.materials,origin:d.origin,barcode:d.barcode,alternatives:d.alternatives,features:d.features,inStock:d.inStock,rating:d.rating,reviews:d.reviews,description:d.description,category:d.category,sustainability:d.sustainability,stages:w},S=Re(Ne,`users/${e.uid}/savedProductLifecycles`,d.id.toString());await Zt(S,k,{merge:!0}),a(k),localStorage.setItem("persistedProductLifecycle",JSON.stringify(k)),alert("Product lifecycle data saved successfully."),r({type:"achievement",title:"Product Lifecycle Saved",message:`You have saved the lifecycle data for ${d.name}.`,read:!1,source:"productLifecycle",actionable:!0,action:"View"})}catch(w){console.error("Error saving product lifecycle data:",w),alert("Failed to save product lifecycle data.")}};return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-white/80 backdrop-blur-sm border-sage-200 dark:bg-gray-900 dark:border-gray-700",children:[o.jsx(je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ce,{className:"flex items-center space-x-2 text-sage-700 dark:text-gray-200",children:[o.jsx(vd,{className:"w-6 h-6"}),o.jsx("span",{children:"Product Lifecycle Tracking"})]}),o.jsx(Q,{onClick:x,className:"bg-emerald-500 hover:bg-emerald-600 text-white dark:bg-emerald-700 dark:hover:bg-emerald-600",children:"Save"})]})}),o.jsxs(ce,{children:[o.jsxs("div",{className:"bg-gradient-to-r from-sage-50 to-emerald-50 rounded-xl p-6 mb-6 dark:from-gray-800 dark:to-gray-900",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-sage-800 dark:text-gray-200",children:f.name}),o.jsx("p",{className:"text-sage-600 dark:text-gray-400",children:f.brand||"N/A"})]}),o.jsxs(ne,{className:"bg-emerald-500 hover:bg-emerald-600 text-white text-lg px-4 py-2 dark:bg-emerald-700 dark:hover:bg-emerald-600",children:[f.sustainabilityScore||"N/A","/100"]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center mb-2",children:[o.jsx(pd,{className:"w-5 h-5 text-red-500 dark:text-red-400 mr-2"}),o.jsx("span",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:y.co2.toFixed(1)})]}),o.jsx("p",{className:"text-sm text-sage-600 dark:text-gray-400",children:"kg CO"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center mb-2",children:[o.jsx(fi,{className:"w-5 h-5 text-blue-500 dark:text-blue-400 mr-2"}),o.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y.water})]}),o.jsx("p",{className:"text-sm text-sage-600 dark:text-gray-400",children:"L Water"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center mb-2",children:[o.jsx(Cr,{className:"w-5 h-5 text-yellow-500 dark:text-yellow-400 mr-2"}),o.jsx("span",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:y.energy})]}),o.jsx("p",{className:"text-sm text-sage-600 dark:text-gray-400",children:"kWh Energy"})]})]})]}),o.jsxs(Jn,{defaultValue:"timeline",className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-2",children:[o.jsx(Xe,{value:"timeline",children:"Lifecycle Timeline"}),o.jsx(Xe,{value:"impact",children:"Impact Analysis"})]}),o.jsx(Oe,{value:"timeline",className:"space-y-6 dark:text-gray-200",onPointerEnter:()=>f.id&&v(f.id),children:o.jsx("div",{className:"space-y-4",children:(f.stages??[]).map(w=>o.jsxs("div",{className:`p-6 rounded-xl border-2 ${g(w.status)} transition-all duration-300 dark:border-gray-700 dark:bg-gray-800`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-sage-600 rounded-xl flex items-center justify-center dark:bg-slate-700",children:w.icon?o.jsx(w.icon,{className:"w-6 h-6 text-white"}):null}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-sage-800 flex items-center space-x-2 dark:text-gray-200",children:[o.jsx("span",{children:w.name}),m(w.status)]}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-sage-600 mt-1 dark:text-gray-400",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(yd,{className:"w-3 h-3"}),o.jsx("span",{children:w.location||"N/A"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(qn,{className:"w-3 h-3"}),o.jsx("span",{children:w.duration||"N/A"})]})]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:w.impact.co2}),o.jsx("p",{className:"text-sage-500 dark:text-gray-400",children:"CO"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:w.impact.water}),o.jsx("p",{className:"text-sage-500 dark:text-gray-400",children:"HO"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"font-semibold text-yellow-600 dark:text-yellow-400",children:w.impact.energy}),o.jsx("p",{className:"text-sage-500 dark:text-gray-400",children:"kWh"})]})]})})]}),o.jsx("p",{className:"text-sage-700 dark:text-gray-300",children:w.details}),w.status==="active"&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"flex justify-between text-sm text-sage-600 dark:text-gray-400 mb-2",children:[o.jsx("span",{children:"Progress through use phase"}),o.jsx("span",{children:"2.3 / 3+ years"})]}),o.jsx(Ht,{value:76,className:"h-2"})]})]},w.name))})}),o.jsx(Oe,{value:"impact",className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"border-sage-200",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-sage-700",children:"Environmental Impact"})}),o.jsx(ce,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{children:"Carbon Footprint"}),o.jsxs("span",{children:[y.co2.toFixed(1)," kg CO"]})]}),o.jsx(Ht,{value:65,className:"h-2"}),o.jsx("p",{className:"text-xs text-sage-500 mt-1",children:"35% lower than industry average"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{children:"Water Usage"}),o.jsxs("span",{children:[y.water," L"]})]}),o.jsx(Ht,{value:45,className:"h-2"}),o.jsx("p",{className:"text-xs text-sage-500 mt-1",children:"55% lower than conventional cotton"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{children:"Energy Consumption"}),o.jsxs("span",{children:[y.energy," kWh"]})]}),o.jsx(Ht,{value:40,className:"h-2"}),o.jsx("p",{className:"text-xs text-sage-500 mt-1",children:"60% from renewable sources"})]})]})})]}),o.jsxs(re,{className:"border-sage-200",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-sage-700",children:"Sustainability Certifications"})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx(Yt,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sage-800",children:"GOTS Certified"}),o.jsx("p",{className:"text-xs text-sage-600",children:"Global Organic Textile Standard"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx(Yt,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sage-800",children:"Fair Trade"}),o.jsx("p",{className:"text-xs text-sage-600",children:"Ethical labor practices"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx(Yt,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sage-800",children:"Cradle to Cradle"}),o.jsx("p",{className:"text-xs text-sage-600",children:"Bronze level certification"})]})]})]})})]})]})})]})]})]})})},l3e=()=>{const[t,e]=E.useState("active"),r=y=>{switch(y){case"Waste Reduction":return{icon:xd,color:"bg-green-500"};case"Transportation":return{icon:zm,color:"bg-blue-500"};case"Energy":return{icon:Cr,color:"bg-yellow-500"};case"Water":return{icon:fi,color:"bg-blue-500"};case"Food":case"Shopping":return{icon:Qy,color:"bg-orange-500"};default:return{icon:dt,color:"bg-green-500"}}},n=[{id:"4",title:"Plastic-Free July",description:"Eliminate single-use plastics for the entire month",category:"Waste Reduction",duration:"30 days",points:1500,startDate:"2024-07-01",icon:xd,color:"bg-green-500",status:"upcoming",difficulty:"Hard"},{id:"5",title:"Local Food Challenge",description:"Source 80% of your food from local producers",category:"Food",duration:"14 days",points:600,startDate:"2024-06-25",icon:Qy,color:"bg-orange-500",status:"upcoming",difficulty:"Medium"}],{user:i}=wr(),[s,a]=E.useState([]),[l,c]=E.useState([]),[u,h]=E.useState([]),[d,f]=E.useState(n),m=(y,x)=>{const b=r(y.category);return{id:x,title:y.title,description:y.description||"No description available",category:y.category,points:y.points,icon:b.icon,color:b.color,status:y.status,progress:y.progress,target:y.target,result:y.result,completedDate:y.completedDate}};E.useEffect(()=>{if(!i){a([]),c([]),h([]);return}const y=gt(Ne,"users",i.uid,"challenges"),x=On(y,b=>{const w=b.docs.map(_=>({..._.data(),id:_.id}));a(w);const k=w.filter(_=>_.status==="active").map(_=>m(_,_.id)),S=w.filter(_=>_.status==="completed").map(_=>m(_,_.id));c(k),h(S);const P=w.map(_=>_.challengeId),N=n.filter(_=>!P.includes(_.id));f(N)},b=>{console.error("Error fetching user challenges:",b)});return()=>x()},[i]);const g=async y=>{if(!i)return;const x=Re(Ne,"users",i.uid,"challenges",y.id);try{await Zt(x,{challengeId:y.id,title:y.title,description:y.description,category:y.category,points:y.points,status:"active",progress:0,target:y.duration?y.duration.includes("days")?parseInt(y.duration):0:y.target||0,unit:y.duration?y.duration.includes("days")?"days":"":y.unit||"",joinedAt:Nv()}),console.log(`Joined challenge: ${y.title}`)}catch(b){console.error("Error joining challenge:",b)}},v=y=>{switch(y){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-gradient-to-r from-sage-50 to-emerald-50 border-sage-200",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2 text-sage-700",children:[o.jsx(vr,{className:"w-6 h-6"}),o.jsx("span",{children:"Sustainability Challenges"})]})}),o.jsx(ce,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-xl flex items-center justify-center mx-auto mb-2",children:o.jsx(Us,{className:"w-6 h-6 text-white"})}),o.jsx("p",{className:"text-2xl font-bold text-sage-800",children:u.length}),o.jsx("p",{className:"text-sm text-sage-600",children:"Completed"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mx-auto mb-2",children:o.jsx(vr,{className:"w-6 h-6 text-white"})}),o.jsx("p",{className:"text-2xl font-bold text-sage-800",children:l.length}),o.jsx("p",{className:"text-sm text-sage-600",children:"Active"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center mx-auto mb-2",children:o.jsx(yr,{className:"w-6 h-6 text-white"})}),o.jsx("p",{className:"text-2xl font-bold text-sage-800",children:s.reduce((y,x)=>y+x.points,0)}),o.jsx("p",{className:"text-sm text-sage-600",children:"Points Earned"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center mx-auto mb-2",children:o.jsx(os,{className:"w-6 h-6 text-white"})}),o.jsx("p",{className:"text-2xl font-bold text-sage-800",children:"45"}),o.jsx("p",{className:"text-sm text-sage-600",children:"Day Streak"})]})]})})]}),o.jsxs(Jn,{value:t,onValueChange:e,className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-3",children:[o.jsx(Xe,{value:"active",children:"Active Challenges"}),o.jsx(Xe,{value:"upcoming",children:"Upcoming"}),o.jsx(Xe,{value:"completed",children:"Completed"})]}),o.jsx(Oe,{value:"active",className:"space-y-4",children:l.map(y=>o.jsx(re,{className:"bg-white/80 backdrop-blur-sm border-sage-200",children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-12 h-12 ${y.color} rounded-xl flex items-center justify-center`,children:o.jsx(y.icon,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sage-800",children:y.title}),o.jsx("p",{className:"text-sm text-sage-600",children:y.category})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{className:v(y.difficulty),children:y.difficulty||"N/A"}),o.jsxs(ne,{variant:"outline",className:"text-emerald-600 border-emerald-200",children:["+",y.points," pts"]})]})]}),o.jsx("p",{className:"text-sage-700 mb-4",children:y.description}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-sage-600",children:"Progress"}),o.jsxs("span",{className:"font-medium text-sage-800",children:[y.progress,"/",y.target]})]}),o.jsx(Ht,{value:y.target?y.progress/y.target*100:0,className:"h-2"}),o.jsx("div",{className:"flex items-center justify-between text-sm text-sage-600",children:o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(qn,{className:"w-4 h-4"}),o.jsx("span",{children:"Active"})]})})})]})]})},y.id))}),o.jsx(Oe,{value:"upcoming",className:"space-y-4",children:d.map(y=>o.jsx(re,{className:"bg-white/80 backdrop-blur-sm border-sage-200",children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-12 h-12 ${y.color} rounded-xl flex items-center justify-center`,children:o.jsx(y.icon,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sage-800",children:y.title}),o.jsx("p",{className:"text-sm text-sage-600",children:y.category})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ne,{className:v(y.difficulty),children:y.difficulty}),o.jsxs(ne,{variant:"outline",className:"text-emerald-600 border-emerald-200",children:["+",y.points," pts"]})]})]}),o.jsx("p",{className:"text-sage-700 mb-4",children:y.description}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-sage-600",children:[o.jsxs("p",{children:["Duration: ",y.duration]}),o.jsxs("p",{children:["Starts: ",y.startDate?new Date(y.startDate).toLocaleDateString():"TBD"]})]}),o.jsx(Q,{variant:"outline",className:"border-sage-200 hover:bg-sage-50",onClick:()=>g(y),children:"Join Challenge"})]})]})},y.id))}),o.jsx(Oe,{value:"completed",className:"space-y-4",children:u.map(y=>o.jsx(re,{className:"bg-white/80 backdrop-blur-sm border-sage-200 opacity-75",children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-12 h-12 ${y.color} rounded-xl flex items-center justify-center`,children:o.jsx(y.icon,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-sage-800",children:y.title}),o.jsx("p",{className:"text-sm text-sage-600",children:y.category})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Us,{className:"w-5 h-5 text-emerald-500"}),o.jsxs(ne,{variant:"outline",className:"text-emerald-600 border-emerald-200",children:["+",y.points," pts"]})]})]}),o.jsx("p",{className:"text-sage-700 mb-4",children:y.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-sage-600",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-emerald-700",children:y.result||"Challenge completed!"}),o.jsxs("p",{children:["Completed: ",y.completedDate?new Date(y.completedDate).toLocaleDateString():"Recently"]})]}),o.jsx(Q,{variant:"ghost",size:"sm",className:"text-sage-600",children:"View Details"})]})]})},y.id))})]})]})};function qi({className:t,...e}){return o.jsx("div",{className:vt("animate-pulse rounded-md bg-muted",t),...e})}const c3e=()=>{const{user:t}=wr();E.useState("forest");const[e,r]=E.useState(null),[n,i]=E.useState({totalUsers:0,treesPlanted:0,waterSaved:0,carbonOffset:0,communitiesHelped:0}),s=[{id:"forest",name:"Forest Restoration",icon:qo,description:"Plant trees and restore degraded forests worldwide",progress:78,goal:1e5,current:78432,impact:"Every scan = 1 tree planted",color:"bg-green-500"},{id:"water",name:"Clean Water Access",icon:fi,description:"Provide clean water access to communities in need",progress:65,goal:5e4,current:32500,impact:"Every 10 scans = 1 day of clean water",color:"bg-blue-500"},{id:"air",name:"Air Quality Improvement",icon:ly,description:"Support projects that improve air quality in cities",progress:42,goal:25e3,current:10500,impact:"Every 5 scans = 1kg CO offset",color:"bg-purple-500"}];E.useEffect(()=>{if(!t){r(null);return}const l=Re(Ne,"users",t.uid,"impactStats","summary"),c=On(l,d=>{d.exists()?r(d.data()):r({treesPlanted:0,waterSaved:0,carbonOffset:0,communitiesHelped:0})},d=>{console.error("Error fetching user impact stats:",d),r({treesPlanted:0,waterSaved:0,carbonOffset:0,communitiesHelped:0})}),u=Re(Ne,"global","impact"),h=On(u,d=>{d.exists()?i(d.data()):i({totalUsers:0,treesPlanted:0,waterSaved:0,carbonOffset:0,communitiesHelped:0})},d=>{console.error("Error fetching global impact stats:",d)});return()=>{c(),h()}},[t]);const a=[{title:"Tree Planter",description:"Planted 100+ trees",icon:qo,unlocked:!0,rarity:"common"},{title:"Carbon Hero",description:"Offset 50kg+ CO",icon:ly,unlocked:e?e.carbonOffset>=50:!1,rarity:"epic"},{title:"Water Guardian",description:"Saved 1000L+ water",icon:fi,unlocked:e?e.waterSaved>=1e3:!1,rarity:"rare"}];return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2 text-green-700",children:[o.jsx(ls,{className:"w-6 h-6"}),o.jsx("span",{children:"Social Impact Hub"}),o.jsx(ne,{variant:"secondary",className:"ml-auto bg-green-100 text-green-700",children:"Community Driven"})]})}),o.jsxs(ce,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[n?o.jsx(yr,{className:"w-6 h-6 mx-auto mb-2 text-blue-600"}):o.jsx(qi,{className:"w-6 h-6 mx-auto mb-2 bg-gray-300"}),o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n?n.totalUsers.toLocaleString():o.jsx(qi,{className:"w-16 h-6 mx-auto bg-gray-300"})}),o.jsx("div",{className:"text-sm text-gray-600",children:"Active Users"})]}),o.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[n?o.jsx(qo,{className:"w-6 h-6 mx-auto mb-2 text-green-600"}):o.jsx(qi,{className:"w-6 h-6 mx-auto mb-2 bg-gray-300"}),o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n?n.treesPlanted.toLocaleString():o.jsx(qi,{className:"w-16 h-6 mx-auto bg-gray-300"})}),o.jsx("div",{className:"text-sm text-gray-600",children:"Trees Planted"})]}),o.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[n?o.jsx(fi,{className:"w-6 h-6 mx-auto mb-2 text-blue-600"}):o.jsx(qi,{className:"w-6 h-6 mx-auto mb-2 bg-gray-300"}),o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n?`${Math.round(n.waterSaved/1e3)}K`:o.jsx(qi,{className:"w-16 h-6 mx-auto bg-gray-300"})}),o.jsx("div",{className:"text-sm text-gray-600",children:"Liters Saved"})]}),o.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[n?o.jsx(ly,{className:"w-6 h-6 mx-auto mb-2 text-purple-600"}):o.jsx(qi,{className:"w-6 h-6 mx-auto mb-2 bg-gray-300"}),o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:n?n.carbonOffset.toLocaleString():o.jsx(qi,{className:"w-16 h-6 mx-auto bg-gray-300"})}),o.jsx("div",{className:"text-sm text-gray-600",children:"kg CO Offset"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Support a Cause"}),s.map(l=>o.jsxs("div",{className:"bg-white/80 rounded-xl p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 ${l.color} rounded-xl flex items-center justify-center`,children:o.jsx(l.icon,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:l.name}),o.jsx("p",{className:"text-sm text-gray-600",children:l.description})]})]}),o.jsxs(ne,{variant:"outline",className:"text-xs",children:[l.progress,"% Complete"]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:"text-gray-600",children:[l.current.toLocaleString()," / ",l.goal.toLocaleString()]}),o.jsx("span",{className:"text-green-600 font-medium",children:l.impact})]}),o.jsx(Ht,{value:l.progress,className:"h-2"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Q,{variant:"outline",size:"sm",children:"Learn More"}),o.jsxs(Q,{size:"sm",className:`${l.color} hover:opacity-90 text-white`,children:[o.jsx(ub,{className:"w-4 h-4 mr-2"}),"Share Impact"]})]})]},l.id))]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Your Impact Achievements"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.map((l,c)=>o.jsxs("div",{className:`bg-white/80 rounded-xl p-4 border ${l.unlocked?"border-green-200":"border-gray-200"} ${!l.unlocked&&(t?"opacity-60":"opacity-30")}`,children:[!t&&o.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-xl flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"Log in to see"})}),o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx(l.icon,{className:`w-6 h-6 ${l.unlocked?"text-green-600":"text-gray-400"}`}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-800",children:l.title}),o.jsx("p",{className:"text-xs text-gray-600",children:l.description})]})]}),o.jsx(ne,{variant:l.unlocked?"default":"secondary",className:"text-xs",children:t&&l.unlocked?"Unlocked":"Locked"})]},c))})]})]})]})})},u3e=()=>{const{user:t}=wr(),e=$E(),{toast:r}=Ks(),[n,i]=E.useState("week"),[s,a]=E.useState([]),[l,c]=E.useState([]),[u,h]=E.useState(!1),d=async(U,H)=>{if(!t){console.warn("User not authenticated. Cannot save insights.");return}try{const q=Re(Ne,"users",t.uid,"userInsights","latest");await Zt(q,{monthlyAnalytics:U,yearlyAnalytics:H,timestamp:new Date},{merge:!0}),console.log("User insights saved successfully!")}catch(q){console.error("Error saving user insights:",q)}},[f,m]=E.useState(null);E.useEffect(()=>{if(!t){a([]);return}const U=Nc(gt(Ne,`users/${t.uid}/scannedProducts`),Od("timestamp","desc")),H=On(U,q=>{const oe=q.docs.map(ve=>({id:ve.id,...ve.data()}));a(oe)},q=>{console.error("Error fetching scanned products:",q)});return()=>H()},[t]),E.useEffect(()=>{if(!t){c([]);return}const U=Nc(gt(Ne,`users/${t.uid}/carbonEntries`),Od("date","desc")),H=On(U,q=>{const oe=q.docs.map(ve=>({id:ve.id,...ve.data()}));c(oe)},q=>console.error("Error fetching carbon entries:",q));return()=>H()},[t]);const g=()=>{if(s.length<2)return 0;const U=new Date,H=s.filter(se=>{var X;const V=new Date(((X=se.timestamp)==null?void 0:X.toDate())||se.timestamp);return V.getMonth()===U.getMonth()&&V.getFullYear()===U.getFullYear()}),q=s.filter(se=>{var ee;const V=new Date(((ee=se.timestamp)==null?void 0:ee.toDate())||se.timestamp),X=new Date(U.getFullYear(),U.getMonth()-1,1);return V.getMonth()===X.getMonth()&&V.getFullYear()===X.getFullYear()});if(H.length===0||q.length===0)return 0;const oe=H.reduce((se,V)=>se+(V.sustainabilityScore||0),0)/H.length,ve=q.reduce((se,V)=>se+(V.sustainabilityScore||0),0)/q.length;return Math.round((oe-ve)/ve*100)},v=()=>{const H=new Date().getMonth(),q=new Date().getFullYear(),ve=l.filter(se=>{var X;const V=new Date(((X=se.date)==null?void 0:X.toDate())||se.date);return V.getMonth()===H&&V.getFullYear()===q}).reduce((se,V)=>se+(V.carbonSaved||0),0);return Math.round(ve/500*100)},y=g(),x=v(),b=[{type:"trend",title:"Sustainability Score Trending Up",description:`Your average score ${y>=0?"increased":"decreased"} by ${Math.abs(y)}% this month`,impact:`${y>=0?"+":""}${y}%`,icon:vn,color:y>=0?"text-green-500 dark:text-green-400":"text-red-500 dark:text-red-400",action:"View Details",details:{title:"Sustainability Score Analysis",content:`Your sustainability awareness has ${y>=0?"improved":"declined"} this month. Based on ${s.length} product scans, your average sustainability score is trending ${y>=0?"upward":"downward"}.`,metrics:[{label:"Average Score This Month",value:s.length>0?Math.round(s.reduce((U,H)=>U+(H.sustainabilityScore||0),0)/s.length):0},{label:"Best Product Category",value:"Food & Beverages"},{label:"Improvement Potential",value:`${100-(s.length>0?Math.round(s.reduce((U,H)=>U+(H.sustainabilityScore||0),0)/s.length):0)}%`}]}},{type:"prediction",title:"Carbon Goal Achievement",description:`At current pace, you'll ${x>=100?"exceed":"reach"} ${x}% of your monthly carbon reduction goal`,impact:`${x}%`,icon:vr,color:x>=100?"text-green-500 dark:text-green-400":x>=75?"text-blue-500 dark:text-blue-400":"text-orange-500 dark:text-orange-400",action:"Optimize",details:{title:"Carbon Footprint Goal Progress",content:`You're making ${x>=75?"excellent":x>=50?"good":"steady"} progress toward your monthly carbon reduction goal.`,metrics:[{label:"Monthly Goal",value:"500 kg CO2"},{label:"Current Progress",value:`${Math.round(x/100*500)} kg CO2`},{label:"Days Remaining",value:new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate()-new Date().getDate()},{label:"Daily Target",value:`${Math.round((500-x/100*500)/(new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate()-new Date().getDate())*10)/10} kg CO2/day`}]}},{type:"recommendation",title:"Shopping Pattern Analysis",description:"You tend to buy more sustainable products on weekends. Consider planning ahead.",impact:"Pattern",icon:gd,color:"text-purple-600 dark:text-purple-400",action:"Set Reminder",details:{title:"Shopping Pattern Insights",content:"Analysis of your shopping habits reveals interesting patterns that can help optimize your sustainable choices.",metrics:[{label:"Best Shopping Day",value:"Saturday"},{label:"Weekend vs Weekday Score",value:"+23% higher"},{label:"Most Active Shopping Time",value:"2-4 PM"},{label:"Recommendation",value:"Plan sustainable shopping for weekends"}]}}],w=U=>{m(U),h(!0)},k=U=>{h(!1),r({title:"Optimization started",description:`Optimizing based on: ${U.title}`,variant:"default"}),e("/goals")},S=async U=>{if(!t){r({title:"Not logged in",description:"Please log in to set reminders.",variant:"destructive"});return}try{const H=Re(gt(Ne,"users",t.uid,"reminders")).withConverter(null);await Zt(H,{title:U.title,description:U.details.content,createdAt:new Date,reminderDate:new Date(new Date().getTime()+24*60*60*1e3),completed:!1}),r({title:"Reminder set",description:`Reminder for "${U.title}" has been set.`,variant:"default"})}catch(H){console.error("Error setting reminder:",H),r({title:"Error",description:"Failed to set reminder. Please try again later.",variant:"destructive"})}},P=U=>{switch(U.action){case"View Details":w(U);break;case"Optimize":k(U);break;case"Set Reminder":S(U);break}},N=()=>{if(s.length===0)return[];const U=new Date,H=new Date(U.setDate(U.getDate()-7)),q=s.filter(se=>{var X;return new Date(((X=se.timestamp)==null?void 0:X.toDate())||se.timestamp)>=H}),oe={},ve=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return q.forEach(se=>{var ee;const V=new Date(((ee=se.timestamp)==null?void 0:ee.toDate())||se.timestamp),X=ve[V.getDay()];oe[X]||(oe[X]={scans:0,avgScore:[],totalScore:0}),oe[X].scans++,oe[X].totalScore+=se.sustainabilityScore||0}),ve.map(se=>{var V,X;return{day:se,scans:((V=oe[se])==null?void 0:V.scans)||0,avgScore:(X=oe[se])!=null&&X.scans?Math.round(oe[se].totalScore/oe[se].scans):0}})},_=()=>{if(!t)return{scannedProducts:[],carbonEntries:[],analytics:{}};const U=new Date,H=U.getMonth(),q=U.getFullYear(),oe=s.filter(ge=>{var G;const K=new Date(((G=ge.timestamp)==null?void 0:G.toDate())||ge.timestamp);return K.getMonth()===H&&K.getFullYear()===q}),ve=l.filter(ge=>{var G;const K=new Date(((G=ge.date)==null?void 0:G.toDate())||ge.date);return K.getMonth()===H&&K.getFullYear()===q}),se=oe.length,V=se>0?Math.round(oe.reduce((ge,K)=>ge+(K.sustainabilityScore||0),0)/se):0,X=ve.reduce((ge,K)=>ge+(K.carbonSaved||0),0),ee=j(oe),ue=C(oe);return{scannedProducts:oe,carbonEntries:ve,analytics:{totalScans:se,avgSustainabilityScore:V,totalCarbonSaved:X,bestCategory:ee,scanStreak:ue,topProducts:I(oe),categoryBreakdown:R(oe)}}},T=()=>{if(!t)return{scannedProducts:[],carbonEntries:[],analytics:{}};const H=new Date().getFullYear(),q=s.filter(ue=>{var K;return new Date(((K=ue.timestamp)==null?void 0:K.toDate())||ue.timestamp).getFullYear()===H}),oe=l.filter(ue=>{var K;return new Date(((K=ue.date)==null?void 0:K.toDate())||ue.date).getFullYear()===H}),ve=q.length,se=ve>0?Math.round(q.reduce((ue,ge)=>ue+(ge.sustainabilityScore||0),0)/ve):0,V=oe.reduce((ue,ge)=>ue+(ge.carbonSaved||0),0),X=$(q),ee=z(q);return{scannedProducts:q,carbonEntries:oe,analytics:{totalScans:ve,avgSustainabilityScore:se,totalCarbonSaved:V,monthlyBreakdown:X,yearlyTrend:ee,bestMonth:W(q),totalCategories:M(q)}}},j=U=>{const H={};U.forEach(ve=>{const se=ve.category||"Other";H[se]||(H[se]={count:0,totalScore:0}),H[se].count++,H[se].totalScore+=ve.sustainabilityScore||0});let q="None",oe=0;return Object.entries(H).forEach(([ve,se])=>{const V=se.totalScore/se.count;V>oe&&(oe=V,q=ve)}),q},C=U=>{if(U.length===0)return 0;const H=U.map(ve=>{var V;return new Date(((V=ve.timestamp)==null?void 0:V.toDate())||ve.timestamp).toDateString()}),q=[...new Set(H)].sort();let oe=1;for(let ve=1;ve<q.length;ve++){const se=new Date(q[ve-1]),V=new Date(q[ve]),X=Math.abs(V.getTime()-se.getTime());if(Math.ceil(X/(1e3*60*60*24))===1)oe++;else break}return oe},I=U=>U.sort((H,q)=>(q.sustainabilityScore||0)-(H.sustainabilityScore||0)).slice(0,3).map(H=>({name:H.name||"Unknown Product",score:H.sustainabilityScore||0})),R=U=>{const H={};return U.forEach(q=>{const oe=q.category||"Other";H[oe]=(H[oe]||0)+1}),Object.entries(H).map(([q,oe])=>({name:q,count:oe}))},$=U=>{const H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],q={};return U.forEach(oe=>{var V;const ve=new Date(((V=oe.timestamp)==null?void 0:V.toDate())||oe.timestamp),se=H[ve.getMonth()];q[se]=(q[se]||0)+1}),H.map(oe=>({month:oe,scans:q[oe]||0}))},z=U=>{if(U.length<2)return 0;const H=U.filter(se=>{var X;return new Date(((X=se.timestamp)==null?void 0:X.toDate())||se.timestamp).getMonth()<6}),q=U.filter(se=>{var X;return new Date(((X=se.timestamp)==null?void 0:X.toDate())||se.timestamp).getMonth()>=6});if(H.length===0||q.length===0)return 0;const oe=H.reduce((se,V)=>se+(V.sustainabilityScore||0),0)/H.length,ve=q.reduce((se,V)=>se+(V.sustainabilityScore||0),0)/q.length;return Math.round((ve-oe)/oe*100)},W=U=>{const H=["January","February","March","April","May","June","July","August","September","October","November","December"],q={};U.forEach(se=>{var ee;const V=new Date(((ee=se.timestamp)==null?void 0:ee.toDate())||se.timestamp),X=H[V.getMonth()];q[X]||(q[X]={total:0,count:0}),q[X].total+=se.sustainabilityScore||0,q[X].count++});let oe="None",ve=0;return Object.entries(q).forEach(([se,V])=>{const X=V.total/V.count;X>ve&&(ve=X,oe=se)}),oe},M=U=>new Set(U.map(q=>q.category||"Other")).size,F=[{category:"Shopping",tip:"Your best shopping time is Saturday afternoons - sustainable products are 23% higher scored",confidence:94,icon:Yt},{category:"Categories",tip:"Consider exploring electronics - only 8% of your scans but highest impact potential",confidence:87,icon:Zi},{category:"Habits",tip:"Your 3-day scanning streaks result in 15% better product choices",confidence:91,icon:Cr}],B=_(),J=T();return E.useEffect(()=>{t&&B.analytics&&J.analytics&&d(B.analytics,J.analytics)},[t,B.analytics,J.analytics]),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200 dark:from-gray-900 dark:to-gray-800 dark:border-gray-700",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2 text-indigo-700 dark:text-indigo-300",children:[o.jsx(ha,{className:"w-6 h-6"}),o.jsx("span",{children:"Smart Insights & Analytics"}),o.jsx(ne,{variant:"secondary",className:"ml-auto bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300",children:"AI Powered"})]})}),o.jsx(ce,{children:o.jsxs(Jn,{value:n,onValueChange:i,className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-3",children:[o.jsx(Xe,{value:"week",children:"This Week"}),o.jsx(Xe,{value:"month",children:"This Month"}),o.jsx(Xe,{value:"year",children:"This Year"})]}),o.jsxs(Oe,{value:"week",className:"space-y-6 mt-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 flex items-center space-x-2",children:[o.jsx(gd,{className:"w-5 h-5"}),o.jsx("span",{children:"Key Insights"})]}),b.map((U,H)=>o.jsxs("div",{className:"bg-white/80 dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(U.icon,{className:`w-6 h-6 ${U.color}`}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:U.title}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:U.description})]})]}),o.jsx(ne,{variant:"outline",className:`${U.color} border-current`,children:U.impact})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>P(U),children:[U.action,o.jsx(Kl,{className:"w-4 h-4 ml-2"})]})})]},H))]}),o.jsxs("div",{className:"bg-white/80 dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-700",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center space-x-2",children:[o.jsx(Ta,{className:"w-5 h-5"}),o.jsx("span",{children:"Weekly Activity"})]}),o.jsx("div",{className:"space-y-3",children:N().map((U,H)=>o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-12 text-sm font-medium text-gray-600 dark:text-gray-400",children:U.day}),o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:o.jsx("div",{className:"bg-indigo-500 dark:bg-indigo-400 h-3 rounded-full",style:{width:`${Math.min(U.scans/10*100,100)}%`}})}),o.jsxs("div",{className:"w-16 text-sm text-gray-600 dark:text-gray-400",children:[U.scans," scans"]}),o.jsx(ne,{variant:"outline",className:"text-xs dark:text-gray-300",children:U.avgScore})]},H))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Personalized Tips"}),F.map((U,H)=>o.jsx("div",{className:"bg-white/80 dark:bg-gray-900 rounded-xl p-4 border border-gray-100 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(U.icon,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-1"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:U.category}),o.jsxs(ne,{variant:"secondary",className:"text-xs dark:text-gray-300",children:[U.confidence,"% confidence"]})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:U.tip})]})]})},H))]})]}),o.jsx(Oe,{value:"month",className:"mt-6",children:t?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(re,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 dark:from-blue-900 dark:to-blue-800 dark:border-blue-700",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Total Scans"}),o.jsx("p",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300",children:B.analytics.totalScans})]}),o.jsx(fn,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200 dark:from-green-900 dark:to-green-800 dark:border-green-700",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Avg Score"}),o.jsx("p",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:B.analytics.avgSustainabilityScore})]}),o.jsx(Kr,{className:"w-8 h-8 text-green-600 dark:text-green-400"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 dark:from-purple-900 dark:to-purple-800 dark:border-purple-700",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Carbon Saved"}),o.jsxs("p",{className:"text-2xl font-bold text-purple-800 dark:text-purple-300",children:[Math.round(B.analytics.totalCarbonSaved)," kg"]})]}),o.jsx(dt,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200 dark:from-orange-900 dark:to-orange-800 dark:border-orange-700",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 font-medium",children:"Scan Streak"}),o.jsxs("p",{className:"text-2xl font-bold text-orange-800 dark:text-orange-300",children:[B.analytics.scanStreak," days"]})]}),o.jsx(nL,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"bg-white/80 dark:bg-gray-900 border border-gray-100 dark:border-gray-700",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg text-gray-800 dark:text-gray-200",children:"Top Sustainable Products"})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-3",children:[B.analytics.topProducts.map((U,H)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[o.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:U.name}),o.jsx(ne,{variant:"outline",className:"text-green-600 dark:text-green-400 border-green-600 dark:border-green-400",children:U.score})]},H)),B.analytics.topProducts.length===0&&o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No products scanned this month"})]})})]}),o.jsxs(re,{className:"bg-white/80 dark:bg-gray-900 border border-gray-100 dark:border-gray-700",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg text-gray-800 dark:text-gray-200",children:"Category Breakdown"})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-3",children:[B.analytics.categoryBreakdown.map((U,H)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:U.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"bg-indigo-500 dark:bg-indigo-400 h-2 rounded-full",style:{width:`${Math.min(U.count/B.analytics.totalScans*100,100)}%`}})}),o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 w-8",children:U.count})]})]},H)),B.analytics.categoryBreakdown.length===0&&o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No categories to display"})]})})]})]}),o.jsxs(re,{className:"bg-white/80 dark:bg-gray-900 border border-gray-100 dark:border-gray-700",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg text-gray-800 dark:text-gray-200",children:"Monthly Summary"})}),o.jsx(ce,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Best Performing Category"}),o.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:B.analytics.bestCategory}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Highest average sustainability score"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Carbon Entries"}),o.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:B.carbonEntries.length}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Total tracking entries this month"})]})]})})]})]}):o.jsxs("div",{className:"bg-white/80 dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-700 text-center",children:[o.jsx(zP,{className:"w-12 h-12 mx-auto mb-4 text-gray-400 dark:text-gray-500"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"Monthly Analytics"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Log in to view your monthly sustainability trends."})]})}),o.jsx(Oe,{value:"year",className:"mt-6",children:t?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(re,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 border-indigo-200 dark:from-indigo-900 dark:to-indigo-800 dark:border-indigo-700",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-400 font-medium",children:"Total Scans"}),o.jsx("p",{className:"text-2xl font-bold text-indigo-800 dark:text-indigo-300",children:J.analytics.totalScans})]}),o.jsx(Ta,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-teal-50 to-teal-100 border-teal-200 dark:from-teal-900 dark:to-teal-800 dark:border-teal-700",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-teal-600 dark:text-teal-400 font-medium",children:"Avg Score"}),o.jsx("p",{className:"text-2xl font-bold text-teal-800 dark:text-teal-300",children:J.analytics.avgSustainabilityScore})]}),o.jsx(vn,{className:"w-8 h-8 text-teal-600 dark:text-teal-400"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 border-emerald-200 dark:from-emerald-900 dark:to-emerald-800 dark:border-emerald-700",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-medium",children:"Carbon Saved"}),o.jsxs("p",{className:"text-2xl font-bold text-emerald-800 dark:text-emerald-300",children:[Math.round(J.analytics.totalCarbonSaved)," kg"]})]}),o.jsx(dt,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-400"})]})})}),o.jsx(re,{className:"bg-gradient-to-br from-rose-50 to-rose-100 border-rose-200 dark:from-rose-900 dark:to-rose-800 dark:border-rose-700",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400 font-medium",children:"Categories"}),o.jsx("p",{className:"text-2xl font-bold text-rose-800 dark:text-rose-300",children:J.analytics.totalCategories})]}),o.jsx(zP,{className:"w-8 h-8 text-rose-600 dark:text-rose-400"})]})})})]}),o.jsxs(re,{className:"bg-white/80 dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-700",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg text-gray-800 dark:text-gray-200",children:"Monthly Activity Breakdown"})}),o.jsx(ce,{children:o.jsx("div",{className:"space-y-3",children:J.analytics.monthlyBreakdown.map((U,H)=>o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-12 text-sm font-medium text-gray-600 dark:text-gray-400",children:U.month}),o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:o.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 dark:from-indigo-400 dark:to-purple-400 h-3 rounded-full",style:{width:`${Math.min(U.scans/Math.max(...J.analytics.monthlyBreakdown.map(q=>q.scans))*100,100)}%`}})}),o.jsxs("div",{className:"w-16 text-sm text-gray-600 dark:text-gray-400",children:[U.scans," scans"]})]},H))})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"bg-white/80 dark:bg-gray-900 border border-gray-100 dark:border-gray-700",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg text-gray-800 dark:text-gray-200",children:"Year Performance"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900 dark:to-green-800 rounded-lg",children:[o.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Best Month"}),o.jsx("span",{className:"font-bold text-green-700 dark:text-green-400",children:J.analytics.bestMonth})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 rounded-lg",children:[o.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Yearly Trend"}),o.jsxs(ne,{variant:"outline",className:`${J.analytics.yearlyTrend>=0?"text-green-600 border-green-600 dark:text-green-400 dark:border-green-400":"text-red-600 border-red-600 dark:text-red-400 dark:border-red-400"}`,children:[J.analytics.yearlyTrend>=0?"+":"",J.analytics.yearlyTrend,"%"]})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900 dark:to-purple-800 rounded-lg",children:[o.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Carbon Entries"}),o.jsx("span",{className:"text-purple-700 dark:text-purple-400 font-bold",children:J.carbonEntries.length})]})]})]}),o.jsxs(re,{className:"bg-white/80 dark:bg-gray-900 border border-gray-100 dark:border-gray-700",children:[o.jsx(je,{children:o.jsx(Ce,{className:"text-lg text-gray-800 dark:text-gray-200",children:"Achievement Summary"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900 dark:to-orange-900 rounded-lg",children:[o.jsx(Kr,{className:"w-12 h-12 mx-auto mb-2 text-orange-500 dark:text-orange-400"}),o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Sustainability Champion"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[J.analytics.totalScans," products scanned this year"]})]}),o.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-emerald-900 rounded-lg",children:[o.jsx(dt,{className:"w-12 h-12 mx-auto mb-2 text-emerald-500 dark:text-emerald-400"}),o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Carbon Reducer"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[Math.round(J.analytics.totalCarbonSaved)," kg CO2 saved"]})]})]})]})]})]}):o.jsxs("div",{className:"bg-white/80 dark:bg-gray-900 rounded-xl p-6 border border-gray-100 dark:border-gray-700 text-center",children:[o.jsx(os,{className:"w-12 h-12 mx-auto mb-4 text-gray-400 dark:text-gray-500"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"Yearly Overview"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Log in to view your yearly sustainability trends."})]})})]})})]}),u&&f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-80 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-200 flex items-center space-x-2",children:[o.jsx(f.icon,{className:`w-6 h-6 ${f.color}`}),o.jsx("span",{children:f.details.title})]}),o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>h(!1),children:o.jsx(rg,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:f.details.content}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.details.metrics.map((U,H)=>o.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:U.label}),o.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:U.value})]},H))}),o.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[o.jsx(Q,{variant:"outline",onClick:()=>h(!1),children:"Close"}),o.jsx(Q,{onClick:()=>{h(!1),f.action==="Optimize"?k(f):f.action==="Set Reminder"&&S(f)},children:"Take Action"})]})]})})})]})},d3e=()=>{const{user:t}=wr(),[e,r]=E.useState("all"),[n,i]=E.useState({savedEvents:[],registeredEvents:[],attendedEvents:[]});E.useEffect(()=>{if(!t){i({savedEvents:[],registeredEvents:[],attendedEvents:[]});return}const y=Re(Ne,"users",t.uid,"eventActivity","data"),x=On(y,b=>{if(b.exists()){const w=b.data();i(w)}else i({savedEvents:[],registeredEvents:[],attendedEvents:[]}),Zt(y,{savedEvents:[],registeredEvents:[],attendedEvents:[]}).catch(w=>console.error("Error initializing user event activity data:",w))},b=>{console.error("Error fetching user event activity data:",b)});return()=>x()},[t]);const s=[{id:1,title:"Sustainable Living Workshop",type:"workshop",date:"2024-06-20",time:"14:00 UTC",duration:"2 hours",host:"EcoExperts",participants:245,maxParticipants:500,location:"Virtual",description:"Learn practical tips for reducing your environmental footprint in daily life.",badges:["Beginner Friendly","Interactive"],status:"upcoming",featured:!0},{id:2,title:"Climate Action Challenge",type:"challenge",date:"2024-06-18",time:"All Day",duration:"7 days",host:"EcoScope Community",participants:1247,maxParticipants:null,location:"Global",description:"Join thousands in a week-long challenge to reduce carbon footprint.",badges:["Community Event","Rewards Available"],status:"live",featured:!0},{id:3,title:"Green Tech Innovation Showcase",type:"showcase",date:"2024-06-25",time:"16:00 UTC",duration:"3 hours",host:"TechForGood",participants:89,maxParticipants:200,location:"San Francisco + Virtual",description:"Discover the latest innovations in sustainable technology.",badges:["Industry Leaders","Networking"],status:"upcoming",featured:!1}],a={activeEvents:12,participants:3456,completedToday:8,upcomingWeek:15},l=async y=>{if(!t)return;const x=Re(Ne,"users",t.uid,"eventActivity","data");n.savedEvents.includes(y)?await cr(x,{savedEvents:jv(y)}):await cr(x,{savedEvents:dm(y)})},c=async y=>{if(!t)return;const x=Re(Ne,"users",t.uid,"eventActivity","data");n.registeredEvents.includes(y)?alert("Already registered for this event."):(await cr(x,{registeredEvents:dm(y)}),alert("Registered for event!"))},u=async y=>{if(!t)return;const x=Re(Ne,"users",t.uid,"eventActivity","data");n.attendedEvents.includes(y)?alert("Already marked as attended."):(await cr(x,{attendedEvents:dm(y)}),n.registeredEvents.includes(y)&&await cr(x,{registeredEvents:jv(y)}),alert("Marked as attended!"))},h=y=>{switch(y){case"live":return"bg-red-500 text-white";case"upcoming":return"bg-blue-500 text-white";case"completed":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}},d=y=>{switch(y){case"workshop":return GY;case"challenge":return Us;case"showcase":return hr;default:return os}},f=s.filter(y=>e==="all"||e==="live"&&y.status==="live"||e==="upcoming"&&y.status==="upcoming"||e==="workshops"&&y.type==="workshop"||e==="challenges"&&y.type==="challenge"),m=y=>n.savedEvents.includes(y),g=y=>n.registeredEvents.includes(y),v=y=>n.attendedEvents.includes(y);return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:[o.jsx(je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ce,{className:"flex items-center space-x-2 text-purple-700",children:[o.jsx(os,{className:"w-6 h-6"}),o.jsx("span",{children:"Live Events & Challenges"})]}),o.jsxs(ne,{variant:"secondary",className:"ml-auto bg-red-100 text-red-700 animate-pulse",children:[a.activeEvents," Live"]})]})}),o.jsxs(ce,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.activeEvents}),o.jsx("div",{className:"text-sm text-gray-600",children:"Active Events"})]}),o.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.participants.toLocaleString()}),o.jsx("div",{className:"text-sm text-gray-600",children:"Participants"})]}),o.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.completedToday}),o.jsx("div",{className:"text-sm text-gray-600",children:"Completed Today"})]}),o.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.upcomingWeek}),o.jsx("div",{className:"text-sm text-gray-600",children:"This Week"})]})]}),o.jsx("div",{className:"flex space-x-2 mb-6",children:["all","live","upcoming","workshops","challenges"].map(y=>o.jsx(Q,{variant:e===y?"default":"outline",size:"sm",onClick:()=>r(y),className:"capitalize",children:y},y))}),o.jsx("div",{className:"space-y-4",children:f.map(y=>{const x=d(y.type);return o.jsxs("div",{className:`bg-white/80 rounded-xl p-6 border ${y.featured?"border-purple-200 ring-2 ring-purple-100":"border-gray-100"}`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center",children:o.jsx(x,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:y.title}),y.featured&&o.jsx(hr,{className:"w-4 h-4 text-yellow-500 fill-current"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:y.description}),o.jsx("div",{className:"flex flex-wrap gap-1",children:y.badges.map((b,w)=>o.jsx(ne,{variant:"secondary",className:"text-xs",children:b},w))})]})]}),o.jsx(ne,{className:h(y.status),children:y.status})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(os,{className:"w-4 h-4"}),o.jsx("span",{children:y.date})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qn,{className:"w-4 h-4"}),o.jsx("span",{children:y.time})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(yd,{className:"w-4 h-4"}),o.jsx("span",{children:y.location})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(yr,{className:"w-4 h-4"}),o.jsxs("span",{children:[y.participants," joined"]})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>l(y.id),children:[" ",o.jsx(HS,{className:`w-4 h-4 mr-2 ${m(y.id)?"fill-current text-yellow-500":""}`})," ",m(y.id)?"Saved":"Save"," "]}),o.jsxs(Q,{variant:"outline",size:"sm",children:[" ",o.jsx(Wo,{className:"w-4 h-4 mr-2"}),"Remind Me"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[y.status==="upcoming"&&o.jsxs(Q,{size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white",onClick:()=>c(y.id),children:[" ",g(y.id)?"Registered":"Register"," ",o.jsx(GP,{className:"w-4 h-4 ml-2"})]}),y.status==="live"&&o.jsxs(Q,{size:"sm",className:"bg-red-600 hover:bg-red-700 text-white",children:[" ","Join Now",o.jsx(GP,{className:"w-4 h-4 ml-2"})]}),y.status==="completed"&&o.jsxs(Q,{size:"sm",variant:"outline",onClick:()=>u(y.id),children:[" ",v(y.id)?"Attended":"Mark as Attended"," "]})]})]})]},y.id)})}),o.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl",children:[o.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:"Create Your Own Event"}),o.jsx("p",{className:"text-sm text-purple-700 mb-3",children:"Host a sustainability workshop, challenge, or meetup in your community."}),o.jsx(Q,{size:"sm",variant:"outline",className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:"Start Hosting"})]})]})]})})},h3e="5b3ce3597851110001cf62486094de2c5bcb42f18759aa06361f897a",f3e=()=>{const[t,e]=E.useState(""),[r,n]=E.useState(""),[i,s]=E.useState([]),[a,l]=E.useState(!1),c=h3e,{toast:u}=Ks(),{addNotification:h}=Ya(),d=async S=>{try{const N=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(S)}&limit=1`)).json();return N.length>0?{lat:parseFloat(N[0].lat),lon:parseFloat(N[0].lon),display_name:N[0].display_name}:null}catch(P){return console.error("Geocoding error:",P),null}},f=async(S,P,N)=>{try{const _=await fetch(`https://api.openrouteservice.org/v2/directions/${N}?start=${S.lon},${S.lat}&end=${P.lon},${P.lat}`,{headers:{Authorization:c,Accept:"application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8"}});if(!_.ok){const j=await _.text();throw console.error(`API Error: ${_.status} - ${j}`),new Error(`API Error: ${_.status} - ${j}`)}return(await _.json()).features[0].properties.segments[0]}catch(_){return console.error("Route calculation error:",_),null}},m=(S,P)=>{const N={"foot-walking":0,"cycling-regular":0,"driving-car":.21,bus:.089,train:.041};return(S/1e3*(N[P]||0)).toFixed(2)},g=(S,P)=>{const N={"foot-walking":0,"cycling-regular":0,"driving-car":.15,bus:.12,train:.08};return(S/1e3*(N[P]||0)).toFixed(2)},v=(S,P)=>{const N={"foot-walking":50,"cycling-regular":30,"driving-car":0,bus:0,train:0};return Math.round(S/1e3*(N[P]||0))},y=S=>({"foot-walking":100,"cycling-regular":98,bus:85,train:90,"driving-car":25})[S]||50,x=S=>({"foot-walking":{icon:IY,name:"Walking",color:"bg-green-500",benefits:["Zero emissions","Great exercise","No cost"]},"cycling-regular":{icon:bY,name:"Cycling",color:"bg-emerald-500",benefits:["Zero emissions","Fast & healthy","Bike-friendly route"]},"driving-car":{icon:zm,name:"Driving",color:"bg-red-500",benefits:["Door to door","Weather independent","Fastest option"]}})[S]||{icon:Ff,name:S,color:"bg-gray-500",benefits:["Transportation option"]},b=(S,P)=>{const N=z=>z*Math.PI/180,T=N(P.lat-S.lat),j=N(P.lon-S.lon),C=N(S.lat),I=N(P.lat),R=Math.sin(T/2)*Math.sin(T/2)+Math.sin(j/2)*Math.sin(j/2)*Math.cos(C)*Math.cos(I);return 6371e3*(2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R)))},w=async()=>{if(!t||!r){u({title:"Missing Information",description:"Please enter both starting and destination locations.",variant:"destructive"});return}l(!0),s([]);try{const S=await d(t),P=await d(r);if(!S||!P){u({title:"Location Not Found",description:"Could not find one or both locations. Please check your input.",variant:"destructive"}),l(!1);return}if(typeof S.lat!="number"||typeof S.lon!="number"||typeof P.lat!="number"||typeof P.lon!="number"){u({title:"Invalid Coordinates",description:"Geocoding returned invalid coordinates.",variant:"destructive"}),l(!1);return}if(b(S,P)>6e6){u({title:"Route Too Long",description:"The requested route distance exceeds the 6,000 km limit of the routing service. Please choose closer locations.",variant:"destructive"}),l(!1);return}const _=["foot-walking","cycling-regular","driving-car"],T=[];for(const j of _){const C=await f(S,P,j);if(C){const I=x(j),R=C.distance,$=C.duration,z=m(R,j),W=g(R,j),M=v(R,j),F=y(j);T.push({mode:j,icon:I.icon,name:I.name,duration:`${Math.round($/60)} min`,distance:`${(R/1e3).toFixed(1)} km`,cost:`$${W}`,emissions:parseFloat(z),calories:M,color:I.color,sustainability:F,benefits:I.benefits})}else u({title:"Route Calculation Failed",description:`Failed to calculate route for mode: ${j}. Please try a different location or mode.`,variant:"destructive"})}T.length===0?u({title:"No Routes Found",description:"Could not calculate routes between these locations.",variant:"destructive"}):(s(T),u({title:"Routes Calculated",description:`Found ${T.length} route options.`}),h({type:"suggestion",title:"Routes Calculated",message:`Found ${T.length} route options for your trip.`,read:!1,source:"travelPlanner",actionable:!1}))}catch(S){console.error("Error planning route:",S),u({title:"Error",description:"Failed to calculate routes. Please try again.",variant:"destructive"})}finally{l(!1)}},k=S=>S>=90?{color:"bg-green-500",label:"Excellent"}:S>=70?{color:"bg-emerald-500",label:"Good"}:S>=50?{color:"bg-yellow-500",label:"Fair"}:{color:"bg-red-500",label:"Poor"};return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 dark:from-slate-800 dark:to-slate-900 dark:border-slate-700",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2 text-green-700 dark:text-green-400",children:[o.jsx(Ff,{className:"w-6 h-6"}),o.jsx("span",{children:"Real-Time Transportation Planner"}),o.jsxs(ne,{variant:"secondary",className:"ml-auto bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",children:[o.jsx(dt,{className:"w-4 h-4 mr-1"}),"Live Data"]})]})}),o.jsxs(ce,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"From"}),o.jsxs("div",{className:"relative",children:[o.jsx(yd,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),o.jsx(st,{placeholder:"Enter starting location (e.g., New York, NY)",value:t,onChange:S=>e(S.target.value),className:"pl-10 border-green-200 focus:border-green-400 dark:border-green-700 dark:focus:border-green-500 dark:bg-slate-800 dark:text-slate-200"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"To"}),o.jsxs("div",{className:"relative",children:[o.jsx(yd,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),o.jsx(st,{placeholder:"Enter destination (e.g., Boston, MA)",value:r,onChange:S=>n(S.target.value),className:"pl-10 border-green-200 focus:border-green-400 dark:border-green-700 dark:focus:border-green-500 dark:bg-slate-800 dark:text-slate-200"})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsx(Q,{onClick:w,disabled:a,className:"w-full bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600",children:a?o.jsxs(o.Fragment,{children:[o.jsx(oy,{className:"w-4 h-4 mr-2 animate-spin"}),"Calculating..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Ff,{className:"w-4 h-4 mr-2"}),"Plan Route"]})})})]}),i.length>0&&o.jsxs("div",{className:"bg-white/80 rounded-xl p-4 mb-6 border border-green-100",children:[o.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[o.jsx(qo,{className:"w-5 h-5 mr-2 text-green-600"}),"Environmental Impact Comparison"]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.min(...i.map(S=>S.emissions)),"kg"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Best Option CO"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[Math.max(...i.map(S=>S.emissions)),"kg"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Worst Option CO"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(Math.max(...i.map(S=>S.emissions))-Math.min(...i.map(S=>S.emissions))).toFixed(2),"kg"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"CO Saved"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:Math.round((Math.max(...i.map(S=>S.emissions))-Math.min(...i.map(S=>S.emissions)))*.02)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Trees Equivalent"})]})]})]}),i.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Route Options"}),i.map((S,P)=>{const N=k(S.sustainability),_=async T=>{try{if(!Ss.currentUser){u({title:"Authentication Required",description:"Please log in to save routes.",variant:"destructive"});return}const j=gt(Ne,"users",Ss.currentUser.uid,"savedRoutes");await Rd(j,{mode:T.mode,name:T.name,duration:T.duration,distance:T.distance,cost:T.cost,emissions:T.emissions,calories:T.calories,sustainability:T.sustainability,timestamp:new Date}),u({title:"Route Saved",description:"Your route has been saved successfully.",variant:"default"}),h({type:"suggestion",title:"Route Saved",message:`Your route "${T.name}" has been saved.`,read:!1,source:"travelPlanner",actionable:!1})}catch(j){console.error("Error saving route:",j),j.code==="permission-denied"?u({title:"Permission Denied",description:"You do not have permission to save routes. Please check your account permissions.",variant:"destructive"}):u({title:"Save Failed",description:"Failed to save the route. Please try again.",variant:"destructive"})}};return o.jsxs("div",{className:"bg-white/80 rounded-xl p-6 border border-gray-100",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-12 h-12 ${S.color} rounded-xl flex items-center justify-center`,children:o.jsx(S.icon,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:S.name}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx(ne,{className:`text-white text-xs ${N.color}`,children:N.label}),o.jsxs("span",{className:"text-sm text-gray-600",children:[S.sustainability,"/100"]})]})]})]}),o.jsx(Q,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>_(S),children:"Save"})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qn,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:S.duration})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ff,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:S.distance})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(jY,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:S.cost})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(dt,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[S.emissions,"kg CO"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cr,{className:"w-4 h-4 text-gray-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[S.calories," cal"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h5",{className:"font-medium text-gray-800",children:"Benefits:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:S.benefits.map((T,j)=>o.jsx(ne,{variant:"outline",className:"text-xs",children:T},j))})]})]},P)})]}),o.jsxs("div",{className:"mt-6 bg-emerald-50 rounded-xl p-4 border border-emerald-100",children:[o.jsxs("h3",{className:"font-semibold text-emerald-800 mb-2 flex items-center",children:[o.jsx(dt,{className:"w-5 h-5 mr-2"}),"Eco-Friendly Travel Tips"]}),o.jsxs("ul",{className:"text-sm text-emerald-700 space-y-1",children:[o.jsx("li",{children:" Walking and cycling produce zero emissions and improve health"}),o.jsx("li",{children:" Combine multiple trips to reduce overall transportation needs"}),o.jsx("li",{children:" Choose direct routes to minimize fuel consumption"}),o.jsx("li",{children:" Consider weather and traffic conditions when planning"})]})]})]})]})})},m3e=()=>{const{user:t}=wr(),[e,r]=E.useState(""),[n,i]=E.useState(null),[s,a]=E.useState("recipes"),[l,c]=E.useState(new Set),[u,h]=E.useState([]),[d,f]=E.useState("Monday"),{incrementRecipeViewed:m,addPoints:g}=Xn(),{toast:v}=Ks(),{addGeneralNotification:y}=NH();E.useEffect(()=>{if(!t){c(new Set),h([]);return}const T=Re(Ne,"users",t.uid,"recipeData","data"),j=On(T,C=>{if(C.exists()){const I=C.data();c(new Set(I.favoriteRecipes||[])),h(I.mealPlan||[])}else c(new Set),h([]),Zt(T,{favoriteRecipes:[],mealPlan:[]}).catch(I=>console.error("Error initializing user recipe data:",I))},C=>{console.error("Error fetching user recipe data:",C)});return()=>j()},[t]);const x=[{id:1,name:"Rainbow Quinoa Buddha Bowl",image:"photo-1512621776951-a57141f2eefd",sustainabilityScore:95,carbonFootprint:"0.8 kg CO",waterUsage:"250L",cookTime:"25 min",servings:4,difficulty:"Easy",tags:["Vegan","Gluten-Free","Local"],ingredients:["1 cup quinoa (locally sourced)","2 cups seasonal vegetables","1/2 cup chickpeas","Tahini dressing","Mixed greens"],instructions:["Cook quinoa according to package directions","Roast seasonal vegetables with olive oil","Prepare tahini dressing","Assemble bowl with all ingredients"],nutrition:{calories:420,protein:"18g",carbs:"52g",fat:"16g"},sustainability:{seasonal:!0,local:!0,organic:!0,lowWaste:!0}},{id:2,name:"Plant-Based Lentil Shepherd's Pie",image:"photo-1574484284002-952d92456975",sustainabilityScore:92,carbonFootprint:"1.2 kg CO",waterUsage:"180L",cookTime:"45 min",servings:6,difficulty:"Medium",tags:["Vegan","Protein-Rich","Comfort Food"],ingredients:["2 cups green lentils","3 lbs local potatoes","Seasonal root vegetables","Vegetable broth","Fresh herbs"],instructions:["Cook lentils with vegetables and herbs","Prepare mashed potato topping","Layer in baking dish","Bake until golden brown"],nutrition:{calories:385,protein:"16g",carbs:"58g",fat:"12g"},sustainability:{seasonal:!0,local:!0,organic:!1,lowWaste:!0}},{id:3,name:"Zero-Waste Vegetable Broth",image:"photo-1547592180-85f173990554",sustainabilityScore:98,carbonFootprint:"0.2 kg CO",waterUsage:"50L",cookTime:"60 min",servings:8,difficulty:"Easy",tags:["Zero-Waste","Vegan","Base Recipe"],ingredients:["Vegetable scraps and peels","Herb stems","Onion skins","Mushroom stems","Bay leaves"],instructions:["Collect vegetable scraps in freezer","Simmer scraps in water for 1 hour","Strain and store broth","Compost remaining solids"],nutrition:{calories:15,protein:"1g",carbs:"3g",fat:"0g"},sustainability:{seasonal:!0,local:!0,organic:!0,lowWaste:!0}}],b=[{title:"Choose Seasonal Produce",description:"Seasonal fruits and vegetables have a 60% lower carbon footprint",icon:vY,impact:"60% less CO"},{title:"Reduce Food Waste",description:"Use vegetable scraps for broths and composting",icon:qo,impact:"40% waste reduction"},{title:"Plant-Based Proteins",description:"Legumes and grains use 75% less water than meat",icon:fi,impact:"75% water savings"},{title:"Local Sourcing",description:"Local ingredients reduce transportation emissions",icon:pd,impact:"50% transport reduction"}],w=T=>{i(T);try{m(),console.log("incrementRecipeViewed called successfully")}catch(j){console.error("Error calling incrementRecipeViewed:",j)}try{g(5),console.log("addPoints called successfully")}catch(j){console.error("Error calling addPoints:",j)}v({title:"Recipe Viewed!",description:"You earned 5 points for viewing a recipe!"}),y("Recipe Viewed",`You viewed the recipe: ${T.name}`,"recipes")},k=async T=>{if(!t)return;const j=Re(Ne,"users",t.uid,"recipeData","data"),C=new Set(l);C.has(T)?(C.delete(T),await cr(j,{favoriteRecipes:jv(T)}),v({title:"Recipe Removed",description:"Recipe removed from favorites."}),y("Recipe Removed","You removed the recipe from favorites.","suggestion")):(C.add(T),await cr(j,{favoriteRecipes:dm(T)}),g(5),v({title:"Recipe Favorited!",description:"You earned 5 points for favoriting a recipe!"}),y("Recipe Favorited","You favorited a recipe.","suggestion"))},S=async(T,j="Monday")=>{if(!t)return;const C=Re(Ne,"users",t.uid,"recipeData","data"),I=[...u],R=I.findIndex(z=>z.day===j),$={day:j,recipeId:T.id};R>=0?I[R]=$:I.push($),await cr(C,{mealPlan:I}),g(10),v({title:"Added to Meal Plan!",description:"You earned 10 points for meal planning!"}),y("Added to Meal Plan",`You added a recipe to your meal plan for ${j}.`,"suggestion")},P=async()=>{if(!t)return;const j=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(I=>({day:I,recipeId:x[Math.floor(Math.random()*x.length)].id})),C=Re(Ne,"users",t.uid,"recipeData","data");await cr(C,{mealPlan:j}),g(25),v({title:"Meal Plan Generated!",description:"You earned 25 points for generating a meal plan!"}),y("Meal Plan Generated","You generated a new meal plan for the week.","suggestion")},N=T=>x.find(j=>j.id===T.recipeId),_=T=>T>=90?"bg-green-500":T>=80?"bg-emerald-500":T>=70?"bg-yellow-500":"bg-red-500";return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-gradient-to-r from-green-50 to-lime-50 border-green-200 dark:from-green-900/50 dark:to-lime-900/50 dark:border-green-700",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-2 text-green-700 dark:text-green-400",children:[o.jsx(Yy,{className:"w-6 h-6"}),o.jsx("span",{children:"Eco-Friendly Recipe Finder"}),o.jsxs(ne,{variant:"secondary",className:"ml-auto bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400",children:[o.jsx(dt,{className:"w-4 h-4 mr-1"}),"Sustainable Cooking"]})]})}),o.jsx(ce,{children:o.jsxs(Jn,{value:s,onValueChange:a,className:"w-full",children:[o.jsxs(Zn,{className:"grid w-full grid-cols-3",children:[o.jsx(Xe,{value:"recipes",children:"Recipe Library"}),o.jsx(Xe,{value:"tips",children:"Sustainability Tips"}),o.jsx(Xe,{value:"planner",children:"Meal Planner"})]}),o.jsxs(Oe,{value:"recipes",className:"space-y-6 mt-6",children:[o.jsxs("div",{className:"flex space-x-2 mb-6",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Kn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400 dark:text-gray-500"}),o.jsx(st,{placeholder:"Search recipes by ingredients, diet, or cuisine...",value:e,onChange:T=>r(T.target.value),className:"pl-10 border-green-200 focus:border-green-400 dark:border-green-700 dark:focus:border-green-500"})]}),o.jsxs(Q,{variant:"outline",className:"border-green-200 dark:border-green-700",children:[o.jsx(mh,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(T=>o.jsxs("div",{className:"bg-white/80 rounded-xl overflow-hidden border border-gray-100 hover:shadow-lg transition-shadow dark:bg-gray-900/80 dark:border-gray-700",children:[o.jsxs("div",{className:"h-48 bg-gray-200 relative dark:bg-gray-800",children:[o.jsx("img",{src:`https://images.unsplash.com/${T.image}?w=400&h=300&fit=crop`,alt:T.name,className:"w-full h-full object-cover",onError:j=>{j.target.src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=300&fit=crop"}}),o.jsx("div",{className:"absolute top-3 left-3",children:o.jsx(ne,{className:`text-white ${_(T.sustainabilityScore)}`,children:T.sustainabilityScore})}),o.jsx("div",{className:"absolute top-3 right-3",children:o.jsx(Q,{size:"sm",variant:"ghost",className:"bg-white/80 hover:bg-white dark:bg-gray-800 dark:hover:bg-gray-700",onClick:()=>k(T.id),children:o.jsx(ls,{className:`w-4 h-4 ${l.has(T.id)?"fill-current text-red-500":""}`})})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-300 mb-2",children:T.name}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(qn,{className:"w-4 h-4"}),o.jsx("span",{children:T.cookTime})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(yr,{className:"w-4 h-4"}),o.jsx("span",{children:T.servings})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(hr,{className:"w-4 h-4"}),o.jsx("span",{children:T.difficulty})]})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:T.tags.map((j,C)=>o.jsx(ne,{variant:"outline",className:"text-xs dark:text-gray-400",children:j},C))}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400 mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(qo,{className:"w-3 h-3 text-green-600"}),o.jsx("span",{children:T.carbonFootprint})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(fi,{className:"w-3 h-3 text-blue-600"}),o.jsx("span",{children:T.waterUsage})]})]}),o.jsxs(_C,{children:[o.jsx(rB,{asChild:!0,children:o.jsx(Q,{className:"w-full bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800",onClick:()=>w(T),children:"View Recipe"})}),o.jsxs(nw,{className:"max-w-4xl max-h-[90vh] overflow-y-auto dark:bg-gray-900",children:[o.jsxs(iw,{children:[o.jsxs(sw,{className:"flex items-center justify-between text-gray-900 dark:text-gray-100",children:[o.jsx("span",{children:T.name}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs(ne,{className:`text-white ${_(T.sustainabilityScore)}`,children:["Sustainability: ",T.sustainabilityScore]}),o.jsx(ne,{variant:"outline",className:"dark:text-gray-300",children:T.difficulty})]})]}),o.jsx(SC,{className:"text-gray-700 dark:text-gray-300",children:"Detailed recipe information and sustainability analysis"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("img",{src:`https://images.unsplash.com/${T.image}?w=600&h=400&fit=crop`,alt:T.name,className:"w-full h-64 object-cover rounded-lg",onError:j=>{j.target.src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=600&h=400&fit=crop"}}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(qn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{children:T.cookTime})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(yr,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{children:[T.servings," servings"]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(qo,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{children:T.carbonFootprint})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(fi,{className:"w-4 h-4 text-blue-600"}),o.jsx("span",{children:T.waterUsage})]})]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:T.tags.map((j,C)=>o.jsx(ne,{variant:"outline",className:"text-xs dark:text-gray-400",children:j},C))}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 p-3 bg-green-50 rounded-lg text-center text-xs dark:bg-green-900",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-green-700 dark:text-green-400",children:T.nutrition.calories}),o.jsx("div",{className:"text-green-600 dark:text-green-300",children:"Calories"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-green-700 dark:text-green-400",children:T.nutrition.protein}),o.jsx("div",{className:"text-green-600 dark:text-green-300",children:"Protein"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-green-700 dark:text-green-400",children:T.nutrition.carbs}),o.jsx("div",{className:"text-green-600 dark:text-green-300",children:"Carbs"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-green-700 dark:text-green-400",children:T.nutrition.fat}),o.jsx("div",{className:"text-green-600 dark:text-green-300",children:"Fat"})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Ingredients:"}),o.jsx("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:T.ingredients.map((j,C)=>o.jsxs("li",{children:[" ",j]},C))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Instructions:"}),o.jsx("ol",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:T.instructions.map((j,C)=>o.jsxs("li",{children:[C+1,". ",j]},C))})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs(Q,{variant:"outline",onClick:()=>k(T.id),className:l.has(T.id)?"bg-red-50 text-red-600 dark:bg-red-900 dark:text-red-400":"",children:[o.jsx(ls,{className:`w-4 h-4 mr-2 ${l.has(T.id)?"fill-current":""}`}),l.has(T.id)?"Favorited":"Add to Favorites"]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[o.jsxs("select",{value:d,onChange:j=>f(j.target.value),className:"border border-gray-300 dark:border-gray-700 rounded px-2 py-1 text-sm bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-300",children:[o.jsx("option",{value:"Monday",children:"Monday"}),o.jsx("option",{value:"Tuesday",children:"Tuesday"}),o.jsx("option",{value:"Wednesday",children:"Wednesday"}),o.jsx("option",{value:"Thursday",children:"Thursday"}),o.jsx("option",{value:"Friday",children:"Friday"}),o.jsx("option",{value:"Saturday",children:"Saturday"}),o.jsx("option",{value:"Sunday",children:"Sunday"})]}),o.jsxs(Q,{onClick:()=>S(T,d),children:[o.jsx(es,{className:"w-4 h-4 mr-2"}),"Add to Meal Plan"]})]})]})]})]})]})]})]},T.id))})]}),o.jsxs(Oe,{value:"tips",className:"space-y-4 mt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Sustainable Cooking Tips"}),b.map((T,j)=>o.jsx("div",{className:"bg-white/80 rounded-xl p-6 border border-gray-100 dark:bg-gray-900/80 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:o.jsx(T.icon,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 mb-2",children:T.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:T.description}),o.jsxs(ne,{className:"bg-green-500 text-white",children:["Impact: ",T.impact]})]})]})},j))]}),o.jsx(Oe,{value:"planner",className:"mt-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white/80 rounded-xl p-6 border border-gray-100 text-center dark:bg-gray-900/80 dark:border-gray-700",children:[o.jsx(Yy,{className:"w-12 h-12 mx-auto mb-4 text-green-600"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Weekly Meal Planner"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Plan sustainable meals for the week based on seasonal ingredients and your dietary preferences."}),o.jsxs(Q,{className:"bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800",onClick:P,children:[o.jsx(os,{className:"w-4 h-4 mr-2"}),"Generate Meal Plan"]})]}),u.length>0&&o.jsxs("div",{className:"bg-white/80 rounded-xl p-6 border border-gray-100 dark:bg-gray-900/80 dark:border-gray-700",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Your Weekly Meal Plan"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map((T,j)=>{const C=N(T);return C?o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-100",children:T.day}),o.jsx(ne,{className:`text-white ${_(C.sustainabilityScore)}`,children:C.sustainabilityScore})]}),o.jsx("img",{src:`https://images.unsplash.com/${C.image}?w=300&h=200&fit=crop`,alt:C.name,className:"w-full h-32 object-cover rounded mb-2",onError:I=>{I.target.src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=300&h=200&fit=crop"}}),o.jsx("h5",{className:"font-medium text-sm text-gray-800 dark:text-gray-100",children:C.name}),o.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[C.cookTime,"  ",C.servings," servings"]}),o.jsx(Q,{size:"sm",variant:"outline",className:"w-full mt-2",onClick:()=>w(C),children:"View Recipe"})]},j):null})})]})]})})]})})]})})},p3e=()=>{const[t,e]=E.useState([{id:1,type:"bot",content:"Hi! I'm EcoBot, your AI sustainability assistant. I can help you with eco-friendly tips, product recommendations, carbon footprint analysis, and answer any sustainability questions. How can I help you today?",timestamp:new Date}]),[r,n]=E.useState(""),[i,s]=E.useState(!1),a=E.useRef(null),l=()=>{var f;(f=a.current)==null||f.scrollIntoView({behavior:"smooth"})};E.useEffect(()=>{l()},[t]);const c=[{icon:gd,text:"How can I reduce my carbon footprint?",category:"tips"},{icon:xd,text:"What are the best sustainable products?",category:"products"},{icon:vr,text:"Set me a sustainability goal",category:"goals"},{icon:vn,text:"Analyze my environmental impact",category:"analysis"}],u={carbon:`Here are 5 effective ways to reduce your carbon footprint:

 Transportation: Use public transport, bike, or walk when possible
 Energy: Switch to LED bulbs and unplug devices when not in use
 Diet: Eat more plant-based meals and buy locally sourced food
 Waste: Reduce, reuse, and recycle materials
 Water: Take shorter showers and fix leaky faucets

Would you like specific tips for any of these areas?`,products:`I recommend these top sustainable products:

 Personal Care: Bamboo toothbrushes, solid shampoo bars
 Clothing: Organic cotton, recycled polyester items
 Home: Energy-efficient appliances, LED lighting
 Kitchen: Reusable containers, compostable plates
 Transport: Electric vehicles, public transit passes

Need specific brand recommendations for any category?`,goals:`Let's set you up with achievable sustainability goals:

 Beginner Goals:
 Reduce single-use plastics by 50%
 Switch to renewable energy
 Start composting

 Intermediate Goals:
 Achieve carbon neutrality
 Buy only sustainable products
 Reduce waste by 75%

 Advanced Goals:
 Become carbon negative
 Zero waste lifestyle
 Influence 10 others to go green

Which level interests you?`,analysis:`Based on average data, here's your estimated environmental impact:

 Current Status:
 Carbon footprint: 12.5 tons CO/year
 Water usage: 2,000 gallons/month
 Waste generation: 4.5 lbs/day

 Improvement Potential:
 40% reduction possible with simple changes
 Save $1,200/year on utilities
 Prevent 5 tons CO annually

Want a personalized action plan?`},h=async()=>{if(!r.trim())return;const f={id:t.length+1,type:"user",content:r,timestamp:new Date};e(m=>[...m,f]),n(""),s(!0),setTimeout(()=>{let m="I understand you're interested in sustainability! Let me help you with that.";const g=r.toLowerCase();g.includes("carbon")||g.includes("footprint")||g.includes("reduce")?m=u.carbon:g.includes("product")||g.includes("recommend")||g.includes("buy")?m=u.products:g.includes("goal")||g.includes("challenge")||g.includes("target")?m=u.goals:(g.includes("impact")||g.includes("analyze")||g.includes("data"))&&(m=u.analysis);const v={id:t.length+2,type:"bot",content:m,timestamp:new Date};e(y=>[...y,v]),s(!1)},1500)},d=f=>{n(f.text)};return o.jsx("div",{className:"space-y-6",children:o.jsxs(re,{className:"bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 dark:from-slate-800 dark:via-slate-900 dark:to-slate-900 border-emerald-200 dark:border-slate-700",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"flex items-center space-x-3 text-emerald-700 dark:text-emerald-300",children:[o.jsx("div",{className:"p-2 bg-gradient-to-r from-emerald-600 to-teal-600 rounded-xl",children:o.jsx(ay,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("span",{children:"EcoBot Assistant"}),o.jsxs("div",{className:"text-sm font-normal text-emerald-600 dark:text-emerald-400 flex items-center space-x-1",children:[o.jsx(fa,{className:"w-4 h-4 animate-pulse"}),o.jsx("span",{children:"AI-Powered Sustainability Helper"})]})]}),o.jsxs(ne,{variant:"secondary",className:"ml-auto bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300",children:[o.jsx("div",{className:"w-2 h-2 bg-emerald-500 dark:bg-emerald-700 rounded-full mr-2 animate-pulse"}),"Online"]})]})}),o.jsxs(ce,{children:[o.jsx("div",{className:"bg-white/80 dark:bg-slate-800 rounded-2xl p-4 mb-6 h-96 overflow-y-auto border border-emerald-100 dark:border-emerald-700",children:o.jsxs("div",{className:"space-y-4",children:[t.map(f=>o.jsx("div",{className:`flex ${f.type==="user"?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`flex space-x-3 max-w-[80%] ${f.type==="user"?"flex-row-reverse space-x-reverse":""}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${f.type==="user"?"bg-gradient-to-r from-sage-500 to-emerald-500":"bg-gradient-to-r from-emerald-500 to-teal-500"}`,children:f.type==="user"?o.jsx(Cs,{className:"w-4 h-4 text-white"}):o.jsx(ay,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{className:`px-4 py-3 rounded-2xl ${f.type==="user"?"bg-gradient-to-r from-sage-100 to-emerald-100 text-sage-800 dark:text-sage-200":"bg-white border border-emerald-100 text-gray-800 dark:bg-slate-800 dark:border-emerald-700 dark:text-gray-300 shadow-sm"}`,children:[o.jsx("p",{className:"text-sm whitespace-pre-line",children:f.content}),o.jsx("span",{className:"text-xs opacity-60 mt-1 block",children:f.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},f.id)),i&&o.jsx("div",{className:"flex justify-start",children:o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 flex items-center justify-center",children:o.jsx(ay,{className:"w-4 h-4 text-white"})}),o.jsx("div",{className:"bg-white border border-emerald-100 px-4 py-3 rounded-2xl shadow-sm dark:bg-slate-800 dark:border-emerald-700",children:o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-bounce"}),o.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),o.jsx("div",{ref:a})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("h4",{className:"text-sm font-semibold text-emerald-700 dark:text-emerald-300 mb-3 flex items-center space-x-2",children:[o.jsx(Cr,{className:"w-4 h-4"}),o.jsx("span",{children:"Quick Questions"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:c.map((f,m)=>o.jsxs(Q,{variant:"outline",className:"justify-start text-left h-auto py-3 px-4 border-emerald-200 dark:border-emerald-700 hover:bg-emerald-50 dark:hover:bg-emerald-900 hover:border-emerald-300",onClick:()=>d(f),children:[o.jsx(f.icon,{className:"w-4 h-4 mr-2 text-emerald-600 dark:text-emerald-300"}),o.jsx("span",{className:"text-sm dark:text-emerald-300",children:f.text})]},m))})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(st,{placeholder:"Ask me anything about sustainability...",value:r,onChange:f=>n(f.target.value),onKeyPress:f=>f.key==="Enter"&&h(),className:"flex-1 border-emerald-200 dark:border-emerald-700 focus:border-emerald-400 rounded-xl dark:bg-slate-800 dark:text-gray-300"}),o.jsx(Q,{onClick:h,disabled:!r.trim()||i,className:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 rounded-xl px-6",children:o.jsx(VY,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center p-3",children:[o.jsx(dt,{className:"w-6 h-6 mx-auto mb-2 text-emerald-600 dark:text-emerald-400"}),o.jsx("h4",{className:"font-semibold text-sm mb-1 text-emerald-700 dark:text-emerald-300",children:"Eco Tips"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Daily sustainability advice"})]}),o.jsxs("div",{className:"text-center p-3",children:[o.jsx(vr,{className:"w-6 h-6 mx-auto mb-2 text-emerald-600 dark:text-emerald-400"}),o.jsx("h4",{className:"font-semibold text-sm mb-1 text-emerald-700 dark:text-emerald-300",children:"Goal Setting"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Personalized targets"})]}),o.jsxs("div",{className:"text-center p-3",children:[o.jsx(vn,{className:"w-6 h-6 mx-auto mb-2 text-emerald-600 dark:text-emerald-400"}),o.jsx("h4",{className:"font-semibold text-sm mb-1 text-emerald-700 dark:text-emerald-300",children:"Impact Analysis"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Track your progress"})]}),o.jsxs("div",{className:"text-center p-3",children:[o.jsx(ls,{className:"w-6 h-6 mx-auto mb-2 text-emerald-600 dark:text-emerald-400"}),o.jsx("h4",{className:"font-semibold text-sm mb-1 text-emerald-700 dark:text-emerald-300",children:"Community"}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Connect with others"})]})]})]})]})})},g3e=({onNavigate:t})=>{const{cartItems:e,updateQuantity:r,removeFromCart:n,clearCart:i}=Ph(),s=e.reduce((l,c)=>{const u=typeof c.price=="number"?c.price:0,h=typeof c.quantity=="number"?c.quantity:0;return l+u*h},0),a=()=>{alert("Purchase confirmed! (This is a placeholder)"),i(),t("marketplace")};return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-xl shadow-md dark:bg-slate-800",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100",children:"Checkout"}),e.length===0?o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Your cart is empty."}):o.jsxs(o.Fragment,{children:[o.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(l=>o.jsxs("li",{className:"flex items-center py-4",children:[o.jsx("img",{src:l.image||"/api/placeholder/64/64",alt:l.name,className:"w-16 h-16 rounded-lg object-cover mr-4"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:l.name}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["$",typeof l.price=="number"?l.price.toFixed(2):"N/A"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Q,{size:"sm",variant:"outline",onClick:()=>r(l.id,l.quantity-1),children:o.jsx(kE,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:l.quantity||1}),o.jsx(Q,{size:"sm",variant:"outline",onClick:()=>r(l.id,l.quantity+1),children:o.jsx(es,{className:"w-4 h-4"})})]}),o.jsx(Q,{size:"sm",variant:"destructive",onClick:()=>n(l.id),className:"ml-4",children:o.jsx(tg,{className:"w-5 h-5"})})]},l.id))}),o.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[o.jsxs("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Total: $",s.toFixed(2)]}),o.jsx(Q,{onClick:a,className:"bg-emerald-600 hover:bg-emerald-700",children:"Confirm Purchase"})]})]})]})},y3e=()=>{const{user:t}=wr(),{addScannedProduct:e}=Xn(),{cartItems:r,updateQuantity:n,removeFromCart:i,clearCart:s}=Ph(),[a,l]=E.useState("home"),[c,u]=E.useState(""),[h,d]=E.useState(null),[f,m]=E.useState(!1),[g,v]=E.useState([]),y=N=>{d(N)},x=N=>{if(!N)return N;const _={...N};return _.stages&&Array.isArray(_.stages)&&(_.stages=_.stages.map(T=>{const{icon:j,...C}=T;return C})),_},b=N=>{if(!N)return;const _=x(N);d(_),localStorage.setItem("scannedProduct",JSON.stringify(_)),e&&e(_)},w=()=>{m(!0)},k=()=>{m(!f)},S=()=>{m(!1),l("scanner")};E.useEffect(()=>{(async()=>{if(!t)return;const _=gt(Ne,"users",t.uid,"recentScans"),T=Nc(_,Od("timestamp","desc")),C=(await Sr(T)).docs.map(I=>({id:I.id,...I.data()}));v(C)})()},[t]);const P=N=>{l(N)};return a==="home"?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[o.jsx(Mv,{onNavigate:P,activeTab:a,toggleLoginForm:k,cartItems:r,updateCartItem:n,removeFromCart:i,clearCart:s}),o.jsx(Ide,{onGetStarted:w}),o.jsx(Ode,{}),o.jsx(kC,{isOpen:f,onClose:()=>m(!1),onSuccess:S})]}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 overflow-hidden",children:[o.jsx(Mv,{onNavigate:P,activeTab:a,toggleLoginForm:k,cartItems:r,updateCartItem:n,removeFromCart:i,clearCart:s}),o.jsx("div",{className:"pt-20",children:o.jsx("div",{className:"container mx-auto px-6 py-8",children:o.jsxs(Jn,{value:a,onValueChange:l,className:"w-full",children:[o.jsx(Oe,{value:"scanner",className:"mt-6",children:o.jsx(Vde,{onTabChange:l,scannedProduct:h,setScannedProduct:y,saveScannedProduct:b})}),o.jsx(Oe,{value:"chatbot",className:"mt-6",children:o.jsx(p3e,{})}),o.jsx(Oe,{value:"search",className:"mt-6",children:o.jsxs(re,{className:"bg-white/90 backdrop-blur-sm border-emerald-100/50 shadow-xl rounded-3xl overflow-hidden dark:bg-gray-800/90 dark:border-gray-700/50",children:[o.jsx(je,{className:"pb-6 bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20",children:o.jsxs(Ce,{className:"flex items-center space-x-4 text-gray-800 dark:text-gray-200",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl shadow-lg",children:o.jsx(Kn,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-2xl font-bold",children:"Search Products & Brands"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1 font-normal dark:text-gray-400",children:"Discover the environmental impact of any product"})]}),o.jsxs(ne,{variant:"secondary",className:"bg-emerald-100 text-emerald-700 px-3 py-1 rounded-xl dark:bg-emerald-900/50 dark:text-emerald-300",children:[o.jsx(fa,{className:"w-4 h-4 mr-1"}),"AI Enhanced"]})]})}),o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[o.jsx(st,{placeholder:"Search for products, brands, or barcodes...",value:c,onChange:N=>u(N.target.value),className:"flex-1 border-emerald-200 focus:border-emerald-400 h-12 rounded-2xl bg-gray-50/50 dark:border-gray-700/50"}),o.jsxs(Q,{className:"bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 px-8 h-12 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 whitespace-nowrap",children:[o.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Search"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map(N=>o.jsx(re,{className:"hover:shadow-xl transition-all duration-300 cursor-pointer border-gray-100/50 shadow-md rounded-2xl overflow-hidden group bg-white/80 backdrop-blur-sm dark:bg-gray-700/80 dark:border-gray-600/50",children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-gray-800 truncate text-lg group-hover:text-emerald-700 transition-colors dark:text-gray-200 dark:group-hover:text-emerald-400",children:N.name}),o.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium dark:text-gray-400",children:N.brand})]}),o.jsx(ne,{variant:N.sustainabilityScore>=80?"default":N.sustainabilityScore>=60?"secondary":"destructive",className:`text-sm px-3 py-1 rounded-xl ${N.sustainabilityScore>=80?"bg-emerald-500 hover:bg-emerald-600":""}`,children:N.sustainabilityScore})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-500 bg-gray-100 px-3 py-1 rounded-xl dark:text-gray-400 dark:bg-gray-600",children:N.category}),N.timestamp&&o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(N.timestamp.seconds*1e3).toLocaleDateString()})]})]})},N.id))})]})]})}),o.jsx(Oe,{value:"analysis",className:"mt-4",children:o.jsx(XMe,{product:h})}),o.jsx(Oe,{value:"comparison",className:"mt-4",children:o.jsx(kH,{})}),o.jsx(Oe,{value:"companies",className:"mt-4",children:o.jsx(QMe,{})}),o.jsx(Oe,{value:"marketplace",className:"mt-4",children:o.jsx(JMe,{})}),o.jsx(Oe,{value:"community",className:"mt-4",children:o.jsx(SH,{})}),o.jsx(Oe,{value:"carbon-tracker",className:"mt-4",children:o.jsx(r3e,{})}),o.jsx(Oe,{value:"education",className:"mt-4",children:o.jsx(n3e,{})}),o.jsx(Oe,{value:"notifications",className:"mt-4",children:o.jsx(i3e,{})}),o.jsx(Oe,{value:"profile",className:"mt-4",children:o.jsx(s3e,{})}),o.jsx(Oe,{value:"ai-recommendations",className:"mt-4",children:o.jsx(a3e,{})}),o.jsx(Oe,{value:"environmental-alerts",className:"mt-4"}),o.jsx(Oe,{value:"rewards",className:"mt-4",children:o.jsx(o3e,{})}),o.jsx(Oe,{value:"lifecycle",className:"mt-4",children:o.jsx(jH,{product:h})}),o.jsx(Oe,{value:"challenges",className:"mt-4",children:o.jsx(l3e,{})}),o.jsx(Oe,{value:"social-impact",className:"mt-4",children:o.jsx(c3e,{})}),o.jsx(Oe,{value:"smart-insights",className:"mt-4",children:o.jsx(u3e,{})}),o.jsx(Oe,{value:"live-events",className:"mt-4",children:o.jsx(d3e,{})}),o.jsx(Oe,{value:"transportation-planner",className:"mt-4",children:o.jsx(f3e,{})}),o.jsx(Oe,{value:"recipe-finder",className:"mt-4",children:o.jsx(m3e,{})}),o.jsx(Oe,{value:"checkout",className:"mt-6",children:o.jsx(g3e,{onNavigate:l})})]})})})]})},v3e=()=>o.jsx(rV,{children:o.jsx(iV,{children:o.jsx(y3e,{})})}),x3e=()=>{const t=ig();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},b3e=({setActiveTab:t})=>{const{cartItems:e,updateQuantity:r,removeFromCart:n,clearCart:i,loadingCart:s}=Ph(),a=e.reduce((l,c)=>{const u=typeof c.price=="number"?c.price:0,h=typeof c.quantity=="number"?c.quantity:0;return l+u*h},0);return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-xl shadow-md dark:bg-slate-800",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100",children:"Shopping Cart"}),e.length===0?o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Your cart is empty."}):s?o.jsxs("div",{className:"space-y-4",children:[o.jsx(qi,{className:"h-16 w-full"}),o.jsx(qi,{className:"h-16 w-full"}),o.jsx(qi,{className:"h-16 w-full"})]}):o.jsxs(o.Fragment,{children:[o.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700 max-h-96 overflow-y-auto",children:e.map(l=>o.jsxs("li",{className:"flex items-center py-4",children:[o.jsx("img",{src:l.image||"/api/placeholder/64/64",alt:l.name,className:"w-16 h-16 rounded-lg object-cover mr-4"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:l.name}),l.brand&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.brand}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["$",typeof l.price=="number"?l.price.toFixed(2):"N/A"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Q,{size:"sm",variant:"outline",onClick:()=>{console.log("Update quantity:",l.id,l.quantity-1),r(l.id,l.quantity-1)},children:o.jsx(kE,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:l.quantity||1}),o.jsx(Q,{size:"sm",variant:"outline",onClick:()=>{console.log("Update quantity:",l.id,l.quantity+1),r(l.id,l.quantity+1)},children:o.jsx(es,{className:"w-4 h-4"})})]}),o.jsx(Q,{size:"sm",variant:"destructive",onClick:()=>{console.log("Remove item:",l.id),n(l.id)},className:"ml-4",children:o.jsx(tg,{className:"w-5 h-5"})})]},l.id))}),o.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[o.jsxs("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Total: $",a.toFixed(2)]}),o.jsx(Q,{variant:"destructive",onClick:()=>i(),children:"Clear Cart"})]}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 flex flex-col space-y-4 sm:flex-row sm:space-y-0 sm:space-x-4 justify-end",children:[o.jsx(Q,{variant:"outline",onClick:()=>t("marketplace"),children:"Continue Shopping"}),o.jsx(Q,{onClick:()=>alert("Proceed to Checkout (Not implemented)"),children:"Checkout"})]})]})]})},w3e=()=>{const[t,e]=E.useState([]),[r,n]=E.useState(!1),[i,s]=E.useState(null),[a,l]=E.useState(""),[c,u]=E.useState("All"),[h,d]=E.useState("All"),[f,m]=E.useState("deadline"),[g,v]=E.useState(null),[y,x]=E.useState(!0),[b,w]=E.useState(!1),{toast:k}=Ks(),[S,P]=E.useState({title:"",description:"",target:"",unit:"%",category:"Energy",priority:"Medium",deadline:"",estimatedSavings:"",tags:""}),[N,_]=E.useState(null),[T,j]=E.useState([{id:1,title:"First Goal",description:"Created your first optimization goal",unlocked:!1,icon:vr},{id:2,title:"Goal Achiever",description:"Completed your first goal",unlocked:!1,icon:Us},{id:3,title:"Milestone Master",description:"Reached 5 milestones",unlocked:!1,icon:hr},{id:4,title:"Eco Warrior",description:"Completed 3 environmental goals",unlocked:!1,icon:pd},{id:5,title:"Streak Master",description:"Updated progress for 7 days straight",unlocked:!1,icon:PY}]),C=[{name:"Energy",icon:Cr,color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-50 dark:bg-yellow-900",borderColor:"border-yellow-200 dark:border-yellow-700"},{name:"Carbon",icon:dt,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900",borderColor:"border-green-200 dark:border-green-700"},{name:"Water",icon:fi,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900",borderColor:"border-blue-200 dark:border-blue-700"},{name:"Waste",icon:xd,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-50 dark:bg-purple-900",borderColor:"border-purple-200 dark:border-purple-700"}],I=["Low","Medium","High"];E.useEffect(()=>{const V=Fre(Ss,X=>{v(X),X?$(X.uid):(e([]),x(!1))});return()=>V()},[]);const R=V=>{console.log(`Navigating to: ${V}`)},$=async V=>{x(!0);try{const X=Nc(gt(Ne,"users",V,"goals"),Od("deadline","asc")),ue=(await Sr(X)).docs.map(ge=>{const K=ge.data(),G=C.find(he=>he.name===K.category)||C[0];return{id:ge.id,userId:K.userId,title:K.title,description:K.description||"",target:K.target,current:K.current||0,unit:K.unit||"%",category:K.category,priority:K.priority||"Medium",deadline:K.deadline,createdAt:K.createdAt||new Date().toISOString().split("T")[0],icon:G.icon,color:G.color,bgColor:G.bgColor,borderColor:G.borderColor,milestones:K.milestones||[],completedMilestones:K.completedMilestones||[],notes:K.notes||"",tags:K.tags||[],estimatedSavings:K.estimatedSavings||"",completed:K.completed||!1}});e(ue),z(ue),k({title:"Goals Loaded",description:`Fetched ${ue.length} goals.`,duration:3e3})}catch(X){console.error("Error fetching goals:",X),k({title:"Error",description:`Failed to load goals: ${X.message}`,variant:"destructive"})}finally{x(!1)}},z=V=>{const X=V.filter(K=>K.completed).length,ee=V.reduce((K,G)=>K+G.completedMilestones.length,0),ue=["Carbon","Water","Waste"],ge=V.filter(K=>K.completed&&ue.includes(K.category)).length;j(K=>K.map(G=>G.id===1&&V.length>0?{...G,unlocked:!0}:G.id===2&&X>0?{...G,unlocked:!0}:G.id===3&&ee>=5?{...G,unlocked:!0}:G.id===4&&ge>=3?{...G,unlocked:!0}:G))},W=async()=>{if(!g||!S.title||!S.target||!S.deadline){k({title:"Missing Information",description:"Please fill in required fields (Title, Target, Deadline).",variant:"destructive"});return}w(!0);try{const V=C.find(G=>G.name===S.category)||C[0],X=parseFloat(S.target),ee=Array.from({length:Math.floor(X/5)},(G,he)=>(he+1)*5).filter(G=>G<=X),ue={userId:g.uid,title:S.title,description:S.description,target:X,current:0,unit:S.unit,category:S.category,priority:S.priority,deadline:S.deadline,createdAt:new Date().toISOString().split("T")[0],color:V.color,bgColor:V.bgColor,borderColor:V.borderColor,milestones:ee,completedMilestones:[],notes:"",tags:S.tags?S.tags.split(",").map(G=>G.trim()).filter(G=>G):[],estimatedSavings:S.estimatedSavings,completed:!1},ge=await Rd(gt(Ne,"users",g.uid,"goals"),ue),K={...ue,id:ge.id};e([...t,K]),z([...t,K]),P({title:"",description:"",target:"",unit:"%",category:"Energy",priority:"Medium",deadline:"",estimatedSavings:"",tags:""}),n(!1),k({title:"Goal Added",description:"Your new goal has been created.",duration:3e3})}catch(V){console.error("Error adding goal:",V),k({title:"Error",description:`Failed to add goal: ${V.message}`,variant:"destructive"})}finally{w(!1)}},M=async V=>{if(g){w(!0);try{await L7(Re(Ne,"users",g.uid,"goals",V)),e(t.filter(X=>X.id!==V)),z(t.filter(X=>X.id!==V)),k({title:"Goal Deleted",description:"The goal has been removed.",duration:3e3})}catch(X){console.error("Error deleting goal:",X),k({title:"Error",description:`Failed to delete goal: ${X.message}`,variant:"destructive"})}finally{w(!1)}}},F=V=>{s(V.id),_(V)},B=()=>{s(null),_(null)},J=async()=>{if(!g||!i||!N||!N.title||!N.target||!N.deadline){k({title:"Missing Information",description:"Please fill in required fields (Title, Target, Deadline).",variant:"destructive"});return}w(!0);try{const V=Re(Ne,"users",g.uid,"goals",i),X=parseFloat(N.target),ee=parseFloat(N.current),ue=ee>=X,ge=C.find(_e=>_e.name===N.category)||C[0],K=Array.from({length:Math.floor(X/5)},(_e,qe)=>(qe+1)*5).filter(_e=>_e<=X),G=K.filter(_e=>_e<=ee),he={title:N.title,description:N.description,target:X,current:ee,unit:N.unit,category:N.category,priority:N.priority,deadline:N.deadline,color:ge.color,bgColor:ge.bgColor,borderColor:ge.borderColor,milestones:K,completedMilestones:G,notes:N.notes,tags:Array.isArray(N.tags)?N.tags:typeof N.tags=="string"&&N.tags.length>0?N.tags.split(",").map(_e=>_e.trim()).filter(_e=>_e):[],estimatedSavings:N.estimatedSavings,completed:ue};await cr(V,he),e(t.map(_e=>_e.id===i?{..._e,...he,tags:Array.isArray(he.tags)?he.tags:[]}:_e)),z(t.map(_e=>_e.id===i?{..._e,...he}:_e)),B(),k({title:"Goal Updated",description:"Your goal has been updated.",duration:3e3})}catch(V){console.error("Error updating goal:",V),k({title:"Error",description:`Failed to update goal: ${V.message}`,variant:"destructive"})}finally{w(!1)}},U=async(V,X)=>{if(g){w(!0);try{const ee=Re(Ne,"users",g.uid,"goals",V),ue=t.find(ge=>ge.id===V);if(ue){const ge=Math.min(X,ue.target),K=ge>=ue.target,G=ue.milestones.filter(_e=>_e<=ge),he={current:ge,completed:K,completedMilestones:G};await cr(ee,he),e(t.map(_e=>_e.id===V?{..._e,...he}:_e)),z(t.map(_e=>_e.id===V?{..._e,...he}:_e)),k({title:"Progress Updated",description:"Goal progress has been updated.",duration:3e3})}}catch(ee){console.error("Error updating goal progress:",ee),k({title:"Error",description:`Failed to update progress: ${ee.message}`,variant:"destructive"})}finally{w(!1)}}},H=t.filter(V=>{const X=V.title.toLowerCase().includes(a.toLowerCase())||V.description.toLowerCase().includes(a.toLowerCase())||V.tags.some(ge=>ge.toLowerCase().includes(a.toLowerCase())),ee=c==="All"||V.category===c,ue=h==="All"||V.priority===h;return X&&ee&&ue}).sort((V,X)=>{switch(f){case"deadline":return new Date(V.deadline).getTime()-new Date(X.deadline).getTime();case"progress":return X.current/X.target-V.current/V.target;case"priority":const ee={High:3,Medium:2,Low:1};return ee[X.priority]-ee[V.priority];case"created":return new Date(X.createdAt).getTime()-new Date(V.createdAt).getTime();default:return 0}}),q=V=>V>=100?"bg-green-500 dark:bg-green-400":V>=75?"bg-blue-500 dark:bg-blue-400":V>=50?"bg-yellow-500 dark:bg-yellow-400":"bg-red-500 dark:bg-red-400",oe=(V,X,ee)=>{const ue=V/X*100,ge=new Date(ee)<new Date&&ue<100;return ue>=100?o.jsxs(ne,{className:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900 dark:text-green-400 dark:border-green-700 animate-pulse",children:[o.jsx(Us,{className:"w-3 h-3 mr-1"}),"Completed"]}):ge?o.jsxs(ne,{className:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900 dark:text-red-400 dark:border-red-700",children:[o.jsx(Zi,{className:"w-3 h-3 mr-1"}),"Overdue"]}):ue>=75?o.jsxs(ne,{className:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900 dark:text-blue-400 dark:border-blue-700",children:[o.jsx(vn,{className:"w-3 h-3 mr-1"}),"On Track"]}):o.jsxs(ne,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900 dark:text-yellow-400 dark:border-yellow-700",children:[o.jsx(nL,{className:"w-3 h-3 mr-1"}),"In Progress"]})},ve=V=>{const X={High:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900 dark:text-red-400 dark:border-red-700",Medium:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900 dark:text-yellow-400 dark:border-yellow-700",Low:"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-900 dark:text-gray-400 dark:border-gray-700"};return o.jsxs(ne,{className:X[V],children:[V," Priority"]})},se=t.length;return t.filter(V=>V.completed).length,se>0&&t.reduce((V,X)=>V+X.current/X.target*100,0)/se,t.reduce((V,X)=>V+X.completedMilestones.length,0),t.filter(V=>new Date(V.deadline)<new Date&&!V.completed).length,o.jsxs(o.Fragment,{children:[o.jsx(Mv,{onNavigate:R,activeTab:"goals"}),o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-gray-900 dark:via-black dark:to-purple-950 pt-32 p-6 z-10",children:[o.jsx(re,{className:"mb-6 shadow-xl border-indigo-200 bg-white/90 backdrop-blur-md dark:border-indigo-700 dark:bg-gray-800/90",children:o.jsxs(je,{className:"flex flex-row items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(Q,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2 hover:bg-indigo-50 dark:hover:bg-indigo-900 transition-colors",children:[o.jsx(xY,{className:"w-4 h-4 dark:text-gray-300"}),o.jsx("span",{className:"dark:text-gray-200",children:"Back"})]}),o.jsxs("div",{children:[o.jsxs(Ce,{className:"text-indigo-700 dark:text-indigo-300 text-3xl font-bold flex items-center gap-3",children:[o.jsx(vr,{className:"w-8 h-8 text-indigo-500 dark:text-indigo-400"}),"Optimization Goals"]}),o.jsx("p",{className:"text-indigo-600 dark:text-indigo-400 mt-1",children:"Track, optimize, and achieve your sustainability targets"})]})]}),g&&o.jsx("div",{className:"flex items-center space-x-3",children:o.jsxs(Q,{onClick:()=>n(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white flex items-center gap-2 shadow-lg",disabled:b,children:[b?o.jsx(oy,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(es,{className:"w-4 h-4"}),"Add Goal"]})})]})}),g?o.jsxs(o.Fragment,{children:[o.jsx(re,{className:"mb-6 shadow-lg border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:o.jsx(ce,{className:"p-6",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Kn,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),o.jsx(st,{type:"text",placeholder:"Search goals, tags, or descriptions...",value:a,onChange:V=>l(V.target.value),className:"min-w-[250px]"})]}),o.jsxs("select",{value:c,onChange:V=>u(V.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:[o.jsx("option",{value:"All",children:"All Categories"}),C.map(V=>o.jsx("option",{value:V.name,className:"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:V.name},V.name))]}),o.jsxs("select",{value:h,onChange:V=>d(V.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:[o.jsx("option",{value:"All",children:"All Priorities"}),I.map(V=>o.jsx("option",{value:V,className:"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:V},V))]}),o.jsxs("select",{value:f,onChange:V=>m(V.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:[o.jsx("option",{value:"deadline",children:"Sort by Deadline"}),o.jsx("option",{value:"progress",children:"Sort by Progress"}),o.jsx("option",{value:"priority",children:"Sort by Priority"}),o.jsx("option",{value:"created",children:"Sort by Creation Date"})]})]})})}),r&&o.jsxs(re,{className:"mb-6 shadow-lg border-indigo-200 dark:border-indigo-800 bg-white dark:bg-gray-800",children:[o.jsx(je,{children:o.jsxs(Ce,{className:"text-indigo-700 dark:text-indigo-300 flex items-center gap-2",children:[o.jsx(es,{className:"w-6 h-6"}),"Add New Optimization Goal"]})}),o.jsxs(ce,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"title",className:"dark:text-gray-200",children:"Title"}),o.jsx(st,{id:"title",placeholder:"e.g., Reduce electricity consumption",value:S.title,onChange:V=>P({...S,title:V.target.value}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"category",className:"dark:text-gray-200",children:"Category"}),o.jsx("select",{id:"category",value:S.category,onChange:V=>P({...S,category:V.target.value}),className:"mt-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:C.map(V=>o.jsx("option",{value:V.name,className:"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:V.name},V.name))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(Ct,{htmlFor:"description",className:"text-gray-700 dark:text-gray-200",children:"Description (Optional)"}),o.jsx(Nm,{id:"description",placeholder:"Details about your goal...",value:S.description,onChange:V=>P({...S,description:V.target.value}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"target",className:"dark:text-gray-200",children:"Target Value"}),o.jsx(st,{id:"target",type:"number",placeholder:"e.g., 15",value:S.target,onChange:V=>P({...S,target:V.target.value}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"unit",className:"dark:text-gray-200",children:"Unit"}),o.jsx(st,{id:"unit",placeholder:"e.g., kWh, %, gallons",value:S.unit,onChange:V=>P({...S,unit:V.target.value}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"priority",className:"dark:text-gray-200",children:"Priority"}),o.jsx("select",{id:"priority",value:S.priority,onChange:V=>P({...S,priority:V.target.value}),className:"mt-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:I.map(V=>o.jsx("option",{value:V,className:"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:V},V))})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:"deadline",className:"dark:text-gray-200",children:"Deadline"}),o.jsx(st,{id:"deadline",type:"date",value:S.deadline,onChange:V=>P({...S,deadline:V.target.value}),className:"mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(Ct,{htmlFor:"estimatedSavings",className:"dark:text-gray-200",children:"Estimated Savings (Optional)"}),o.jsx(st,{id:"estimatedSavings",placeholder:"e.g., $20/month or 100 lbs CO2/year",value:S.estimatedSavings,onChange:V=>P({...S,estimatedSavings:V.target.value}),className:"mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(Ct,{htmlFor:"tags",className:"dark:text-gray-200",children:"Tags (Optional, comma-separated)"}),o.jsx(st,{id:"tags",placeholder:"e.g., home, appliance, travel",value:S.tags,onChange:V=>P({...S,tags:V.target.value}),className:"mt-1"})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-3",children:[o.jsx(Q,{variant:"outline",onClick:()=>n(!1),disabled:b,children:"Cancel"}),o.jsxs(Q,{onClick:W,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",disabled:b,children:[b?o.jsx(oy,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(es,{className:"w-4 h-4 mr-2"}),"Create Goal"]})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.length>0?H.map(V=>o.jsx(re,{className:`shadow-lg hover:shadow-xl transition-shadow border-l-4 ${V.borderColor} ${V.bgColor} dark:bg-gray-800 dark:border-gray-700`,children:o.jsx(ce,{className:"p-6",children:i===V.id&&N?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[o.jsx(B1,{className:"w-5 h-5"})," Edit Goal"]}),o.jsxs("div",{className:"dark:text-gray-200",children:[o.jsx(Ct,{htmlFor:`edit-title-${V.id}`,children:"Title"}),o.jsx(st,{id:`edit-title-${V.id}`,value:N.title||"",onChange:X=>_({...N,title:X.target.value}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-description-${V.id}`,children:"Description (Optional)"}),o.jsx(Nm,{id:`edit-description-${V.id}`,value:N.description||"",onChange:X=>_({...N,description:X.target.value}),className:"mt-1"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-target-${V.id}`,children:"Target"}),o.jsx(st,{id:`edit-target-${V.id}`,type:"number",value:N.target||"",onChange:X=>_({...N,target:parseFloat(X.target.value)}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-current-${V.id}`,children:"Current"}),o.jsx(st,{id:`edit-current-${V.id}`,type:"number",value:N.current||"",onChange:X=>_({...N,current:parseFloat(X.target.value)}),className:"mt-1"})]})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-unit-${V.id}`,children:"Unit"}),o.jsx(st,{id:`edit-unit-${V.id}`,value:N.unit||"",onChange:X=>_({...N,unit:X.target.value}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-category-${V.id}`,children:"Category"}),o.jsx("select",{id:`edit-category-${V.id}`,value:N.category||"Energy",onChange:X=>_({...N,category:X.target.value}),className:"mt-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:C.map(X=>o.jsx("option",{value:X.name,className:"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:X.name},X.name))})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-priority-${V.id}`,children:"Priority"}),o.jsx("select",{id:`edit-priority-${V.id}`,value:N.priority||"Medium",onChange:X=>_({...N,priority:X.target.value}),className:"mt-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:I.map(X=>o.jsx("option",{value:X,className:"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200",children:X},X))})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-deadline-${V.id}`,children:"Deadline"}),o.jsx(st,{id:`edit-deadline-${V.id}`,type:"date",value:N.deadline||"",onChange:X=>_({...N,deadline:X.target.value}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-estimatedSavings-${V.id}`,children:"Estimated Savings (Optional)"}),o.jsx(st,{id:`edit-estimatedSavings-${V.id}`,placeholder:"e.g., $20/month",value:N.estimatedSavings||"",onChange:X=>_({...N,estimatedSavings:X.target.value}),className:"mt-1"})]}),o.jsxs("div",{children:[o.jsx(Ct,{htmlFor:`edit-tags-${V.id}`,children:"Tags (Optional, comma-separated)"}),o.jsx(st,{id:`edit-tags-${V.id}`,placeholder:"e.g., home, appliance",value:typeof N.tags=="string"?N.tags:Array.isArray(N.tags)?N.tags.join(", "):"",onChange:X=>_({...N,tags:X.target.value}),className:"mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(Ct,{htmlFor:`edit-notes-${V.id}`,children:"Notes (Optional)"}),o.jsx(Nm,{id:`edit-notes-${V.id}`,placeholder:"Any notes for this goal...",value:N.notes||"",onChange:X=>_({...N,notes:X.target.value}),className:"mt-1"})]}),o.jsxs("div",{className:"flex justify-end gap-3 md:col-span-2",children:[o.jsx(Q,{variant:"outline",onClick:B,disabled:b,children:"Cancel"}),o.jsxs(Q,{onClick:J,disabled:b,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[b?o.jsx(oy,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(B1,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[D.createElement(V.icon,{className:`w-8 h-8 ${V.color} dark:text-gray-300`}),o.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:V.title})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[oe(V.current,V.target,V.deadline),ve(V.priority)]})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:V.description}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 dark:text-gray-300",children:[o.jsx("span",{children:"Progress"}),o.jsxs("span",{children:[V.current," / ",V.target," ",V.unit," (",(V.current/V.target*100).toFixed(1),"%)"]})]}),o.jsx(Ht,{value:V.current/V.target*100,className:`h-2 ${q(V.current/V.target*100)} dark:bg-gray-700`})]}),o.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[o.jsx(os,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),"Deadline: ",V.deadline,new Date(V.deadline)<new Date&&!V.completed&&o.jsx(ne,{variant:"destructive",className:"ml-2 dark:bg-red-900 dark:text-red-400 dark:border-red-700",children:"Overdue"})]}),V.estimatedSavings&&o.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[o.jsx(Ta,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),"Est. Savings: ",V.estimatedSavings]}),V.tags&&V.tags.length>0&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[o.jsx(mh,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),"Tags: ",V.tags.map((X,ee)=>o.jsx(ne,{variant:"secondary",className:"text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border-gray-200 dark:border-gray-600",children:X},ee))]}),V.notes&&o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start gap-2",children:[o.jsx(BY,{className:"w-4 h-4 text-gray-500 dark:text-gray-400 mt-1"}),"Notes: ",o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:V.notes})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[o.jsx(qn,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),"Created: ",V.createdAt]}),o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-3 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ct,{htmlFor:`progress-input-${V.id}`,className:"sr-only dark:text-gray-200",children:"Update Progress"}),o.jsx(st,{id:`progress-input-${V.id}`,type:"number",value:V.current,onChange:X=>{const ee=parseFloat(X.target.value);isNaN(ee)||e(t.map(ue=>ue.id===V.id?{...ue,current:ee}:ue))},onBlur:X=>{const ee=parseFloat(X.target.value);isNaN(ee)?e(t.map(ue=>ue.id===V.id?{...ue,current:V.current}:ue)):U(V.id,ee)},className:"w-24"}),o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:V.unit}),o.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>U(V.id,V.current+1),disabled:V.current>=V.target||b,className:"flex items-center gap-1 text-green-600 border-green-200 hover:bg-green-50 dark:text-green-400 dark:border-green-700 dark:hover:bg-green-900",children:[o.jsx(es,{className:"w-3 h-3"}),"Add 1"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>F(V),disabled:b,className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-800 hover:bg-blue-50 dark:hover:bg-blue-900",children:[o.jsx(B1,{className:"w-3 h-3"})," Edit"]}),o.jsxs(Q,{variant:"destructive",size:"sm",onClick:()=>M(V.id),disabled:b,className:"flex items-center gap-1",children:[o.jsx(tg,{className:"w-3 h-3"})," Delete"]})]})]})]})})},V.id)):o.jsx("div",{className:"md:col-span-3 text-center py-16",children:o.jsxs("div",{className:"space-y-4 text-gray-600 dark:text-gray-400",children:[o.jsx(vr,{className:"mx-auto w-12 h-12 text-indigo-500 dark:text-indigo-400"}),o.jsx("h3",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-200",children:"No Goals Yet!"}),o.jsx("p",{className:"max-w-md mx-auto",children:"Start tracking your sustainability journey by adding your first optimization goal."}),o.jsxs(Q,{onClick:()=>n(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white flex items-center gap-2 shadow-lg",children:[o.jsx(es,{className:"w-4 h-4"}),"Add Your First Goal"]})]})})})]}):o.jsx(re,{className:"shadow-xl border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:o.jsx(ce,{className:"text-center py-16",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"mx-auto w-24 h-24 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900 dark:to-purple-900 rounded-full flex items-center justify-center",children:o.jsx(yr,{className:"w-12 h-12 text-indigo-500 dark:text-indigo-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-700 dark:text-gray-200",children:"Login Required"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Please log in to view and manage your optimization goals."})]})})})]})]})},_3e=()=>o.jsxs("footer",{className:"bg-green-950 text-gray-300 py-12 px-6",children:[o.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-10",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"EcoAnalyzer"}),o.jsx("p",{className:"text-sm leading-relaxed text-gray-300",children:"Empowering sustainability through AI. Track, analyze, and reduce your environmental impact effortlessly."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Quick Links"}),o.jsxs("ul",{className:"space-y-2 text-sm",children:[o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-green-400 transition",children:"Home"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-green-400 transition",children:"About"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-green-400 transition",children:"Contact"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-green-400 transition",children:"Privacy Policy"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Get in Touch"}),o.jsxs("p",{className:"text-sm text-gray-300",children:["Email: ",o.jsx("a",{href:"mailto:support@ecoanalyzer.com",className:"hover:text-green-400",children:"support@ecoanalyzer.com"})]}),o.jsx("p",{className:"text-sm text-gray-300",children:"Phone: +91 98765 43210"}),o.jsx("p",{className:"text-sm text-gray-300",children:"Address: Mumbai, India"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Stay Connected"}),o.jsxs("div",{className:"flex space-x-4 mb-4",children:[o.jsx("a",{href:"#",className:"text-gray-400 hover:text-green-400 transition","aria-label":"Facebook",children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M22 12a10 10 0 10-11.5 9.9v-7h-2v-3h2v-2.3c0-2 1.2-3.1 3-3.1.9 0 1.8.2 1.8.2v2h-1c-1 0-1.3.6-1.3 1.2V12h2.5l-.4 3h-2.1v7A10 10 0 0022 12z"})})}),o.jsx("a",{href:"#",className:"text-gray-400 hover:text-green-400 transition","aria-label":"Twitter",children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53A4.48 4.48 0 0016 3a4.48 4.48 0 00-4.47 4.48c0 .35.04.7.11 1.03A12.8 12.8 0 013 4.2a4.48 4.48 0 001.39 5.98A4.41 4.41 0 012 9.72v.05A4.48 4.48 0 004.48 14a4.52 4.52 0 01-2.02.08A4.48 4.48 0 006.29 17a9 9 0 01-5.56 1.92A9.12 9.12 0 010 18.88a12.8 12.8 0 006.95 2.03c8.34 0 12.9-6.91 12.9-12.9 0-.2 0-.41-.02-.61A9.2 9.2 0 0023 3z"})})}),o.jsx("a",{href:"#",className:"text-gray-400 hover:text-green-400 transition","aria-label":"Instagram",children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M7.75 2A5.76 5.76 0 002 7.75v8.5A5.76 5.76 0 007.75 22h8.5A5.76 5.76 0 0022 16.25v-8.5A5.76 5.76 0 0016.25 2h-8.5zm8.5 1.5A4.25 4.25 0 0120.5 7.75v8.5a4.25 4.25 0 01-4.25 4.25h-8.5A4.25 4.25 0 013.5 16.25v-8.5A4.25 4.25 0 017.75 3.5h8.5zM12 7a5 5 0 100 10 5 5 0 000-10zm0 1.5a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm4.75-2a1 1 0 100 2 1 1 0 000-2z"})})})]}),o.jsx("p",{className:"text-sm text-gray-300",children:"Follow us for updates & eco tips!"})]})]}),o.jsxs("div",{className:"mt-10 border-t border-green-900 pt-6 text-center text-sm text-gray-400",children:[" ",new Date().getFullYear()," EcoAnalyzer. All rights reserved."]})]}),iD={"/":"home","/goals":"goals","/product-lifecycle":"product-lifecycle","/product-comparison":"product-comparison","/marketplace":"marketplace","/community":"community","/education":"education","/rewards":"rewards","/ai-scanner":"ai-scanner","/chatbot":"chatbot","/carbon-tracker":"carbon-tracker","/ai-recommendations":"ai-recommendations","/ar-scanner":"ar-scanner","/smart-insights":"smart-insights","/recipe-finder":"recipe-finder","/transportation-planner":"transportation-planner","/environmental-alerts":"environmental-alerts","/esg-analyzer":"esg-analyzer","/investment-tracker":"investment-tracker","/checkout":"checkout","/notifications":"notifications","/profile":"profile"},sD=["/goals","/product-lifecycle","/product-comparison","/marketplace","/community","/education","/rewards","/ai-scanner","/chatbot","/carbon-tracker","/ai-recommendations","/ar-scanner","/smart-insights","/recipe-finder","/transportation-planner","/environmental-alerts","/esg-analyzer","/investment-tracker","/checkout","/notifications","/profile"],uu=({children:t})=>{const[e,r]=E.useState("home"),{cartItems:n,updateQuantity:i,removeFromCart:s,clearCart:a}=Ph(),{currentUser:l}=wr(),c=$E(),u=ig(),[h,d]=E.useState(!1);E.useEffect(()=>{if(sD.includes(u.pathname)&&!l){c("/");return}const v=iD[u.pathname];v&&v!==e&&r(v)},[u.pathname,e,l,c]);const f=v=>{var x;r(v);const y=(x=Object.entries(iD).find(([b,w])=>w===v))==null?void 0:x[0];y?c(y):console.warn(`No route defined for tabId: ${v}`)},m=()=>{d(!0)},g=()=>{d(!1)};return!l&&sD.includes(u.pathname)?o.jsx("div",{className:"text-center mt-20 text-red-600",children:"Please log in to access this page."}):o.jsxs(o.Fragment,{children:[o.jsx(Mv,{onNavigate:f,activeTab:e,cartItems:n,updateCartItem:i,removeFromCart:s,clearCart:a,toggleLoginForm:m}),o.jsx("main",{className:"pt-0 min-h-[calc(100vh-80px)]",children:t}),o.jsx(_3e,{}),o.jsx(kC,{isOpen:h,onClose:()=>d(!1),onSuccess:g})]})},S3e=new tZ,k3e=()=>o.jsx(nZ,{client:S3e,children:o.jsx(QZ,{children:o.jsx(Xce,{children:o.jsx(rV,{children:o.jsx(Fde,{children:o.jsx(Jce,{children:o.jsx(iV,{children:o.jsxs(IJ,{children:[o.jsx(CQ,{}),o.jsx(nX,{}),o.jsx(YZ,{children:o.jsxs(GZ,{children:[o.jsx(fo,{path:"/",element:o.jsx(uu,{children:o.jsx(v3e,{})})}),o.jsx(fo,{path:"/cart",element:o.jsx(uu,{children:o.jsx(b3e,{setActiveTab:function(t){throw new Error("Function not implemented.")}})})}),o.jsx(fo,{path:"/goals",element:o.jsx(uu,{children:o.jsx(w3e,{})})}),o.jsx(fo,{path:"/product-lifecycle",element:o.jsx(uu,{children:o.jsx(jH,{})})}),o.jsx(fo,{path:"/product-comparison",element:o.jsx(uu,{children:o.jsx(kH,{})})}),o.jsx(fo,{path:"/community",element:o.jsx(uu,{children:o.jsx(SH,{})})}),o.jsx(fo,{path:"*",element:o.jsx(x3e,{})})]})})]})})})})})})})});C$(document.getElementById("root")).render(o.jsx(k3e,{}));
